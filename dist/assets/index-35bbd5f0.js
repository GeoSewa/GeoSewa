function yR(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(s,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function n(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(c){if(c.ep)return;c.ep=!0;const d=n(c);fetch(c.href,d)}})();var vR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uE={exports:{}},Ag={},cE={exports:{}},Xt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yf=Symbol.for("react.element"),_R=Symbol.for("react.portal"),xR=Symbol.for("react.fragment"),wR=Symbol.for("react.strict_mode"),bR=Symbol.for("react.profiler"),SR=Symbol.for("react.provider"),CR=Symbol.for("react.context"),TR=Symbol.for("react.forward_ref"),ER=Symbol.for("react.suspense"),PR=Symbol.for("react.memo"),AR=Symbol.for("react.lazy"),CS=Symbol.iterator;function kR(e){return e===null||typeof e!="object"?null:(e=CS&&e[CS]||e["@@iterator"],typeof e=="function"?e:null)}var hE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dE=Object.assign,fE={};function qc(e,t,n){this.props=e,this.context=t,this.refs=fE,this.updater=n||hE}qc.prototype.isReactComponent={};qc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};qc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function pE(){}pE.prototype=qc.prototype;function w0(e,t,n){this.props=e,this.context=t,this.refs=fE,this.updater=n||hE}var b0=w0.prototype=new pE;b0.constructor=w0;dE(b0,qc.prototype);b0.isPureReactComponent=!0;var TS=Array.isArray,mE=Object.prototype.hasOwnProperty,S0={current:null},gE={key:!0,ref:!0,__self:!0,__source:!0};function yE(e,t,n){var s,c={},d=null,m=null;if(t!=null)for(s in t.ref!==void 0&&(m=t.ref),t.key!==void 0&&(d=""+t.key),t)mE.call(t,s)&&!gE.hasOwnProperty(s)&&(c[s]=t[s]);var l=arguments.length-2;if(l===1)c.children=n;else if(1<l){for(var w=Array(l),b=0;b<l;b++)w[b]=arguments[b+2];c.children=w}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)c[s]===void 0&&(c[s]=l[s]);return{$$typeof:yf,type:e,key:d,ref:m,props:c,_owner:S0.current}}function IR(e,t){return{$$typeof:yf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function C0(e){return typeof e=="object"&&e!==null&&e.$$typeof===yf}function MR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ES=/\/+/g;function Fv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?MR(""+e.key):t.toString(36)}function um(e,t,n,s,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var m=!1;if(e===null)m=!0;else switch(d){case"string":case"number":m=!0;break;case"object":switch(e.$$typeof){case yf:case _R:m=!0}}if(m)return m=e,c=c(m),e=s===""?"."+Fv(m,0):s,TS(c)?(n="",e!=null&&(n=e.replace(ES,"$&/")+"/"),um(c,t,n,"",function(b){return b})):c!=null&&(C0(c)&&(c=IR(c,n+(!c.key||m&&m.key===c.key?"":(""+c.key).replace(ES,"$&/")+"/")+e)),t.push(c)),1;if(m=0,s=s===""?".":s+":",TS(e))for(var l=0;l<e.length;l++){d=e[l];var w=s+Fv(d,l);m+=um(d,t,n,w,c)}else if(w=kR(e),typeof w=="function")for(e=w.call(e),l=0;!(d=e.next()).done;)d=d.value,w=s+Fv(d,l++),m+=um(d,t,n,w,c);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return m}function Op(e,t,n){if(e==null)return e;var s=[],c=0;return um(e,s,"","",function(d){return t.call(n,d,c++)}),s}function DR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var bi={current:null},cm={transition:null},zR={ReactCurrentDispatcher:bi,ReactCurrentBatchConfig:cm,ReactCurrentOwner:S0};Xt.Children={map:Op,forEach:function(e,t,n){Op(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Op(e,function(){t++}),t},toArray:function(e){return Op(e,function(t){return t})||[]},only:function(e){if(!C0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Xt.Component=qc;Xt.Fragment=xR;Xt.Profiler=bR;Xt.PureComponent=w0;Xt.StrictMode=wR;Xt.Suspense=ER;Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zR;Xt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=dE({},e.props),c=e.key,d=e.ref,m=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,m=S0.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(w in t)mE.call(t,w)&&!gE.hasOwnProperty(w)&&(s[w]=t[w]===void 0&&l!==void 0?l[w]:t[w])}var w=arguments.length-2;if(w===1)s.children=n;else if(1<w){l=Array(w);for(var b=0;b<w;b++)l[b]=arguments[b+2];s.children=l}return{$$typeof:yf,type:e.type,key:c,ref:d,props:s,_owner:m}};Xt.createContext=function(e){return e={$$typeof:CR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:SR,_context:e},e.Consumer=e};Xt.createElement=yE;Xt.createFactory=function(e){var t=yE.bind(null,e);return t.type=e,t};Xt.createRef=function(){return{current:null}};Xt.forwardRef=function(e){return{$$typeof:TR,render:e}};Xt.isValidElement=C0;Xt.lazy=function(e){return{$$typeof:AR,_payload:{_status:-1,_result:e},_init:DR}};Xt.memo=function(e,t){return{$$typeof:PR,type:e,compare:t===void 0?null:t}};Xt.startTransition=function(e){var t=cm.transition;cm.transition={};try{e()}finally{cm.transition=t}};Xt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Xt.useCallback=function(e,t){return bi.current.useCallback(e,t)};Xt.useContext=function(e){return bi.current.useContext(e)};Xt.useDebugValue=function(){};Xt.useDeferredValue=function(e){return bi.current.useDeferredValue(e)};Xt.useEffect=function(e,t){return bi.current.useEffect(e,t)};Xt.useId=function(){return bi.current.useId()};Xt.useImperativeHandle=function(e,t,n){return bi.current.useImperativeHandle(e,t,n)};Xt.useInsertionEffect=function(e,t){return bi.current.useInsertionEffect(e,t)};Xt.useLayoutEffect=function(e,t){return bi.current.useLayoutEffect(e,t)};Xt.useMemo=function(e,t){return bi.current.useMemo(e,t)};Xt.useReducer=function(e,t,n){return bi.current.useReducer(e,t,n)};Xt.useRef=function(e){return bi.current.useRef(e)};Xt.useState=function(e){return bi.current.useState(e)};Xt.useSyncExternalStore=function(e,t,n){return bi.current.useSyncExternalStore(e,t,n)};Xt.useTransition=function(){return bi.current.useTransition()};Xt.version="18.2.0";cE.exports=Xt;var ie=cE.exports;const dt=lE(ie),vE=yR({__proto__:null,default:dt},[ie]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RR=ie,LR=Symbol.for("react.element"),OR=Symbol.for("react.fragment"),FR=Object.prototype.hasOwnProperty,NR=RR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BR={key:!0,ref:!0,__self:!0,__source:!0};function _E(e,t,n){var s,c={},d=null,m=null;n!==void 0&&(d=""+n),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(m=t.ref);for(s in t)FR.call(t,s)&&!BR.hasOwnProperty(s)&&(c[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)c[s]===void 0&&(c[s]=t[s]);return{$$typeof:LR,type:e,key:d,ref:m,props:c,_owner:NR.current}}Ag.Fragment=OR;Ag.jsx=_E;Ag.jsxs=_E;uE.exports=Ag;var T0=uE.exports;const Qo=T0.Fragment,de=T0.jsx,mt=T0.jsxs;var U_={},xE={exports:{}},ns={},wE={exports:{}},bE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($e,ut){var Et=$e.length;$e.push(ut);e:for(;0<Et;){var Wt=Et-1>>>1,Gt=$e[Wt];if(0<c(Gt,ut))$e[Wt]=ut,$e[Et]=Gt,Et=Wt;else break e}}function n($e){return $e.length===0?null:$e[0]}function s($e){if($e.length===0)return null;var ut=$e[0],Et=$e.pop();if(Et!==ut){$e[0]=Et;e:for(var Wt=0,Gt=$e.length,Mt=Gt>>>1;Wt<Mt;){var gn=2*(Wt+1)-1,si=$e[gn],lr=gn+1,$r=$e[lr];if(0>c(si,Et))lr<Gt&&0>c($r,si)?($e[Wt]=$r,$e[lr]=Et,Wt=lr):($e[Wt]=si,$e[gn]=Et,Wt=gn);else if(lr<Gt&&0>c($r,Et))$e[Wt]=$r,$e[lr]=Et,Wt=lr;else break e}}return ut}function c($e,ut){var Et=$e.sortIndex-ut.sortIndex;return Et!==0?Et:$e.id-ut.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var m=Date,l=m.now();e.unstable_now=function(){return m.now()-l}}var w=[],b=[],A=1,k=null,D=3,B=!1,q=!1,Z=!1,K=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H($e){for(var ut=n(b);ut!==null;){if(ut.callback===null)s(b);else if(ut.startTime<=$e)s(b),ut.sortIndex=ut.expirationTime,t(w,ut);else break;ut=n(b)}}function te($e){if(Z=!1,H($e),!q)if(n(w)!==null)q=!0,zt(me);else{var ut=n(b);ut!==null&&bt(te,ut.startTime-$e)}}function me($e,ut){q=!1,Z&&(Z=!1,N(Ce),Ce=-1),B=!0;var Et=D;try{for(H(ut),k=n(w);k!==null&&(!(k.expirationTime>ut)||$e&&!Tt());){var Wt=k.callback;if(typeof Wt=="function"){k.callback=null,D=k.priorityLevel;var Gt=Wt(k.expirationTime<=ut);ut=e.unstable_now(),typeof Gt=="function"?k.callback=Gt:k===n(w)&&s(w),H(ut)}else s(w);k=n(w)}if(k!==null)var Mt=!0;else{var gn=n(b);gn!==null&&bt(te,gn.startTime-ut),Mt=!1}return Mt}finally{k=null,D=Et,B=!1}}var Se=!1,Ie=null,Ce=-1,Ge=5,Le=-1;function Tt(){return!(e.unstable_now()-Le<Ge)}function Ue(){if(Ie!==null){var $e=e.unstable_now();Le=$e;var ut=!0;try{ut=Ie(!0,$e)}finally{ut?gt():(Se=!1,Ie=null)}}else Se=!1}var gt;if(typeof F=="function")gt=function(){F(Ue)};else if(typeof MessageChannel<"u"){var _t=new MessageChannel,Lt=_t.port2;_t.port1.onmessage=Ue,gt=function(){Lt.postMessage(null)}}else gt=function(){K(Ue,0)};function zt($e){Ie=$e,Se||(Se=!0,gt())}function bt($e,ut){Ce=K(function(){$e(e.unstable_now())},ut)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($e){$e.callback=null},e.unstable_continueExecution=function(){q||B||(q=!0,zt(me))},e.unstable_forceFrameRate=function($e){0>$e||125<$e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ge=0<$e?Math.floor(1e3/$e):5},e.unstable_getCurrentPriorityLevel=function(){return D},e.unstable_getFirstCallbackNode=function(){return n(w)},e.unstable_next=function($e){switch(D){case 1:case 2:case 3:var ut=3;break;default:ut=D}var Et=D;D=ut;try{return $e()}finally{D=Et}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($e,ut){switch($e){case 1:case 2:case 3:case 4:case 5:break;default:$e=3}var Et=D;D=$e;try{return ut()}finally{D=Et}},e.unstable_scheduleCallback=function($e,ut,Et){var Wt=e.unstable_now();switch(typeof Et=="object"&&Et!==null?(Et=Et.delay,Et=typeof Et=="number"&&0<Et?Wt+Et:Wt):Et=Wt,$e){case 1:var Gt=-1;break;case 2:Gt=250;break;case 5:Gt=1073741823;break;case 4:Gt=1e4;break;default:Gt=5e3}return Gt=Et+Gt,$e={id:A++,callback:ut,priorityLevel:$e,startTime:Et,expirationTime:Gt,sortIndex:-1},Et>Wt?($e.sortIndex=Et,t(b,$e),n(w)===null&&$e===n(b)&&(Z?(N(Ce),Ce=-1):Z=!0,bt(te,Et-Wt))):($e.sortIndex=Gt,t(w,$e),q||B||(q=!0,zt(me))),$e},e.unstable_shouldYield=Tt,e.unstable_wrapCallback=function($e){var ut=D;return function(){var Et=D;D=ut;try{return $e.apply(this,arguments)}finally{D=Et}}}})(bE);wE.exports=bE;var VR=wE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE=ie,Ji=VR;function We(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CE=new Set,jd={};function hu(e,t){Ic(e,t),Ic(e+"Capture",t)}function Ic(e,t){for(jd[e]=t,e=0;e<t.length;e++)CE.add(t[e])}var Jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),q_=Object.prototype.hasOwnProperty,$R=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,PS={},AS={};function jR(e){return q_.call(AS,e)?!0:q_.call(PS,e)?!1:$R.test(e)?AS[e]=!0:(PS[e]=!0,!1)}function UR(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qR(e,t,n,s){if(t===null||typeof t>"u"||UR(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Si(e,t,n,s,c,d,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=m}var Vr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Vr[e]=new Si(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Vr[t]=new Si(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Vr[e]=new Si(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Vr[e]=new Si(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Vr[e]=new Si(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Vr[e]=new Si(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Vr[e]=new Si(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Vr[e]=new Si(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Vr[e]=new Si(e,5,!1,e.toLowerCase(),null,!1,!1)});var E0=/[\-:]([a-z])/g;function P0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(E0,P0);Vr[t]=new Si(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(E0,P0);Vr[t]=new Si(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(E0,P0);Vr[t]=new Si(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Vr[e]=new Si(e,1,!1,e.toLowerCase(),null,!1,!1)});Vr.xlinkHref=new Si("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Vr[e]=new Si(e,1,!1,e.toLowerCase(),null,!0,!0)});function A0(e,t,n,s){var c=Vr.hasOwnProperty(t)?Vr[t]:null;(c!==null?c.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(qR(t,n,c,s)&&(n=null),s||c===null?jR(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):c.mustUseProperty?e[c.propertyName]=n===null?c.type===3?!1:"":n:(t=c.attributeName,s=c.attributeNamespace,n===null?e.removeAttribute(t):(c=c.type,n=c===3||c===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var ia=SE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fp=Symbol.for("react.element"),rc=Symbol.for("react.portal"),ic=Symbol.for("react.fragment"),k0=Symbol.for("react.strict_mode"),G_=Symbol.for("react.profiler"),TE=Symbol.for("react.provider"),EE=Symbol.for("react.context"),I0=Symbol.for("react.forward_ref"),Z_=Symbol.for("react.suspense"),W_=Symbol.for("react.suspense_list"),M0=Symbol.for("react.memo"),za=Symbol.for("react.lazy"),PE=Symbol.for("react.offscreen"),kS=Symbol.iterator;function sd(e){return e===null||typeof e!="object"?null:(e=kS&&e[kS]||e["@@iterator"],typeof e=="function"?e:null)}var Zn=Object.assign,Nv;function vd(e){if(Nv===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Nv=t&&t[1]||""}return`
`+Nv+e}var Bv=!1;function Vv(e,t){if(!e||Bv)return"";Bv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(b){var s=b}Reflect.construct(e,[],t)}else{try{t.call()}catch(b){s=b}e.call(t.prototype)}else{try{throw Error()}catch(b){s=b}e()}}catch(b){if(b&&s&&typeof b.stack=="string"){for(var c=b.stack.split(`
`),d=s.stack.split(`
`),m=c.length-1,l=d.length-1;1<=m&&0<=l&&c[m]!==d[l];)l--;for(;1<=m&&0<=l;m--,l--)if(c[m]!==d[l]){if(m!==1||l!==1)do if(m--,l--,0>l||c[m]!==d[l]){var w=`
`+c[m].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=m&&0<=l);break}}}finally{Bv=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?vd(e):""}function GR(e){switch(e.tag){case 5:return vd(e.type);case 16:return vd("Lazy");case 13:return vd("Suspense");case 19:return vd("SuspenseList");case 0:case 2:case 15:return e=Vv(e.type,!1),e;case 11:return e=Vv(e.type.render,!1),e;case 1:return e=Vv(e.type,!0),e;default:return""}}function H_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ic:return"Fragment";case rc:return"Portal";case G_:return"Profiler";case k0:return"StrictMode";case Z_:return"Suspense";case W_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case EE:return(e.displayName||"Context")+".Consumer";case TE:return(e._context.displayName||"Context")+".Provider";case I0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M0:return t=e.displayName||null,t!==null?t:H_(e.type)||"Memo";case za:t=e._payload,e=e._init;try{return H_(e(t))}catch{}}return null}function ZR(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H_(t);case 8:return t===k0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function nl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function AE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function WR(e){var t=AE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,d=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(m){s=""+m,d.call(this,m)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(m){s=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Np(e){e._valueTracker||(e._valueTracker=WR(e))}function kE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=AE(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function zm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function K_(e,t){var n=t.checked;return Zn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function IS(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=nl(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function IE(e,t){t=t.checked,t!=null&&A0(e,"checked",t,!1)}function X_(e,t){IE(e,t);var n=nl(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Y_(e,t.type,n):t.hasOwnProperty("defaultValue")&&Y_(e,t.type,nl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function MS(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Y_(e,t,n){(t!=="number"||zm(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var _d=Array.isArray;function wc(e,t,n,s){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&s&&(e[n].defaultSelected=!0)}else{for(n=""+nl(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Q_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(We(91));return Zn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function DS(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(We(92));if(_d(n)){if(1<n.length)throw Error(We(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:nl(n)}}function ME(e,t){var n=nl(t.value),s=nl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function zS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function DE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function J_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?DE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bp,zE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,c){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bp=Bp||document.createElement("div"),Bp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ud(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Pd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HR=["Webkit","ms","Moz","O"];Object.keys(Pd).forEach(function(e){HR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pd[t]=Pd[e]})});function RE(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Pd.hasOwnProperty(e)&&Pd[e]?(""+t).trim():t+"px"}function LE(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,c=RE(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,c):e[n]=c}}var KR=Zn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ex(e,t){if(t){if(KR[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(We(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(We(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(We(61))}if(t.style!=null&&typeof t.style!="object")throw Error(We(62))}}function tx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nx=null;function D0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rx=null,bc=null,Sc=null;function RS(e){if(e=xf(e)){if(typeof rx!="function")throw Error(We(280));var t=e.stateNode;t&&(t=zg(t),rx(e.stateNode,e.type,t))}}function OE(e){bc?Sc?Sc.push(e):Sc=[e]:bc=e}function FE(){if(bc){var e=bc,t=Sc;if(Sc=bc=null,RS(e),t)for(e=0;e<t.length;e++)RS(t[e])}}function NE(e,t){return e(t)}function BE(){}var $v=!1;function VE(e,t,n){if($v)return e(t,n);$v=!0;try{return NE(e,t,n)}finally{$v=!1,(bc!==null||Sc!==null)&&(BE(),FE())}}function qd(e,t){var n=e.stateNode;if(n===null)return null;var s=zg(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(We(231,t,typeof n));return n}var ix=!1;if(Jo)try{var od={};Object.defineProperty(od,"passive",{get:function(){ix=!0}}),window.addEventListener("test",od,od),window.removeEventListener("test",od,od)}catch{ix=!1}function XR(e,t,n,s,c,d,m,l,w){var b=Array.prototype.slice.call(arguments,3);try{t.apply(n,b)}catch(A){this.onError(A)}}var Ad=!1,Rm=null,Lm=!1,sx=null,YR={onError:function(e){Ad=!0,Rm=e}};function QR(e,t,n,s,c,d,m,l,w){Ad=!1,Rm=null,XR.apply(YR,arguments)}function JR(e,t,n,s,c,d,m,l,w){if(QR.apply(this,arguments),Ad){if(Ad){var b=Rm;Ad=!1,Rm=null}else throw Error(We(198));Lm||(Lm=!0,sx=b)}}function du(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function $E(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function LS(e){if(du(e)!==e)throw Error(We(188))}function eL(e){var t=e.alternate;if(!t){if(t=du(e),t===null)throw Error(We(188));return t!==e?null:e}for(var n=e,s=t;;){var c=n.return;if(c===null)break;var d=c.alternate;if(d===null){if(s=c.return,s!==null){n=s;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===n)return LS(c),e;if(d===s)return LS(c),t;d=d.sibling}throw Error(We(188))}if(n.return!==s.return)n=c,s=d;else{for(var m=!1,l=c.child;l;){if(l===n){m=!0,n=c,s=d;break}if(l===s){m=!0,s=c,n=d;break}l=l.sibling}if(!m){for(l=d.child;l;){if(l===n){m=!0,n=d,s=c;break}if(l===s){m=!0,s=d,n=c;break}l=l.sibling}if(!m)throw Error(We(189))}}if(n.alternate!==s)throw Error(We(190))}if(n.tag!==3)throw Error(We(188));return n.stateNode.current===n?e:t}function jE(e){return e=eL(e),e!==null?UE(e):null}function UE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=UE(e);if(t!==null)return t;e=e.sibling}return null}var qE=Ji.unstable_scheduleCallback,OS=Ji.unstable_cancelCallback,tL=Ji.unstable_shouldYield,nL=Ji.unstable_requestPaint,ar=Ji.unstable_now,rL=Ji.unstable_getCurrentPriorityLevel,z0=Ji.unstable_ImmediatePriority,GE=Ji.unstable_UserBlockingPriority,Om=Ji.unstable_NormalPriority,iL=Ji.unstable_LowPriority,ZE=Ji.unstable_IdlePriority,kg=null,mo=null;function sL(e){if(mo&&typeof mo.onCommitFiberRoot=="function")try{mo.onCommitFiberRoot(kg,e,void 0,(e.current.flags&128)===128)}catch{}}var Ws=Math.clz32?Math.clz32:lL,oL=Math.log,aL=Math.LN2;function lL(e){return e>>>=0,e===0?32:31-(oL(e)/aL|0)|0}var Vp=64,$p=4194304;function xd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Fm(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,c=e.suspendedLanes,d=e.pingedLanes,m=n&268435455;if(m!==0){var l=m&~c;l!==0?s=xd(l):(d&=m,d!==0&&(s=xd(d)))}else m=n&~c,m!==0?s=xd(m):d!==0&&(s=xd(d));if(s===0)return 0;if(t!==0&&t!==s&&!(t&c)&&(c=s&-s,d=t&-t,c>=d||c===16&&(d&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Ws(t),c=1<<n,s|=e[n],t&=~c;return s}function uL(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cL(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var m=31-Ws(d),l=1<<m,w=c[m];w===-1?(!(l&n)||l&s)&&(c[m]=uL(l,t)):w<=t&&(e.expiredLanes|=l),d&=~l}}function ox(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function WE(){var e=Vp;return Vp<<=1,!(Vp&4194240)&&(Vp=64),e}function jv(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vf(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ws(t),e[t]=n}function hL(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var c=31-Ws(n),d=1<<c;t[c]=0,s[c]=-1,e[c]=-1,n&=~d}}function R0(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Ws(n),c=1<<s;c&t|e[s]&t&&(e[s]|=t),n&=~c}}var un=0;function HE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var KE,L0,XE,YE,QE,ax=!1,jp=[],Ga=null,Za=null,Wa=null,Gd=new Map,Zd=new Map,Oa=[],dL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function FS(e,t){switch(e){case"focusin":case"focusout":Ga=null;break;case"dragenter":case"dragleave":Za=null;break;case"mouseover":case"mouseout":Wa=null;break;case"pointerover":case"pointerout":Gd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zd.delete(t.pointerId)}}function ad(e,t,n,s,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:d,targetContainers:[c]},t!==null&&(t=xf(t),t!==null&&L0(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function fL(e,t,n,s,c){switch(t){case"focusin":return Ga=ad(Ga,e,t,n,s,c),!0;case"dragenter":return Za=ad(Za,e,t,n,s,c),!0;case"mouseover":return Wa=ad(Wa,e,t,n,s,c),!0;case"pointerover":var d=c.pointerId;return Gd.set(d,ad(Gd.get(d)||null,e,t,n,s,c)),!0;case"gotpointercapture":return d=c.pointerId,Zd.set(d,ad(Zd.get(d)||null,e,t,n,s,c)),!0}return!1}function JE(e){var t=Zl(e.target);if(t!==null){var n=du(t);if(n!==null){if(t=n.tag,t===13){if(t=$E(n),t!==null){e.blockedOn=t,QE(e.priority,function(){XE(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=lx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);nx=s,n.target.dispatchEvent(s),nx=null}else return t=xf(n),t!==null&&L0(t),e.blockedOn=n,!1;t.shift()}return!0}function NS(e,t,n){hm(e)&&n.delete(t)}function pL(){ax=!1,Ga!==null&&hm(Ga)&&(Ga=null),Za!==null&&hm(Za)&&(Za=null),Wa!==null&&hm(Wa)&&(Wa=null),Gd.forEach(NS),Zd.forEach(NS)}function ld(e,t){e.blockedOn===t&&(e.blockedOn=null,ax||(ax=!0,Ji.unstable_scheduleCallback(Ji.unstable_NormalPriority,pL)))}function Wd(e){function t(c){return ld(c,e)}if(0<jp.length){ld(jp[0],e);for(var n=1;n<jp.length;n++){var s=jp[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Ga!==null&&ld(Ga,e),Za!==null&&ld(Za,e),Wa!==null&&ld(Wa,e),Gd.forEach(t),Zd.forEach(t),n=0;n<Oa.length;n++)s=Oa[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Oa.length&&(n=Oa[0],n.blockedOn===null);)JE(n),n.blockedOn===null&&Oa.shift()}var Cc=ia.ReactCurrentBatchConfig,Nm=!0;function mL(e,t,n,s){var c=un,d=Cc.transition;Cc.transition=null;try{un=1,O0(e,t,n,s)}finally{un=c,Cc.transition=d}}function gL(e,t,n,s){var c=un,d=Cc.transition;Cc.transition=null;try{un=4,O0(e,t,n,s)}finally{un=c,Cc.transition=d}}function O0(e,t,n,s){if(Nm){var c=lx(e,t,n,s);if(c===null)Qv(e,t,s,Bm,n),FS(e,s);else if(fL(c,e,t,n,s))s.stopPropagation();else if(FS(e,s),t&4&&-1<dL.indexOf(e)){for(;c!==null;){var d=xf(c);if(d!==null&&KE(d),d=lx(e,t,n,s),d===null&&Qv(e,t,s,Bm,n),d===c)break;c=d}c!==null&&s.stopPropagation()}else Qv(e,t,s,null,n)}}var Bm=null;function lx(e,t,n,s){if(Bm=null,e=D0(s),e=Zl(e),e!==null)if(t=du(e),t===null)e=null;else if(n=t.tag,n===13){if(e=$E(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bm=e,null}function eP(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rL()){case z0:return 1;case GE:return 4;case Om:case iL:return 16;case ZE:return 536870912;default:return 16}default:return 16}}var Ba=null,F0=null,dm=null;function tP(){if(dm)return dm;var e,t=F0,n=t.length,s,c="value"in Ba?Ba.value:Ba.textContent,d=c.length;for(e=0;e<n&&t[e]===c[e];e++);var m=n-e;for(s=1;s<=m&&t[n-s]===c[d-s];s++);return dm=c.slice(e,1<s?1-s:void 0)}function fm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Up(){return!0}function BS(){return!1}function rs(e){function t(n,s,c,d,m){this._reactName=n,this._targetInst=c,this.type=s,this.nativeEvent=d,this.target=m,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(d):d[l]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Up:BS,this.isPropagationStopped=BS,this}return Zn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Up)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Up)},persist:function(){},isPersistent:Up}),t}var Gc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},N0=rs(Gc),_f=Zn({},Gc,{view:0,detail:0}),yL=rs(_f),Uv,qv,ud,Ig=Zn({},_f,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:B0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ud&&(ud&&e.type==="mousemove"?(Uv=e.screenX-ud.screenX,qv=e.screenY-ud.screenY):qv=Uv=0,ud=e),Uv)},movementY:function(e){return"movementY"in e?e.movementY:qv}}),VS=rs(Ig),vL=Zn({},Ig,{dataTransfer:0}),_L=rs(vL),xL=Zn({},_f,{relatedTarget:0}),Gv=rs(xL),wL=Zn({},Gc,{animationName:0,elapsedTime:0,pseudoElement:0}),bL=rs(wL),SL=Zn({},Gc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),CL=rs(SL),TL=Zn({},Gc,{data:0}),$S=rs(TL),EL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=AL[e])?!!t[e]:!1}function B0(){return kL}var IL=Zn({},_f,{key:function(e){if(e.key){var t=EL[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=fm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?PL[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:B0,charCode:function(e){return e.type==="keypress"?fm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ML=rs(IL),DL=Zn({},Ig,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jS=rs(DL),zL=Zn({},_f,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:B0}),RL=rs(zL),LL=Zn({},Gc,{propertyName:0,elapsedTime:0,pseudoElement:0}),OL=rs(LL),FL=Zn({},Ig,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),NL=rs(FL),BL=[9,13,27,32],V0=Jo&&"CompositionEvent"in window,kd=null;Jo&&"documentMode"in document&&(kd=document.documentMode);var VL=Jo&&"TextEvent"in window&&!kd,nP=Jo&&(!V0||kd&&8<kd&&11>=kd),US=String.fromCharCode(32),qS=!1;function rP(e,t){switch(e){case"keyup":return BL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iP(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var sc=!1;function $L(e,t){switch(e){case"compositionend":return iP(t);case"keypress":return t.which!==32?null:(qS=!0,US);case"textInput":return e=t.data,e===US&&qS?null:e;default:return null}}function jL(e,t){if(sc)return e==="compositionend"||!V0&&rP(e,t)?(e=tP(),dm=F0=Ba=null,sc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nP&&t.locale!=="ko"?null:t.data;default:return null}}var UL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function GS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!UL[e.type]:t==="textarea"}function sP(e,t,n,s){OE(s),t=Vm(t,"onChange"),0<t.length&&(n=new N0("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Id=null,Hd=null;function qL(e){gP(e,0)}function Mg(e){var t=lc(e);if(kE(t))return e}function GL(e,t){if(e==="change")return t}var oP=!1;if(Jo){var Zv;if(Jo){var Wv="oninput"in document;if(!Wv){var ZS=document.createElement("div");ZS.setAttribute("oninput","return;"),Wv=typeof ZS.oninput=="function"}Zv=Wv}else Zv=!1;oP=Zv&&(!document.documentMode||9<document.documentMode)}function WS(){Id&&(Id.detachEvent("onpropertychange",aP),Hd=Id=null)}function aP(e){if(e.propertyName==="value"&&Mg(Hd)){var t=[];sP(t,Hd,e,D0(e)),VE(qL,t)}}function ZL(e,t,n){e==="focusin"?(WS(),Id=t,Hd=n,Id.attachEvent("onpropertychange",aP)):e==="focusout"&&WS()}function WL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Mg(Hd)}function HL(e,t){if(e==="click")return Mg(t)}function KL(e,t){if(e==="input"||e==="change")return Mg(t)}function XL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ks=typeof Object.is=="function"?Object.is:XL;function Kd(e,t){if(Ks(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var c=n[s];if(!q_.call(t,c)||!Ks(e[c],t[c]))return!1}return!0}function HS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function KS(e,t){var n=HS(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=HS(n)}}function lP(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lP(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function uP(){for(var e=window,t=zm();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=zm(e.document)}return t}function $0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function YL(e){var t=uP(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&lP(n.ownerDocument.documentElement,n)){if(s!==null&&$0(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=n.textContent.length,d=Math.min(s.start,c);s=s.end===void 0?d:Math.min(s.end,c),!e.extend&&d>s&&(c=s,s=d,d=c),c=KS(n,d);var m=KS(n,s);c&&m&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),d>s?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var QL=Jo&&"documentMode"in document&&11>=document.documentMode,oc=null,ux=null,Md=null,cx=!1;function XS(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cx||oc==null||oc!==zm(s)||(s=oc,"selectionStart"in s&&$0(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Md&&Kd(Md,s)||(Md=s,s=Vm(ux,"onSelect"),0<s.length&&(t=new N0("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=oc)))}function qp(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ac={animationend:qp("Animation","AnimationEnd"),animationiteration:qp("Animation","AnimationIteration"),animationstart:qp("Animation","AnimationStart"),transitionend:qp("Transition","TransitionEnd")},Hv={},cP={};Jo&&(cP=document.createElement("div").style,"AnimationEvent"in window||(delete ac.animationend.animation,delete ac.animationiteration.animation,delete ac.animationstart.animation),"TransitionEvent"in window||delete ac.transitionend.transition);function Dg(e){if(Hv[e])return Hv[e];if(!ac[e])return e;var t=ac[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in cP)return Hv[e]=t[n];return e}var hP=Dg("animationend"),dP=Dg("animationiteration"),fP=Dg("animationstart"),pP=Dg("transitionend"),mP=new Map,YS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cl(e,t){mP.set(e,t),hu(t,[e])}for(var Kv=0;Kv<YS.length;Kv++){var Xv=YS[Kv],JL=Xv.toLowerCase(),e3=Xv[0].toUpperCase()+Xv.slice(1);cl(JL,"on"+e3)}cl(hP,"onAnimationEnd");cl(dP,"onAnimationIteration");cl(fP,"onAnimationStart");cl("dblclick","onDoubleClick");cl("focusin","onFocus");cl("focusout","onBlur");cl(pP,"onTransitionEnd");Ic("onMouseEnter",["mouseout","mouseover"]);Ic("onMouseLeave",["mouseout","mouseover"]);Ic("onPointerEnter",["pointerout","pointerover"]);Ic("onPointerLeave",["pointerout","pointerover"]);hu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hu("onBeforeInput",["compositionend","keypress","textInput","paste"]);hu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t3=new Set("cancel close invalid load scroll toggle".split(" ").concat(wd));function QS(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,JR(s,t,void 0,e),e.currentTarget=null}function gP(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],c=s.event;s=s.listeners;e:{var d=void 0;if(t)for(var m=s.length-1;0<=m;m--){var l=s[m],w=l.instance,b=l.currentTarget;if(l=l.listener,w!==d&&c.isPropagationStopped())break e;QS(c,l,b),d=w}else for(m=0;m<s.length;m++){if(l=s[m],w=l.instance,b=l.currentTarget,l=l.listener,w!==d&&c.isPropagationStopped())break e;QS(c,l,b),d=w}}}if(Lm)throw e=sx,Lm=!1,sx=null,e}function Mn(e,t){var n=t[mx];n===void 0&&(n=t[mx]=new Set);var s=e+"__bubble";n.has(s)||(yP(t,e,2,!1),n.add(s))}function Yv(e,t,n){var s=0;t&&(s|=4),yP(n,e,s,t)}var Gp="_reactListening"+Math.random().toString(36).slice(2);function Xd(e){if(!e[Gp]){e[Gp]=!0,CE.forEach(function(n){n!=="selectionchange"&&(t3.has(n)||Yv(n,!1,e),Yv(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gp]||(t[Gp]=!0,Yv("selectionchange",!1,t))}}function yP(e,t,n,s){switch(eP(t)){case 1:var c=mL;break;case 4:c=gL;break;default:c=O0}n=c.bind(null,t,n,e),c=void 0,!ix||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function Qv(e,t,n,s,c){var d=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var m=s.tag;if(m===3||m===4){var l=s.stateNode.containerInfo;if(l===c||l.nodeType===8&&l.parentNode===c)break;if(m===4)for(m=s.return;m!==null;){var w=m.tag;if((w===3||w===4)&&(w=m.stateNode.containerInfo,w===c||w.nodeType===8&&w.parentNode===c))return;m=m.return}for(;l!==null;){if(m=Zl(l),m===null)return;if(w=m.tag,w===5||w===6){s=d=m;continue e}l=l.parentNode}}s=s.return}VE(function(){var b=d,A=D0(n),k=[];e:{var D=mP.get(e);if(D!==void 0){var B=N0,q=e;switch(e){case"keypress":if(fm(n)===0)break e;case"keydown":case"keyup":B=ML;break;case"focusin":q="focus",B=Gv;break;case"focusout":q="blur",B=Gv;break;case"beforeblur":case"afterblur":B=Gv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=VS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=_L;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=RL;break;case hP:case dP:case fP:B=bL;break;case pP:B=OL;break;case"scroll":B=yL;break;case"wheel":B=NL;break;case"copy":case"cut":case"paste":B=CL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=jS}var Z=(t&4)!==0,K=!Z&&e==="scroll",N=Z?D!==null?D+"Capture":null:D;Z=[];for(var F=b,H;F!==null;){H=F;var te=H.stateNode;if(H.tag===5&&te!==null&&(H=te,N!==null&&(te=qd(F,N),te!=null&&Z.push(Yd(F,te,H)))),K)break;F=F.return}0<Z.length&&(D=new B(D,q,null,n,A),k.push({event:D,listeners:Z}))}}if(!(t&7)){e:{if(D=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",D&&n!==nx&&(q=n.relatedTarget||n.fromElement)&&(Zl(q)||q[ea]))break e;if((B||D)&&(D=A.window===A?A:(D=A.ownerDocument)?D.defaultView||D.parentWindow:window,B?(q=n.relatedTarget||n.toElement,B=b,q=q?Zl(q):null,q!==null&&(K=du(q),q!==K||q.tag!==5&&q.tag!==6)&&(q=null)):(B=null,q=b),B!==q)){if(Z=VS,te="onMouseLeave",N="onMouseEnter",F="mouse",(e==="pointerout"||e==="pointerover")&&(Z=jS,te="onPointerLeave",N="onPointerEnter",F="pointer"),K=B==null?D:lc(B),H=q==null?D:lc(q),D=new Z(te,F+"leave",B,n,A),D.target=K,D.relatedTarget=H,te=null,Zl(A)===b&&(Z=new Z(N,F+"enter",q,n,A),Z.target=H,Z.relatedTarget=K,te=Z),K=te,B&&q)t:{for(Z=B,N=q,F=0,H=Z;H;H=Ju(H))F++;for(H=0,te=N;te;te=Ju(te))H++;for(;0<F-H;)Z=Ju(Z),F--;for(;0<H-F;)N=Ju(N),H--;for(;F--;){if(Z===N||N!==null&&Z===N.alternate)break t;Z=Ju(Z),N=Ju(N)}Z=null}else Z=null;B!==null&&JS(k,D,B,Z,!1),q!==null&&K!==null&&JS(k,K,q,Z,!0)}}e:{if(D=b?lc(b):window,B=D.nodeName&&D.nodeName.toLowerCase(),B==="select"||B==="input"&&D.type==="file")var me=GL;else if(GS(D))if(oP)me=KL;else{me=WL;var Se=ZL}else(B=D.nodeName)&&B.toLowerCase()==="input"&&(D.type==="checkbox"||D.type==="radio")&&(me=HL);if(me&&(me=me(e,b))){sP(k,me,n,A);break e}Se&&Se(e,D,b),e==="focusout"&&(Se=D._wrapperState)&&Se.controlled&&D.type==="number"&&Y_(D,"number",D.value)}switch(Se=b?lc(b):window,e){case"focusin":(GS(Se)||Se.contentEditable==="true")&&(oc=Se,ux=b,Md=null);break;case"focusout":Md=ux=oc=null;break;case"mousedown":cx=!0;break;case"contextmenu":case"mouseup":case"dragend":cx=!1,XS(k,n,A);break;case"selectionchange":if(QL)break;case"keydown":case"keyup":XS(k,n,A)}var Ie;if(V0)e:{switch(e){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else sc?rP(e,n)&&(Ce="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ce="onCompositionStart");Ce&&(nP&&n.locale!=="ko"&&(sc||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&sc&&(Ie=tP()):(Ba=A,F0="value"in Ba?Ba.value:Ba.textContent,sc=!0)),Se=Vm(b,Ce),0<Se.length&&(Ce=new $S(Ce,e,null,n,A),k.push({event:Ce,listeners:Se}),Ie?Ce.data=Ie:(Ie=iP(n),Ie!==null&&(Ce.data=Ie)))),(Ie=VL?$L(e,n):jL(e,n))&&(b=Vm(b,"onBeforeInput"),0<b.length&&(A=new $S("onBeforeInput","beforeinput",null,n,A),k.push({event:A,listeners:b}),A.data=Ie))}gP(k,t)})}function Yd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vm(e,t){for(var n=t+"Capture",s=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=qd(e,n),d!=null&&s.unshift(Yd(e,d,c)),d=qd(e,t),d!=null&&s.push(Yd(e,d,c))),e=e.return}return s}function Ju(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function JS(e,t,n,s,c){for(var d=t._reactName,m=[];n!==null&&n!==s;){var l=n,w=l.alternate,b=l.stateNode;if(w!==null&&w===s)break;l.tag===5&&b!==null&&(l=b,c?(w=qd(n,d),w!=null&&m.unshift(Yd(n,w,l))):c||(w=qd(n,d),w!=null&&m.push(Yd(n,w,l)))),n=n.return}m.length!==0&&e.push({event:t,listeners:m})}var n3=/\r\n?/g,r3=/\u0000|\uFFFD/g;function e2(e){return(typeof e=="string"?e:""+e).replace(n3,`
`).replace(r3,"")}function Zp(e,t,n){if(t=e2(t),e2(e)!==t&&n)throw Error(We(425))}function $m(){}var hx=null,dx=null;function fx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var px=typeof setTimeout=="function"?setTimeout:void 0,i3=typeof clearTimeout=="function"?clearTimeout:void 0,t2=typeof Promise=="function"?Promise:void 0,s3=typeof queueMicrotask=="function"?queueMicrotask:typeof t2<"u"?function(e){return t2.resolve(null).then(e).catch(o3)}:px;function o3(e){setTimeout(function(){throw e})}function Jv(e,t){var n=t,s=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"){if(s===0){e.removeChild(c),Wd(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=c}while(n);Wd(t)}function Ha(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function n2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Zc=Math.random().toString(36).slice(2),fo="__reactFiber$"+Zc,Qd="__reactProps$"+Zc,ea="__reactContainer$"+Zc,mx="__reactEvents$"+Zc,a3="__reactListeners$"+Zc,l3="__reactHandles$"+Zc;function Zl(e){var t=e[fo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ea]||n[fo]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=n2(e);e!==null;){if(n=e[fo])return n;e=n2(e)}return t}e=n,n=e.parentNode}return null}function xf(e){return e=e[fo]||e[ea],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function lc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(We(33))}function zg(e){return e[Qd]||null}var gx=[],uc=-1;function hl(e){return{current:e}}function zn(e){0>uc||(e.current=gx[uc],gx[uc]=null,uc--)}function Tn(e,t){uc++,gx[uc]=e.current,e.current=t}var rl={},ii=hl(rl),Ni=hl(!1),iu=rl;function Mc(e,t){var n=e.type.contextTypes;if(!n)return rl;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in n)c[d]=t[d];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Bi(e){return e=e.childContextTypes,e!=null}function jm(){zn(Ni),zn(ii)}function r2(e,t,n){if(ii.current!==rl)throw Error(We(168));Tn(ii,t),Tn(Ni,n)}function vP(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var c in s)if(!(c in t))throw Error(We(108,ZR(e)||"Unknown",c));return Zn({},n,s)}function Um(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||rl,iu=ii.current,Tn(ii,e),Tn(Ni,Ni.current),!0}function i2(e,t,n){var s=e.stateNode;if(!s)throw Error(We(169));n?(e=vP(e,t,iu),s.__reactInternalMemoizedMergedChildContext=e,zn(Ni),zn(ii),Tn(ii,e)):zn(Ni),Tn(Ni,n)}var $o=null,Rg=!1,e_=!1;function _P(e){$o===null?$o=[e]:$o.push(e)}function u3(e){Rg=!0,_P(e)}function dl(){if(!e_&&$o!==null){e_=!0;var e=0,t=un;try{var n=$o;for(un=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}$o=null,Rg=!1}catch(c){throw $o!==null&&($o=$o.slice(e+1)),qE(z0,dl),c}finally{un=t,e_=!1}}return null}var cc=[],hc=0,qm=null,Gm=0,_s=[],xs=0,su=null,qo=1,Go="";function Nl(e,t){cc[hc++]=Gm,cc[hc++]=qm,qm=e,Gm=t}function xP(e,t,n){_s[xs++]=qo,_s[xs++]=Go,_s[xs++]=su,su=e;var s=qo;e=Go;var c=32-Ws(s)-1;s&=~(1<<c),n+=1;var d=32-Ws(t)+c;if(30<d){var m=c-c%5;d=(s&(1<<m)-1).toString(32),s>>=m,c-=m,qo=1<<32-Ws(t)+c|n<<c|s,Go=d+e}else qo=1<<d|n<<c|s,Go=e}function j0(e){e.return!==null&&(Nl(e,1),xP(e,1,0))}function U0(e){for(;e===qm;)qm=cc[--hc],cc[hc]=null,Gm=cc[--hc],cc[hc]=null;for(;e===su;)su=_s[--xs],_s[xs]=null,Go=_s[--xs],_s[xs]=null,qo=_s[--xs],_s[xs]=null}var Qi=null,Xi=null,Nn=!1,qs=null;function wP(e,t){var n=ws(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function s2(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qi=e,Xi=Ha(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qi=e,Xi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=su!==null?{id:qo,overflow:Go}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ws(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Qi=e,Xi=null,!0):!1;default:return!1}}function yx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function vx(e){if(Nn){var t=Xi;if(t){var n=t;if(!s2(e,t)){if(yx(e))throw Error(We(418));t=Ha(n.nextSibling);var s=Qi;t&&s2(e,t)?wP(s,n):(e.flags=e.flags&-4097|2,Nn=!1,Qi=e)}}else{if(yx(e))throw Error(We(418));e.flags=e.flags&-4097|2,Nn=!1,Qi=e}}}function o2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qi=e}function Wp(e){if(e!==Qi)return!1;if(!Nn)return o2(e),Nn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fx(e.type,e.memoizedProps)),t&&(t=Xi)){if(yx(e))throw bP(),Error(We(418));for(;t;)wP(e,t),t=Ha(t.nextSibling)}if(o2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(We(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Xi=Ha(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Xi=null}}else Xi=Qi?Ha(e.stateNode.nextSibling):null;return!0}function bP(){for(var e=Xi;e;)e=Ha(e.nextSibling)}function Dc(){Xi=Qi=null,Nn=!1}function q0(e){qs===null?qs=[e]:qs.push(e)}var c3=ia.ReactCurrentBatchConfig;function $s(e,t){if(e&&e.defaultProps){t=Zn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Zm=hl(null),Wm=null,dc=null,G0=null;function Z0(){G0=dc=Wm=null}function W0(e){var t=Zm.current;zn(Zm),e._currentValue=t}function _x(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Tc(e,t){Wm=e,G0=dc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Oi=!0),e.firstContext=null)}function Ss(e){var t=e._currentValue;if(G0!==e)if(e={context:e,memoizedValue:t,next:null},dc===null){if(Wm===null)throw Error(We(308));dc=e,Wm.dependencies={lanes:0,firstContext:e}}else dc=dc.next=e;return t}var Wl=null;function H0(e){Wl===null?Wl=[e]:Wl.push(e)}function SP(e,t,n,s){var c=t.interleaved;return c===null?(n.next=n,H0(t)):(n.next=c.next,c.next=n),t.interleaved=n,ta(e,s)}function ta(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ra=!1;function K0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CP(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ho(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ka(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,tn&2){var c=s.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),s.pending=t,ta(e,n)}return c=s.interleaved,c===null?(t.next=t,H0(s)):(t.next=c.next,c.next=t),s.interleaved=t,ta(e,n)}function pm(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,R0(e,n)}}function a2(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var c=null,d=null;if(n=n.firstBaseUpdate,n!==null){do{var m={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};d===null?c=d=m:d=d.next=m,n=n.next}while(n!==null);d===null?c=d=t:d=d.next=t}else c=d=t;n={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hm(e,t,n,s){var c=e.updateQueue;Ra=!1;var d=c.firstBaseUpdate,m=c.lastBaseUpdate,l=c.shared.pending;if(l!==null){c.shared.pending=null;var w=l,b=w.next;w.next=null,m===null?d=b:m.next=b,m=w;var A=e.alternate;A!==null&&(A=A.updateQueue,l=A.lastBaseUpdate,l!==m&&(l===null?A.firstBaseUpdate=b:l.next=b,A.lastBaseUpdate=w))}if(d!==null){var k=c.baseState;m=0,A=b=w=null,l=d;do{var D=l.lane,B=l.eventTime;if((s&D)===D){A!==null&&(A=A.next={eventTime:B,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var q=e,Z=l;switch(D=t,B=n,Z.tag){case 1:if(q=Z.payload,typeof q=="function"){k=q.call(B,k,D);break e}k=q;break e;case 3:q.flags=q.flags&-65537|128;case 0:if(q=Z.payload,D=typeof q=="function"?q.call(B,k,D):q,D==null)break e;k=Zn({},k,D);break e;case 2:Ra=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,D=c.effects,D===null?c.effects=[l]:D.push(l))}else B={eventTime:B,lane:D,tag:l.tag,payload:l.payload,callback:l.callback,next:null},A===null?(b=A=B,w=k):A=A.next=B,m|=D;if(l=l.next,l===null){if(l=c.shared.pending,l===null)break;D=l,l=D.next,D.next=null,c.lastBaseUpdate=D,c.shared.pending=null}}while(1);if(A===null&&(w=k),c.baseState=w,c.firstBaseUpdate=b,c.lastBaseUpdate=A,t=c.shared.interleaved,t!==null){c=t;do m|=c.lane,c=c.next;while(c!==t)}else d===null&&(c.shared.lanes=0);au|=m,e.lanes=m,e.memoizedState=k}}function l2(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],c=s.callback;if(c!==null){if(s.callback=null,s=n,typeof c!="function")throw Error(We(191,c));c.call(s)}}}var TP=new SE.Component().refs;function xx(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Zn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Lg={isMounted:function(e){return(e=e._reactInternals)?du(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=wi(),c=Ya(e),d=Ho(s,c);d.payload=t,n!=null&&(d.callback=n),t=Ka(e,d,c),t!==null&&(Hs(t,e,c,s),pm(t,e,c))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=wi(),c=Ya(e),d=Ho(s,c);d.tag=1,d.payload=t,n!=null&&(d.callback=n),t=Ka(e,d,c),t!==null&&(Hs(t,e,c,s),pm(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=wi(),s=Ya(e),c=Ho(n,s);c.tag=2,t!=null&&(c.callback=t),t=Ka(e,c,s),t!==null&&(Hs(t,e,s,n),pm(t,e,s))}};function u2(e,t,n,s,c,d,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,d,m):t.prototype&&t.prototype.isPureReactComponent?!Kd(n,s)||!Kd(c,d):!0}function EP(e,t,n){var s=!1,c=rl,d=t.contextType;return typeof d=="object"&&d!==null?d=Ss(d):(c=Bi(t)?iu:ii.current,s=t.contextTypes,d=(s=s!=null)?Mc(e,c):rl),t=new t(n,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Lg,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function c2(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Lg.enqueueReplaceState(t,t.state,null)}function wx(e,t,n,s){var c=e.stateNode;c.props=n,c.state=e.memoizedState,c.refs=TP,K0(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=Ss(d):(d=Bi(t)?iu:ii.current,c.context=Mc(e,d)),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(xx(e,t,d,n),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Lg.enqueueReplaceState(c,c.state,null),Hm(e,n,c,s),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function cd(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(We(309));var s=n.stateNode}if(!s)throw Error(We(147,e));var c=s,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(m){var l=c.refs;l===TP&&(l=c.refs={}),m===null?delete l[d]:l[d]=m},t._stringRef=d,t)}if(typeof e!="string")throw Error(We(284));if(!n._owner)throw Error(We(290,e))}return e}function Hp(e,t){throw e=Object.prototype.toString.call(t),Error(We(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function h2(e){var t=e._init;return t(e._payload)}function PP(e){function t(N,F){if(e){var H=N.deletions;H===null?(N.deletions=[F],N.flags|=16):H.push(F)}}function n(N,F){if(!e)return null;for(;F!==null;)t(N,F),F=F.sibling;return null}function s(N,F){for(N=new Map;F!==null;)F.key!==null?N.set(F.key,F):N.set(F.index,F),F=F.sibling;return N}function c(N,F){return N=Qa(N,F),N.index=0,N.sibling=null,N}function d(N,F,H){return N.index=H,e?(H=N.alternate,H!==null?(H=H.index,H<F?(N.flags|=2,F):H):(N.flags|=2,F)):(N.flags|=1048576,F)}function m(N){return e&&N.alternate===null&&(N.flags|=2),N}function l(N,F,H,te){return F===null||F.tag!==6?(F=a_(H,N.mode,te),F.return=N,F):(F=c(F,H),F.return=N,F)}function w(N,F,H,te){var me=H.type;return me===ic?A(N,F,H.props.children,te,H.key):F!==null&&(F.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===za&&h2(me)===F.type)?(te=c(F,H.props),te.ref=cd(N,F,H),te.return=N,te):(te=xm(H.type,H.key,H.props,null,N.mode,te),te.ref=cd(N,F,H),te.return=N,te)}function b(N,F,H,te){return F===null||F.tag!==4||F.stateNode.containerInfo!==H.containerInfo||F.stateNode.implementation!==H.implementation?(F=l_(H,N.mode,te),F.return=N,F):(F=c(F,H.children||[]),F.return=N,F)}function A(N,F,H,te,me){return F===null||F.tag!==7?(F=nu(H,N.mode,te,me),F.return=N,F):(F=c(F,H),F.return=N,F)}function k(N,F,H){if(typeof F=="string"&&F!==""||typeof F=="number")return F=a_(""+F,N.mode,H),F.return=N,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Fp:return H=xm(F.type,F.key,F.props,null,N.mode,H),H.ref=cd(N,null,F),H.return=N,H;case rc:return F=l_(F,N.mode,H),F.return=N,F;case za:var te=F._init;return k(N,te(F._payload),H)}if(_d(F)||sd(F))return F=nu(F,N.mode,H,null),F.return=N,F;Hp(N,F)}return null}function D(N,F,H,te){var me=F!==null?F.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return me!==null?null:l(N,F,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Fp:return H.key===me?w(N,F,H,te):null;case rc:return H.key===me?b(N,F,H,te):null;case za:return me=H._init,D(N,F,me(H._payload),te)}if(_d(H)||sd(H))return me!==null?null:A(N,F,H,te,null);Hp(N,H)}return null}function B(N,F,H,te,me){if(typeof te=="string"&&te!==""||typeof te=="number")return N=N.get(H)||null,l(F,N,""+te,me);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case Fp:return N=N.get(te.key===null?H:te.key)||null,w(F,N,te,me);case rc:return N=N.get(te.key===null?H:te.key)||null,b(F,N,te,me);case za:var Se=te._init;return B(N,F,H,Se(te._payload),me)}if(_d(te)||sd(te))return N=N.get(H)||null,A(F,N,te,me,null);Hp(F,te)}return null}function q(N,F,H,te){for(var me=null,Se=null,Ie=F,Ce=F=0,Ge=null;Ie!==null&&Ce<H.length;Ce++){Ie.index>Ce?(Ge=Ie,Ie=null):Ge=Ie.sibling;var Le=D(N,Ie,H[Ce],te);if(Le===null){Ie===null&&(Ie=Ge);break}e&&Ie&&Le.alternate===null&&t(N,Ie),F=d(Le,F,Ce),Se===null?me=Le:Se.sibling=Le,Se=Le,Ie=Ge}if(Ce===H.length)return n(N,Ie),Nn&&Nl(N,Ce),me;if(Ie===null){for(;Ce<H.length;Ce++)Ie=k(N,H[Ce],te),Ie!==null&&(F=d(Ie,F,Ce),Se===null?me=Ie:Se.sibling=Ie,Se=Ie);return Nn&&Nl(N,Ce),me}for(Ie=s(N,Ie);Ce<H.length;Ce++)Ge=B(Ie,N,Ce,H[Ce],te),Ge!==null&&(e&&Ge.alternate!==null&&Ie.delete(Ge.key===null?Ce:Ge.key),F=d(Ge,F,Ce),Se===null?me=Ge:Se.sibling=Ge,Se=Ge);return e&&Ie.forEach(function(Tt){return t(N,Tt)}),Nn&&Nl(N,Ce),me}function Z(N,F,H,te){var me=sd(H);if(typeof me!="function")throw Error(We(150));if(H=me.call(H),H==null)throw Error(We(151));for(var Se=me=null,Ie=F,Ce=F=0,Ge=null,Le=H.next();Ie!==null&&!Le.done;Ce++,Le=H.next()){Ie.index>Ce?(Ge=Ie,Ie=null):Ge=Ie.sibling;var Tt=D(N,Ie,Le.value,te);if(Tt===null){Ie===null&&(Ie=Ge);break}e&&Ie&&Tt.alternate===null&&t(N,Ie),F=d(Tt,F,Ce),Se===null?me=Tt:Se.sibling=Tt,Se=Tt,Ie=Ge}if(Le.done)return n(N,Ie),Nn&&Nl(N,Ce),me;if(Ie===null){for(;!Le.done;Ce++,Le=H.next())Le=k(N,Le.value,te),Le!==null&&(F=d(Le,F,Ce),Se===null?me=Le:Se.sibling=Le,Se=Le);return Nn&&Nl(N,Ce),me}for(Ie=s(N,Ie);!Le.done;Ce++,Le=H.next())Le=B(Ie,N,Ce,Le.value,te),Le!==null&&(e&&Le.alternate!==null&&Ie.delete(Le.key===null?Ce:Le.key),F=d(Le,F,Ce),Se===null?me=Le:Se.sibling=Le,Se=Le);return e&&Ie.forEach(function(Ue){return t(N,Ue)}),Nn&&Nl(N,Ce),me}function K(N,F,H,te){if(typeof H=="object"&&H!==null&&H.type===ic&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case Fp:e:{for(var me=H.key,Se=F;Se!==null;){if(Se.key===me){if(me=H.type,me===ic){if(Se.tag===7){n(N,Se.sibling),F=c(Se,H.props.children),F.return=N,N=F;break e}}else if(Se.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===za&&h2(me)===Se.type){n(N,Se.sibling),F=c(Se,H.props),F.ref=cd(N,Se,H),F.return=N,N=F;break e}n(N,Se);break}else t(N,Se);Se=Se.sibling}H.type===ic?(F=nu(H.props.children,N.mode,te,H.key),F.return=N,N=F):(te=xm(H.type,H.key,H.props,null,N.mode,te),te.ref=cd(N,F,H),te.return=N,N=te)}return m(N);case rc:e:{for(Se=H.key;F!==null;){if(F.key===Se)if(F.tag===4&&F.stateNode.containerInfo===H.containerInfo&&F.stateNode.implementation===H.implementation){n(N,F.sibling),F=c(F,H.children||[]),F.return=N,N=F;break e}else{n(N,F);break}else t(N,F);F=F.sibling}F=l_(H,N.mode,te),F.return=N,N=F}return m(N);case za:return Se=H._init,K(N,F,Se(H._payload),te)}if(_d(H))return q(N,F,H,te);if(sd(H))return Z(N,F,H,te);Hp(N,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,F!==null&&F.tag===6?(n(N,F.sibling),F=c(F,H),F.return=N,N=F):(n(N,F),F=a_(H,N.mode,te),F.return=N,N=F),m(N)):n(N,F)}return K}var zc=PP(!0),AP=PP(!1),wf={},go=hl(wf),Jd=hl(wf),ef=hl(wf);function Hl(e){if(e===wf)throw Error(We(174));return e}function X0(e,t){switch(Tn(ef,t),Tn(Jd,e),Tn(go,wf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:J_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=J_(t,e)}zn(go),Tn(go,t)}function Rc(){zn(go),zn(Jd),zn(ef)}function kP(e){Hl(ef.current);var t=Hl(go.current),n=J_(t,e.type);t!==n&&(Tn(Jd,e),Tn(go,n))}function Y0(e){Jd.current===e&&(zn(go),zn(Jd))}var jn=hl(0);function Km(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var t_=[];function Q0(){for(var e=0;e<t_.length;e++)t_[e]._workInProgressVersionPrimary=null;t_.length=0}var mm=ia.ReactCurrentDispatcher,n_=ia.ReactCurrentBatchConfig,ou=0,qn=null,gr=null,Tr=null,Xm=!1,Dd=!1,tf=0,h3=0;function Qr(){throw Error(We(321))}function J0(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ks(e[n],t[n]))return!1;return!0}function ew(e,t,n,s,c,d){if(ou=d,qn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,mm.current=e===null||e.memoizedState===null?m3:g3,e=n(s,c),Dd){d=0;do{if(Dd=!1,tf=0,25<=d)throw Error(We(301));d+=1,Tr=gr=null,t.updateQueue=null,mm.current=y3,e=n(s,c)}while(Dd)}if(mm.current=Ym,t=gr!==null&&gr.next!==null,ou=0,Tr=gr=qn=null,Xm=!1,t)throw Error(We(300));return e}function tw(){var e=tf!==0;return tf=0,e}function ho(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tr===null?qn.memoizedState=Tr=e:Tr=Tr.next=e,Tr}function Cs(){if(gr===null){var e=qn.alternate;e=e!==null?e.memoizedState:null}else e=gr.next;var t=Tr===null?qn.memoizedState:Tr.next;if(t!==null)Tr=t,gr=e;else{if(e===null)throw Error(We(310));gr=e,e={memoizedState:gr.memoizedState,baseState:gr.baseState,baseQueue:gr.baseQueue,queue:gr.queue,next:null},Tr===null?qn.memoizedState=Tr=e:Tr=Tr.next=e}return Tr}function nf(e,t){return typeof t=="function"?t(e):t}function r_(e){var t=Cs(),n=t.queue;if(n===null)throw Error(We(311));n.lastRenderedReducer=e;var s=gr,c=s.baseQueue,d=n.pending;if(d!==null){if(c!==null){var m=c.next;c.next=d.next,d.next=m}s.baseQueue=c=d,n.pending=null}if(c!==null){d=c.next,s=s.baseState;var l=m=null,w=null,b=d;do{var A=b.lane;if((ou&A)===A)w!==null&&(w=w.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),s=b.hasEagerState?b.eagerState:e(s,b.action);else{var k={lane:A,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};w===null?(l=w=k,m=s):w=w.next=k,qn.lanes|=A,au|=A}b=b.next}while(b!==null&&b!==d);w===null?m=s:w.next=l,Ks(s,t.memoizedState)||(Oi=!0),t.memoizedState=s,t.baseState=m,t.baseQueue=w,n.lastRenderedState=s}if(e=n.interleaved,e!==null){c=e;do d=c.lane,qn.lanes|=d,au|=d,c=c.next;while(c!==e)}else c===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function i_(e){var t=Cs(),n=t.queue;if(n===null)throw Error(We(311));n.lastRenderedReducer=e;var s=n.dispatch,c=n.pending,d=t.memoizedState;if(c!==null){n.pending=null;var m=c=c.next;do d=e(d,m.action),m=m.next;while(m!==c);Ks(d,t.memoizedState)||(Oi=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),n.lastRenderedState=d}return[d,s]}function IP(){}function MP(e,t){var n=qn,s=Cs(),c=t(),d=!Ks(s.memoizedState,c);if(d&&(s.memoizedState=c,Oi=!0),s=s.queue,nw(RP.bind(null,n,s,e),[e]),s.getSnapshot!==t||d||Tr!==null&&Tr.memoizedState.tag&1){if(n.flags|=2048,rf(9,zP.bind(null,n,s,c,t),void 0,null),Er===null)throw Error(We(349));ou&30||DP(n,t,c)}return c}function DP(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=qn.updateQueue,t===null?(t={lastEffect:null,stores:null},qn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function zP(e,t,n,s){t.value=n,t.getSnapshot=s,LP(t)&&OP(e)}function RP(e,t,n){return n(function(){LP(t)&&OP(e)})}function LP(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ks(e,n)}catch{return!0}}function OP(e){var t=ta(e,1);t!==null&&Hs(t,e,1,-1)}function d2(e){var t=ho();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nf,lastRenderedState:e},t.queue=e,e=e.dispatch=p3.bind(null,qn,e),[t.memoizedState,e]}function rf(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=qn.updateQueue,t===null?(t={lastEffect:null,stores:null},qn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function FP(){return Cs().memoizedState}function gm(e,t,n,s){var c=ho();qn.flags|=e,c.memoizedState=rf(1|t,n,void 0,s===void 0?null:s)}function Og(e,t,n,s){var c=Cs();s=s===void 0?null:s;var d=void 0;if(gr!==null){var m=gr.memoizedState;if(d=m.destroy,s!==null&&J0(s,m.deps)){c.memoizedState=rf(t,n,d,s);return}}qn.flags|=e,c.memoizedState=rf(1|t,n,d,s)}function f2(e,t){return gm(8390656,8,e,t)}function nw(e,t){return Og(2048,8,e,t)}function NP(e,t){return Og(4,2,e,t)}function BP(e,t){return Og(4,4,e,t)}function VP(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $P(e,t,n){return n=n!=null?n.concat([e]):null,Og(4,4,VP.bind(null,t,e),n)}function rw(){}function jP(e,t){var n=Cs();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&J0(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function UP(e,t){var n=Cs();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&J0(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function qP(e,t,n){return ou&21?(Ks(n,t)||(n=WE(),qn.lanes|=n,au|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Oi=!0),e.memoizedState=n)}function d3(e,t){var n=un;un=n!==0&&4>n?n:4,e(!0);var s=n_.transition;n_.transition={};try{e(!1),t()}finally{un=n,n_.transition=s}}function GP(){return Cs().memoizedState}function f3(e,t,n){var s=Ya(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},ZP(e))WP(t,n);else if(n=SP(e,t,n,s),n!==null){var c=wi();Hs(n,e,s,c),HP(n,t,s)}}function p3(e,t,n){var s=Ya(e),c={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(ZP(e))WP(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var m=t.lastRenderedState,l=d(m,n);if(c.hasEagerState=!0,c.eagerState=l,Ks(l,m)){var w=t.interleaved;w===null?(c.next=c,H0(t)):(c.next=w.next,w.next=c),t.interleaved=c;return}}catch{}finally{}n=SP(e,t,c,s),n!==null&&(c=wi(),Hs(n,e,s,c),HP(n,t,s))}}function ZP(e){var t=e.alternate;return e===qn||t!==null&&t===qn}function WP(e,t){Dd=Xm=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function HP(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,R0(e,n)}}var Ym={readContext:Ss,useCallback:Qr,useContext:Qr,useEffect:Qr,useImperativeHandle:Qr,useInsertionEffect:Qr,useLayoutEffect:Qr,useMemo:Qr,useReducer:Qr,useRef:Qr,useState:Qr,useDebugValue:Qr,useDeferredValue:Qr,useTransition:Qr,useMutableSource:Qr,useSyncExternalStore:Qr,useId:Qr,unstable_isNewReconciler:!1},m3={readContext:Ss,useCallback:function(e,t){return ho().memoizedState=[e,t===void 0?null:t],e},useContext:Ss,useEffect:f2,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,gm(4194308,4,VP.bind(null,t,e),n)},useLayoutEffect:function(e,t){return gm(4194308,4,e,t)},useInsertionEffect:function(e,t){return gm(4,2,e,t)},useMemo:function(e,t){var n=ho();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=ho();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=f3.bind(null,qn,e),[s.memoizedState,e]},useRef:function(e){var t=ho();return e={current:e},t.memoizedState=e},useState:d2,useDebugValue:rw,useDeferredValue:function(e){return ho().memoizedState=e},useTransition:function(){var e=d2(!1),t=e[0];return e=d3.bind(null,e[1]),ho().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=qn,c=ho();if(Nn){if(n===void 0)throw Error(We(407));n=n()}else{if(n=t(),Er===null)throw Error(We(349));ou&30||DP(s,t,n)}c.memoizedState=n;var d={value:n,getSnapshot:t};return c.queue=d,f2(RP.bind(null,s,d,e),[e]),s.flags|=2048,rf(9,zP.bind(null,s,d,n,t),void 0,null),n},useId:function(){var e=ho(),t=Er.identifierPrefix;if(Nn){var n=Go,s=qo;n=(s&~(1<<32-Ws(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=tf++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=h3++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},g3={readContext:Ss,useCallback:jP,useContext:Ss,useEffect:nw,useImperativeHandle:$P,useInsertionEffect:NP,useLayoutEffect:BP,useMemo:UP,useReducer:r_,useRef:FP,useState:function(){return r_(nf)},useDebugValue:rw,useDeferredValue:function(e){var t=Cs();return qP(t,gr.memoizedState,e)},useTransition:function(){var e=r_(nf)[0],t=Cs().memoizedState;return[e,t]},useMutableSource:IP,useSyncExternalStore:MP,useId:GP,unstable_isNewReconciler:!1},y3={readContext:Ss,useCallback:jP,useContext:Ss,useEffect:nw,useImperativeHandle:$P,useInsertionEffect:NP,useLayoutEffect:BP,useMemo:UP,useReducer:i_,useRef:FP,useState:function(){return i_(nf)},useDebugValue:rw,useDeferredValue:function(e){var t=Cs();return gr===null?t.memoizedState=e:qP(t,gr.memoizedState,e)},useTransition:function(){var e=i_(nf)[0],t=Cs().memoizedState;return[e,t]},useMutableSource:IP,useSyncExternalStore:MP,useId:GP,unstable_isNewReconciler:!1};function Lc(e,t){try{var n="",s=t;do n+=GR(s),s=s.return;while(s);var c=n}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c,digest:null}}function s_(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function bx(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var v3=typeof WeakMap=="function"?WeakMap:Map;function KP(e,t,n){n=Ho(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Jm||(Jm=!0,Dx=s),bx(e,t)},n}function XP(e,t,n){n=Ho(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var c=t.value;n.payload=function(){return s(c)},n.callback=function(){bx(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(n.callback=function(){bx(e,t),typeof s!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),n}function p2(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new v3;var c=new Set;s.set(t,c)}else c=s.get(t),c===void 0&&(c=new Set,s.set(t,c));c.has(n)||(c.add(n),e=D3.bind(null,e,t,n),t.then(e,e))}function m2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function g2(e,t,n,s,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ho(-1,1),t.tag=2,Ka(n,t,1))),n.lanes|=1),e)}var _3=ia.ReactCurrentOwner,Oi=!1;function yi(e,t,n,s){t.child=e===null?AP(t,null,n,s):zc(t,e.child,n,s)}function y2(e,t,n,s,c){n=n.render;var d=t.ref;return Tc(t,c),s=ew(e,t,n,s,d,c),n=tw(),e!==null&&!Oi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,na(e,t,c)):(Nn&&n&&j0(t),t.flags|=1,yi(e,t,s,c),t.child)}function v2(e,t,n,s,c){if(e===null){var d=n.type;return typeof d=="function"&&!hw(d)&&d.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=d,YP(e,t,d,s,c)):(e=xm(n.type,null,s,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&c)){var m=d.memoizedProps;if(n=n.compare,n=n!==null?n:Kd,n(m,s)&&e.ref===t.ref)return na(e,t,c)}return t.flags|=1,e=Qa(d,s),e.ref=t.ref,e.return=t,t.child=e}function YP(e,t,n,s,c){if(e!==null){var d=e.memoizedProps;if(Kd(d,s)&&e.ref===t.ref)if(Oi=!1,t.pendingProps=s=d,(e.lanes&c)!==0)e.flags&131072&&(Oi=!0);else return t.lanes=e.lanes,na(e,t,c)}return Sx(e,t,n,s,c)}function QP(e,t,n){var s=t.pendingProps,c=s.children,d=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tn(pc,Ki),Ki|=n;else{if(!(n&1073741824))return e=d!==null?d.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Tn(pc,Ki),Ki|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=d!==null?d.baseLanes:n,Tn(pc,Ki),Ki|=s}else d!==null?(s=d.baseLanes|n,t.memoizedState=null):s=n,Tn(pc,Ki),Ki|=s;return yi(e,t,c,n),t.child}function JP(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Sx(e,t,n,s,c){var d=Bi(n)?iu:ii.current;return d=Mc(t,d),Tc(t,c),n=ew(e,t,n,s,d,c),s=tw(),e!==null&&!Oi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,na(e,t,c)):(Nn&&s&&j0(t),t.flags|=1,yi(e,t,n,c),t.child)}function _2(e,t,n,s,c){if(Bi(n)){var d=!0;Um(t)}else d=!1;if(Tc(t,c),t.stateNode===null)ym(e,t),EP(t,n,s),wx(t,n,s,c),s=!0;else if(e===null){var m=t.stateNode,l=t.memoizedProps;m.props=l;var w=m.context,b=n.contextType;typeof b=="object"&&b!==null?b=Ss(b):(b=Bi(n)?iu:ii.current,b=Mc(t,b));var A=n.getDerivedStateFromProps,k=typeof A=="function"||typeof m.getSnapshotBeforeUpdate=="function";k||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(l!==s||w!==b)&&c2(t,m,s,b),Ra=!1;var D=t.memoizedState;m.state=D,Hm(t,s,m,c),w=t.memoizedState,l!==s||D!==w||Ni.current||Ra?(typeof A=="function"&&(xx(t,n,A,s),w=t.memoizedState),(l=Ra||u2(t,n,l,s,D,w,b))?(k||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=w),m.props=s,m.state=w,m.context=b,s=l):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{m=t.stateNode,CP(e,t),l=t.memoizedProps,b=t.type===t.elementType?l:$s(t.type,l),m.props=b,k=t.pendingProps,D=m.context,w=n.contextType,typeof w=="object"&&w!==null?w=Ss(w):(w=Bi(n)?iu:ii.current,w=Mc(t,w));var B=n.getDerivedStateFromProps;(A=typeof B=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(l!==k||D!==w)&&c2(t,m,s,w),Ra=!1,D=t.memoizedState,m.state=D,Hm(t,s,m,c);var q=t.memoizedState;l!==k||D!==q||Ni.current||Ra?(typeof B=="function"&&(xx(t,n,B,s),q=t.memoizedState),(b=Ra||u2(t,n,b,s,D,q,w)||!1)?(A||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(s,q,w),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(s,q,w)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||l===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=q),m.props=s,m.state=q,m.context=w,s=b):(typeof m.componentDidUpdate!="function"||l===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),s=!1)}return Cx(e,t,n,s,d,c)}function Cx(e,t,n,s,c,d){JP(e,t);var m=(t.flags&128)!==0;if(!s&&!m)return c&&i2(t,n,!1),na(e,t,d);s=t.stateNode,_3.current=t;var l=m&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&m?(t.child=zc(t,e.child,null,d),t.child=zc(t,null,l,d)):yi(e,t,l,d),t.memoizedState=s.state,c&&i2(t,n,!0),t.child}function eA(e){var t=e.stateNode;t.pendingContext?r2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&r2(e,t.context,!1),X0(e,t.containerInfo)}function x2(e,t,n,s,c){return Dc(),q0(c),t.flags|=256,yi(e,t,n,s),t.child}var Tx={dehydrated:null,treeContext:null,retryLane:0};function Ex(e){return{baseLanes:e,cachePool:null,transitions:null}}function tA(e,t,n){var s=t.pendingProps,c=jn.current,d=!1,m=(t.flags&128)!==0,l;if((l=m)||(l=e!==null&&e.memoizedState===null?!1:(c&2)!==0),l?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Tn(jn,c&1),e===null)return vx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(m=s.children,e=s.fallback,d?(s=t.mode,d=t.child,m={mode:"hidden",children:m},!(s&1)&&d!==null?(d.childLanes=0,d.pendingProps=m):d=Bg(m,s,0,null),e=nu(e,s,n,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=Ex(n),t.memoizedState=Tx,e):iw(t,m));if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null))return x3(e,t,m,s,l,c,n);if(d){d=s.fallback,m=t.mode,c=e.child,l=c.sibling;var w={mode:"hidden",children:s.children};return!(m&1)&&t.child!==c?(s=t.child,s.childLanes=0,s.pendingProps=w,t.deletions=null):(s=Qa(c,w),s.subtreeFlags=c.subtreeFlags&14680064),l!==null?d=Qa(l,d):(d=nu(d,m,n,null),d.flags|=2),d.return=t,s.return=t,s.sibling=d,t.child=s,s=d,d=t.child,m=e.child.memoizedState,m=m===null?Ex(n):{baseLanes:m.baseLanes|n,cachePool:null,transitions:m.transitions},d.memoizedState=m,d.childLanes=e.childLanes&~n,t.memoizedState=Tx,s}return d=e.child,e=d.sibling,s=Qa(d,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function iw(e,t){return t=Bg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Kp(e,t,n,s){return s!==null&&q0(s),zc(t,e.child,null,n),e=iw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function x3(e,t,n,s,c,d,m){if(n)return t.flags&256?(t.flags&=-257,s=s_(Error(We(422))),Kp(e,t,m,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=s.fallback,c=t.mode,s=Bg({mode:"visible",children:s.children},c,0,null),d=nu(d,c,m,null),d.flags|=2,s.return=t,d.return=t,s.sibling=d,t.child=s,t.mode&1&&zc(t,e.child,null,m),t.child.memoizedState=Ex(m),t.memoizedState=Tx,d);if(!(t.mode&1))return Kp(e,t,m,null);if(c.data==="$!"){if(s=c.nextSibling&&c.nextSibling.dataset,s)var l=s.dgst;return s=l,d=Error(We(419)),s=s_(d,s,void 0),Kp(e,t,m,s)}if(l=(m&e.childLanes)!==0,Oi||l){if(s=Er,s!==null){switch(m&-m){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(s.suspendedLanes|m)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,ta(e,c),Hs(s,e,c,-1))}return cw(),s=s_(Error(We(421))),Kp(e,t,m,s)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=z3.bind(null,e),c._reactRetry=t,null):(e=d.treeContext,Xi=Ha(c.nextSibling),Qi=t,Nn=!0,qs=null,e!==null&&(_s[xs++]=qo,_s[xs++]=Go,_s[xs++]=su,qo=e.id,Go=e.overflow,su=t),t=iw(t,s.children),t.flags|=4096,t)}function w2(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),_x(e.return,t,n)}function o_(e,t,n,s,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:c}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=s,d.tail=n,d.tailMode=c)}function nA(e,t,n){var s=t.pendingProps,c=s.revealOrder,d=s.tail;if(yi(e,t,s.children,n),s=jn.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&w2(e,n,t);else if(e.tag===19)w2(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Tn(jn,s),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&Km(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),o_(t,!1,c,n,d);break;case"backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Km(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}o_(t,!0,n,null,d);break;case"together":o_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ym(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function na(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),au|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(We(153));if(t.child!==null){for(e=t.child,n=Qa(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Qa(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function w3(e,t,n){switch(t.tag){case 3:eA(t),Dc();break;case 5:kP(t);break;case 1:Bi(t.type)&&Um(t);break;case 4:X0(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,c=t.memoizedProps.value;Tn(Zm,s._currentValue),s._currentValue=c;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Tn(jn,jn.current&1),t.flags|=128,null):n&t.child.childLanes?tA(e,t,n):(Tn(jn,jn.current&1),e=na(e,t,n),e!==null?e.sibling:null);Tn(jn,jn.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return nA(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Tn(jn,jn.current),s)break;return null;case 22:case 23:return t.lanes=0,QP(e,t,n)}return na(e,t,n)}var rA,Px,iA,sA;rA=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Px=function(){};iA=function(e,t,n,s){var c=e.memoizedProps;if(c!==s){e=t.stateNode,Hl(go.current);var d=null;switch(n){case"input":c=K_(e,c),s=K_(e,s),d=[];break;case"select":c=Zn({},c,{value:void 0}),s=Zn({},s,{value:void 0}),d=[];break;case"textarea":c=Q_(e,c),s=Q_(e,s),d=[];break;default:typeof c.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=$m)}ex(n,s);var m;n=null;for(b in c)if(!s.hasOwnProperty(b)&&c.hasOwnProperty(b)&&c[b]!=null)if(b==="style"){var l=c[b];for(m in l)l.hasOwnProperty(m)&&(n||(n={}),n[m]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(jd.hasOwnProperty(b)?d||(d=[]):(d=d||[]).push(b,null));for(b in s){var w=s[b];if(l=c!=null?c[b]:void 0,s.hasOwnProperty(b)&&w!==l&&(w!=null||l!=null))if(b==="style")if(l){for(m in l)!l.hasOwnProperty(m)||w&&w.hasOwnProperty(m)||(n||(n={}),n[m]="");for(m in w)w.hasOwnProperty(m)&&l[m]!==w[m]&&(n||(n={}),n[m]=w[m])}else n||(d||(d=[]),d.push(b,n)),n=w;else b==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,l=l?l.__html:void 0,w!=null&&l!==w&&(d=d||[]).push(b,w)):b==="children"?typeof w!="string"&&typeof w!="number"||(d=d||[]).push(b,""+w):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(jd.hasOwnProperty(b)?(w!=null&&b==="onScroll"&&Mn("scroll",e),d||l===w||(d=[])):(d=d||[]).push(b,w))}n&&(d=d||[]).push("style",n);var b=d;(t.updateQueue=b)&&(t.flags|=4)}};sA=function(e,t,n,s){n!==s&&(t.flags|=4)};function hd(e,t){if(!Nn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Jr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,s|=c.subtreeFlags&14680064,s|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function b3(e,t,n){var s=t.pendingProps;switch(U0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jr(t),null;case 1:return Bi(t.type)&&jm(),Jr(t),null;case 3:return s=t.stateNode,Rc(),zn(Ni),zn(ii),Q0(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Wp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qs!==null&&(Lx(qs),qs=null))),Px(e,t),Jr(t),null;case 5:Y0(t);var c=Hl(ef.current);if(n=t.type,e!==null&&t.stateNode!=null)iA(e,t,n,s,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(We(166));return Jr(t),null}if(e=Hl(go.current),Wp(t)){s=t.stateNode,n=t.type;var d=t.memoizedProps;switch(s[fo]=t,s[Qd]=d,e=(t.mode&1)!==0,n){case"dialog":Mn("cancel",s),Mn("close",s);break;case"iframe":case"object":case"embed":Mn("load",s);break;case"video":case"audio":for(c=0;c<wd.length;c++)Mn(wd[c],s);break;case"source":Mn("error",s);break;case"img":case"image":case"link":Mn("error",s),Mn("load",s);break;case"details":Mn("toggle",s);break;case"input":IS(s,d),Mn("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!d.multiple},Mn("invalid",s);break;case"textarea":DS(s,d),Mn("invalid",s)}ex(n,d),c=null;for(var m in d)if(d.hasOwnProperty(m)){var l=d[m];m==="children"?typeof l=="string"?s.textContent!==l&&(d.suppressHydrationWarning!==!0&&Zp(s.textContent,l,e),c=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(d.suppressHydrationWarning!==!0&&Zp(s.textContent,l,e),c=["children",""+l]):jd.hasOwnProperty(m)&&l!=null&&m==="onScroll"&&Mn("scroll",s)}switch(n){case"input":Np(s),MS(s,d,!0);break;case"textarea":Np(s),zS(s);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(s.onclick=$m)}s=c,t.updateQueue=s,s!==null&&(t.flags|=4)}else{m=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=DE(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=m.createElement(n,{is:s.is}):(e=m.createElement(n),n==="select"&&(m=e,s.multiple?m.multiple=!0:s.size&&(m.size=s.size))):e=m.createElementNS(e,n),e[fo]=t,e[Qd]=s,rA(e,t,!1,!1),t.stateNode=e;e:{switch(m=tx(n,s),n){case"dialog":Mn("cancel",e),Mn("close",e),c=s;break;case"iframe":case"object":case"embed":Mn("load",e),c=s;break;case"video":case"audio":for(c=0;c<wd.length;c++)Mn(wd[c],e);c=s;break;case"source":Mn("error",e),c=s;break;case"img":case"image":case"link":Mn("error",e),Mn("load",e),c=s;break;case"details":Mn("toggle",e),c=s;break;case"input":IS(e,s),c=K_(e,s),Mn("invalid",e);break;case"option":c=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},c=Zn({},s,{value:void 0}),Mn("invalid",e);break;case"textarea":DS(e,s),c=Q_(e,s),Mn("invalid",e);break;default:c=s}ex(n,c),l=c;for(d in l)if(l.hasOwnProperty(d)){var w=l[d];d==="style"?LE(e,w):d==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&zE(e,w)):d==="children"?typeof w=="string"?(n!=="textarea"||w!=="")&&Ud(e,w):typeof w=="number"&&Ud(e,""+w):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(jd.hasOwnProperty(d)?w!=null&&d==="onScroll"&&Mn("scroll",e):w!=null&&A0(e,d,w,m))}switch(n){case"input":Np(e),MS(e,s,!1);break;case"textarea":Np(e),zS(e);break;case"option":s.value!=null&&e.setAttribute("value",""+nl(s.value));break;case"select":e.multiple=!!s.multiple,d=s.value,d!=null?wc(e,!!s.multiple,d,!1):s.defaultValue!=null&&wc(e,!!s.multiple,s.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=$m)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Jr(t),null;case 6:if(e&&t.stateNode!=null)sA(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(We(166));if(n=Hl(ef.current),Hl(go.current),Wp(t)){if(s=t.stateNode,n=t.memoizedProps,s[fo]=t,(d=s.nodeValue!==n)&&(e=Qi,e!==null))switch(e.tag){case 3:Zp(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Zp(s.nodeValue,n,(e.mode&1)!==0)}d&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[fo]=t,t.stateNode=s}return Jr(t),null;case 13:if(zn(jn),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Nn&&Xi!==null&&t.mode&1&&!(t.flags&128))bP(),Dc(),t.flags|=98560,d=!1;else if(d=Wp(t),s!==null&&s.dehydrated!==null){if(e===null){if(!d)throw Error(We(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(We(317));d[fo]=t}else Dc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Jr(t),d=!1}else qs!==null&&(Lx(qs),qs=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||jn.current&1?yr===0&&(yr=3):cw())),t.updateQueue!==null&&(t.flags|=4),Jr(t),null);case 4:return Rc(),Px(e,t),e===null&&Xd(t.stateNode.containerInfo),Jr(t),null;case 10:return W0(t.type._context),Jr(t),null;case 17:return Bi(t.type)&&jm(),Jr(t),null;case 19:if(zn(jn),d=t.memoizedState,d===null)return Jr(t),null;if(s=(t.flags&128)!==0,m=d.rendering,m===null)if(s)hd(d,!1);else{if(yr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(m=Km(e),m!==null){for(t.flags|=128,hd(d,!1),s=m.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)d=n,e=s,d.flags&=14680066,m=d.alternate,m===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=m.childLanes,d.lanes=m.lanes,d.child=m.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=m.memoizedProps,d.memoizedState=m.memoizedState,d.updateQueue=m.updateQueue,d.type=m.type,e=m.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Tn(jn,jn.current&1|2),t.child}e=e.sibling}d.tail!==null&&ar()>Oc&&(t.flags|=128,s=!0,hd(d,!1),t.lanes=4194304)}else{if(!s)if(e=Km(m),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),hd(d,!0),d.tail===null&&d.tailMode==="hidden"&&!m.alternate&&!Nn)return Jr(t),null}else 2*ar()-d.renderingStartTime>Oc&&n!==1073741824&&(t.flags|=128,s=!0,hd(d,!1),t.lanes=4194304);d.isBackwards?(m.sibling=t.child,t.child=m):(n=d.last,n!==null?n.sibling=m:t.child=m,d.last=m)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=ar(),t.sibling=null,n=jn.current,Tn(jn,s?n&1|2:n&1),t):(Jr(t),null);case 22:case 23:return uw(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Ki&1073741824&&(Jr(t),t.subtreeFlags&6&&(t.flags|=8192)):Jr(t),null;case 24:return null;case 25:return null}throw Error(We(156,t.tag))}function S3(e,t){switch(U0(t),t.tag){case 1:return Bi(t.type)&&jm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rc(),zn(Ni),zn(ii),Q0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Y0(t),null;case 13:if(zn(jn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(We(340));Dc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return zn(jn),null;case 4:return Rc(),null;case 10:return W0(t.type._context),null;case 22:case 23:return uw(),null;case 24:return null;default:return null}}var Xp=!1,ni=!1,C3=typeof WeakSet=="function"?WeakSet:Set,pt=null;function fc(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Xn(e,t,s)}else n.current=null}function Ax(e,t,n){try{n()}catch(s){Xn(e,t,s)}}var b2=!1;function T3(e,t){if(hx=Nm,e=uP(),$0(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var c=s.anchorOffset,d=s.focusNode;s=s.focusOffset;try{n.nodeType,d.nodeType}catch{n=null;break e}var m=0,l=-1,w=-1,b=0,A=0,k=e,D=null;t:for(;;){for(var B;k!==n||c!==0&&k.nodeType!==3||(l=m+c),k!==d||s!==0&&k.nodeType!==3||(w=m+s),k.nodeType===3&&(m+=k.nodeValue.length),(B=k.firstChild)!==null;)D=k,k=B;for(;;){if(k===e)break t;if(D===n&&++b===c&&(l=m),D===d&&++A===s&&(w=m),(B=k.nextSibling)!==null)break;k=D,D=k.parentNode}k=B}n=l===-1||w===-1?null:{start:l,end:w}}else n=null}n=n||{start:0,end:0}}else n=null;for(dx={focusedElem:e,selectionRange:n},Nm=!1,pt=t;pt!==null;)if(t=pt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pt=e;else for(;pt!==null;){t=pt;try{var q=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(q!==null){var Z=q.memoizedProps,K=q.memoizedState,N=t.stateNode,F=N.getSnapshotBeforeUpdate(t.elementType===t.type?Z:$s(t.type,Z),K);N.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var H=t.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(We(163))}}catch(te){Xn(t,t.return,te)}if(e=t.sibling,e!==null){e.return=t.return,pt=e;break}pt=t.return}return q=b2,b2=!1,q}function zd(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&Ax(t,n,d)}c=c.next}while(c!==s)}}function Fg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function kx(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function oA(e){var t=e.alternate;t!==null&&(e.alternate=null,oA(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fo],delete t[Qd],delete t[mx],delete t[a3],delete t[l3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function aA(e){return e.tag===5||e.tag===3||e.tag===4}function S2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||aA(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ix(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=$m));else if(s!==4&&(e=e.child,e!==null))for(Ix(e,t,n),e=e.sibling;e!==null;)Ix(e,t,n),e=e.sibling}function Mx(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Mx(e,t,n),e=e.sibling;e!==null;)Mx(e,t,n),e=e.sibling}var Or=null,Us=!1;function ka(e,t,n){for(n=n.child;n!==null;)lA(e,t,n),n=n.sibling}function lA(e,t,n){if(mo&&typeof mo.onCommitFiberUnmount=="function")try{mo.onCommitFiberUnmount(kg,n)}catch{}switch(n.tag){case 5:ni||fc(n,t);case 6:var s=Or,c=Us;Or=null,ka(e,t,n),Or=s,Us=c,Or!==null&&(Us?(e=Or,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Or.removeChild(n.stateNode));break;case 18:Or!==null&&(Us?(e=Or,n=n.stateNode,e.nodeType===8?Jv(e.parentNode,n):e.nodeType===1&&Jv(e,n),Wd(e)):Jv(Or,n.stateNode));break;case 4:s=Or,c=Us,Or=n.stateNode.containerInfo,Us=!0,ka(e,t,n),Or=s,Us=c;break;case 0:case 11:case 14:case 15:if(!ni&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){c=s=s.next;do{var d=c,m=d.destroy;d=d.tag,m!==void 0&&(d&2||d&4)&&Ax(n,t,m),c=c.next}while(c!==s)}ka(e,t,n);break;case 1:if(!ni&&(fc(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){Xn(n,t,l)}ka(e,t,n);break;case 21:ka(e,t,n);break;case 22:n.mode&1?(ni=(s=ni)||n.memoizedState!==null,ka(e,t,n),ni=s):ka(e,t,n);break;default:ka(e,t,n)}}function C2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new C3),t.forEach(function(s){var c=R3.bind(null,e,s);n.has(s)||(n.add(s),s.then(c,c))})}}function Bs(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var c=n[s];try{var d=e,m=t,l=m;e:for(;l!==null;){switch(l.tag){case 5:Or=l.stateNode,Us=!1;break e;case 3:Or=l.stateNode.containerInfo,Us=!0;break e;case 4:Or=l.stateNode.containerInfo,Us=!0;break e}l=l.return}if(Or===null)throw Error(We(160));lA(d,m,c),Or=null,Us=!1;var w=c.alternate;w!==null&&(w.return=null),c.return=null}catch(b){Xn(c,t,b)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)uA(t,e),t=t.sibling}function uA(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bs(t,e),co(e),s&4){try{zd(3,e,e.return),Fg(3,e)}catch(Z){Xn(e,e.return,Z)}try{zd(5,e,e.return)}catch(Z){Xn(e,e.return,Z)}}break;case 1:Bs(t,e),co(e),s&512&&n!==null&&fc(n,n.return);break;case 5:if(Bs(t,e),co(e),s&512&&n!==null&&fc(n,n.return),e.flags&32){var c=e.stateNode;try{Ud(c,"")}catch(Z){Xn(e,e.return,Z)}}if(s&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,m=n!==null?n.memoizedProps:d,l=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{l==="input"&&d.type==="radio"&&d.name!=null&&IE(c,d),tx(l,m);var b=tx(l,d);for(m=0;m<w.length;m+=2){var A=w[m],k=w[m+1];A==="style"?LE(c,k):A==="dangerouslySetInnerHTML"?zE(c,k):A==="children"?Ud(c,k):A0(c,A,k,b)}switch(l){case"input":X_(c,d);break;case"textarea":ME(c,d);break;case"select":var D=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var B=d.value;B!=null?wc(c,!!d.multiple,B,!1):D!==!!d.multiple&&(d.defaultValue!=null?wc(c,!!d.multiple,d.defaultValue,!0):wc(c,!!d.multiple,d.multiple?[]:"",!1))}c[Qd]=d}catch(Z){Xn(e,e.return,Z)}}break;case 6:if(Bs(t,e),co(e),s&4){if(e.stateNode===null)throw Error(We(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(Z){Xn(e,e.return,Z)}}break;case 3:if(Bs(t,e),co(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Wd(t.containerInfo)}catch(Z){Xn(e,e.return,Z)}break;case 4:Bs(t,e),co(e);break;case 13:Bs(t,e),co(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(aw=ar())),s&4&&C2(e);break;case 22:if(A=n!==null&&n.memoizedState!==null,e.mode&1?(ni=(b=ni)||A,Bs(t,e),ni=b):Bs(t,e),co(e),s&8192){if(b=e.memoizedState!==null,(e.stateNode.isHidden=b)&&!A&&e.mode&1)for(pt=e,A=e.child;A!==null;){for(k=pt=A;pt!==null;){switch(D=pt,B=D.child,D.tag){case 0:case 11:case 14:case 15:zd(4,D,D.return);break;case 1:fc(D,D.return);var q=D.stateNode;if(typeof q.componentWillUnmount=="function"){s=D,n=D.return;try{t=s,q.props=t.memoizedProps,q.state=t.memoizedState,q.componentWillUnmount()}catch(Z){Xn(s,n,Z)}}break;case 5:fc(D,D.return);break;case 22:if(D.memoizedState!==null){E2(k);continue}}B!==null?(B.return=D,pt=B):E2(k)}A=A.sibling}e:for(A=null,k=e;;){if(k.tag===5){if(A===null){A=k;try{c=k.stateNode,b?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(l=k.stateNode,w=k.memoizedProps.style,m=w!=null&&w.hasOwnProperty("display")?w.display:null,l.style.display=RE("display",m))}catch(Z){Xn(e,e.return,Z)}}}else if(k.tag===6){if(A===null)try{k.stateNode.nodeValue=b?"":k.memoizedProps}catch(Z){Xn(e,e.return,Z)}}else if((k.tag!==22&&k.tag!==23||k.memoizedState===null||k===e)&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===e)break e;for(;k.sibling===null;){if(k.return===null||k.return===e)break e;A===k&&(A=null),k=k.return}A===k&&(A=null),k.sibling.return=k.return,k=k.sibling}}break;case 19:Bs(t,e),co(e),s&4&&C2(e);break;case 21:break;default:Bs(t,e),co(e)}}function co(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(aA(n)){var s=n;break e}n=n.return}throw Error(We(160))}switch(s.tag){case 5:var c=s.stateNode;s.flags&32&&(Ud(c,""),s.flags&=-33);var d=S2(e);Mx(e,d,c);break;case 3:case 4:var m=s.stateNode.containerInfo,l=S2(e);Ix(e,l,m);break;default:throw Error(We(161))}}catch(w){Xn(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function E3(e,t,n){pt=e,cA(e)}function cA(e,t,n){for(var s=(e.mode&1)!==0;pt!==null;){var c=pt,d=c.child;if(c.tag===22&&s){var m=c.memoizedState!==null||Xp;if(!m){var l=c.alternate,w=l!==null&&l.memoizedState!==null||ni;l=Xp;var b=ni;if(Xp=m,(ni=w)&&!b)for(pt=c;pt!==null;)m=pt,w=m.child,m.tag===22&&m.memoizedState!==null?P2(c):w!==null?(w.return=m,pt=w):P2(c);for(;d!==null;)pt=d,cA(d),d=d.sibling;pt=c,Xp=l,ni=b}T2(e)}else c.subtreeFlags&8772&&d!==null?(d.return=c,pt=d):T2(e)}}function T2(e){for(;pt!==null;){var t=pt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ni||Fg(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!ni)if(n===null)s.componentDidMount();else{var c=t.elementType===t.type?n.memoizedProps:$s(t.type,n.memoizedProps);s.componentDidUpdate(c,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&l2(t,d,s);break;case 3:var m=t.updateQueue;if(m!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}l2(t,m,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&n.focus();break;case"img":w.src&&(n.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var b=t.alternate;if(b!==null){var A=b.memoizedState;if(A!==null){var k=A.dehydrated;k!==null&&Wd(k)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(We(163))}ni||t.flags&512&&kx(t)}catch(D){Xn(t,t.return,D)}}if(t===e){pt=null;break}if(n=t.sibling,n!==null){n.return=t.return,pt=n;break}pt=t.return}}function E2(e){for(;pt!==null;){var t=pt;if(t===e){pt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,pt=n;break}pt=t.return}}function P2(e){for(;pt!==null;){var t=pt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Fg(4,t)}catch(w){Xn(t,n,w)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var c=t.return;try{s.componentDidMount()}catch(w){Xn(t,c,w)}}var d=t.return;try{kx(t)}catch(w){Xn(t,d,w)}break;case 5:var m=t.return;try{kx(t)}catch(w){Xn(t,m,w)}}}catch(w){Xn(t,t.return,w)}if(t===e){pt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,pt=l;break}pt=t.return}}var P3=Math.ceil,Qm=ia.ReactCurrentDispatcher,sw=ia.ReactCurrentOwner,bs=ia.ReactCurrentBatchConfig,tn=0,Er=null,ur=null,Nr=0,Ki=0,pc=hl(0),yr=0,sf=null,au=0,Ng=0,ow=0,Rd=null,Li=null,aw=0,Oc=1/0,Vo=null,Jm=!1,Dx=null,Xa=null,Yp=!1,Va=null,eg=0,Ld=0,zx=null,vm=-1,_m=0;function wi(){return tn&6?ar():vm!==-1?vm:vm=ar()}function Ya(e){return e.mode&1?tn&2&&Nr!==0?Nr&-Nr:c3.transition!==null?(_m===0&&(_m=WE()),_m):(e=un,e!==0||(e=window.event,e=e===void 0?16:eP(e.type)),e):1}function Hs(e,t,n,s){if(50<Ld)throw Ld=0,zx=null,Error(We(185));vf(e,n,s),(!(tn&2)||e!==Er)&&(e===Er&&(!(tn&2)&&(Ng|=n),yr===4&&Fa(e,Nr)),Vi(e,s),n===1&&tn===0&&!(t.mode&1)&&(Oc=ar()+500,Rg&&dl()))}function Vi(e,t){var n=e.callbackNode;cL(e,t);var s=Fm(e,e===Er?Nr:0);if(s===0)n!==null&&OS(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&OS(n),t===1)e.tag===0?u3(A2.bind(null,e)):_P(A2.bind(null,e)),s3(function(){!(tn&6)&&dl()}),n=null;else{switch(HE(s)){case 1:n=z0;break;case 4:n=GE;break;case 16:n=Om;break;case 536870912:n=ZE;break;default:n=Om}n=vA(n,hA.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hA(e,t){if(vm=-1,_m=0,tn&6)throw Error(We(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var s=Fm(e,e===Er?Nr:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=tg(e,s);else{t=s;var c=tn;tn|=2;var d=fA();(Er!==e||Nr!==t)&&(Vo=null,Oc=ar()+500,tu(e,t));do try{I3();break}catch(l){dA(e,l)}while(1);Z0(),Qm.current=d,tn=c,ur!==null?t=0:(Er=null,Nr=0,t=yr)}if(t!==0){if(t===2&&(c=ox(e),c!==0&&(s=c,t=Rx(e,c))),t===1)throw n=sf,tu(e,0),Fa(e,s),Vi(e,ar()),n;if(t===6)Fa(e,s);else{if(c=e.current.alternate,!(s&30)&&!A3(c)&&(t=tg(e,s),t===2&&(d=ox(e),d!==0&&(s=d,t=Rx(e,d))),t===1))throw n=sf,tu(e,0),Fa(e,s),Vi(e,ar()),n;switch(e.finishedWork=c,e.finishedLanes=s,t){case 0:case 1:throw Error(We(345));case 2:Bl(e,Li,Vo);break;case 3:if(Fa(e,s),(s&130023424)===s&&(t=aw+500-ar(),10<t)){if(Fm(e,0)!==0)break;if(c=e.suspendedLanes,(c&s)!==s){wi(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=px(Bl.bind(null,e,Li,Vo),t);break}Bl(e,Li,Vo);break;case 4:if(Fa(e,s),(s&4194240)===s)break;for(t=e.eventTimes,c=-1;0<s;){var m=31-Ws(s);d=1<<m,m=t[m],m>c&&(c=m),s&=~d}if(s=c,s=ar()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*P3(s/1960))-s,10<s){e.timeoutHandle=px(Bl.bind(null,e,Li,Vo),s);break}Bl(e,Li,Vo);break;case 5:Bl(e,Li,Vo);break;default:throw Error(We(329))}}}return Vi(e,ar()),e.callbackNode===n?hA.bind(null,e):null}function Rx(e,t){var n=Rd;return e.current.memoizedState.isDehydrated&&(tu(e,t).flags|=256),e=tg(e,t),e!==2&&(t=Li,Li=n,t!==null&&Lx(t)),e}function Lx(e){Li===null?Li=e:Li.push.apply(Li,e)}function A3(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var c=n[s],d=c.getSnapshot;c=c.value;try{if(!Ks(d(),c))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fa(e,t){for(t&=~ow,t&=~Ng,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ws(t),s=1<<n;e[n]=-1,t&=~s}}function A2(e){if(tn&6)throw Error(We(327));Ec();var t=Fm(e,0);if(!(t&1))return Vi(e,ar()),null;var n=tg(e,t);if(e.tag!==0&&n===2){var s=ox(e);s!==0&&(t=s,n=Rx(e,s))}if(n===1)throw n=sf,tu(e,0),Fa(e,t),Vi(e,ar()),n;if(n===6)throw Error(We(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Bl(e,Li,Vo),Vi(e,ar()),null}function lw(e,t){var n=tn;tn|=1;try{return e(t)}finally{tn=n,tn===0&&(Oc=ar()+500,Rg&&dl())}}function lu(e){Va!==null&&Va.tag===0&&!(tn&6)&&Ec();var t=tn;tn|=1;var n=bs.transition,s=un;try{if(bs.transition=null,un=1,e)return e()}finally{un=s,bs.transition=n,tn=t,!(tn&6)&&dl()}}function uw(){Ki=pc.current,zn(pc)}function tu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,i3(n)),ur!==null)for(n=ur.return;n!==null;){var s=n;switch(U0(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&jm();break;case 3:Rc(),zn(Ni),zn(ii),Q0();break;case 5:Y0(s);break;case 4:Rc();break;case 13:zn(jn);break;case 19:zn(jn);break;case 10:W0(s.type._context);break;case 22:case 23:uw()}n=n.return}if(Er=e,ur=e=Qa(e.current,null),Nr=Ki=t,yr=0,sf=null,ow=Ng=au=0,Li=Rd=null,Wl!==null){for(t=0;t<Wl.length;t++)if(n=Wl[t],s=n.interleaved,s!==null){n.interleaved=null;var c=s.next,d=n.pending;if(d!==null){var m=d.next;d.next=c,s.next=m}n.pending=s}Wl=null}return e}function dA(e,t){do{var n=ur;try{if(Z0(),mm.current=Ym,Xm){for(var s=qn.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}Xm=!1}if(ou=0,Tr=gr=qn=null,Dd=!1,tf=0,sw.current=null,n===null||n.return===null){yr=1,sf=t,ur=null;break}e:{var d=e,m=n.return,l=n,w=t;if(t=Nr,l.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var b=w,A=l,k=A.tag;if(!(A.mode&1)&&(k===0||k===11||k===15)){var D=A.alternate;D?(A.updateQueue=D.updateQueue,A.memoizedState=D.memoizedState,A.lanes=D.lanes):(A.updateQueue=null,A.memoizedState=null)}var B=m2(m);if(B!==null){B.flags&=-257,g2(B,m,l,d,t),B.mode&1&&p2(d,b,t),t=B,w=b;var q=t.updateQueue;if(q===null){var Z=new Set;Z.add(w),t.updateQueue=Z}else q.add(w);break e}else{if(!(t&1)){p2(d,b,t),cw();break e}w=Error(We(426))}}else if(Nn&&l.mode&1){var K=m2(m);if(K!==null){!(K.flags&65536)&&(K.flags|=256),g2(K,m,l,d,t),q0(Lc(w,l));break e}}d=w=Lc(w,l),yr!==4&&(yr=2),Rd===null?Rd=[d]:Rd.push(d),d=m;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var N=KP(d,w,t);a2(d,N);break e;case 1:l=w;var F=d.type,H=d.stateNode;if(!(d.flags&128)&&(typeof F.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Xa===null||!Xa.has(H)))){d.flags|=65536,t&=-t,d.lanes|=t;var te=XP(d,l,t);a2(d,te);break e}}d=d.return}while(d!==null)}mA(n)}catch(me){t=me,ur===n&&n!==null&&(ur=n=n.return);continue}break}while(1)}function fA(){var e=Qm.current;return Qm.current=Ym,e===null?Ym:e}function cw(){(yr===0||yr===3||yr===2)&&(yr=4),Er===null||!(au&268435455)&&!(Ng&268435455)||Fa(Er,Nr)}function tg(e,t){var n=tn;tn|=2;var s=fA();(Er!==e||Nr!==t)&&(Vo=null,tu(e,t));do try{k3();break}catch(c){dA(e,c)}while(1);if(Z0(),tn=n,Qm.current=s,ur!==null)throw Error(We(261));return Er=null,Nr=0,yr}function k3(){for(;ur!==null;)pA(ur)}function I3(){for(;ur!==null&&!tL();)pA(ur)}function pA(e){var t=yA(e.alternate,e,Ki);e.memoizedProps=e.pendingProps,t===null?mA(e):ur=t,sw.current=null}function mA(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=S3(n,t),n!==null){n.flags&=32767,ur=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{yr=6,ur=null;return}}else if(n=b3(n,t,Ki),n!==null){ur=n;return}if(t=t.sibling,t!==null){ur=t;return}ur=t=e}while(t!==null);yr===0&&(yr=5)}function Bl(e,t,n){var s=un,c=bs.transition;try{bs.transition=null,un=1,M3(e,t,n,s)}finally{bs.transition=c,un=s}return null}function M3(e,t,n,s){do Ec();while(Va!==null);if(tn&6)throw Error(We(327));n=e.finishedWork;var c=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(We(177));e.callbackNode=null,e.callbackPriority=0;var d=n.lanes|n.childLanes;if(hL(e,d),e===Er&&(ur=Er=null,Nr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yp||(Yp=!0,vA(Om,function(){return Ec(),null})),d=(n.flags&15990)!==0,n.subtreeFlags&15990||d){d=bs.transition,bs.transition=null;var m=un;un=1;var l=tn;tn|=4,sw.current=null,T3(e,n),uA(n,e),YL(dx),Nm=!!hx,dx=hx=null,e.current=n,E3(n),nL(),tn=l,un=m,bs.transition=d}else e.current=n;if(Yp&&(Yp=!1,Va=e,eg=c),d=e.pendingLanes,d===0&&(Xa=null),sL(n.stateNode),Vi(e,ar()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)c=t[n],s(c.value,{componentStack:c.stack,digest:c.digest});if(Jm)throw Jm=!1,e=Dx,Dx=null,e;return eg&1&&e.tag!==0&&Ec(),d=e.pendingLanes,d&1?e===zx?Ld++:(Ld=0,zx=e):Ld=0,dl(),null}function Ec(){if(Va!==null){var e=HE(eg),t=bs.transition,n=un;try{if(bs.transition=null,un=16>e?16:e,Va===null)var s=!1;else{if(e=Va,Va=null,eg=0,tn&6)throw Error(We(331));var c=tn;for(tn|=4,pt=e.current;pt!==null;){var d=pt,m=d.child;if(pt.flags&16){var l=d.deletions;if(l!==null){for(var w=0;w<l.length;w++){var b=l[w];for(pt=b;pt!==null;){var A=pt;switch(A.tag){case 0:case 11:case 15:zd(8,A,d)}var k=A.child;if(k!==null)k.return=A,pt=k;else for(;pt!==null;){A=pt;var D=A.sibling,B=A.return;if(oA(A),A===b){pt=null;break}if(D!==null){D.return=B,pt=D;break}pt=B}}}var q=d.alternate;if(q!==null){var Z=q.child;if(Z!==null){q.child=null;do{var K=Z.sibling;Z.sibling=null,Z=K}while(Z!==null)}}pt=d}}if(d.subtreeFlags&2064&&m!==null)m.return=d,pt=m;else e:for(;pt!==null;){if(d=pt,d.flags&2048)switch(d.tag){case 0:case 11:case 15:zd(9,d,d.return)}var N=d.sibling;if(N!==null){N.return=d.return,pt=N;break e}pt=d.return}}var F=e.current;for(pt=F;pt!==null;){m=pt;var H=m.child;if(m.subtreeFlags&2064&&H!==null)H.return=m,pt=H;else e:for(m=F;pt!==null;){if(l=pt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Fg(9,l)}}catch(me){Xn(l,l.return,me)}if(l===m){pt=null;break e}var te=l.sibling;if(te!==null){te.return=l.return,pt=te;break e}pt=l.return}}if(tn=c,dl(),mo&&typeof mo.onPostCommitFiberRoot=="function")try{mo.onPostCommitFiberRoot(kg,e)}catch{}s=!0}return s}finally{un=n,bs.transition=t}}return!1}function k2(e,t,n){t=Lc(n,t),t=KP(e,t,1),e=Ka(e,t,1),t=wi(),e!==null&&(vf(e,1,t),Vi(e,t))}function Xn(e,t,n){if(e.tag===3)k2(e,e,n);else for(;t!==null;){if(t.tag===3){k2(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Xa===null||!Xa.has(s))){e=Lc(n,e),e=XP(t,e,1),t=Ka(t,e,1),e=wi(),t!==null&&(vf(t,1,e),Vi(t,e));break}}t=t.return}}function D3(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=wi(),e.pingedLanes|=e.suspendedLanes&n,Er===e&&(Nr&n)===n&&(yr===4||yr===3&&(Nr&130023424)===Nr&&500>ar()-aw?tu(e,0):ow|=n),Vi(e,t)}function gA(e,t){t===0&&(e.mode&1?(t=$p,$p<<=1,!($p&130023424)&&($p=4194304)):t=1);var n=wi();e=ta(e,t),e!==null&&(vf(e,t,n),Vi(e,n))}function z3(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),gA(e,n)}function R3(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(We(314))}s!==null&&s.delete(t),gA(e,n)}var yA;yA=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ni.current)Oi=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Oi=!1,w3(e,t,n);Oi=!!(e.flags&131072)}else Oi=!1,Nn&&t.flags&1048576&&xP(t,Gm,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;ym(e,t),e=t.pendingProps;var c=Mc(t,ii.current);Tc(t,n),c=ew(null,t,s,e,c,n);var d=tw();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bi(s)?(d=!0,Um(t)):d=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,K0(t),c.updater=Lg,t.stateNode=c,c._reactInternals=t,wx(t,s,e,n),t=Cx(null,t,s,!0,d,n)):(t.tag=0,Nn&&d&&j0(t),yi(null,t,c,n),t=t.child),t;case 16:s=t.elementType;e:{switch(ym(e,t),e=t.pendingProps,c=s._init,s=c(s._payload),t.type=s,c=t.tag=O3(s),e=$s(s,e),c){case 0:t=Sx(null,t,s,e,n);break e;case 1:t=_2(null,t,s,e,n);break e;case 11:t=y2(null,t,s,e,n);break e;case 14:t=v2(null,t,s,$s(s.type,e),n);break e}throw Error(We(306,s,""))}return t;case 0:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:$s(s,c),Sx(e,t,s,c,n);case 1:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:$s(s,c),_2(e,t,s,c,n);case 3:e:{if(eA(t),e===null)throw Error(We(387));s=t.pendingProps,d=t.memoizedState,c=d.element,CP(e,t),Hm(t,s,null,n);var m=t.memoizedState;if(s=m.element,d.isDehydrated)if(d={element:s,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){c=Lc(Error(We(423)),t),t=x2(e,t,s,n,c);break e}else if(s!==c){c=Lc(Error(We(424)),t),t=x2(e,t,s,n,c);break e}else for(Xi=Ha(t.stateNode.containerInfo.firstChild),Qi=t,Nn=!0,qs=null,n=AP(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Dc(),s===c){t=na(e,t,n);break e}yi(e,t,s,n)}t=t.child}return t;case 5:return kP(t),e===null&&vx(t),s=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,m=c.children,fx(s,c)?m=null:d!==null&&fx(s,d)&&(t.flags|=32),JP(e,t),yi(e,t,m,n),t.child;case 6:return e===null&&vx(t),null;case 13:return tA(e,t,n);case 4:return X0(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=zc(t,null,s,n):yi(e,t,s,n),t.child;case 11:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:$s(s,c),y2(e,t,s,c,n);case 7:return yi(e,t,t.pendingProps,n),t.child;case 8:return yi(e,t,t.pendingProps.children,n),t.child;case 12:return yi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,c=t.pendingProps,d=t.memoizedProps,m=c.value,Tn(Zm,s._currentValue),s._currentValue=m,d!==null)if(Ks(d.value,m)){if(d.children===c.children&&!Ni.current){t=na(e,t,n);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var l=d.dependencies;if(l!==null){m=d.child;for(var w=l.firstContext;w!==null;){if(w.context===s){if(d.tag===1){w=Ho(-1,n&-n),w.tag=2;var b=d.updateQueue;if(b!==null){b=b.shared;var A=b.pending;A===null?w.next=w:(w.next=A.next,A.next=w),b.pending=w}}d.lanes|=n,w=d.alternate,w!==null&&(w.lanes|=n),_x(d.return,n,t),l.lanes|=n;break}w=w.next}}else if(d.tag===10)m=d.type===t.type?null:d.child;else if(d.tag===18){if(m=d.return,m===null)throw Error(We(341));m.lanes|=n,l=m.alternate,l!==null&&(l.lanes|=n),_x(m,n,t),m=d.sibling}else m=d.child;if(m!==null)m.return=d;else for(m=d;m!==null;){if(m===t){m=null;break}if(d=m.sibling,d!==null){d.return=m.return,m=d;break}m=m.return}d=m}yi(e,t,c.children,n),t=t.child}return t;case 9:return c=t.type,s=t.pendingProps.children,Tc(t,n),c=Ss(c),s=s(c),t.flags|=1,yi(e,t,s,n),t.child;case 14:return s=t.type,c=$s(s,t.pendingProps),c=$s(s.type,c),v2(e,t,s,c,n);case 15:return YP(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:$s(s,c),ym(e,t),t.tag=1,Bi(s)?(e=!0,Um(t)):e=!1,Tc(t,n),EP(t,s,c),wx(t,s,c,n),Cx(null,t,s,!0,e,n);case 19:return nA(e,t,n);case 22:return QP(e,t,n)}throw Error(We(156,t.tag))};function vA(e,t){return qE(e,t)}function L3(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ws(e,t,n,s){return new L3(e,t,n,s)}function hw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function O3(e){if(typeof e=="function")return hw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===I0)return 11;if(e===M0)return 14}return 2}function Qa(e,t){var n=e.alternate;return n===null?(n=ws(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function xm(e,t,n,s,c,d){var m=2;if(s=e,typeof e=="function")hw(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case ic:return nu(n.children,c,d,t);case k0:m=8,c|=8;break;case G_:return e=ws(12,n,t,c|2),e.elementType=G_,e.lanes=d,e;case Z_:return e=ws(13,n,t,c),e.elementType=Z_,e.lanes=d,e;case W_:return e=ws(19,n,t,c),e.elementType=W_,e.lanes=d,e;case PE:return Bg(n,c,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case TE:m=10;break e;case EE:m=9;break e;case I0:m=11;break e;case M0:m=14;break e;case za:m=16,s=null;break e}throw Error(We(130,e==null?e:typeof e,""))}return t=ws(m,n,t,c),t.elementType=e,t.type=s,t.lanes=d,t}function nu(e,t,n,s){return e=ws(7,e,s,t),e.lanes=n,e}function Bg(e,t,n,s){return e=ws(22,e,s,t),e.elementType=PE,e.lanes=n,e.stateNode={isHidden:!1},e}function a_(e,t,n){return e=ws(6,e,null,t),e.lanes=n,e}function l_(e,t,n){return t=ws(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function F3(e,t,n,s,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jv(0),this.expirationTimes=jv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jv(0),this.identifierPrefix=s,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function dw(e,t,n,s,c,d,m,l,w){return e=new F3(e,t,n,l,w),t===1?(t=1,d===!0&&(t|=8)):t=0,d=ws(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},K0(d),e}function N3(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rc,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function _A(e){if(!e)return rl;e=e._reactInternals;e:{if(du(e)!==e||e.tag!==1)throw Error(We(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(We(171))}if(e.tag===1){var n=e.type;if(Bi(n))return vP(e,n,t)}return t}function xA(e,t,n,s,c,d,m,l,w){return e=dw(n,s,!0,e,c,d,m,l,w),e.context=_A(null),n=e.current,s=wi(),c=Ya(n),d=Ho(s,c),d.callback=t??null,Ka(n,d,c),e.current.lanes=c,vf(e,c,s),Vi(e,s),e}function Vg(e,t,n,s){var c=t.current,d=wi(),m=Ya(c);return n=_A(n),t.context===null?t.context=n:t.pendingContext=n,t=Ho(d,m),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Ka(c,t,m),e!==null&&(Hs(e,c,m,d),pm(e,c,m)),m}function ng(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function I2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function fw(e,t){I2(e,t),(e=e.alternate)&&I2(e,t)}function B3(){return null}var wA=typeof reportError=="function"?reportError:function(e){console.error(e)};function pw(e){this._internalRoot=e}$g.prototype.render=pw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(We(409));Vg(e,t,null,null)};$g.prototype.unmount=pw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lu(function(){Vg(null,e,null,null)}),t[ea]=null}};function $g(e){this._internalRoot=e}$g.prototype.unstable_scheduleHydration=function(e){if(e){var t=YE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Oa.length&&t!==0&&t<Oa[n].priority;n++);Oa.splice(n,0,e),n===0&&JE(e)}};function mw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function M2(){}function V3(e,t,n,s,c){if(c){if(typeof s=="function"){var d=s;s=function(){var b=ng(m);d.call(b)}}var m=xA(t,s,e,0,null,!1,!1,"",M2);return e._reactRootContainer=m,e[ea]=m.current,Xd(e.nodeType===8?e.parentNode:e),lu(),m}for(;c=e.lastChild;)e.removeChild(c);if(typeof s=="function"){var l=s;s=function(){var b=ng(w);l.call(b)}}var w=dw(e,0,!1,null,null,!1,!1,"",M2);return e._reactRootContainer=w,e[ea]=w.current,Xd(e.nodeType===8?e.parentNode:e),lu(function(){Vg(t,w,n,s)}),w}function Ug(e,t,n,s,c){var d=n._reactRootContainer;if(d){var m=d;if(typeof c=="function"){var l=c;c=function(){var w=ng(m);l.call(w)}}Vg(t,m,e,c)}else m=V3(n,t,e,c,s);return ng(m)}KE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=xd(t.pendingLanes);n!==0&&(R0(t,n|1),Vi(t,ar()),!(tn&6)&&(Oc=ar()+500,dl()))}break;case 13:lu(function(){var s=ta(e,1);if(s!==null){var c=wi();Hs(s,e,1,c)}}),fw(e,1)}};L0=function(e){if(e.tag===13){var t=ta(e,134217728);if(t!==null){var n=wi();Hs(t,e,134217728,n)}fw(e,134217728)}};XE=function(e){if(e.tag===13){var t=Ya(e),n=ta(e,t);if(n!==null){var s=wi();Hs(n,e,t,s)}fw(e,t)}};YE=function(){return un};QE=function(e,t){var n=un;try{return un=e,t()}finally{un=n}};rx=function(e,t,n){switch(t){case"input":if(X_(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var c=zg(s);if(!c)throw Error(We(90));kE(s),X_(s,c)}}}break;case"textarea":ME(e,n);break;case"select":t=n.value,t!=null&&wc(e,!!n.multiple,t,!1)}};NE=lw;BE=lu;var $3={usingClientEntryPoint:!1,Events:[xf,lc,zg,OE,FE,lw]},dd={findFiberByHostInstance:Zl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},j3={bundleType:dd.bundleType,version:dd.version,rendererPackageName:dd.rendererPackageName,rendererConfig:dd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ia.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=jE(e),e===null?null:e.stateNode},findFiberByHostInstance:dd.findFiberByHostInstance||B3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qp.isDisabled&&Qp.supportsFiber)try{kg=Qp.inject(j3),mo=Qp}catch{}}ns.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$3;ns.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mw(t))throw Error(We(200));return N3(e,t,null,n)};ns.createRoot=function(e,t){if(!mw(e))throw Error(We(299));var n=!1,s="",c=wA;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=dw(e,1,!1,null,null,n,!1,s,c),e[ea]=t.current,Xd(e.nodeType===8?e.parentNode:e),new pw(t)};ns.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(We(188)):(e=Object.keys(e).join(","),Error(We(268,e)));return e=jE(t),e=e===null?null:e.stateNode,e};ns.flushSync=function(e){return lu(e)};ns.hydrate=function(e,t,n){if(!jg(t))throw Error(We(200));return Ug(null,e,t,!0,n)};ns.hydrateRoot=function(e,t,n){if(!mw(e))throw Error(We(405));var s=n!=null&&n.hydratedSources||null,c=!1,d="",m=wA;if(n!=null&&(n.unstable_strictMode===!0&&(c=!0),n.identifierPrefix!==void 0&&(d=n.identifierPrefix),n.onRecoverableError!==void 0&&(m=n.onRecoverableError)),t=xA(t,null,e,1,n??null,c,!1,d,m),e[ea]=t.current,Xd(e),s)for(e=0;e<s.length;e++)n=s[e],c=n._getVersion,c=c(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,c]:t.mutableSourceEagerHydrationData.push(n,c);return new $g(t)};ns.render=function(e,t,n){if(!jg(t))throw Error(We(200));return Ug(null,e,t,!1,n)};ns.unmountComponentAtNode=function(e){if(!jg(e))throw Error(We(40));return e._reactRootContainer?(lu(function(){Ug(null,null,e,!1,function(){e._reactRootContainer=null,e[ea]=null})}),!0):!1};ns.unstable_batchedUpdates=lw;ns.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!jg(n))throw Error(We(200));if(e==null||e._reactInternals===void 0)throw Error(We(38));return Ug(e,t,n,!1,s)};ns.version="18.2.0-next-9e3b772b8-20220608";function bA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bA)}catch(e){console.error(e)}}bA(),xE.exports=ns;var gw=xE.exports;const Jp=lE(gw);var D2=gw;U_.createRoot=D2.createRoot,U_.hydrateRoot=D2.hydrateRoot;var SA={exports:{}},CA={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fc=ie;function U3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var q3=typeof Object.is=="function"?Object.is:U3,G3=Fc.useState,Z3=Fc.useEffect,W3=Fc.useLayoutEffect,H3=Fc.useDebugValue;function K3(e,t){var n=t(),s=G3({inst:{value:n,getSnapshot:t}}),c=s[0].inst,d=s[1];return W3(function(){c.value=n,c.getSnapshot=t,u_(c)&&d({inst:c})},[e,n,t]),Z3(function(){return u_(c)&&d({inst:c}),e(function(){u_(c)&&d({inst:c})})},[e]),H3(n),n}function u_(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!q3(e,n)}catch{return!0}}function X3(e,t){return t()}var Y3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?X3:K3;CA.useSyncExternalStore=Fc.useSyncExternalStore!==void 0?Fc.useSyncExternalStore:Y3;SA.exports=CA;var Q3=SA.exports,TA={exports:{}},EA={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qg=ie,J3=Q3;function eO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tO=typeof Object.is=="function"?Object.is:eO,nO=J3.useSyncExternalStore,rO=qg.useRef,iO=qg.useEffect,sO=qg.useMemo,oO=qg.useDebugValue;EA.useSyncExternalStoreWithSelector=function(e,t,n,s,c){var d=rO(null);if(d.current===null){var m={hasValue:!1,value:null};d.current=m}else m=d.current;d=sO(function(){function w(B){if(!b){if(b=!0,A=B,B=s(B),c!==void 0&&m.hasValue){var q=m.value;if(c(q,B))return k=q}return k=B}if(q=k,tO(A,B))return q;var Z=s(B);return c!==void 0&&c(q,Z)?q:(A=B,k=Z)}var b=!1,A,k,D=n===void 0?null:n;return[function(){return w(t())},D===null?void 0:function(){return w(D())}]},[t,n,s,c]);var l=nO(e,d[0],d[1]);return iO(function(){m.hasValue=!0,m.value=l},[l]),oO(l),l};TA.exports=EA;var aO=TA.exports;function lO(e){e()}let PA=lO;const uO=e=>PA=e,cO=()=>PA,z2=Symbol.for("react-redux-context"),R2=typeof globalThis<"u"?globalThis:{};function hO(){var e;if(!ie.createContext)return{};const t=(e=R2[z2])!=null?e:R2[z2]=new Map;let n=t.get(ie.createContext);return n||(n=ie.createContext(null),t.set(ie.createContext,n)),n}const il=hO();function yw(e=il){return function(){return ie.useContext(e)}}const AA=yw(),dO=()=>{throw new Error("uSES not initialized!")};let kA=dO;const fO=e=>{kA=e},pO=(e,t)=>e===t;function mO(e=il){const t=e===il?AA:yw(e);return function(s,c={}){const{equalityFn:d=pO,stabilityCheck:m=void 0,noopCheck:l=void 0}=typeof c=="function"?{equalityFn:c}:c,{store:w,subscription:b,getServerState:A,stabilityCheck:k,noopCheck:D}=t();ie.useRef(!0);const B=ie.useCallback({[s.name](Z){return s(Z)}}[s.name],[s,k,m]),q=kA(b.addNestedSub,w.getState,A||w.getState,B,d);return ie.useDebugValue(q),q}}const gO=mO();function uu(){return uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},uu.apply(this,arguments)}function vw(e,t){if(e==null)return{};var n={},s=Object.keys(e),c,d;for(d=0;d<s.length;d++)c=s[d],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}var IA={exports:{}},cn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pr=typeof Symbol=="function"&&Symbol.for,_w=Pr?Symbol.for("react.element"):60103,xw=Pr?Symbol.for("react.portal"):60106,Gg=Pr?Symbol.for("react.fragment"):60107,Zg=Pr?Symbol.for("react.strict_mode"):60108,Wg=Pr?Symbol.for("react.profiler"):60114,Hg=Pr?Symbol.for("react.provider"):60109,Kg=Pr?Symbol.for("react.context"):60110,ww=Pr?Symbol.for("react.async_mode"):60111,Xg=Pr?Symbol.for("react.concurrent_mode"):60111,Yg=Pr?Symbol.for("react.forward_ref"):60112,Qg=Pr?Symbol.for("react.suspense"):60113,yO=Pr?Symbol.for("react.suspense_list"):60120,Jg=Pr?Symbol.for("react.memo"):60115,ey=Pr?Symbol.for("react.lazy"):60116,vO=Pr?Symbol.for("react.block"):60121,_O=Pr?Symbol.for("react.fundamental"):60117,xO=Pr?Symbol.for("react.responder"):60118,wO=Pr?Symbol.for("react.scope"):60119;function is(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case _w:switch(e=e.type,e){case ww:case Xg:case Gg:case Wg:case Zg:case Qg:return e;default:switch(e=e&&e.$$typeof,e){case Kg:case Yg:case ey:case Jg:case Hg:return e;default:return t}}case xw:return t}}}function MA(e){return is(e)===Xg}cn.AsyncMode=ww;cn.ConcurrentMode=Xg;cn.ContextConsumer=Kg;cn.ContextProvider=Hg;cn.Element=_w;cn.ForwardRef=Yg;cn.Fragment=Gg;cn.Lazy=ey;cn.Memo=Jg;cn.Portal=xw;cn.Profiler=Wg;cn.StrictMode=Zg;cn.Suspense=Qg;cn.isAsyncMode=function(e){return MA(e)||is(e)===ww};cn.isConcurrentMode=MA;cn.isContextConsumer=function(e){return is(e)===Kg};cn.isContextProvider=function(e){return is(e)===Hg};cn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===_w};cn.isForwardRef=function(e){return is(e)===Yg};cn.isFragment=function(e){return is(e)===Gg};cn.isLazy=function(e){return is(e)===ey};cn.isMemo=function(e){return is(e)===Jg};cn.isPortal=function(e){return is(e)===xw};cn.isProfiler=function(e){return is(e)===Wg};cn.isStrictMode=function(e){return is(e)===Zg};cn.isSuspense=function(e){return is(e)===Qg};cn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Gg||e===Xg||e===Wg||e===Zg||e===Qg||e===yO||typeof e=="object"&&e!==null&&(e.$$typeof===ey||e.$$typeof===Jg||e.$$typeof===Hg||e.$$typeof===Kg||e.$$typeof===Yg||e.$$typeof===_O||e.$$typeof===xO||e.$$typeof===wO||e.$$typeof===vO)};cn.typeOf=is;IA.exports=cn;var bO=IA.exports,DA=bO,SO={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},CO={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},zA={};zA[DA.ForwardRef]=SO;zA[DA.Memo]=CO;var mn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bw=Symbol.for("react.element"),Sw=Symbol.for("react.portal"),ty=Symbol.for("react.fragment"),ny=Symbol.for("react.strict_mode"),ry=Symbol.for("react.profiler"),iy=Symbol.for("react.provider"),sy=Symbol.for("react.context"),TO=Symbol.for("react.server_context"),oy=Symbol.for("react.forward_ref"),ay=Symbol.for("react.suspense"),ly=Symbol.for("react.suspense_list"),uy=Symbol.for("react.memo"),cy=Symbol.for("react.lazy"),EO=Symbol.for("react.offscreen"),RA;RA=Symbol.for("react.module.reference");function Ts(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case bw:switch(e=e.type,e){case ty:case ry:case ny:case ay:case ly:return e;default:switch(e=e&&e.$$typeof,e){case TO:case sy:case oy:case cy:case uy:case iy:return e;default:return t}}case Sw:return t}}}mn.ContextConsumer=sy;mn.ContextProvider=iy;mn.Element=bw;mn.ForwardRef=oy;mn.Fragment=ty;mn.Lazy=cy;mn.Memo=uy;mn.Portal=Sw;mn.Profiler=ry;mn.StrictMode=ny;mn.Suspense=ay;mn.SuspenseList=ly;mn.isAsyncMode=function(){return!1};mn.isConcurrentMode=function(){return!1};mn.isContextConsumer=function(e){return Ts(e)===sy};mn.isContextProvider=function(e){return Ts(e)===iy};mn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===bw};mn.isForwardRef=function(e){return Ts(e)===oy};mn.isFragment=function(e){return Ts(e)===ty};mn.isLazy=function(e){return Ts(e)===cy};mn.isMemo=function(e){return Ts(e)===uy};mn.isPortal=function(e){return Ts(e)===Sw};mn.isProfiler=function(e){return Ts(e)===ry};mn.isStrictMode=function(e){return Ts(e)===ny};mn.isSuspense=function(e){return Ts(e)===ay};mn.isSuspenseList=function(e){return Ts(e)===ly};mn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ty||e===ry||e===ny||e===ay||e===ly||e===EO||typeof e=="object"&&e!==null&&(e.$$typeof===cy||e.$$typeof===uy||e.$$typeof===iy||e.$$typeof===sy||e.$$typeof===oy||e.$$typeof===RA||e.getModuleId!==void 0)};mn.typeOf=Ts;function PO(){const e=cO();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let s=t;for(;s;)s.callback(),s=s.next})},get(){let s=[],c=t;for(;c;)s.push(c),c=c.next;return s},subscribe(s){let c=!0,d=n={callback:s,next:null,prev:n};return d.prev?d.prev.next=d:t=d,function(){!c||t===null||(c=!1,d.next?d.next.prev=d.prev:n=d.prev,d.prev?d.prev.next=d.next:t=d.next)}}}}const L2={notify(){},get:()=>[]};function AO(e,t){let n,s=L2,c=0,d=!1;function m(Z){A();const K=s.subscribe(Z);let N=!1;return()=>{N||(N=!0,K(),k())}}function l(){s.notify()}function w(){q.onStateChange&&q.onStateChange()}function b(){return d}function A(){c++,n||(n=t?t.addNestedSub(w):e.subscribe(w),s=PO())}function k(){c--,n&&c===0&&(n(),n=void 0,s.clear(),s=L2)}function D(){d||(d=!0,A())}function B(){d&&(d=!1,k())}const q={addNestedSub:m,notifyNestedSubs:l,handleChangeWrapper:w,isSubscribed:b,trySubscribe:D,tryUnsubscribe:B,getListeners:()=>s};return q}const kO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IO=kO?ie.useLayoutEffect:ie.useEffect;function MO({store:e,context:t,children:n,serverState:s,stabilityCheck:c="once",noopCheck:d="once"}){const m=ie.useMemo(()=>{const b=AO(e);return{store:e,subscription:b,getServerState:s?()=>s:void 0,stabilityCheck:c,noopCheck:d}},[e,s,c,d]),l=ie.useMemo(()=>e.getState(),[e]);IO(()=>{const{subscription:b}=m;return b.onStateChange=b.notifyNestedSubs,b.trySubscribe(),l!==e.getState()&&b.notifyNestedSubs(),()=>{b.tryUnsubscribe(),b.onStateChange=void 0}},[m,l]);const w=t||il;return ie.createElement(w.Provider,{value:m},n)}function LA(e=il){const t=e===il?AA:yw(e);return function(){const{store:s}=t();return s}}const DO=LA();function zO(e=il){const t=e===il?DO:LA(e);return function(){return t().dispatch}}const OA=zO();fO(aO.useSyncExternalStoreWithSelector);uO(gw.unstable_batchedUpdates);/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function of(){return of=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},of.apply(this,arguments)}var $a;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})($a||($a={}));const O2="popstate";function RO(e){e===void 0&&(e={});function t(s,c){let{pathname:d,search:m,hash:l}=s.location;return Ox("",{pathname:d,search:m,hash:l},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(s,c){return typeof c=="string"?c:rg(c)}return OO(t,n,null,e)}function Gn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function FA(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function LO(){return Math.random().toString(36).substr(2,8)}function F2(e,t){return{usr:e.state,key:e.key,idx:t}}function Ox(e,t,n,s){return n===void 0&&(n=null),of({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Wc(t):t,{state:n,key:t&&t.key||s||LO()})}function rg(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Wc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function OO(e,t,n,s){s===void 0&&(s={});let{window:c=document.defaultView,v5Compat:d=!1}=s,m=c.history,l=$a.Pop,w=null,b=A();b==null&&(b=0,m.replaceState(of({},m.state,{idx:b}),""));function A(){return(m.state||{idx:null}).idx}function k(){l=$a.Pop;let K=A(),N=K==null?null:K-b;b=K,w&&w({action:l,location:Z.location,delta:N})}function D(K,N){l=$a.Push;let F=Ox(Z.location,K,N);n&&n(F,K),b=A()+1;let H=F2(F,b),te=Z.createHref(F);try{m.pushState(H,"",te)}catch(me){if(me instanceof DOMException&&me.name==="DataCloneError")throw me;c.location.assign(te)}d&&w&&w({action:l,location:Z.location,delta:1})}function B(K,N){l=$a.Replace;let F=Ox(Z.location,K,N);n&&n(F,K),b=A();let H=F2(F,b),te=Z.createHref(F);m.replaceState(H,"",te),d&&w&&w({action:l,location:Z.location,delta:0})}function q(K){let N=c.location.origin!=="null"?c.location.origin:c.location.href,F=typeof K=="string"?K:rg(K);return F=F.replace(/ $/,"%20"),Gn(N,"No window.location.(origin|href) available to create URL for href: "+F),new URL(F,N)}let Z={get action(){return l},get location(){return e(c,m)},listen(K){if(w)throw new Error("A history only accepts one active listener");return c.addEventListener(O2,k),w=K,()=>{c.removeEventListener(O2,k),w=null}},createHref(K){return t(c,K)},createURL:q,encodeLocation(K){let N=q(K);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:D,replace:B,go(K){return m.go(K)}};return Z}var N2;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(N2||(N2={}));function FO(e,t,n){n===void 0&&(n="/");let s=typeof t=="string"?Wc(t):t,c=Nc(s.pathname||"/",n);if(c==null)return null;let d=NA(e);NO(d);let m=null;for(let l=0;m==null&&l<d.length;++l){let w=KO(c);m=WO(d[l],w)}return m}function NA(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let c=(d,m,l)=>{let w={relativePath:l===void 0?d.path||"":l,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};w.relativePath.startsWith("/")&&(Gn(w.relativePath.startsWith(s),'Absolute route path "'+w.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),w.relativePath=w.relativePath.slice(s.length));let b=Ja([s,w.relativePath]),A=n.concat(w);d.children&&d.children.length>0&&(Gn(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+b+'".')),NA(d.children,t,A,b)),!(d.path==null&&!d.index)&&t.push({path:b,score:GO(b,d.index),routesMeta:A})};return e.forEach((d,m)=>{var l;if(d.path===""||!((l=d.path)!=null&&l.includes("?")))c(d,m);else for(let w of BA(d.path))c(d,m,w)}),t}function BA(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,c=n.endsWith("?"),d=n.replace(/\?$/,"");if(s.length===0)return c?[d,""]:[d];let m=BA(s.join("/")),l=[];return l.push(...m.map(w=>w===""?d:[d,w].join("/"))),c&&l.push(...m),l.map(w=>e.startsWith("/")&&w===""?"/":w)}function NO(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:ZO(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const BO=/^:[\w-]+$/,VO=3,$O=2,jO=1,UO=10,qO=-2,B2=e=>e==="*";function GO(e,t){let n=e.split("/"),s=n.length;return n.some(B2)&&(s+=qO),t&&(s+=$O),n.filter(c=>!B2(c)).reduce((c,d)=>c+(BO.test(d)?VO:d===""?jO:UO),s)}function ZO(e,t){return e.length===t.length&&e.slice(0,-1).every((s,c)=>s===t[c])?e[e.length-1]-t[t.length-1]:0}function WO(e,t){let{routesMeta:n}=e,s={},c="/",d=[];for(let m=0;m<n.length;++m){let l=n[m],w=m===n.length-1,b=c==="/"?t:t.slice(c.length)||"/",A=Fx({path:l.relativePath,caseSensitive:l.caseSensitive,end:w},b);if(!A)return null;Object.assign(s,A.params);let k=l.route;d.push({params:s,pathname:Ja([c,A.pathname]),pathnameBase:JO(Ja([c,A.pathnameBase])),route:k}),A.pathnameBase!=="/"&&(c=Ja([c,A.pathnameBase]))}return d}function Fx(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=HO(e.path,e.caseSensitive,e.end),c=t.match(n);if(!c)return null;let d=c[0],m=d.replace(/(.)\/+$/,"$1"),l=c.slice(1);return{params:s.reduce((b,A,k)=>{let{paramName:D,isOptional:B}=A;if(D==="*"){let Z=l[k]||"";m=d.slice(0,d.length-Z.length).replace(/(.)\/+$/,"$1")}const q=l[k];return B&&!q?b[D]=void 0:b[D]=(q||"").replace(/%2F/g,"/"),b},{}),pathname:d,pathnameBase:m,pattern:e}}function HO(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),FA(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,l,w)=>(s.push({paramName:l,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),s]}function KO(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return FA(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Nc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function XO(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:c=""}=typeof e=="string"?Wc(e):e;return{pathname:n?n.startsWith("/")?n:YO(n,t):t,search:e5(s),hash:t5(c)}}function YO(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?n.length>1&&n.pop():c!=="."&&n.push(c)}),n.length>1?n.join("/"):"/"}function c_(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function QO(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Cw(e,t){let n=QO(e);return t?n.map((s,c)=>c===e.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Tw(e,t,n,s){s===void 0&&(s=!1);let c;typeof e=="string"?c=Wc(e):(c=of({},e),Gn(!c.pathname||!c.pathname.includes("?"),c_("?","pathname","search",c)),Gn(!c.pathname||!c.pathname.includes("#"),c_("#","pathname","hash",c)),Gn(!c.search||!c.search.includes("#"),c_("#","search","hash",c)));let d=e===""||c.pathname==="",m=d?"/":c.pathname,l;if(m==null)l=n;else{let k=t.length-1;if(!s&&m.startsWith("..")){let D=m.split("/");for(;D[0]==="..";)D.shift(),k-=1;c.pathname=D.join("/")}l=k>=0?t[k]:"/"}let w=XO(c,l),b=m&&m!=="/"&&m.endsWith("/"),A=(d||m===".")&&n.endsWith("/");return!w.pathname.endsWith("/")&&(b||A)&&(w.pathname+="/"),w}const Ja=e=>e.join("/").replace(/\/\/+/g,"/"),JO=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),e5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,t5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function n5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const VA=["post","put","patch","delete"];new Set(VA);const r5=["get",...VA];new Set(r5);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function af(){return af=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},af.apply(this,arguments)}const hy=ie.createContext(null),$A=ie.createContext(null),sa=ie.createContext(null),dy=ie.createContext(null),oa=ie.createContext({outlet:null,matches:[],isDataRoute:!1}),jA=ie.createContext(null);function i5(e,t){let{relative:n}=t===void 0?{}:t;Hc()||Gn(!1);let{basename:s,navigator:c}=ie.useContext(sa),{hash:d,pathname:m,search:l}=fy(e,{relative:n}),w=m;return s!=="/"&&(w=m==="/"?s:Ja([s,m])),c.createHref({pathname:w,search:l,hash:d})}function Hc(){return ie.useContext(dy)!=null}function Kc(){return Hc()||Gn(!1),ie.useContext(dy).location}function UA(e){ie.useContext(sa).static||ie.useLayoutEffect(e)}function Ew(){let{isDataRoute:e}=ie.useContext(oa);return e?_5():s5()}function s5(){Hc()||Gn(!1);let e=ie.useContext(hy),{basename:t,future:n,navigator:s}=ie.useContext(sa),{matches:c}=ie.useContext(oa),{pathname:d}=Kc(),m=JSON.stringify(Cw(c,n.v7_relativeSplatPath)),l=ie.useRef(!1);return UA(()=>{l.current=!0}),ie.useCallback(function(b,A){if(A===void 0&&(A={}),!l.current)return;if(typeof b=="number"){s.go(b);return}let k=Tw(b,JSON.parse(m),d,A.relative==="path");e==null&&t!=="/"&&(k.pathname=k.pathname==="/"?t:Ja([t,k.pathname])),(A.replace?s.replace:s.push)(k,A.state,A)},[t,s,m,d,e])}const o5=ie.createContext(null);function a5(e){let t=ie.useContext(oa).outlet;return t&&ie.createElement(o5.Provider,{value:e},t)}function fy(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=ie.useContext(sa),{matches:c}=ie.useContext(oa),{pathname:d}=Kc(),m=JSON.stringify(Cw(c,s.v7_relativeSplatPath));return ie.useMemo(()=>Tw(e,JSON.parse(m),d,n==="path"),[e,m,d,n])}function l5(e,t){return u5(e,t)}function u5(e,t,n,s){Hc()||Gn(!1);let{navigator:c}=ie.useContext(sa),{matches:d}=ie.useContext(oa),m=d[d.length-1],l=m?m.params:{};m&&m.pathname;let w=m?m.pathnameBase:"/";m&&m.route;let b=Kc(),A;if(t){var k;let K=typeof t=="string"?Wc(t):t;w==="/"||(k=K.pathname)!=null&&k.startsWith(w)||Gn(!1),A=K}else A=b;let D=A.pathname||"/",B=D;if(w!=="/"){let K=w.replace(/^\//,"").split("/");B="/"+D.replace(/^\//,"").split("/").slice(K.length).join("/")}let q=FO(e,{pathname:B}),Z=p5(q&&q.map(K=>Object.assign({},K,{params:Object.assign({},l,K.params),pathname:Ja([w,c.encodeLocation?c.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?w:Ja([w,c.encodeLocation?c.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),d,n,s);return t&&Z?ie.createElement(dy.Provider,{value:{location:af({pathname:"/",search:"",hash:"",state:null,key:"default"},A),navigationType:$a.Pop}},Z):Z}function c5(){let e=v5(),t=n5(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},d=null;return ie.createElement(ie.Fragment,null,ie.createElement("h2",null,"Unexpected Application Error!"),ie.createElement("h3",{style:{fontStyle:"italic"}},t),n?ie.createElement("pre",{style:c},n):null,d)}const h5=ie.createElement(c5,null);class d5 extends ie.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?ie.createElement(oa.Provider,{value:this.props.routeContext},ie.createElement(jA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function f5(e){let{routeContext:t,match:n,children:s}=e,c=ie.useContext(hy);return c&&c.static&&c.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=n.route.id),ie.createElement(oa.Provider,{value:t},s)}function p5(e,t,n,s){var c;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var d;if((d=n)!=null&&d.errors)e=n.matches;else return null}let m=e,l=(c=n)==null?void 0:c.errors;if(l!=null){let A=m.findIndex(k=>k.route.id&&(l==null?void 0:l[k.route.id]));A>=0||Gn(!1),m=m.slice(0,Math.min(m.length,A+1))}let w=!1,b=-1;if(n&&s&&s.v7_partialHydration)for(let A=0;A<m.length;A++){let k=m[A];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(b=A),k.route.id){let{loaderData:D,errors:B}=n,q=k.route.loader&&D[k.route.id]===void 0&&(!B||B[k.route.id]===void 0);if(k.route.lazy||q){w=!0,b>=0?m=m.slice(0,b+1):m=[m[0]];break}}}return m.reduceRight((A,k,D)=>{let B,q=!1,Z=null,K=null;n&&(B=l&&k.route.id?l[k.route.id]:void 0,Z=k.route.errorElement||h5,w&&(b<0&&D===0?(x5("route-fallback",!1),q=!0,K=null):b===D&&(q=!0,K=k.route.hydrateFallbackElement||null)));let N=t.concat(m.slice(0,D+1)),F=()=>{let H;return B?H=Z:q?H=K:k.route.Component?H=ie.createElement(k.route.Component,null):k.route.element?H=k.route.element:H=A,ie.createElement(f5,{match:k,routeContext:{outlet:A,matches:N,isDataRoute:n!=null},children:H})};return n&&(k.route.ErrorBoundary||k.route.errorElement||D===0)?ie.createElement(d5,{location:n.location,revalidation:n.revalidation,component:Z,error:B,children:F(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):F()},null)}var qA=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(qA||{}),ig=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ig||{});function m5(e){let t=ie.useContext(hy);return t||Gn(!1),t}function g5(e){let t=ie.useContext($A);return t||Gn(!1),t}function y5(e){let t=ie.useContext(oa);return t||Gn(!1),t}function GA(e){let t=y5(),n=t.matches[t.matches.length-1];return n.route.id||Gn(!1),n.route.id}function v5(){var e;let t=ie.useContext(jA),n=g5(ig.UseRouteError),s=GA(ig.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function _5(){let{router:e}=m5(qA.UseNavigateStable),t=GA(ig.UseNavigateStable),n=ie.useRef(!1);return UA(()=>{n.current=!0}),ie.useCallback(function(c,d){d===void 0&&(d={}),n.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,af({fromRouteId:t},d)))},[e,t])}const V2={};function x5(e,t,n){!t&&!V2[e]&&(V2[e]=!0)}function w5(e){let{to:t,replace:n,state:s,relative:c}=e;Hc()||Gn(!1);let{future:d,static:m}=ie.useContext(sa),{matches:l}=ie.useContext(oa),{pathname:w}=Kc(),b=Ew(),A=Tw(t,Cw(l,d.v7_relativeSplatPath),w,c==="path"),k=JSON.stringify(A);return ie.useEffect(()=>b(JSON.parse(k),{replace:n,state:s,relative:c}),[b,k,c,n,s]),null}function b5(e){return a5(e.context)}function Ma(e){Gn(!1)}function S5(e){let{basename:t="/",children:n=null,location:s,navigationType:c=$a.Pop,navigator:d,static:m=!1,future:l}=e;Hc()&&Gn(!1);let w=t.replace(/^\/*/,"/"),b=ie.useMemo(()=>({basename:w,navigator:d,static:m,future:af({v7_relativeSplatPath:!1},l)}),[w,l,d,m]);typeof s=="string"&&(s=Wc(s));let{pathname:A="/",search:k="",hash:D="",state:B=null,key:q="default"}=s,Z=ie.useMemo(()=>{let K=Nc(A,w);return K==null?null:{location:{pathname:K,search:k,hash:D,state:B,key:q},navigationType:c}},[w,A,k,D,B,q,c]);return Z==null?null:ie.createElement(sa.Provider,{value:b},ie.createElement(dy.Provider,{children:n,value:Z}))}function C5(e){let{children:t,location:n}=e;return l5(Nx(t),n)}new Promise(()=>{});function Nx(e,t){t===void 0&&(t=[]);let n=[];return ie.Children.forEach(e,(s,c)=>{if(!ie.isValidElement(s))return;let d=[...t,c];if(s.type===ie.Fragment){n.push.apply(n,Nx(s.props.children,d));return}s.type!==Ma&&Gn(!1),!s.props.index||!s.props.children||Gn(!1);let m={id:s.props.id||d.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(m.children=Nx(s.props.children,d)),n.push(m)}),n}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sg(){return sg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},sg.apply(this,arguments)}function ZA(e,t){if(e==null)return{};var n={},s=Object.keys(e),c,d;for(d=0;d<s.length;d++)c=s[d],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}function T5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function E5(e,t){return e.button===0&&(!t||t==="_self")&&!T5(e)}const P5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],A5=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],k5="6";try{window.__reactRouterVersion=k5}catch{}const I5=ie.createContext({isTransitioning:!1}),M5="startTransition",$2=vE[M5];function D5(e){let{basename:t,children:n,future:s,window:c}=e,d=ie.useRef();d.current==null&&(d.current=RO({window:c,v5Compat:!0}));let m=d.current,[l,w]=ie.useState({action:m.action,location:m.location}),{v7_startTransition:b}=s||{},A=ie.useCallback(k=>{b&&$2?$2(()=>w(k)):w(k)},[w,b]);return ie.useLayoutEffect(()=>m.listen(A),[m,A]),ie.createElement(S5,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:m,future:s})}const z5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",R5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,L5=ie.forwardRef(function(t,n){let{onClick:s,relative:c,reloadDocument:d,replace:m,state:l,target:w,to:b,preventScrollReset:A,unstable_viewTransition:k}=t,D=ZA(t,P5),{basename:B}=ie.useContext(sa),q,Z=!1;if(typeof b=="string"&&R5.test(b)&&(q=b,z5))try{let H=new URL(window.location.href),te=b.startsWith("//")?new URL(H.protocol+b):new URL(b),me=Nc(te.pathname,B);te.origin===H.origin&&me!=null?b=me+te.search+te.hash:Z=!0}catch{}let K=i5(b,{relative:c}),N=F5(b,{replace:m,state:l,target:w,preventScrollReset:A,relative:c,unstable_viewTransition:k});function F(H){s&&s(H),H.defaultPrevented||N(H)}return ie.createElement("a",sg({},D,{href:q||K,onClick:Z||d?s:F,ref:n,target:w}))}),Pw=ie.forwardRef(function(t,n){let{"aria-current":s="page",caseSensitive:c=!1,className:d="",end:m=!1,style:l,to:w,unstable_viewTransition:b,children:A}=t,k=ZA(t,A5),D=fy(w,{relative:k.relative}),B=Kc(),q=ie.useContext($A),{navigator:Z,basename:K}=ie.useContext(sa),N=q!=null&&N5(D)&&b===!0,F=Z.encodeLocation?Z.encodeLocation(D).pathname:D.pathname,H=B.pathname,te=q&&q.navigation&&q.navigation.location?q.navigation.location.pathname:null;c||(H=H.toLowerCase(),te=te?te.toLowerCase():null,F=F.toLowerCase()),te&&K&&(te=Nc(te,K)||te);const me=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let Se=H===F||!m&&H.startsWith(F)&&H.charAt(me)==="/",Ie=te!=null&&(te===F||!m&&te.startsWith(F)&&te.charAt(F.length)==="/"),Ce={isActive:Se,isPending:Ie,isTransitioning:N},Ge=Se?s:void 0,Le;typeof d=="function"?Le=d(Ce):Le=[d,Se?"active":null,Ie?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let Tt=typeof l=="function"?l(Ce):l;return ie.createElement(L5,sg({},k,{"aria-current":Ge,className:Le,ref:n,style:Tt,to:w,unstable_viewTransition:b}),typeof A=="function"?A(Ce):A)});var Bx;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Bx||(Bx={}));var j2;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(j2||(j2={}));function O5(e){let t=ie.useContext(hy);return t||Gn(!1),t}function F5(e,t){let{target:n,replace:s,state:c,preventScrollReset:d,relative:m,unstable_viewTransition:l}=t===void 0?{}:t,w=Ew(),b=Kc(),A=fy(e,{relative:m});return ie.useCallback(k=>{if(E5(k,n)){k.preventDefault();let D=s!==void 0?s:rg(b)===rg(A);w(e,{replace:D,state:c,preventScrollReset:d,relative:m,unstable_viewTransition:l})}},[b,w,A,s,c,n,e,d,m,l])}function N5(e,t){t===void 0&&(t={});let n=ie.useContext(I5);n==null&&Gn(!1);let{basename:s}=O5(Bx.useViewTransitionState),c=fy(e,{relative:t.relative});if(!n.isTransitioning)return!1;let d=Nc(n.currentLocation.pathname,s)||n.currentLocation.pathname,m=Nc(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Fx(c.pathname,m)!=null||Fx(c.pathname,d)!=null}class py{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){const n={listener:t};return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const Aw=typeof window>"u"||"Deno"in window;function js(){}function B5(e,t){return typeof e=="function"?e(t):e}function V5(e){return typeof e=="number"&&e>=0&&e!==1/0}function $5(e,t){return Math.max(e+(t||0)-Date.now(),0)}function em(e,t,n){return my(e)?typeof t=="function"?{...n,queryKey:e,queryFn:t}:{...t,queryKey:e}:e}function La(e,t,n){return my(e)?[{...t,queryKey:e},n]:[e||{},t]}function U2(e,t){const{type:n="all",exact:s,fetchStatus:c,predicate:d,queryKey:m,stale:l}=e;if(my(m)){if(s){if(t.queryHash!==kw(m,t.options))return!1}else if(!og(t.queryKey,m))return!1}if(n!=="all"){const w=t.isActive();if(n==="active"&&!w||n==="inactive"&&w)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||typeof c<"u"&&c!==t.state.fetchStatus||d&&!d(t))}function q2(e,t){const{exact:n,fetching:s,predicate:c,mutationKey:d}=e;if(my(d)){if(!t.options.mutationKey)return!1;if(n){if(Kl(t.options.mutationKey)!==Kl(d))return!1}else if(!og(t.options.mutationKey,d))return!1}return!(typeof s=="boolean"&&t.state.status==="loading"!==s||c&&!c(t))}function kw(e,t){return((t==null?void 0:t.queryKeyHashFn)||Kl)(e)}function Kl(e){return JSON.stringify(e,(t,n)=>Vx(n)?Object.keys(n).sort().reduce((s,c)=>(s[c]=n[c],s),{}):n)}function og(e,t){return WA(e,t)}function WA(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!WA(e[n],t[n])):!1}function HA(e,t){if(e===t)return e;const n=G2(e)&&G2(t);if(n||Vx(e)&&Vx(t)){const s=n?e.length:Object.keys(e).length,c=n?t:Object.keys(t),d=c.length,m=n?[]:{};let l=0;for(let w=0;w<d;w++){const b=n?w:c[w];m[b]=HA(e[b],t[b]),m[b]===e[b]&&l++}return s===d&&l===s?e:m}return t}function G2(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Vx(e){if(!Z2(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const n=t.prototype;return!(!Z2(n)||!n.hasOwnProperty("isPrototypeOf"))}function Z2(e){return Object.prototype.toString.call(e)==="[object Object]"}function my(e){return Array.isArray(e)}function KA(e){return new Promise(t=>{setTimeout(t,e)})}function W2(e){KA(0).then(e)}function j5(){if(typeof AbortController=="function")return new AbortController}function U5(e,t,n){return n.isDataEqual!=null&&n.isDataEqual(e,t)?e:typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?HA(e,t):t}class q5 extends py{constructor(){super(),this.setup=t=>{if(!Aw&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var n;this.setup=t,(n=this.cleanup)==null||n.call(this),this.cleanup=t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(t){this.focused!==t&&(this.focused=t,this.onFocus())}onFocus(){this.listeners.forEach(({listener:t})=>{t()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const $x=new q5,H2=["online","offline"];class G5 extends py{constructor(){super(),this.setup=t=>{if(!Aw&&window.addEventListener){const n=()=>t();return H2.forEach(s=>{window.addEventListener(s,n,!1)}),()=>{H2.forEach(s=>{window.removeEventListener(s,n)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var n;this.setup=t,(n=this.cleanup)==null||n.call(this),this.cleanup=t(s=>{typeof s=="boolean"?this.setOnline(s):this.onOnline()})}setOnline(t){this.online!==t&&(this.online=t,this.onOnline())}onOnline(){this.listeners.forEach(({listener:t})=>{t()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const ag=new G5;function Z5(e){return Math.min(1e3*2**e,3e4)}function Iw(e){return(e??"online")==="online"?ag.isOnline():!0}class XA{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}}function h_(e){return e instanceof XA}function YA(e){let t=!1,n=0,s=!1,c,d,m;const l=new Promise((K,N)=>{d=K,m=N}),w=K=>{s||(B(new XA(K)),e.abort==null||e.abort())},b=()=>{t=!0},A=()=>{t=!1},k=()=>!$x.isFocused()||e.networkMode!=="always"&&!ag.isOnline(),D=K=>{s||(s=!0,e.onSuccess==null||e.onSuccess(K),c==null||c(),d(K))},B=K=>{s||(s=!0,e.onError==null||e.onError(K),c==null||c(),m(K))},q=()=>new Promise(K=>{c=N=>{const F=s||!k();return F&&K(N),F},e.onPause==null||e.onPause()}).then(()=>{c=void 0,s||e.onContinue==null||e.onContinue()}),Z=()=>{if(s)return;let K;try{K=e.fn()}catch(N){K=Promise.reject(N)}Promise.resolve(K).then(D).catch(N=>{var F,H;if(s)return;const te=(F=e.retry)!=null?F:3,me=(H=e.retryDelay)!=null?H:Z5,Se=typeof me=="function"?me(n,N):me,Ie=te===!0||typeof te=="number"&&n<te||typeof te=="function"&&te(n,N);if(t||!Ie){B(N);return}n++,e.onFail==null||e.onFail(n,N),KA(Se).then(()=>{if(k())return q()}).then(()=>{t?B(N):Z()})})};return Iw(e.networkMode)?Z():q().then(Z),{promise:l,cancel:w,continue:()=>(c==null?void 0:c())?l:Promise.resolve(),cancelRetry:b,continueRetry:A}}const Mw=console;function W5(){let e=[],t=0,n=A=>{A()},s=A=>{A()};const c=A=>{let k;t++;try{k=A()}finally{t--,t||l()}return k},d=A=>{t?e.push(A):W2(()=>{n(A)})},m=A=>(...k)=>{d(()=>{A(...k)})},l=()=>{const A=e;e=[],A.length&&W2(()=>{s(()=>{A.forEach(k=>{n(k)})})})};return{batch:c,batchCalls:m,schedule:d,setNotifyFunction:A=>{n=A},setBatchNotifyFunction:A=>{s=A}}}const _i=W5();class QA{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),V5(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(t){this.cacheTime=Math.max(this.cacheTime||0,t??(Aw?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class H5 extends QA{constructor(t){super(),this.abortSignalConsumed=!1,this.defaultOptions=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.cache=t.cache,this.logger=t.logger||Mw,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.initialState=t.state||K5(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(t,n){const s=U5(this.state.data,t,this.options);return this.dispatch({data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){this.dispatch({type:"setState",state:t,setStateOptions:n})}cancel(t){var n;const s=this.promise;return(n=this.retryer)==null||n.cancel(t),s?s.then(js).catch(js):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(t=>t.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(t=>t.getCurrentResult().isStale)}isStaleByTime(t=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!$5(this.state.dataUpdatedAt,t)}onFocus(){var t;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n&&n.refetch({cancelRefetch:!1}),(t=this.retryer)==null||t.continue()}onOnline(){var t;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n&&n.refetch({cancelRefetch:!1}),(t=this.retryer)==null||t.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(t,n){var s,c;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&n!=null&&n.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var d;return(d=this.retryer)==null||d.continueRetry(),this.promise}}if(t&&this.setOptions(t),!this.options.queryFn){const B=this.observers.find(q=>q.options.queryFn);B&&this.setOptions(B.options)}const m=j5(),l={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},w=B=>{Object.defineProperty(B,"signal",{enumerable:!0,get:()=>{if(m)return this.abortSignalConsumed=!0,m.signal}})};w(l);const b=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(l)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),A={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:b};if(w(A),(s=this.options.behavior)==null||s.onFetch(A),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=A.fetchOptions)==null?void 0:c.meta)){var k;this.dispatch({type:"fetch",meta:(k=A.fetchOptions)==null?void 0:k.meta})}const D=B=>{if(h_(B)&&B.silent||this.dispatch({type:"error",error:B}),!h_(B)){var q,Z,K,N;(q=(Z=this.cache.config).onError)==null||q.call(Z,B,this),(K=(N=this.cache.config).onSettled)==null||K.call(N,this.state.data,B,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=YA({fn:A.fetchFn,abort:m==null?void 0:m.abort.bind(m),onSuccess:B=>{var q,Z,K,N;if(typeof B>"u"){D(new Error(this.queryHash+" data is undefined"));return}this.setData(B),(q=(Z=this.cache.config).onSuccess)==null||q.call(Z,B,this),(K=(N=this.cache.config).onSettled)==null||K.call(N,B,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:D,onFail:(B,q)=>{this.dispatch({type:"failed",failureCount:B,error:q})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:A.options.retry,retryDelay:A.options.retryDelay,networkMode:A.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(t){const n=s=>{var c,d;switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(c=t.meta)!=null?c:null,fetchStatus:Iw(this.options.networkMode)?"fetching":"paused",...!s.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:(d=t.dataUpdatedAt)!=null?d:Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const m=t.error;return h_(m)&&m.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...s,error:m,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:m,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),_i.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate(t)}),this.cache.notify({query:this,type:"updated",action:t})})}}function K5(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=typeof t<"u",s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}class X5 extends py{constructor(t){super(),this.config=t||{},this.queries=[],this.queriesMap={}}build(t,n,s){var c;const d=n.queryKey,m=(c=n.queryHash)!=null?c:kw(d,n);let l=this.get(m);return l||(l=new H5({cache:this,logger:t.getLogger(),queryKey:d,queryHash:m,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(d)}),this.add(l)),l}add(t){this.queriesMap[t.queryHash]||(this.queriesMap[t.queryHash]=t,this.queries.push(t),this.notify({type:"added",query:t}))}remove(t){const n=this.queriesMap[t.queryHash];n&&(t.destroy(),this.queries=this.queries.filter(s=>s!==t),n===t&&delete this.queriesMap[t.queryHash],this.notify({type:"removed",query:t}))}clear(){_i.batch(()=>{this.queries.forEach(t=>{this.remove(t)})})}get(t){return this.queriesMap[t]}getAll(){return this.queries}find(t,n){const[s]=La(t,n);return typeof s.exact>"u"&&(s.exact=!0),this.queries.find(c=>U2(s,c))}findAll(t,n){const[s]=La(t,n);return Object.keys(s).length>0?this.queries.filter(c=>U2(s,c)):this.queries}notify(t){_i.batch(()=>{this.listeners.forEach(({listener:n})=>{n(t)})})}onFocus(){_i.batch(()=>{this.queries.forEach(t=>{t.onFocus()})})}onOnline(){_i.batch(()=>{this.queries.forEach(t=>{t.onOnline()})})}}class Y5 extends QA{constructor(t){super(),this.defaultOptions=t.defaultOptions,this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.logger=t.logger||Mw,this.observers=[],this.state=t.state||Q5(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(t){this.dispatch({type:"setState",state:t})}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.observers=this.observers.filter(n=>n!==t),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var t,n;return(t=(n=this.retryer)==null?void 0:n.continue())!=null?t:this.execute()}async execute(){const t=()=>{var Ie;return this.retryer=YA({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(Ce,Ge)=>{this.dispatch({type:"failed",failureCount:Ce,error:Ge})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(Ie=this.options.retry)!=null?Ie:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},n=this.state.status==="loading";try{var s,c,d,m,l,w,b,A;if(!n){var k,D,B,q;this.dispatch({type:"loading",variables:this.options.variables}),await((k=(D=this.mutationCache.config).onMutate)==null?void 0:k.call(D,this.state.variables,this));const Ce=await((B=(q=this.options).onMutate)==null?void 0:B.call(q,this.state.variables));Ce!==this.state.context&&this.dispatch({type:"loading",context:Ce,variables:this.state.variables})}const Ie=await t();return await((s=(c=this.mutationCache.config).onSuccess)==null?void 0:s.call(c,Ie,this.state.variables,this.state.context,this)),await((d=(m=this.options).onSuccess)==null?void 0:d.call(m,Ie,this.state.variables,this.state.context)),await((l=(w=this.mutationCache.config).onSettled)==null?void 0:l.call(w,Ie,null,this.state.variables,this.state.context,this)),await((b=(A=this.options).onSettled)==null?void 0:b.call(A,Ie,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:Ie}),Ie}catch(Ie){try{var Z,K,N,F,H,te,me,Se;throw await((Z=(K=this.mutationCache.config).onError)==null?void 0:Z.call(K,Ie,this.state.variables,this.state.context,this)),await((N=(F=this.options).onError)==null?void 0:N.call(F,Ie,this.state.variables,this.state.context)),await((H=(te=this.mutationCache.config).onSettled)==null?void 0:H.call(te,void 0,Ie,this.state.variables,this.state.context,this)),await((me=(Se=this.options).onSettled)==null?void 0:me.call(Se,void 0,Ie,this.state.variables,this.state.context)),Ie}finally{this.dispatch({type:"error",error:Ie})}}}dispatch(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"loading":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Iw(this.options.networkMode),status:"loading",variables:t.variables};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"};case"setState":return{...s,...t.state}}};this.state=n(this.state),_i.batch(()=>{this.observers.forEach(s=>{s.onMutationUpdate(t)}),this.mutationCache.notify({mutation:this,type:"updated",action:t})})}}function Q5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class J5 extends py{constructor(t){super(),this.config=t||{},this.mutations=[],this.mutationId=0}build(t,n,s){const c=new Y5({mutationCache:this,logger:t.getLogger(),mutationId:++this.mutationId,options:t.defaultMutationOptions(n),state:s,defaultOptions:n.mutationKey?t.getMutationDefaults(n.mutationKey):void 0});return this.add(c),c}add(t){this.mutations.push(t),this.notify({type:"added",mutation:t})}remove(t){this.mutations=this.mutations.filter(n=>n!==t),this.notify({type:"removed",mutation:t})}clear(){_i.batch(()=>{this.mutations.forEach(t=>{this.remove(t)})})}getAll(){return this.mutations}find(t){return typeof t.exact>"u"&&(t.exact=!0),this.mutations.find(n=>q2(t,n))}findAll(t){return this.mutations.filter(n=>q2(t,n))}notify(t){_i.batch(()=>{this.listeners.forEach(({listener:n})=>{n(t)})})}resumePausedMutations(){var t;return this.resuming=((t=this.resuming)!=null?t:Promise.resolve()).then(()=>{const n=this.mutations.filter(s=>s.state.isPaused);return _i.batch(()=>n.reduce((s,c)=>s.then(()=>c.continue().catch(js)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function eF(){return{onFetch:e=>{e.fetchFn=()=>{var t,n,s,c,d,m;const l=(t=e.fetchOptions)==null||(n=t.meta)==null?void 0:n.refetchPage,w=(s=e.fetchOptions)==null||(c=s.meta)==null?void 0:c.fetchMore,b=w==null?void 0:w.pageParam,A=(w==null?void 0:w.direction)==="forward",k=(w==null?void 0:w.direction)==="backward",D=((d=e.state.data)==null?void 0:d.pages)||[],B=((m=e.state.data)==null?void 0:m.pageParams)||[];let q=B,Z=!1;const K=Se=>{Object.defineProperty(Se,"signal",{enumerable:!0,get:()=>{var Ie;if((Ie=e.signal)!=null&&Ie.aborted)Z=!0;else{var Ce;(Ce=e.signal)==null||Ce.addEventListener("abort",()=>{Z=!0})}return e.signal}})},N=e.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+e.options.queryHash+"'")),F=(Se,Ie,Ce,Ge)=>(q=Ge?[Ie,...q]:[...q,Ie],Ge?[Ce,...Se]:[...Se,Ce]),H=(Se,Ie,Ce,Ge)=>{if(Z)return Promise.reject("Cancelled");if(typeof Ce>"u"&&!Ie&&Se.length)return Promise.resolve(Se);const Le={queryKey:e.queryKey,pageParam:Ce,meta:e.options.meta};K(Le);const Tt=N(Le);return Promise.resolve(Tt).then(gt=>F(Se,Ce,gt,Ge))};let te;if(!D.length)te=H([]);else if(A){const Se=typeof b<"u",Ie=Se?b:K2(e.options,D);te=H(D,Se,Ie)}else if(k){const Se=typeof b<"u",Ie=Se?b:tF(e.options,D);te=H(D,Se,Ie,!0)}else{q=[];const Se=typeof e.options.getNextPageParam>"u";te=(l&&D[0]?l(D[0],0,D):!0)?H([],Se,B[0]):Promise.resolve(F([],B[0],D[0]));for(let Ce=1;Ce<D.length;Ce++)te=te.then(Ge=>{if(l&&D[Ce]?l(D[Ce],Ce,D):!0){const Tt=Se?B[Ce]:K2(e.options,Ge);return H(Ge,Se,Tt)}return Promise.resolve(F(Ge,B[Ce],D[Ce]))})}return te.then(Se=>({pages:Se,pageParams:q}))}}}}function K2(e,t){return e.getNextPageParam==null?void 0:e.getNextPageParam(t[t.length-1],t)}function tF(e,t){return e.getPreviousPageParam==null?void 0:e.getPreviousPageParam(t[0],t)}class nF{constructor(t={}){this.queryCache=t.queryCache||new X5,this.mutationCache=t.mutationCache||new J5,this.logger=t.logger||Mw,this.defaultOptions=t.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=$x.subscribe(()=>{$x.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=ag.subscribe(()=>{ag.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var t,n;this.mountCount--,this.mountCount===0&&((t=this.unsubscribeFocus)==null||t.call(this),this.unsubscribeFocus=void 0,(n=this.unsubscribeOnline)==null||n.call(this),this.unsubscribeOnline=void 0)}isFetching(t,n){const[s]=La(t,n);return s.fetchStatus="fetching",this.queryCache.findAll(s).length}isMutating(t){return this.mutationCache.findAll({...t,fetching:!0}).length}getQueryData(t,n){var s;return(s=this.queryCache.find(t,n))==null?void 0:s.state.data}ensureQueryData(t,n,s){const c=em(t,n,s),d=this.getQueryData(c.queryKey);return d?Promise.resolve(d):this.fetchQuery(c)}getQueriesData(t){return this.getQueryCache().findAll(t).map(({queryKey:n,state:s})=>{const c=s.data;return[n,c]})}setQueryData(t,n,s){const c=this.queryCache.find(t),d=c==null?void 0:c.state.data,m=B5(n,d);if(typeof m>"u")return;const l=em(t),w=this.defaultQueryOptions(l);return this.queryCache.build(this,w).setData(m,{...s,manual:!0})}setQueriesData(t,n,s){return _i.batch(()=>this.getQueryCache().findAll(t).map(({queryKey:c})=>[c,this.setQueryData(c,n,s)]))}getQueryState(t,n){var s;return(s=this.queryCache.find(t,n))==null?void 0:s.state}removeQueries(t,n){const[s]=La(t,n),c=this.queryCache;_i.batch(()=>{c.findAll(s).forEach(d=>{c.remove(d)})})}resetQueries(t,n,s){const[c,d]=La(t,n,s),m=this.queryCache,l={type:"active",...c};return _i.batch(()=>(m.findAll(c).forEach(w=>{w.reset()}),this.refetchQueries(l,d)))}cancelQueries(t,n,s){const[c,d={}]=La(t,n,s);typeof d.revert>"u"&&(d.revert=!0);const m=_i.batch(()=>this.queryCache.findAll(c).map(l=>l.cancel(d)));return Promise.all(m).then(js).catch(js)}invalidateQueries(t,n,s){const[c,d]=La(t,n,s);return _i.batch(()=>{var m,l;if(this.queryCache.findAll(c).forEach(b=>{b.invalidate()}),c.refetchType==="none")return Promise.resolve();const w={...c,type:(m=(l=c.refetchType)!=null?l:c.type)!=null?m:"active"};return this.refetchQueries(w,d)})}refetchQueries(t,n,s){const[c,d]=La(t,n,s),m=_i.batch(()=>this.queryCache.findAll(c).filter(w=>!w.isDisabled()).map(w=>{var b;return w.fetch(void 0,{...d,cancelRefetch:(b=d==null?void 0:d.cancelRefetch)!=null?b:!0,meta:{refetchPage:c.refetchPage}})}));let l=Promise.all(m).then(js);return d!=null&&d.throwOnError||(l=l.catch(js)),l}fetchQuery(t,n,s){const c=em(t,n,s),d=this.defaultQueryOptions(c);typeof d.retry>"u"&&(d.retry=!1);const m=this.queryCache.build(this,d);return m.isStaleByTime(d.staleTime)?m.fetch(d):Promise.resolve(m.state.data)}prefetchQuery(t,n,s){return this.fetchQuery(t,n,s).then(js).catch(js)}fetchInfiniteQuery(t,n,s){const c=em(t,n,s);return c.behavior=eF(),this.fetchQuery(c)}prefetchInfiniteQuery(t,n,s){return this.fetchInfiniteQuery(t,n,s).then(js).catch(js)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(t){this.defaultOptions=t}setQueryDefaults(t,n){const s=this.queryDefaults.find(c=>Kl(t)===Kl(c.queryKey));s?s.defaultOptions=n:this.queryDefaults.push({queryKey:t,defaultOptions:n})}getQueryDefaults(t){if(!t)return;const n=this.queryDefaults.find(s=>og(t,s.queryKey));return n==null?void 0:n.defaultOptions}setMutationDefaults(t,n){const s=this.mutationDefaults.find(c=>Kl(t)===Kl(c.mutationKey));s?s.defaultOptions=n:this.mutationDefaults.push({mutationKey:t,defaultOptions:n})}getMutationDefaults(t){if(!t)return;const n=this.mutationDefaults.find(s=>og(t,s.mutationKey));return n==null?void 0:n.defaultOptions}defaultQueryOptions(t){if(t!=null&&t._defaulted)return t;const n={...this.defaultOptions.queries,...this.getQueryDefaults(t==null?void 0:t.queryKey),...t,_defaulted:!0};return!n.queryHash&&n.queryKey&&(n.queryHash=kw(n.queryKey,n)),typeof n.refetchOnReconnect>"u"&&(n.refetchOnReconnect=n.networkMode!=="always"),typeof n.useErrorBoundary>"u"&&(n.useErrorBoundary=!!n.suspense),n}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...this.defaultOptions.mutations,...this.getMutationDefaults(t==null?void 0:t.mutationKey),...t,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}const X2=ie.createContext(void 0),rF=ie.createContext(!1);function iF(e,t){return e||(t&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=X2),window.ReactQueryClientContext):X2)}const sF=({client:e,children:t,context:n,contextSharing:s=!1})=>{ie.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]);const c=iF(n,s);return ie.createElement(rF.Provider,{value:!n&&s},ie.createElement(c.Provider,{value:e},t))};function wm(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wm=function(n){return typeof n}:wm=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},wm(e)}function oF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y2(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function aF(e,t,n){return t&&Y2(e.prototype,t),n&&Y2(e,n),e}function lF(e,t){return t&&(wm(t)==="object"||typeof t=="function")?t:bm(e)}function jx(e){return jx=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},jx(e)}function bm(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ux(e,t)}function Ux(e,t){return Ux=Object.setPrototypeOf||function(s,c){return s.__proto__=c,s},Ux(e,t)}function Sm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var JA=function(e){uF(t,e);function t(){var n,s;oF(this,t);for(var c=arguments.length,d=new Array(c),m=0;m<c;m++)d[m]=arguments[m];return s=lF(this,(n=jx(t)).call.apply(n,[this].concat(d))),Sm(bm(s),"state",{bootstrapped:!1}),Sm(bm(s),"_unsubscribe",void 0),Sm(bm(s),"handlePersistorState",function(){var l=s.props.persistor,w=l.getState(),b=w.bootstrapped;b&&(s.props.onBeforeLift?Promise.resolve(s.props.onBeforeLift()).finally(function(){return s.setState({bootstrapped:!0})}):s.setState({bootstrapped:!0}),s._unsubscribe&&s._unsubscribe())}),s}return aF(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(ie.PureComponent);Sm(JA,"defaultProps",{children:null,loading:null});function Gs(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(c){return"'"+c+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function sl(e){return!!e&&!!e[Fn]}function ra(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var s=Object.getPrototypeOf(n);if(s===null)return!0;var c=Object.hasOwnProperty.call(s,"constructor")&&s.constructor;return c===Object||typeof c=="function"&&Function.toString.call(c)===vF}(e)||Array.isArray(e)||!!e[iC]||!!(!((t=e.constructor)===null||t===void 0)&&t[iC])||Dw(e)||zw(e))}function cu(e,t,n){n===void 0&&(n=!1),Xc(e)===0?(n?Object.keys:Ac)(e).forEach(function(s){n&&typeof s=="symbol"||t(s,e[s],e)}):e.forEach(function(s,c){return t(c,s,e)})}function Xc(e){var t=e[Fn];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Dw(e)?2:zw(e)?3:0}function Pc(e,t){return Xc(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function cF(e,t){return Xc(e)===2?e.get(t):e[t]}function ek(e,t,n){var s=Xc(e);s===2?e.set(t,n):s===3?e.add(n):e[t]=n}function tk(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Dw(e){return gF&&e instanceof Map}function zw(e){return yF&&e instanceof Set}function Vl(e){return e.o||e.t}function Rw(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=rk(e);delete t[Fn];for(var n=Ac(t),s=0;s<n.length;s++){var c=n[s],d=t[c];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(t[c]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[c]})}return Object.create(Object.getPrototypeOf(e),t)}function Lw(e,t){return t===void 0&&(t=!1),Ow(e)||sl(e)||!ra(e)||(Xc(e)>1&&(e.set=e.add=e.clear=e.delete=hF),Object.freeze(e),t&&cu(e,function(n,s){return Lw(s,!0)},!0)),e}function hF(){Gs(2)}function Ow(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function yo(e){var t=Wx[e];return t||Gs(18,e),t}function dF(e,t){Wx[e]||(Wx[e]=t)}function qx(){return lf}function d_(e,t){t&&(yo("Patches"),e.u=[],e.s=[],e.v=t)}function lg(e){Gx(e),e.p.forEach(fF),e.p=null}function Gx(e){e===lf&&(lf=e.l)}function Q2(e){return lf={p:[],l:lf,h:e,m:!0,_:0}}function fF(e){var t=e[Fn];t.i===0||t.i===1?t.j():t.g=!0}function f_(e,t){t._=t.p.length;var n=t.p[0],s=e!==void 0&&e!==n;return t.h.O||yo("ES5").S(t,e,s),s?(n[Fn].P&&(lg(t),Gs(4)),ra(e)&&(e=ug(t,e),t.l||cg(t,e)),t.u&&yo("Patches").M(n[Fn].t,e,t.u,t.s)):e=ug(t,n,[]),lg(t),t.u&&t.v(t.u,t.s),e!==nk?e:void 0}function ug(e,t,n){if(Ow(t))return t;var s=t[Fn];if(!s)return cu(t,function(l,w){return J2(e,s,t,l,w,n)},!0),t;if(s.A!==e)return t;if(!s.P)return cg(e,s.t,!0),s.t;if(!s.I){s.I=!0,s.A._--;var c=s.i===4||s.i===5?s.o=Rw(s.k):s.o,d=c,m=!1;s.i===3&&(d=new Set(c),c.clear(),m=!0),cu(d,function(l,w){return J2(e,s,c,l,w,n,m)}),cg(e,c,!1),n&&e.u&&yo("Patches").N(s,n,e.u,e.s)}return s.o}function J2(e,t,n,s,c,d,m){if(sl(c)){var l=ug(e,c,d&&t&&t.i!==3&&!Pc(t.R,s)?d.concat(s):void 0);if(ek(n,s,l),!sl(l))return;e.m=!1}else m&&n.add(c);if(ra(c)&&!Ow(c)){if(!e.h.D&&e._<1)return;ug(e,c),t&&t.A.l||cg(e,c)}}function cg(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Lw(t,n)}function p_(e,t){var n=e[Fn];return(n?Vl(n):e)[t]}function eC(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var s=Object.getOwnPropertyDescriptor(n,t);if(s)return s;n=Object.getPrototypeOf(n)}}function Na(e){e.P||(e.P=!0,e.l&&Na(e.l))}function m_(e){e.o||(e.o=Rw(e.t))}function Zx(e,t,n){var s=Dw(t)?yo("MapSet").F(t,n):zw(t)?yo("MapSet").T(t,n):e.O?function(c,d){var m=Array.isArray(c),l={i:m?1:0,A:d?d.A:qx(),P:!1,I:!1,R:{},l:d,t:c,k:null,o:null,j:null,C:!1},w=l,b=uf;m&&(w=[l],b=bd);var A=Proxy.revocable(w,b),k=A.revoke,D=A.proxy;return l.k=D,l.j=k,D}(t,n):yo("ES5").J(t,n);return(n?n.A:qx()).p.push(s),s}function pF(e){return sl(e)||Gs(22,e),function t(n){if(!ra(n))return n;var s,c=n[Fn],d=Xc(n);if(c){if(!c.P&&(c.i<4||!yo("ES5").K(c)))return c.t;c.I=!0,s=tC(n,d),c.I=!1}else s=tC(n,d);return cu(s,function(m,l){c&&cF(c.t,m)===l||ek(s,m,t(l))}),d===3?new Set(s):s}(e)}function tC(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Rw(e)}function mF(){function e(d,m){var l=c[d];return l?l.enumerable=m:c[d]=l={configurable:!0,enumerable:m,get:function(){var w=this[Fn];return uf.get(w,d)},set:function(w){var b=this[Fn];uf.set(b,d,w)}},l}function t(d){for(var m=d.length-1;m>=0;m--){var l=d[m][Fn];if(!l.P)switch(l.i){case 5:s(l)&&Na(l);break;case 4:n(l)&&Na(l)}}}function n(d){for(var m=d.t,l=d.k,w=Ac(l),b=w.length-1;b>=0;b--){var A=w[b];if(A!==Fn){var k=m[A];if(k===void 0&&!Pc(m,A))return!0;var D=l[A],B=D&&D[Fn];if(B?B.t!==k:!tk(D,k))return!0}}var q=!!m[Fn];return w.length!==Ac(m).length+(q?0:1)}function s(d){var m=d.k;if(m.length!==d.t.length)return!0;var l=Object.getOwnPropertyDescriptor(m,m.length-1);if(l&&!l.get)return!0;for(var w=0;w<m.length;w++)if(!m.hasOwnProperty(w))return!0;return!1}var c={};dF("ES5",{J:function(d,m){var l=Array.isArray(d),w=function(A,k){if(A){for(var D=Array(k.length),B=0;B<k.length;B++)Object.defineProperty(D,""+B,e(B,!0));return D}var q=rk(k);delete q[Fn];for(var Z=Ac(q),K=0;K<Z.length;K++){var N=Z[K];q[N]=e(N,A||!!q[N].enumerable)}return Object.create(Object.getPrototypeOf(k),q)}(l,d),b={i:l?5:4,A:m?m.A:qx(),P:!1,I:!1,R:{},l:m,t:d,k:w,o:null,g:!1,C:!1};return Object.defineProperty(w,Fn,{value:b,writable:!0}),w},S:function(d,m,l){l?sl(m)&&m[Fn].A===d&&t(d.p):(d.u&&function w(b){if(b&&typeof b=="object"){var A=b[Fn];if(A){var k=A.t,D=A.k,B=A.R,q=A.i;if(q===4)cu(D,function(H){H!==Fn&&(k[H]!==void 0||Pc(k,H)?B[H]||w(D[H]):(B[H]=!0,Na(A)))}),cu(k,function(H){D[H]!==void 0||Pc(D,H)||(B[H]=!1,Na(A))});else if(q===5){if(s(A)&&(Na(A),B.length=!0),D.length<k.length)for(var Z=D.length;Z<k.length;Z++)B[Z]=!1;else for(var K=k.length;K<D.length;K++)B[K]=!0;for(var N=Math.min(D.length,k.length),F=0;F<N;F++)D.hasOwnProperty(F)||(B[F]=!0),B[F]===void 0&&w(D[F])}}}}(d.p[0]),t(d.p))},K:function(d){return d.i===4?n(d):s(d)}})}var nC,lf,Fw=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",gF=typeof Map<"u",yF=typeof Set<"u",rC=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",nk=Fw?Symbol.for("immer-nothing"):((nC={})["immer-nothing"]=!0,nC),iC=Fw?Symbol.for("immer-draftable"):"__$immer_draftable",Fn=Fw?Symbol.for("immer-state"):"__$immer_state",vF=""+Object.prototype.constructor,Ac=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,rk=Object.getOwnPropertyDescriptors||function(e){var t={};return Ac(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Wx={},uf={get:function(e,t){if(t===Fn)return e;var n=Vl(e);if(!Pc(n,t))return function(c,d,m){var l,w=eC(d,m);return w?"value"in w?w.value:(l=w.get)===null||l===void 0?void 0:l.call(c.k):void 0}(e,n,t);var s=n[t];return e.I||!ra(s)?s:s===p_(e.t,t)?(m_(e),e.o[t]=Zx(e.A.h,s,e)):s},has:function(e,t){return t in Vl(e)},ownKeys:function(e){return Reflect.ownKeys(Vl(e))},set:function(e,t,n){var s=eC(Vl(e),t);if(s!=null&&s.set)return s.set.call(e.k,n),!0;if(!e.P){var c=p_(Vl(e),t),d=c==null?void 0:c[Fn];if(d&&d.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(tk(n,c)&&(n!==void 0||Pc(e.t,t)))return!0;m_(e),Na(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return p_(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,m_(e),Na(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Vl(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:s.enumerable,value:n[t]}},defineProperty:function(){Gs(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Gs(12)}},bd={};cu(uf,function(e,t){bd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),bd.deleteProperty=function(e,t){return bd.set.call(this,e,t,void 0)},bd.set=function(e,t,n){return uf.set.call(this,e[0],t,n,e[0])};var _F=function(){function e(n){var s=this;this.O=rC,this.D=!0,this.produce=function(c,d,m){if(typeof c=="function"&&typeof d!="function"){var l=d;d=c;var w=s;return function(Z){var K=this;Z===void 0&&(Z=l);for(var N=arguments.length,F=Array(N>1?N-1:0),H=1;H<N;H++)F[H-1]=arguments[H];return w.produce(Z,function(te){var me;return(me=d).call.apply(me,[K,te].concat(F))})}}var b;if(typeof d!="function"&&Gs(6),m!==void 0&&typeof m!="function"&&Gs(7),ra(c)){var A=Q2(s),k=Zx(s,c,void 0),D=!0;try{b=d(k),D=!1}finally{D?lg(A):Gx(A)}return typeof Promise<"u"&&b instanceof Promise?b.then(function(Z){return d_(A,m),f_(Z,A)},function(Z){throw lg(A),Z}):(d_(A,m),f_(b,A))}if(!c||typeof c!="object"){if((b=d(c))===void 0&&(b=c),b===nk&&(b=void 0),s.D&&Lw(b,!0),m){var B=[],q=[];yo("Patches").M(c,b,B,q),m(B,q)}return b}Gs(21,c)},this.produceWithPatches=function(c,d){if(typeof c=="function")return function(b){for(var A=arguments.length,k=Array(A>1?A-1:0),D=1;D<A;D++)k[D-1]=arguments[D];return s.produceWithPatches(b,function(B){return c.apply(void 0,[B].concat(k))})};var m,l,w=s.produce(c,d,function(b,A){m=b,l=A});return typeof Promise<"u"&&w instanceof Promise?w.then(function(b){return[b,m,l]}):[w,m,l]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){ra(n)||Gs(8),sl(n)&&(n=pF(n));var s=Q2(this),c=Zx(this,n,void 0);return c[Fn].C=!0,Gx(s),c},t.finishDraft=function(n,s){var c=n&&n[Fn],d=c.A;return d_(d,s),f_(void 0,d)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!rC&&Gs(20),this.O=n},t.applyPatches=function(n,s){var c;for(c=s.length-1;c>=0;c--){var d=s[c];if(d.path.length===0&&d.op==="replace"){n=d.value;break}}c>-1&&(s=s.slice(c+1));var m=yo("Patches").$;return sl(n)?m(n,s):this.produce(n,function(l){return m(l,s)})},e}(),es=new _F,ik=es.produce;es.produceWithPatches.bind(es);es.setAutoFreeze.bind(es);es.setUseProxies.bind(es);es.applyPatches.bind(es);es.createDraft.bind(es);es.finishDraft.bind(es);function cf(e){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cf(e)}function xF(e,t){if(cf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(cf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wF(e){var t=xF(e,"string");return cf(t)=="symbol"?t:t+""}function bF(e,t,n){return t=wF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,s)}return n}function oC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sC(Object(n),!0).forEach(function(s){bF(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sC(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ei(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var aC=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),g_=function(){return Math.random().toString(36).substring(7).split("").join(".")},hg={INIT:"@@redux/INIT"+g_(),REPLACE:"@@redux/REPLACE"+g_(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+g_()}};function SF(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Nw(e,t,n){var s;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ei(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ei(1));return n(Nw)(e,t)}if(typeof e!="function")throw new Error(ei(2));var c=e,d=t,m=[],l=m,w=!1;function b(){l===m&&(l=m.slice())}function A(){if(w)throw new Error(ei(3));return d}function k(Z){if(typeof Z!="function")throw new Error(ei(4));if(w)throw new Error(ei(5));var K=!0;return b(),l.push(Z),function(){if(K){if(w)throw new Error(ei(6));K=!1,b();var F=l.indexOf(Z);l.splice(F,1),m=null}}}function D(Z){if(!SF(Z))throw new Error(ei(7));if(typeof Z.type>"u")throw new Error(ei(8));if(w)throw new Error(ei(9));try{w=!0,d=c(d,Z)}finally{w=!1}for(var K=m=l,N=0;N<K.length;N++){var F=K[N];F()}return Z}function B(Z){if(typeof Z!="function")throw new Error(ei(10));c=Z,D({type:hg.REPLACE})}function q(){var Z,K=k;return Z={subscribe:function(F){if(typeof F!="object"||F===null)throw new Error(ei(11));function H(){F.next&&F.next(A())}H();var te=K(H);return{unsubscribe:te}}},Z[aC]=function(){return this},Z}return D({type:hg.INIT}),s={dispatch:D,subscribe:k,getState:A,replaceReducer:B},s[aC]=q,s}function CF(e){Object.keys(e).forEach(function(t){var n=e[t],s=n(void 0,{type:hg.INIT});if(typeof s>"u")throw new Error(ei(12));if(typeof n(void 0,{type:hg.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ei(13))})}function sk(e){for(var t=Object.keys(e),n={},s=0;s<t.length;s++){var c=t[s];typeof e[c]=="function"&&(n[c]=e[c])}var d=Object.keys(n),m;try{CF(n)}catch(l){m=l}return function(w,b){if(w===void 0&&(w={}),m)throw m;for(var A=!1,k={},D=0;D<d.length;D++){var B=d[D],q=n[B],Z=w[B],K=q(Z,b);if(typeof K>"u")throw b&&b.type,new Error(ei(14));k[B]=K,A=A||K!==Z}return A=A||d.length!==Object.keys(w).length,A?k:w}}function dg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(s){return s}:t.length===1?t[0]:t.reduce(function(s,c){return function(){return s(c.apply(void 0,arguments))}})}function TF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(s){return function(){var c=s.apply(void 0,arguments),d=function(){throw new Error(ei(15))},m={getState:c.getState,dispatch:function(){return d.apply(void 0,arguments)}},l=t.map(function(w){return w(m)});return d=dg.apply(void 0,l)(c.dispatch),oC(oC({},c),{},{dispatch:d})}}}function ok(e){var t=function(s){var c=s.dispatch,d=s.getState;return function(m){return function(l){return typeof l=="function"?l(c,d,e):m(l)}}};return t}var ak=ok();ak.withExtraArgument=ok;const lC=ak;var lk=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(s[d]=c[d])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function s(){this.constructor=t}t.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),EF=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},s,c,d,m;return m={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function l(b){return function(A){return w([b,A])}}function w(b){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,c&&(d=b[0]&2?c.return:b[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,b[1])).done)return d;switch(c=0,d&&(b=[b[0]&2,d.value]),b[0]){case 0:case 1:d=b;break;case 4:return n.label++,{value:b[1],done:!1};case 5:n.label++,c=b[1],b=[0];continue;case 7:b=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(b[0]===6||b[0]===2)){n=0;continue}if(b[0]===3&&(!d||b[1]>d[0]&&b[1]<d[3])){n.label=b[1];break}if(b[0]===6&&n.label<d[1]){n.label=d[1],d=b;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(b);break}d[2]&&n.ops.pop(),n.trys.pop();continue}b=t.call(e,n)}catch(A){b=[6,A],c=0}finally{s=d=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},Bc=globalThis&&globalThis.__spreadArray||function(e,t){for(var n=0,s=t.length,c=e.length;n<s;n++,c++)e[c]=t[n];return e},PF=Object.defineProperty,AF=Object.defineProperties,kF=Object.getOwnPropertyDescriptors,uC=Object.getOwnPropertySymbols,IF=Object.prototype.hasOwnProperty,MF=Object.prototype.propertyIsEnumerable,cC=function(e,t,n){return t in e?PF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},el=function(e,t){for(var n in t||(t={}))IF.call(t,n)&&cC(e,n,t[n]);if(uC)for(var s=0,c=uC(t);s<c.length;s++){var n=c[s];MF.call(t,n)&&cC(e,n,t[n])}return e},y_=function(e,t){return AF(e,kF(t))},DF=function(e,t,n){return new Promise(function(s,c){var d=function(w){try{l(n.next(w))}catch(b){c(b)}},m=function(w){try{l(n.throw(w))}catch(b){c(b)}},l=function(w){return w.done?s(w.value):Promise.resolve(w.value).then(d,m)};l((n=n.apply(e,t)).next())})},zF=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?dg:dg.apply(null,arguments)};function RF(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}function tl(e,t){function n(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];if(t){var d=t.apply(void 0,s);if(!d)throw new Error("prepareAction did not return an object");return el(el({type:e,payload:d.payload},"meta"in d&&{meta:d.meta}),"error"in d&&{error:d.error})}return{type:e,payload:s[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(s){return s.type===e},n}var LF=function(e){lk(t,e);function t(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var c=e.apply(this,n)||this;return Object.setPrototypeOf(c,t.prototype),c}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Bc([void 0],n[0].concat(this)))):new(t.bind.apply(t,Bc([void 0],n.concat(this))))},t}(Array),OF=function(e){lk(t,e);function t(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var c=e.apply(this,n)||this;return Object.setPrototypeOf(c,t.prototype),c}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Bc([void 0],n[0].concat(this)))):new(t.bind.apply(t,Bc([void 0],n.concat(this))))},t}(Array);function Hx(e){return ra(e)?ik(e,function(){}):e}function FF(e){return typeof e=="boolean"}function NF(){return function(t){return BF(t)}}function BF(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var s=new LF;return n&&(FF(n)?s.push(lC):s.push(lC.withExtraArgument(n.extraArgument))),s}var VF=!0;function $F(e){var t=NF(),n=e||{},s=n.reducer,c=s===void 0?void 0:s,d=n.middleware,m=d===void 0?t():d,l=n.devTools,w=l===void 0?!0:l,b=n.preloadedState,A=b===void 0?void 0:b,k=n.enhancers,D=k===void 0?void 0:k,B;if(typeof c=="function")B=c;else if(RF(c))B=sk(c);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var q=m;typeof q=="function"&&(q=q(t));var Z=TF.apply(void 0,q),K=dg;w&&(K=zF(el({trace:!VF},typeof w=="object"&&w)));var N=new OF(Z),F=N;Array.isArray(D)?F=Bc([Z],D):typeof D=="function"&&(F=D(N));var H=K.apply(void 0,F);return Nw(B,A,H)}function uk(e){var t={},n=[],s,c={addCase:function(d,m){var l=typeof d=="string"?d:d.type;if(!l)throw new Error("`builder.addCase` cannot be called with an empty action type");if(l in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[l]=m,c},addMatcher:function(d,m){return n.push({matcher:d,reducer:m}),c},addDefaultCase:function(d){return s=d,c}};return e(c),[t,n,s]}function jF(e){return typeof e=="function"}function UF(e,t,n,s){n===void 0&&(n=[]);var c=typeof t=="function"?uk(t):[t,n,s],d=c[0],m=c[1],l=c[2],w;if(jF(e))w=function(){return Hx(e())};else{var b=Hx(e);w=function(){return b}}function A(k,D){k===void 0&&(k=w());var B=Bc([d[D.type]],m.filter(function(q){var Z=q.matcher;return Z(D)}).map(function(q){var Z=q.reducer;return Z}));return B.filter(function(q){return!!q}).length===0&&(B=[l]),B.reduce(function(q,Z){if(Z)if(sl(q)){var K=q,N=Z(K,D);return N===void 0?q:N}else{if(ra(q))return ik(q,function(F){return Z(F,D)});var N=Z(q,D);if(N===void 0){if(q===null)return q;throw Error("A case reducer on a non-draftable value must not return undefined")}return N}return q},k)}return A.getInitialState=w,A}function qF(e,t){return e+"/"+t}function Bw(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:Hx(e.initialState),s=e.reducers||{},c=Object.keys(s),d={},m={},l={};c.forEach(function(A){var k=s[A],D=qF(t,A),B,q;"reducer"in k?(B=k.reducer,q=k.prepare):B=k,d[A]=B,m[D]=B,l[A]=q?tl(D,q):tl(D)});function w(){var A=typeof e.extraReducers=="function"?uk(e.extraReducers):[e.extraReducers],k=A[0],D=k===void 0?{}:k,B=A[1],q=B===void 0?[]:B,Z=A[2],K=Z===void 0?void 0:Z,N=el(el({},D),m);return UF(n,function(F){for(var H in N)F.addCase(H,N[H]);for(var te=0,me=q;te<me.length;te++){var Se=me[te];F.addMatcher(Se.matcher,Se.reducer)}K&&F.addDefaultCase(K)})}var b;return{name:t,reducer:function(A,k){return b||(b=w()),b(A,k)},actions:l,caseReducers:d,getInitialState:function(){return b||(b=w()),b.getInitialState()}}}var GF="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ZF=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=GF[Math.random()*64|0];return t},WF=["name","message","stack","code"],v_=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),hC=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),HF=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,s=WF;n<s.length;n++){var c=s[n];typeof e[c]=="string"&&(t[c]=e[c])}return t}return{message:String(e)}};(function(){function e(t,n,s){var c=tl(t+"/fulfilled",function(b,A,k,D){return{payload:b,meta:y_(el({},D||{}),{arg:k,requestId:A,requestStatus:"fulfilled"})}}),d=tl(t+"/pending",function(b,A,k){return{payload:void 0,meta:y_(el({},k||{}),{arg:A,requestId:b,requestStatus:"pending"})}}),m=tl(t+"/rejected",function(b,A,k,D,B){return{payload:D,error:(s&&s.serializeError||HF)(b||"Rejected"),meta:y_(el({},B||{}),{arg:k,requestId:A,rejectedWithValue:!!D,requestStatus:"rejected",aborted:(b==null?void 0:b.name)==="AbortError",condition:(b==null?void 0:b.name)==="ConditionError"})}}),l=typeof AbortController<"u"?AbortController:function(){function b(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return b.prototype.abort=function(){},b}();function w(b){return function(A,k,D){var B=s!=null&&s.idGenerator?s.idGenerator(b):ZF(),q=new l,Z;function K(F){Z=F,q.abort()}var N=function(){return DF(this,null,function(){var F,H,te,me,Se,Ie,Ce;return EF(this,function(Ge){switch(Ge.label){case 0:return Ge.trys.push([0,4,,5]),me=(F=s==null?void 0:s.condition)==null?void 0:F.call(s,b,{getState:k,extra:D}),XF(me)?[4,me]:[3,2];case 1:me=Ge.sent(),Ge.label=2;case 2:if(me===!1||q.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return Se=new Promise(function(Le,Tt){return q.signal.addEventListener("abort",function(){return Tt({name:"AbortError",message:Z||"Aborted"})})}),A(d(B,b,(H=s==null?void 0:s.getPendingMeta)==null?void 0:H.call(s,{requestId:B,arg:b},{getState:k,extra:D}))),[4,Promise.race([Se,Promise.resolve(n(b,{dispatch:A,getState:k,extra:D,requestId:B,signal:q.signal,abort:K,rejectWithValue:function(Le,Tt){return new v_(Le,Tt)},fulfillWithValue:function(Le,Tt){return new hC(Le,Tt)}})).then(function(Le){if(Le instanceof v_)throw Le;return Le instanceof hC?c(Le.payload,B,b,Le.meta):c(Le,B,b)})])];case 3:return te=Ge.sent(),[3,5];case 4:return Ie=Ge.sent(),te=Ie instanceof v_?m(null,B,b,Ie.payload,Ie.meta):m(Ie,B,b),[3,5];case 5:return Ce=s&&!s.dispatchConditionRejection&&m.match(te)&&te.meta.condition,Ce||A(te),[2,te]}})})}();return Object.assign(N,{abort:K,requestId:B,arg:b,unwrap:function(){return N.then(KF)}})}}return Object.assign(w,{pending:d,rejected:m,fulfilled:c,typePrefix:t})}return e.withTypes=function(){return e},e})();function KF(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function XF(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Vw="listenerMiddleware";tl(Vw+"/add");tl(Vw+"/removeAll");tl(Vw+"/remove");var dC;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);mF();var Xs=function(t){return"@@redux-saga/"+t},YF=Xs("CANCEL_PROMISE"),ck=Xs("CHANNEL_END"),hk=Xs("IO"),fC=Xs("MATCH"),QF=Xs("MULTICAST"),dk=Xs("SAGA_ACTION"),JF=Xs("SELF_CANCELLATION"),e4=Xs("TASK"),kc=Xs("TASK_CANCEL"),fk=Xs("TERMINATE"),t4=Xs("LOCATION"),n4=function(t){return t==null},r4=function(t){return t!=null},ol=function(t){return typeof t=="function"},i4=function(t){return typeof t=="string"},Yc=Array.isArray,gy=function(t){return t&&ol(t.then)},$w=function(t){return t&&ol(t.next)&&ol(t.throw)},s4=function(t){return ol(t)&&t.hasOwnProperty("toString")},o4=function(t){return!!t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype},a4=function(t){return function(){return t}},l4=a4(!0),xi=function(){},u4=function(t){return t},jw=function(t,n){uu(t,n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(n).forEach(function(s){t[s]=n[s]})},c4=function(t,n){var s;return(s=[]).concat.apply(s,n.map(t))};function yy(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function h4(e){var t=!1;return function(){t||(t=!0,e())}}var d4=function(t){throw t},f4=function(t){return{value:t,done:!0}};function pC(e,t,n){t===void 0&&(t=d4),n===void 0&&(n="iterator");var s={meta:{name:n},next:e,throw:t,return:f4,isSagaIterator:!0};return typeof Symbol<"u"&&(s[Symbol.iterator]=function(){return s}),s}function p4(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var pk=function(t){return Array.apply(null,new Array(t))},m4=function(t){return function(n){return t(Object.defineProperty(n,dk,{value:!0}))}},mk=function(t){return t===fk},gk=function(t){return t===kc},yk=function(t){return mk(t)||gk(t)};function vk(e,t){var n=Object.keys(e),s=n.length,c=0,d,m=Yc(e)?pk(s):{},l={};function w(){c===s&&(d=!0,t(m))}return n.forEach(function(b){var A=function(D,B){d||(B||yk(D)?(t.cancel(),t(D,B)):(m[b]=D,c++,w()))};A.cancel=xi,l[b]=A}),t.cancel=function(){d||(d=!0,n.forEach(function(b){return l[b].cancel()}))},l}function Uw(e){return{name:e.name||"anonymous",location:_k(e)}}function _k(e){return e[t4]}function g4(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(s){return s}:t.length===1?t[0]:t.reduce(function(s,c){return function(){return s(c.apply(void 0,arguments))}})}var y4="Channel's Buffer overflow!",v4=1,_4=3,xk=4;function x4(e,t){e===void 0&&(e=10);var n=new Array(e),s=0,c=0,d=0,m=function(A){n[c]=A,c=(c+1)%e,s++},l=function(){if(s!=0){var A=n[d];return n[d]=null,s--,d=(d+1)%e,A}},w=function(){for(var A=[];s;)A.push(l());return A};return{isEmpty:function(){return s==0},put:function(A){if(s<e)m(A);else{var k;switch(t){case v4:throw new Error(y4);case _4:n[c]=A,c=(c+1)%e,d=c;break;case xk:k=2*e,n=w(),s=n.length,c=n.length,d=0,n.length=k,e=k,m(A);break}}},take:l,flush:w}}var w4=function(t){return x4(t,xk)},b4="TAKE",S4="PUT",wk="ALL",C4="RACE",T4="CALL",E4="CPS",P4="FORK",A4="JOIN",k4="CANCEL",I4="SELECT",M4="ACTION_CHANNEL",D4="CANCELLED",z4="FLUSH",R4="GET_CONTEXT",L4="SET_CONTEXT",O4=function(t,n){var s;return s={},s[hk]=!0,s.combinator=!1,s.type=t,s.payload=n,s};function F4(e){var t=O4(wk,e);return t.combinator=!0,t}function N4(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e}var bk=[],vy=0;function B4(e){try{qw(),e()}finally{Tk()}}function Sk(e){bk.push(e),vy||(qw(),Ek())}function Ck(e){try{return qw(),e()}finally{Ek()}}function qw(){vy++}function Tk(){vy--}function Ek(){Tk();for(var e;!vy&&(e=bk.shift())!==void 0;)B4(e)}var V4=function(t){return function(n){return t.some(function(s){return Gw(s)(n)})}},$4=function(t){return function(n){return t(n)}},mC=function(t){return function(n){return n.type===String(t)}},j4=function(t){return function(n){return n.type===t}},Pk=function(){return l4};function Gw(e){var t=e==="*"?Pk:i4(e)?mC:Yc(e)?V4:s4(e)?mC:ol(e)?$4:o4(e)?j4:null;if(t===null)throw new Error("invalid pattern: "+e);return t(e)}var Od={type:ck},Zw=function(t){return t&&t.type===ck};function U4(e){e===void 0&&(e=w4());var t=!1,n=[];function s(l){if(!t){if(n.length===0)return e.put(l);var w=n.shift();w(l)}}function c(l){t&&e.isEmpty()?l(Od):e.isEmpty()?(n.push(l),l.cancel=function(){yy(n,l)}):l(e.take())}function d(l){if(t&&e.isEmpty()){l(Od);return}l(e.flush())}function m(){if(!t){t=!0;var l=n;n=[];for(var w=0,b=l.length;w<b;w++){var A=l[w];A(Od)}}}return{take:c,put:s,flush:d,close:m}}function q4(){var e,t=!1,n=[],s=n,c=function(){s===n&&(s=n.slice())},d=function(){t=!0;var l=n=s;s=[],l.forEach(function(w){w(Od)})};return e={},e[QF]=!0,e.put=function(l){if(!t){if(Zw(l)){d();return}for(var w=n=s,b=0,A=w.length;b<A;b++){var k=w[b];k[fC](l)&&(k.cancel(),k(l))}}},e.take=function(l,w){if(w===void 0&&(w=Pk),t){l(Od);return}l[fC]=w,c(),s.push(l),l.cancel=h4(function(){c(),yy(s,l)})},e.close=d,e}function Ak(){var e=q4(),t=e.put;return e.put=function(n){if(n[dk]){t(n);return}Sk(function(){t(n)})},e}var Gl=0,Uo=1,Cm=2,kk=3;function Ww(e,t){var n=e[YF];ol(n)&&(t.cancel=n),e.then(t,function(s){t(s,!0)})}var bf=0,Ik=function(){return++bf},Lr;function G4(e,t){return e.isSagaIterator?{name:e.meta.name}:Uw(t)}function Z4(e){var t=e.context,n=e.fn,s=e.args;try{var c=n.apply(t,s);if($w(c))return c;var d=!1,m=function(w){return d?{value:w,done:!0}:(d=!0,{value:c,done:!gy(c)})};return pC(m)}catch(l){return pC(function(){throw l})}}function W4(e,t,n){var s=t.channel,c=t.action,d=t.resolve;Sk(function(){var m;try{m=(s?s.put:e.dispatch)(c)}catch(l){n(l,!0);return}d&&gy(m)?Ww(m,n):n(m)})}function H4(e,t,n){var s=t.channel,c=s===void 0?e.channel:s,d=t.pattern,m=t.maybe,l=function(b){if(b instanceof Error){n(b,!0);return}if(Zw(b)&&!m){n(fk);return}n(b)};try{c.take(l,r4(d)?Gw(d):null)}catch(w){n(w,!0);return}n.cancel=l.cancel}function K4(e,t,n,s){var c=t.context,d=t.fn,m=t.args,l=s.task;try{var w=d.apply(c,m);if(gy(w)){Ww(w,n);return}if($w(w)){_y(e,w,l.context,bf,Uw(d),!1,n);return}n(w)}catch(b){n(b,!0)}}function X4(e,t,n){var s=t.context,c=t.fn,d=t.args;try{var m=function(w,b){n4(w)?n(b):n(w,!0)};c.apply(s,d.concat(m)),m.cancel&&(n.cancel=m.cancel)}catch(l){n(l,!0)}}function Y4(e,t,n,s){var c=t.context,d=t.fn,m=t.args,l=t.detached,w=s.task,b=Z4({context:c,fn:d,args:m}),A=G4(b,d);Ck(function(){var k=_y(e,b,w.context,bf,A,l,void 0);l?n(k):k.isRunning()?(w.queue.addTask(k),n(k)):k.isAborted()?w.queue.abort(k.error()):n(k)})}function Q4(e,t,n,s){var c=s.task,d=function(w,b){if(w.isRunning()){var A={task:c,cb:b};b.cancel=function(){w.isRunning()&&yy(w.joiners,A)},w.joiners.push(A)}else w.isAborted()?b(w.error(),!0):b(w.result())};if(Yc(t)){if(t.length===0){n([]);return}var m=vk(t,n);t.forEach(function(l,w){d(l,m[w])})}else d(t,n)}function __(e){e.isRunning()&&e.cancel()}function J4(e,t,n,s){var c=s.task;t===JF?__(c):Yc(t)?t.forEach(__):__(t),n()}function eN(e,t,n,s){var c=s.digestEffect,d=bf,m=Object.keys(t);if(m.length===0){n(Yc(t)?[]:{});return}var l=vk(t,n);m.forEach(function(w){c(t[w],d,l[w],w)})}function tN(e,t,n,s){var c=s.digestEffect,d=bf,m=Object.keys(t),l=Yc(t)?pk(m.length):{},w={},b=!1;m.forEach(function(A){var k=function(B,q){b||(q||yk(B)?(n.cancel(),n(B,q)):(n.cancel(),b=!0,l[A]=B,n(l)))};k.cancel=xi,w[A]=k}),n.cancel=function(){b||(b=!0,m.forEach(function(A){return w[A].cancel()}))},m.forEach(function(A){b||c(t[A],d,w[A],A)})}function nN(e,t,n){var s=t.selector,c=t.args;try{var d=s.apply(void 0,[e.getState()].concat(c));n(d)}catch(m){n(m,!0)}}function rN(e,t,n){var s=t.pattern,c=t.buffer,d=U4(c),m=Gw(s),l=function b(A){Zw(A)||e.channel.take(b,m),d.put(A)},w=d.close;d.close=function(){l.cancel(),w()},e.channel.take(l,m),n(d)}function iN(e,t,n,s){var c=s.task;n(c.isCancelled())}function sN(e,t,n){t.flush(n)}function oN(e,t,n,s){var c=s.task;n(c.context[t])}function aN(e,t,n,s){var c=s.task;jw(c.context,t),n()}var lN=(Lr={},Lr[b4]=H4,Lr[S4]=W4,Lr[wk]=eN,Lr[C4]=tN,Lr[T4]=K4,Lr[E4]=X4,Lr[P4]=Y4,Lr[A4]=Q4,Lr[k4]=J4,Lr[I4]=nN,Lr[M4]=rN,Lr[D4]=iN,Lr[z4]=sN,Lr[R4]=oN,Lr[L4]=aN,Lr);function uN(e,t,n){var s=[],c,d=!1;w(e);var m=function(){return s};function l(A){t(),b(),n(A,!0)}function w(A){s.push(A),A.cont=function(k,D){d||(yy(s,A),A.cont=xi,D?l(k):(A===e&&(c=k),s.length||(d=!0,n(c))))}}function b(){d||(d=!0,s.forEach(function(A){A.cont=xi,A.cancel()}),s=[])}return{addTask:w,cancelAll:b,abort:l,getTasks:m}}function Mk(e,t){return e+"?"+t}function cN(e){var t=_k(e);if(t){var n=t.code,s=t.fileName,c=t.lineNumber,d=n+"  "+Mk(s,c);return d}return""}function gC(e){var t=e.name,n=e.location;return n?t+"  "+Mk(n.fileName,n.lineNumber):t}function hN(e){var t=c4(function(n){return n.cancelledTasks},e);return t.length?["Tasks cancelled due to error:"].concat(t).join(`
`):""}var Hw=null,Fd=[],dN=function(t){t.crashedEffect=Hw,Fd.push(t)},Dk=function(){Hw=null,Fd.length=0},fN=function(t){Hw=t},pN=function(){var t=Fd[0],n=Fd.slice(1),s=t.crashedEffect?cN(t.crashedEffect):null,c="The above error occurred in task "+gC(t.meta)+(s?` 
 when executing effect `+s:"");return[c].concat(n.map(function(d){return"    created by "+gC(d.meta)}),[hN(Fd)]).join(`
`)};function mN(e,t,n,s,c,d,m){var l;m===void 0&&(m=xi);var w=Gl,b,A,k=null,D=[],B=Object.create(n),q=uN(t,function(){D.push.apply(D,q.getTasks().map(function(me){return me.meta.name}))},K);function Z(){w===Gl&&(w=Uo,q.cancelAll(),K(kc,!1))}function K(te,me){if(!me)te===kc?w=Uo:w!==Uo&&(w=kk),b=te,k&&k.resolve(te);else{if(w=Cm,dN({meta:c,cancelledTasks:D}),H.isRoot){var Se=pN();Dk(),e.onError(te,{sagaStack:Se})}A=te,k&&k.reject(te)}H.cont(te,me),H.joiners.forEach(function(Ie){Ie.cb(te,me)}),H.joiners=null}function N(te){jw(B,te)}function F(){return k||(k=N4(),w===Cm?k.reject(A):w!==Gl&&k.resolve(b)),k.promise}var H=(l={},l[e4]=!0,l.id=s,l.meta=c,l.isRoot=d,l.context=B,l.joiners=[],l.queue=q,l.cancel=Z,l.cont=m,l.end=K,l.setContext=N,l.toPromise=F,l.isRunning=function(){return w===Gl},l.isCancelled=function(){return w===Uo||w===Gl&&t.status===Uo},l.isAborted=function(){return w===Cm},l.result=function(){return b},l.error=function(){return A},l);return H}function _y(e,t,n,s,c,d,m){var l=e.finalizeRunEffect(B);D.cancel=xi;var w={meta:c,cancel:k,status:Gl},b=mN(e,w,n,s,c,d,m),A={task:b,digestEffect:q};function k(){w.status===Gl&&(w.status=Uo,D(kc))}return m&&(m.cancel=b.cancel),D(),b;function D(Z,K){try{var N;K?(N=t.throw(Z),Dk()):gk(Z)?(w.status=Uo,D.cancel(),N=ol(t.return)?t.return(kc):{done:!0,value:kc}):mk(Z)?N=ol(t.return)?t.return():{done:!0}:N=t.next(Z),N.done?(w.status!==Uo&&(w.status=kk),w.cont(N.value)):q(N.value,s,D)}catch(F){if(w.status===Uo)throw F;w.status=Cm,w.cont(F,!0)}}function B(Z,K,N){if(gy(Z))Ww(Z,N);else if($w(Z))_y(e,Z,b.context,K,c,!1,N);else if(Z&&Z[hk]){var F=lN[Z.type];F(e,Z.payload,N,A)}else N(Z)}function q(Z,K,N,F){F===void 0&&(F="");var H=Ik();e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:H,parentEffectId:K,label:F,effect:Z});var te;function me(Se,Ie){te||(te=!0,N.cancel=xi,e.sagaMonitor&&(Ie?e.sagaMonitor.effectRejected(H,Se):e.sagaMonitor.effectResolved(H,Se)),Ie&&fN(Z),N(Se,Ie))}me.cancel=xi,N.cancel=function(){te||(te=!0,me.cancel(),me.cancel=xi,e.sagaMonitor&&e.sagaMonitor.effectCancelled(H))},l(Z,H,me)}}function gN(e,t){for(var n=e.channel,s=n===void 0?Ak():n,c=e.dispatch,d=e.getState,m=e.context,l=m===void 0?{}:m,w=e.sagaMonitor,b=e.effectMiddlewares,A=e.onError,k=A===void 0?p4:A,D=arguments.length,B=new Array(D>2?D-2:0),q=2;q<D;q++)B[q-2]=arguments[q];var Z=t.apply(void 0,B),K=Ik();w&&(w.rootSagaStarted=w.rootSagaStarted||xi,w.effectTriggered=w.effectTriggered||xi,w.effectResolved=w.effectResolved||xi,w.effectRejected=w.effectRejected||xi,w.effectCancelled=w.effectCancelled||xi,w.actionDispatched=w.actionDispatched||xi,w.rootSagaStarted({effectId:K,saga:t,args:B}));var N;if(b){var F=g4.apply(void 0,b);N=function(me){return function(Se,Ie,Ce){var Ge=function(Tt){return me(Tt,Ie,Ce)};return F(Ge)(Se)}}}else N=u4;var H={channel:s,dispatch:m4(c),getState:d,sagaMonitor:w,onError:k,finalizeRunEffect:N};return Ck(function(){var te=_y(H,Z,l,K,Uw(t),!0,void 0);return w&&w.effectResolved(K,te),te})}function yN(e){var t=e===void 0?{}:e,n=t.context,s=n===void 0?{}:n,c=t.channel,d=c===void 0?Ak():c,m=t.sagaMonitor,l=vw(t,["context","channel","sagaMonitor"]),w;function b(A){var k=A.getState,D=A.dispatch;return w=gN.bind(null,uu({},l,{context:s,channel:d,dispatch:D,getState:k,sagaMonitor:m})),function(B){return function(q){m&&m.actionDispatched&&m.actionDispatched(q);var Z=B(q);return d.put(q),Z}}}return b.run=function(){return w.apply(void 0,arguments)},b.setContext=function(A){jw(s,A)},b}var Kw="persist:",zk="persist/FLUSH",Xw="persist/REHYDRATE",Rk="persist/PAUSE",Lk="persist/PERSIST",Ok="persist/PURGE",Fk="persist/REGISTER",vN=-1;function Tm(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tm=function(n){return typeof n}:Tm=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Tm(e)}function yC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,s)}return n}function _N(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yC(n,!0).forEach(function(s){xN(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yC(n).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function xN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wN(e,t,n,s){s.debug;var c=_N({},n);return e&&Tm(e)==="object"&&Object.keys(e).forEach(function(d){d!=="_persist"&&t[d]===n[d]&&(c[d]=e[d])}),c}function bN(e){var t=e.blacklist||null,n=e.whitelist||null,s=e.transforms||[],c=e.throttle||0,d="".concat(e.keyPrefix!==void 0?e.keyPrefix:Kw).concat(e.key),m=e.storage,l;e.serialize===!1?l=function(me){return me}:typeof e.serialize=="function"?l=e.serialize:l=SN;var w=e.writeFailHandler||null,b={},A={},k=[],D=null,B=null,q=function(me){Object.keys(me).forEach(function(Se){N(Se)&&b[Se]!==me[Se]&&k.indexOf(Se)===-1&&k.push(Se)}),Object.keys(b).forEach(function(Se){me[Se]===void 0&&N(Se)&&k.indexOf(Se)===-1&&b[Se]!==void 0&&k.push(Se)}),D===null&&(D=setInterval(Z,c)),b=me};function Z(){if(k.length===0){D&&clearInterval(D),D=null;return}var te=k.shift(),me=s.reduce(function(Se,Ie){return Ie.in(Se,te,b)},b[te]);if(me!==void 0)try{A[te]=l(me)}catch(Se){console.error("redux-persist/createPersistoid: error serializing state",Se)}else delete A[te];k.length===0&&K()}function K(){Object.keys(A).forEach(function(te){b[te]===void 0&&delete A[te]}),B=m.setItem(d,l(A)).catch(F)}function N(te){return!(n&&n.indexOf(te)===-1&&te!=="_persist"||t&&t.indexOf(te)!==-1)}function F(te){w&&w(te)}var H=function(){for(;k.length!==0;)Z();return B||Promise.resolve()};return{update:q,flush:H}}function SN(e){return JSON.stringify(e)}function CN(e){var t=e.transforms||[],n="".concat(e.keyPrefix!==void 0?e.keyPrefix:Kw).concat(e.key),s=e.storage;e.debug;var c;return e.deserialize===!1?c=function(m){return m}:typeof e.deserialize=="function"?c=e.deserialize:c=TN,s.getItem(n).then(function(d){if(d)try{var m={},l=c(d);return Object.keys(l).forEach(function(w){m[w]=t.reduceRight(function(b,A){return A.out(b,w,l)},c(l[w]))}),m}catch(w){throw w}else return})}function TN(e){return JSON.parse(e)}function EN(e){var t=e.storage,n="".concat(e.keyPrefix!==void 0?e.keyPrefix:Kw).concat(e.key);return t.removeItem(n,PN)}function PN(e){}function vC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,s)}return n}function No(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vC(n,!0).forEach(function(s){AN(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vC(n).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function AN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kN(e,t){if(e==null)return{};var n=IN(e,t),s,c;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(c=0;c<d.length;c++)s=d[c],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function IN(e,t){if(e==null)return{};var n={},s=Object.keys(e),c,d;for(d=0;d<s.length;d++)c=s[d],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}var MN=5e3;function DN(e,t){var n=e.version!==void 0?e.version:vN;e.debug;var s=e.stateReconciler===void 0?wN:e.stateReconciler,c=e.getStoredState||CN,d=e.timeout!==void 0?e.timeout:MN,m=null,l=!1,w=!0,b=function(k){return k._persist.rehydrated&&m&&!w&&m.update(k),k};return function(A,k){var D=A||{},B=D._persist,q=kN(D,["_persist"]),Z=q;if(k.type===Lk){var K=!1,N=function(Ce,Ge){K||(k.rehydrate(e.key,Ce,Ge),K=!0)};if(d&&setTimeout(function(){!K&&N(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},d),w=!1,m||(m=bN(e)),B)return No({},t(Z,k),{_persist:B});if(typeof k.rehydrate!="function"||typeof k.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return k.register(e.key),c(e).then(function(Ie){var Ce=e.migrate||function(Ge,Le){return Promise.resolve(Ge)};Ce(Ie,n).then(function(Ge){N(Ge)},function(Ge){N(void 0,Ge)})},function(Ie){N(void 0,Ie)}),No({},t(Z,k),{_persist:{version:n,rehydrated:!1}})}else{if(k.type===Ok)return l=!0,k.result(EN(e)),No({},t(Z,k),{_persist:B});if(k.type===zk)return k.result(m&&m.flush()),No({},t(Z,k),{_persist:B});if(k.type===Rk)w=!0;else if(k.type===Xw){if(l)return No({},Z,{_persist:No({},B,{rehydrated:!0})});if(k.key===e.key){var F=t(Z,k),H=k.payload,te=s!==!1&&H!==void 0?s(H,A,F,e):F,me=No({},te,{_persist:No({},B,{rehydrated:!0})});return b(me)}}}if(!B)return t(A,k);var Se=t(Z,k);return Se===Z?A:b(No({},Se,{_persist:B}))}}function _C(e){return LN(e)||RN(e)||zN()}function zN(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function RN(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function LN(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function xC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,s)}return n}function Kx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xC(n,!0).forEach(function(s){ON(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xC(n).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ON(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nk={registry:[],bootstrapped:!1},FN=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Nk,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Fk:return Kx({},t,{registry:[].concat(_C(t.registry),[n.key])});case Xw:var s=t.registry.indexOf(n.key),c=_C(t.registry);return c.splice(s,1),Kx({},t,{registry:c,bootstrapped:c.length===0});default:return t}};function NN(e,t,n){var s=n||!1,c=Nw(FN,Nk,t&&t.enhancer?t.enhancer:void 0),d=function(b){c.dispatch({type:Fk,key:b})},m=function(b,A,k){var D={type:Xw,payload:A,err:k,key:b};e.dispatch(D),c.dispatch(D),s&&l.getState().bootstrapped&&(s(),s=!1)},l=Kx({},c,{purge:function(){var b=[];return e.dispatch({type:Ok,result:function(k){b.push(k)}}),Promise.all(b)},flush:function(){var b=[];return e.dispatch({type:zk,result:function(k){b.push(k)}}),Promise.all(b)},pause:function(){e.dispatch({type:Rk})},persist:function(){e.dispatch({type:Lk,register:d,rehydrate:m})}});return t&&t.manualPersist||l.persist(),l}var Yw={},Qw={};Qw.__esModule=!0;Qw.default=$N;function Em(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Em=function(n){return typeof n}:Em=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Em(e)}function x_(){}var BN={getItem:x_,setItem:x_,removeItem:x_};function VN(e){if((typeof self>"u"?"undefined":Em(self))!=="object"||!(e in self))return!1;try{var t=self[e],n="redux-persist ".concat(e," test");t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch{return!1}return!0}function $N(e){var t="".concat(e,"Storage");return VN(t)?self[t]:BN}Yw.__esModule=!0;Yw.default=qN;var jN=UN(Qw);function UN(e){return e&&e.__esModule?e:{default:e}}function qN(e){var t=(0,jN.default)(e);return{getItem:function(s){return new Promise(function(c,d){c(t.getItem(s))})},setItem:function(s,c){return new Promise(function(d,m){d(t.setItem(s,c))})},removeItem:function(s){return new Promise(function(c,d){c(t.removeItem(s))})}}}var Bk=void 0,GN=ZN(Yw);function ZN(e){return e&&e.__esModule?e:{default:e}}var WN=(0,GN.default)("local");Bk=WN;function Vk(e,t,n){return DN({key:e,storage:Bk,whitelist:t},n)}const HN={showModal:!1,modalContent:null,showPromptDialog:!1,promptDialogContent:null,navbarToggled:!1},KN=(e,t)=>({...e,...t.payload}),XN=(e,t)=>({...e,showModal:!!t.payload,modalContent:t.payload||e.modalContent}),YN=(e,t)=>({...e,navbarToggled:t.payload}),QN=(e,t)=>({...e,modalContent:t.payload||null}),JN=(e,t)=>({...e,showPromptDialog:!!t.payload||!e.showPromptDialog,promptDialogContent:t.payload||e.promptDialogContent}),eB=(e,t)=>({...e,promptDialogContent:t.payload||null}),tB=Bw({name:"common",initialState:HN,reducers:{setCommonState:KN,toggleModal:XN,setModalContent:QN,setToggleNavbar:YN,togglePromptDialog:JN,setPromptDialogContent:eB}}),nB=Vk("common",[],tB.reducer),rB={actions:[]},iB=Bw({name:"loader",initialState:rB,reducers:{startAction(e,t){e.actions.push(t.payload)},stopAction(e,t){e.actions=e.actions.filter(n=>n!==t.payload)}}}),sB=iB.reducer,oB=sk({common:nB,loader:sB});function*aB(){yield F4([])}const $k=yN(),lB=[$k],jk=$F({reducer:oB,middleware:e=>e({thunk:!1,serializableCheck:!1}).concat(lB)});$k.run(aB);const uB=NN(jk);function Uk(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Uk(e[t]))&&(s&&(s+=" "),s+=n);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function ja(){for(var e,t,n=0,s="";n<arguments.length;)(e=arguments[n++])&&(t=Uk(e))&&(s&&(s+=" "),s+=t);return s}const Pm=e=>typeof e=="number"&&!isNaN(e),fg=e=>typeof e=="string",Yi=e=>typeof e=="function",Am=e=>fg(e)||Yi(e)?e:null,w_=e=>ie.isValidElement(e)||fg(e)||Yi(e)||Pm(e);function cB(e,t,n){n===void 0&&(n=300);const{scrollHeight:s,style:c}=e;requestAnimationFrame(()=>{c.minHeight="initial",c.height=s+"px",c.transition=`all ${n}ms`,requestAnimationFrame(()=>{c.height="0",c.padding="0",c.margin="0",setTimeout(t,n)})})}function xy(e){let{enter:t,exit:n,appendPosition:s=!1,collapse:c=!0,collapseDuration:d=300}=e;return function(m){let{children:l,position:w,preventExitTransition:b,done:A,nodeRef:k,isIn:D}=m;const B=s?`${t}--${w}`:t,q=s?`${n}--${w}`:n,Z=ie.useRef(0);return ie.useLayoutEffect(()=>{const K=k.current,N=B.split(" "),F=H=>{H.target===k.current&&(K.dispatchEvent(new Event("d")),K.removeEventListener("animationend",F),K.removeEventListener("animationcancel",F),Z.current===0&&H.type!=="animationcancel"&&K.classList.remove(...N))};K.classList.add(...N),K.addEventListener("animationend",F),K.addEventListener("animationcancel",F)},[]),ie.useEffect(()=>{const K=k.current,N=()=>{K.removeEventListener("animationend",N),c?cB(K,A,d):A()};D||(b?N():(Z.current=1,K.className+=` ${q}`,K.addEventListener("animationend",N)))},[D]),dt.createElement(dt.Fragment,null,l)}}function wC(e,t){return e!=null?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const Xl={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const n=this.list.get(e).filter(s=>s!==t);return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach(t=>{const n=setTimeout(()=>{t(...[].slice.call(arguments,1))},0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(n)})}},tm=e=>{let{theme:t,type:n,...s}=e;return dt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...s})},b_={info:function(e){return dt.createElement(tm,{...e},dt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return dt.createElement(tm,{...e},dt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return dt.createElement(tm,{...e},dt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return dt.createElement(tm,{...e},dt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return dt.createElement("div",{className:"Toastify__spinner"})}};function hB(e){const[,t]=ie.useReducer(B=>B+1,0),[n,s]=ie.useState([]),c=ie.useRef(null),d=ie.useRef(new Map).current,m=B=>n.indexOf(B)!==-1,l=ie.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:m,getToast:B=>d.get(B)}).current;function w(B){let{containerId:q}=B;const{limit:Z}=l.props;!Z||q&&l.containerId!==q||(l.count-=l.queue.length,l.queue=[])}function b(B){s(q=>B==null?[]:q.filter(Z=>Z!==B))}function A(){const{toastContent:B,toastProps:q,staleId:Z}=l.queue.shift();D(B,q,Z)}function k(B,q){let{delay:Z,staleId:K,...N}=q;if(!w_(B)||function(Ue){return!c.current||l.props.enableMultiContainer&&Ue.containerId!==l.props.containerId||d.has(Ue.toastId)&&Ue.updateId==null}(N))return;const{toastId:F,updateId:H,data:te}=N,{props:me}=l,Se=()=>b(F),Ie=H==null;Ie&&l.count++;const Ce={...me,style:me.toastStyle,key:l.toastKey++,...Object.fromEntries(Object.entries(N).filter(Ue=>{let[gt,_t]=Ue;return _t!=null})),toastId:F,updateId:H,data:te,closeToast:Se,isIn:!1,className:Am(N.className||me.toastClassName),bodyClassName:Am(N.bodyClassName||me.bodyClassName),progressClassName:Am(N.progressClassName||me.progressClassName),autoClose:!N.isLoading&&(Ge=N.autoClose,Le=me.autoClose,Ge===!1||Pm(Ge)&&Ge>0?Ge:Le),deleteToast(){const Ue=wC(d.get(F),"removed");d.delete(F),Xl.emit(4,Ue);const gt=l.queue.length;if(l.count=F==null?l.count-l.displayedToast:l.count-1,l.count<0&&(l.count=0),gt>0){const _t=F==null?l.props.limit:1;if(gt===1||_t===1)l.displayedToast++,A();else{const Lt=_t>gt?gt:_t;l.displayedToast=Lt;for(let zt=0;zt<Lt;zt++)A()}}else t()}};var Ge,Le;Ce.iconOut=function(Ue){let{theme:gt,type:_t,isLoading:Lt,icon:zt}=Ue,bt=null;const $e={theme:gt,type:_t};return zt===!1||(Yi(zt)?bt=zt($e):ie.isValidElement(zt)?bt=ie.cloneElement(zt,$e):fg(zt)||Pm(zt)?bt=zt:Lt?bt=b_.spinner():(ut=>ut in b_)(_t)&&(bt=b_[_t]($e))),bt}(Ce),Yi(N.onOpen)&&(Ce.onOpen=N.onOpen),Yi(N.onClose)&&(Ce.onClose=N.onClose),Ce.closeButton=me.closeButton,N.closeButton===!1||w_(N.closeButton)?Ce.closeButton=N.closeButton:N.closeButton===!0&&(Ce.closeButton=!w_(me.closeButton)||me.closeButton);let Tt=B;ie.isValidElement(B)&&!fg(B.type)?Tt=ie.cloneElement(B,{closeToast:Se,toastProps:Ce,data:te}):Yi(B)&&(Tt=B({closeToast:Se,toastProps:Ce,data:te})),me.limit&&me.limit>0&&l.count>me.limit&&Ie?l.queue.push({toastContent:Tt,toastProps:Ce,staleId:K}):Pm(Z)?setTimeout(()=>{D(Tt,Ce,K)},Z):D(Tt,Ce,K)}function D(B,q,Z){const{toastId:K}=q;Z&&d.delete(Z);const N={content:B,props:q};d.set(K,N),s(F=>[...F,K].filter(H=>H!==Z)),Xl.emit(4,wC(N,N.props.updateId==null?"added":"updated"))}return ie.useEffect(()=>(l.containerId=e.containerId,Xl.cancelEmit(3).on(0,k).on(1,B=>c.current&&b(B)).on(5,w).emit(2,l),()=>{d.clear(),Xl.emit(3,l)}),[]),ie.useEffect(()=>{l.props=e,l.isToastActive=m,l.displayedToast=n.length}),{getToastToRender:function(B){const q=new Map,Z=Array.from(d.values());return e.newestOnTop&&Z.reverse(),Z.forEach(K=>{const{position:N}=K.props;q.has(N)||q.set(N,[]),q.get(N).push(K)}),Array.from(q,K=>B(K[0],K[1]))},containerRef:c,isToastActive:m}}function bC(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function SC(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function dB(e){const[t,n]=ie.useState(!1),[s,c]=ie.useState(!1),d=ie.useRef(null),m=ie.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,l=ie.useRef(e),{autoClose:w,pauseOnHover:b,closeToast:A,onClick:k,closeOnClick:D}=e;function B(te){if(e.draggable){te.nativeEvent.type==="touchstart"&&te.nativeEvent.preventDefault(),m.didMove=!1,document.addEventListener("mousemove",N),document.addEventListener("mouseup",F),document.addEventListener("touchmove",N),document.addEventListener("touchend",F);const me=d.current;m.canCloseOnClick=!0,m.canDrag=!0,m.boundingRect=me.getBoundingClientRect(),me.style.transition="",m.x=bC(te.nativeEvent),m.y=SC(te.nativeEvent),e.draggableDirection==="x"?(m.start=m.x,m.removalDistance=me.offsetWidth*(e.draggablePercent/100)):(m.start=m.y,m.removalDistance=me.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent/100))}}function q(te){if(m.boundingRect){const{top:me,bottom:Se,left:Ie,right:Ce}=m.boundingRect;te.nativeEvent.type!=="touchend"&&e.pauseOnHover&&m.x>=Ie&&m.x<=Ce&&m.y>=me&&m.y<=Se?K():Z()}}function Z(){n(!0)}function K(){n(!1)}function N(te){const me=d.current;m.canDrag&&me&&(m.didMove=!0,t&&K(),m.x=bC(te),m.y=SC(te),m.delta=e.draggableDirection==="x"?m.x-m.start:m.y-m.start,m.start!==m.x&&(m.canCloseOnClick=!1),me.style.transform=`translate${e.draggableDirection}(${m.delta}px)`,me.style.opacity=""+(1-Math.abs(m.delta/m.removalDistance)))}function F(){document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",F),document.removeEventListener("touchmove",N),document.removeEventListener("touchend",F);const te=d.current;if(m.canDrag&&m.didMove&&te){if(m.canDrag=!1,Math.abs(m.delta)>m.removalDistance)return c(!0),void e.closeToast();te.style.transition="transform 0.2s, opacity 0.2s",te.style.transform=`translate${e.draggableDirection}(0)`,te.style.opacity="1"}}ie.useEffect(()=>{l.current=e}),ie.useEffect(()=>(d.current&&d.current.addEventListener("d",Z,{once:!0}),Yi(e.onOpen)&&e.onOpen(ie.isValidElement(e.children)&&e.children.props),()=>{const te=l.current;Yi(te.onClose)&&te.onClose(ie.isValidElement(te.children)&&te.children.props)}),[]),ie.useEffect(()=>(e.pauseOnFocusLoss&&(document.hasFocus()||K(),window.addEventListener("focus",Z),window.addEventListener("blur",K)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",Z),window.removeEventListener("blur",K))}),[e.pauseOnFocusLoss]);const H={onMouseDown:B,onTouchStart:B,onMouseUp:q,onTouchEnd:q};return w&&b&&(H.onMouseEnter=K,H.onMouseLeave=Z),D&&(H.onClick=te=>{k&&k(te),m.canCloseOnClick&&A()}),{playToast:Z,pauseToast:K,isRunning:t,preventExitTransition:s,toastRef:d,eventHandlers:H}}function qk(e){let{closeToast:t,theme:n,ariaLabel:s="close"}=e;return dt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:c=>{c.stopPropagation(),t(c)},"aria-label":s},dt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},dt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function fB(e){let{delay:t,isRunning:n,closeToast:s,type:c="default",hide:d,className:m,style:l,controlledProgress:w,progress:b,rtl:A,isIn:k,theme:D}=e;const B=d||w&&b===0,q={...l,animationDuration:`${t}ms`,animationPlayState:n?"running":"paused",opacity:B?0:1};w&&(q.transform=`scaleX(${b})`);const Z=ja("Toastify__progress-bar",w?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${D}`,`Toastify__progress-bar--${c}`,{"Toastify__progress-bar--rtl":A}),K=Yi(m)?m({rtl:A,type:c,defaultClassName:Z}):ja(Z,m);return dt.createElement("div",{role:"progressbar","aria-hidden":B?"true":"false","aria-label":"notification timer",className:K,style:q,[w&&b>=1?"onTransitionEnd":"onAnimationEnd"]:w&&b<1?null:()=>{k&&s()}})}const pB=e=>{const{isRunning:t,preventExitTransition:n,toastRef:s,eventHandlers:c}=dB(e),{closeButton:d,children:m,autoClose:l,onClick:w,type:b,hideProgressBar:A,closeToast:k,transition:D,position:B,className:q,style:Z,bodyClassName:K,bodyStyle:N,progressClassName:F,progressStyle:H,updateId:te,role:me,progress:Se,rtl:Ie,toastId:Ce,deleteToast:Ge,isIn:Le,isLoading:Tt,iconOut:Ue,closeOnClick:gt,theme:_t}=e,Lt=ja("Toastify__toast",`Toastify__toast-theme--${_t}`,`Toastify__toast--${b}`,{"Toastify__toast--rtl":Ie},{"Toastify__toast--close-on-click":gt}),zt=Yi(q)?q({rtl:Ie,position:B,type:b,defaultClassName:Lt}):ja(Lt,q),bt=!!Se||!l,$e={closeToast:k,type:b,theme:_t};let ut=null;return d===!1||(ut=Yi(d)?d($e):ie.isValidElement(d)?ie.cloneElement(d,$e):qk($e)),dt.createElement(D,{isIn:Le,done:Ge,position:B,preventExitTransition:n,nodeRef:s},dt.createElement("div",{id:Ce,onClick:w,className:zt,...c,style:Z,ref:s},dt.createElement("div",{...Le&&{role:me},className:Yi(K)?K({type:b}):ja("Toastify__toast-body",K),style:N},Ue!=null&&dt.createElement("div",{className:ja("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!Tt})},Ue),dt.createElement("div",null,m)),ut,dt.createElement(fB,{...te&&!bt?{key:`pb-${te}`}:{},rtl:Ie,theme:_t,delay:l,isRunning:t,isIn:Le,closeToast:k,hide:A,type:b,style:H,className:F,controlledProgress:bt,progress:Se||0})))},wy=function(e,t){return t===void 0&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},mB=xy(wy("bounce",!0));xy(wy("slide",!0));xy(wy("zoom"));xy(wy("flip"));const Xx=ie.forwardRef((e,t)=>{const{getToastToRender:n,containerRef:s,isToastActive:c}=hB(e),{className:d,style:m,rtl:l,containerId:w}=e;function b(A){const k=ja("Toastify__toast-container",`Toastify__toast-container--${A}`,{"Toastify__toast-container--rtl":l});return Yi(d)?d({position:A,rtl:l,defaultClassName:k}):ja(k,Am(d))}return ie.useEffect(()=>{t&&(t.current=s.current)},[]),dt.createElement("div",{ref:s,className:"Toastify",id:w},n((A,k)=>{const D=k.length?{...m}:{...m,pointerEvents:"none"};return dt.createElement("div",{className:b(A),style:D,key:`container-${A}`},k.map((B,q)=>{let{content:Z,props:K}=B;return dt.createElement(pB,{...K,isIn:c(K.toastId),style:{...K.style,"--nth":q+1,"--len":k.length},key:`toast-${K.key}`},Z)}))}))});Xx.displayName="ToastContainer",Xx.defaultProps={position:"top-right",transition:mB,autoClose:5e3,closeButton:qk,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let CC,S_=new Map,TC=[];Xl.on(2,e=>{CC=e.containerId||e,S_.set(CC,e),TC.forEach(t=>{Xl.emit(0,t.content,t.options)}),TC=[]}).on(3,e=>{S_.delete(e.containerId||e),S_.size===0&&Xl.off(0).off(1).off(5)});const Gk=()=>OA(),Sd=gO;function gB(){return de("h1",{children:"Something went wrong!"})}function yB(){return{isAuthenticated:()=>!!localStorage.getItem("token")}}function vB({isAuthenticated:e,redirectPath:t="/login",children:n}){return e?n||de(b5,{}):de(w5,{to:t,replace:!0})}function _B({routes:e,fallback:t=de(gB,{})}){const{isAuthenticated:n}=yB();return de(ie.Suspense,{fallback:t,children:de(C5,{children:e==null?void 0:e.map(s=>{var c,d;return s.authenticated?de(Ma,{element:de(vB,{isAuthenticated:n()}),children:s!=null&&s.children?de(Ma,{path:s.path,children:(c=s==null?void 0:s.children)==null?void 0:c.map(m=>de(Ma,{path:m.path,element:de(m.component,{})},m.name))},s.name):de(Ma,{path:s.path,element:de(s.component,{})},s.name)},s.name):s!=null&&s.children?de(Ma,{path:s.path,children:(d=s==null?void 0:s.children)==null?void 0:d.map(m=>de(Ma,{path:m.path,element:de(m.component,{})},m.name))},s.name):de(Ma,{path:s.path,element:de(s.component,{})},s.name)})})})}function Zk(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(n=Zk(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function xB(){for(var e,t,n=0,s="",c=arguments.length;n<c;n++)(e=arguments[n])&&(t=Zk(e))&&(s&&(s+=" "),s+=t);return s}function wB(){for(var e=0,t,n,s="";e<arguments.length;)(t=arguments[e++])&&(n=Wk(t))&&(s&&(s+=" "),s+=n);return s}function Wk(e){if(typeof e=="string")return e;for(var t,n="",s=0;s<e.length;s++)e[s]&&(t=Wk(e[s]))&&(n&&(n+=" "),n+=t);return n}var Jw="-";function bB(e){var t=CB(e),n=e.conflictingClassGroups,s=e.conflictingClassGroupModifiers,c=s===void 0?{}:s;function d(l){var w=l.split(Jw);return w[0]===""&&w.length!==1&&w.shift(),Hk(w,t)||SB(l)}function m(l,w){var b=n[l]||[];return w&&c[l]?[].concat(b,c[l]):b}return{getClassGroupId:d,getConflictingClassGroupIds:m}}function Hk(e,t){var m;if(e.length===0)return t.classGroupId;var n=e[0],s=t.nextPart.get(n),c=s?Hk(e.slice(1),s):void 0;if(c)return c;if(t.validators.length!==0){var d=e.join(Jw);return(m=t.validators.find(function(l){var w=l.validator;return w(d)}))==null?void 0:m.classGroupId}}var EC=/^\[(.+)\]$/;function SB(e){if(EC.test(e)){var t=EC.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function CB(e){var t=e.theme,n=e.prefix,s={nextPart:new Map,validators:[]},c=EB(Object.entries(e.classGroups),n);return c.forEach(function(d){var m=d[0],l=d[1];Yx(l,s,m,t)}),s}function Yx(e,t,n,s){e.forEach(function(c){if(typeof c=="string"){var d=c===""?t:PC(t,c);d.classGroupId=n;return}if(typeof c=="function"){if(TB(c)){Yx(c(s),t,n,s);return}t.validators.push({validator:c,classGroupId:n});return}Object.entries(c).forEach(function(m){var l=m[0],w=m[1];Yx(w,PC(t,l),n,s)})})}function PC(e,t){var n=e;return t.split(Jw).forEach(function(s){n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n}function TB(e){return e.isThemeGetter}function EB(e,t){return t?e.map(function(n){var s=n[0],c=n[1],d=c.map(function(m){return typeof m=="string"?t+m:typeof m=="object"?Object.fromEntries(Object.entries(m).map(function(l){var w=l[0],b=l[1];return[t+w,b]})):m});return[s,d]}):e}function PB(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,s=new Map;function c(d,m){n.set(d,m),t++,t>e&&(t=0,s=n,n=new Map)}return{get:function(m){var l=n.get(m);if(l!==void 0)return l;if((l=s.get(m))!==void 0)return c(m,l),l},set:function(m,l){n.has(m)?n.set(m,l):c(m,l)}}}var Kk="!";function AB(e){var t=e.separator||":",n=t.length===1,s=t[0],c=t.length;return function(m){for(var l=[],w=0,b=0,A,k=0;k<m.length;k++){var D=m[k];if(w===0){if(D===s&&(n||m.slice(k,k+c)===t)){l.push(m.slice(b,k)),b=k+c;continue}if(D==="/"){A=k;continue}}D==="["?w++:D==="]"&&w--}var B=l.length===0?m:m.substring(b),q=B.startsWith(Kk),Z=q?B.substring(1):B,K=A&&A>b?A-b:void 0;return{modifiers:l,hasImportantModifier:q,baseClassName:Z,maybePostfixModifierPosition:K}}}function kB(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(s){var c=s[0]==="[";c?(t.push.apply(t,n.sort().concat([s])),n=[]):n.push(s)}),t.push.apply(t,n.sort()),t}function IB(e){return{cache:PB(e.cacheSize),splitModifiers:AB(e),...bB(e)}}var MB=/\s+/;function DB(e,t){var n=t.splitModifiers,s=t.getClassGroupId,c=t.getConflictingClassGroupIds,d=new Set;return e.trim().split(MB).map(function(m){var l=n(m),w=l.modifiers,b=l.hasImportantModifier,A=l.baseClassName,k=l.maybePostfixModifierPosition,D=s(k?A.substring(0,k):A),B=!!k;if(!D){if(!k)return{isTailwindClass:!1,originalClassName:m};if(D=s(A),!D)return{isTailwindClass:!1,originalClassName:m};B=!1}var q=kB(w).join(":"),Z=b?q+Kk:q;return{isTailwindClass:!0,modifierId:Z,classGroupId:D,originalClassName:m,hasPostfixModifier:B}}).reverse().filter(function(m){if(!m.isTailwindClass)return!0;var l=m.modifierId,w=m.classGroupId,b=m.hasPostfixModifier,A=l+w;return d.has(A)?!1:(d.add(A),c(w,b).forEach(function(k){return d.add(l+k)}),!0)}).reverse().map(function(m){return m.originalClassName}).join(" ")}function zB(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var s,c,d,m=l;function l(b){var A=t[0],k=t.slice(1),D=k.reduce(function(B,q){return q(B)},A());return s=IB(D),c=s.cache.get,d=s.cache.set,m=w,w(b)}function w(b){var A=c(b);if(A)return A;var k=DB(b,s);return d(b,k),k}return function(){return m(wB.apply(null,arguments))}}function In(e){var t=function(s){return s[e]||[]};return t.isThemeGetter=!0,t}var Xk=/^\[(?:([a-z-]+):)?(.+)\]$/i,RB=/^\d+\/\d+$/,LB=new Set(["px","full","screen"]),OB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,FB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,NB=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Vs(e){return Yl(e)||LB.has(e)||RB.test(e)||Qx(e)}function Qx(e){return fu(e,"length",qB)}function BB(e){return fu(e,"size",Yk)}function VB(e){return fu(e,"position",Yk)}function $B(e){return fu(e,"url",GB)}function nm(e){return fu(e,"number",Yl)}function Yl(e){return!Number.isNaN(Number(e))}function jB(e){return e.endsWith("%")&&Yl(e.slice(0,-1))}function fd(e){return AC(e)||fu(e,"number",AC)}function Kt(e){return Xk.test(e)}function pd(){return!0}function Ia(e){return OB.test(e)}function UB(e){return fu(e,"",ZB)}function fu(e,t,n){var s=Xk.exec(e);return s?s[1]?s[1]===t:n(s[2]):!1}function qB(e){return FB.test(e)}function Yk(){return!1}function GB(e){return e.startsWith("url(")}function AC(e){return Number.isInteger(Number(e))}function ZB(e){return NB.test(e)}function WB(){var e=In("colors"),t=In("spacing"),n=In("blur"),s=In("brightness"),c=In("borderColor"),d=In("borderRadius"),m=In("borderSpacing"),l=In("borderWidth"),w=In("contrast"),b=In("grayscale"),A=In("hueRotate"),k=In("invert"),D=In("gap"),B=In("gradientColorStops"),q=In("gradientColorStopPositions"),Z=In("inset"),K=In("margin"),N=In("opacity"),F=In("padding"),H=In("saturate"),te=In("scale"),me=In("sepia"),Se=In("skew"),Ie=In("space"),Ce=In("translate"),Ge=function(){return["auto","contain","none"]},Le=function(){return["auto","hidden","clip","visible","scroll"]},Tt=function(){return["auto",Kt,t]},Ue=function(){return[Kt,t]},gt=function(){return["",Vs]},_t=function(){return["auto",Yl,Kt]},Lt=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},zt=function(){return["solid","dashed","dotted","double","none"]},bt=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},$e=function(){return["start","end","center","between","around","evenly","stretch"]},ut=function(){return["","0",Kt]},Et=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},Wt=function(){return[Yl,nm]},Gt=function(){return[Yl,Kt]};return{cacheSize:500,theme:{colors:[pd],spacing:[Vs],blur:["none","",Ia,Kt],brightness:Wt(),borderColor:[e],borderRadius:["none","","full",Ia,Kt],borderSpacing:Ue(),borderWidth:gt(),contrast:Wt(),grayscale:ut(),hueRotate:Gt(),invert:ut(),gap:Ue(),gradientColorStops:[e],gradientColorStopPositions:[jB,Qx],inset:Tt(),margin:Tt(),opacity:Wt(),padding:Ue(),saturate:Wt(),scale:Wt(),sepia:ut(),skew:Gt(),space:Ue(),translate:Ue()},classGroups:{aspect:[{aspect:["auto","square","video",Kt]}],container:["container"],columns:[{columns:[Ia]}],"break-after":[{"break-after":Et()}],"break-before":[{"break-before":Et()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(Lt(),[Kt])}],overflow:[{overflow:Le()}],"overflow-x":[{"overflow-x":Le()}],"overflow-y":[{"overflow-y":Le()}],overscroll:[{overscroll:Ge()}],"overscroll-x":[{"overscroll-x":Ge()}],"overscroll-y":[{"overscroll-y":Ge()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[Z]}],"inset-x":[{"inset-x":[Z]}],"inset-y":[{"inset-y":[Z]}],start:[{start:[Z]}],end:[{end:[Z]}],top:[{top:[Z]}],right:[{right:[Z]}],bottom:[{bottom:[Z]}],left:[{left:[Z]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",fd]}],basis:[{basis:Tt()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Kt]}],grow:[{grow:ut()}],shrink:[{shrink:ut()}],order:[{order:["first","last","none",fd]}],"grid-cols":[{"grid-cols":[pd]}],"col-start-end":[{col:["auto",{span:["full",fd]},Kt]}],"col-start":[{"col-start":_t()}],"col-end":[{"col-end":_t()}],"grid-rows":[{"grid-rows":[pd]}],"row-start-end":[{row:["auto",{span:[fd]},Kt]}],"row-start":[{"row-start":_t()}],"row-end":[{"row-end":_t()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Kt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Kt]}],gap:[{gap:[D]}],"gap-x":[{"gap-x":[D]}],"gap-y":[{"gap-y":[D]}],"justify-content":[{justify:["normal"].concat($e())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat($e(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat($e(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[F]}],px:[{px:[F]}],py:[{py:[F]}],ps:[{ps:[F]}],pe:[{pe:[F]}],pt:[{pt:[F]}],pr:[{pr:[F]}],pb:[{pb:[F]}],pl:[{pl:[F]}],m:[{m:[K]}],mx:[{mx:[K]}],my:[{my:[K]}],ms:[{ms:[K]}],me:[{me:[K]}],mt:[{mt:[K]}],mr:[{mr:[K]}],mb:[{mb:[K]}],ml:[{ml:[K]}],"space-x":[{"space-x":[Ie]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Ie]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Kt,t]}],"min-w":[{"min-w":["min","max","fit",Kt,Vs]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Ia]},Ia,Kt]}],h:[{h:[Kt,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Kt,Vs]}],"max-h":[{"max-h":[Kt,t,"min","max","fit"]}],"font-size":[{text:["base",Ia,Qx]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",nm]}],"font-family":[{font:[pd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Kt]}],"line-clamp":[{"line-clamp":["none",Yl,nm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Kt,Vs]}],"list-image":[{"list-image":["none",Kt]}],"list-style-type":[{list:["none","disc","decimal",Kt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[N]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[N]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(zt(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Vs]}],"underline-offset":[{"underline-offset":["auto",Kt,Vs]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:Ue()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Kt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Kt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[N]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(Lt(),[VB])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",BB]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},$B]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[q]}],"gradient-via-pos":[{via:[q]}],"gradient-to-pos":[{to:[q]}],"gradient-from":[{from:[B]}],"gradient-via":[{via:[B]}],"gradient-to":[{to:[B]}],rounded:[{rounded:[d]}],"rounded-s":[{"rounded-s":[d]}],"rounded-e":[{"rounded-e":[d]}],"rounded-t":[{"rounded-t":[d]}],"rounded-r":[{"rounded-r":[d]}],"rounded-b":[{"rounded-b":[d]}],"rounded-l":[{"rounded-l":[d]}],"rounded-ss":[{"rounded-ss":[d]}],"rounded-se":[{"rounded-se":[d]}],"rounded-ee":[{"rounded-ee":[d]}],"rounded-es":[{"rounded-es":[d]}],"rounded-tl":[{"rounded-tl":[d]}],"rounded-tr":[{"rounded-tr":[d]}],"rounded-br":[{"rounded-br":[d]}],"rounded-bl":[{"rounded-bl":[d]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[N]}],"border-style":[{border:[].concat(zt(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[N]}],"divide-style":[{divide:zt()}],"border-color":[{border:[c]}],"border-color-x":[{"border-x":[c]}],"border-color-y":[{"border-y":[c]}],"border-color-t":[{"border-t":[c]}],"border-color-r":[{"border-r":[c]}],"border-color-b":[{"border-b":[c]}],"border-color-l":[{"border-l":[c]}],"divide-color":[{divide:[c]}],"outline-style":[{outline:[""].concat(zt())}],"outline-offset":[{"outline-offset":[Kt,Vs]}],"outline-w":[{outline:[Vs]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:gt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[N]}],"ring-offset-w":[{"ring-offset":[Vs]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ia,UB]}],"shadow-color":[{shadow:[pd]}],opacity:[{opacity:[N]}],"mix-blend":[{"mix-blend":bt()}],"bg-blend":[{"bg-blend":bt()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[w]}],"drop-shadow":[{"drop-shadow":["","none",Ia,Kt]}],grayscale:[{grayscale:[b]}],"hue-rotate":[{"hue-rotate":[A]}],invert:[{invert:[k]}],saturate:[{saturate:[H]}],sepia:[{sepia:[me]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[w]}],"backdrop-grayscale":[{"backdrop-grayscale":[b]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[A]}],"backdrop-invert":[{"backdrop-invert":[k]}],"backdrop-opacity":[{"backdrop-opacity":[N]}],"backdrop-saturate":[{"backdrop-saturate":[H]}],"backdrop-sepia":[{"backdrop-sepia":[me]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[m]}],"border-spacing-x":[{"border-spacing-x":[m]}],"border-spacing-y":[{"border-spacing-y":[m]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Kt]}],duration:[{duration:Gt()}],ease:[{ease:["linear","in","out","in-out",Kt]}],delay:[{delay:Gt()}],animate:[{animate:["none","spin","ping","pulse","bounce",Kt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[te]}],"scale-x":[{"scale-x":[te]}],"scale-y":[{"scale-y":[te]}],rotate:[{rotate:[fd,Kt]}],"translate-x":[{"translate-x":[Ce]}],"translate-y":[{"translate-y":[Ce]}],"skew-x":[{"skew-x":[Se]}],"skew-y":[{"skew-y":[Se]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Kt]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Kt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Ue()}],"scroll-mx":[{"scroll-mx":Ue()}],"scroll-my":[{"scroll-my":Ue()}],"scroll-ms":[{"scroll-ms":Ue()}],"scroll-me":[{"scroll-me":Ue()}],"scroll-mt":[{"scroll-mt":Ue()}],"scroll-mr":[{"scroll-mr":Ue()}],"scroll-mb":[{"scroll-mb":Ue()}],"scroll-ml":[{"scroll-ml":Ue()}],"scroll-p":[{"scroll-p":Ue()}],"scroll-px":[{"scroll-px":Ue()}],"scroll-py":[{"scroll-py":Ue()}],"scroll-ps":[{"scroll-ps":Ue()}],"scroll-pe":[{"scroll-pe":Ue()}],"scroll-pt":[{"scroll-pt":Ue()}],"scroll-pr":[{"scroll-pr":Ue()}],"scroll-pb":[{"scroll-pb":Ue()}],"scroll-pl":[{"scroll-pl":Ue()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Kt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Vs,nm]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var HB=zB(WB);function fl(...e){return HB(xB(e))}function Qk({className:e="",children:t,gap:n,md:s,row:c,...d}){let m="";return s&&(m+="md:naxatw-flex-row "),de("div",{className:fl(`naxatw-flex naxatw-flex-col ${m}
      ${e}`),...d,style:{gap:n?`${n*.25}rem`:""},children:t})}function Fi({className:e="",children:t,gap:n,...s}){return de("div",{className:fl(`naxatw-flex naxatw-flex-row
      ${e}`),...s,style:{gap:n?`${n*.25}rem`:""},children:t})}function Ql({className:e="",children:t,gap:n,...s}){return de("div",{className:fl(`naxatw-flex naxatw-flex-col ${e}`),style:{gap:n?`${n*.25}rem`:""},...s,children:t})}const KB=""+new URL("landing-image-eda3ebc4.svg",import.meta.url).href;function Zo({aspectRation:e,styleClass:t,src:n,alt:s,width:c,className:d}){return de("div",{className:`image-cover naxatw-aspect-${e} ${t}}  `,style:{aspectRatio:e},children:de("img",{src:n,alt:s,width:c,className:d})})}function XB(){return de("section",{className:"home naxatw-bg-primary naxatw-w-full naxatw-h-[35rem]",children:mt(Fi,{className:"naxatw-container naxatw-h-full naxatw-items-center naxatw-justify-between",children:[mt(Ql,{gap:10,children:[mt("div",{className:"naxatw-animate-fade-up",children:[de("h1",{className:"naxatw-text-white naxatw-text-[5rem]",children:"GeoSewa"}),de("p",{className:"naxatw-text-white naxatw-tracking-widest naxatw-text-[1.15rem] naxatw-mt-3 naxatw-ml-3",children:"Your Spatial Reference!"})]}),de("p",{className:"naxatw-text-white naxatw-text-[1.5rem] naxatw-ml-3 naxatw-animate-fade-up",children:"Unlock your potential with notes and mock exam mastery!!"})]}),de(Zo,{src:KB,width:400,className:"naxatw-animate-fade-up naxatw-hidden md:naxatw-flex"})]})})}const YB=""+new URL("about-image-87671f32.svg",import.meta.url).href;function QB(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...s)=>e(...s);return new Proxy(n,{get:(s,c)=>c==="create"?e:(t.has(c)||t.set(c,e(c)),t.get(c))})}function hf(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Jx=e=>Array.isArray(e);function Jk(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}function df(e){return typeof e=="string"||Array.isArray(e)}function kC(e){const t=[{},{}];return e==null||e.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function e1(e,t,n,s){if(typeof t=="function"){const[c,d]=kC(s);t=t(n!==void 0?n:e.custom,c,d)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[c,d]=kC(s);t=t(n!==void 0?n:e.custom,c,d)}return t}function by(e,t,n){const s=e.getProps();return e1(s,t,n!==void 0?n:s.custom,e)}const t1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],n1=["initial",...t1],Sf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],pl=new Set(Sf),vo=e=>e*1e3,Ko=e=>e/1e3,JB={type:"spring",stiffness:500,damping:25,restSpeed:10},e6=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),t6={type:"keyframes",duration:.8},n6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},r6=(e,{keyframes:t})=>t.length>2?t6:pl.has(e)?e.startsWith("scale")?e6(t[1]):JB:n6;function r1(e,t){return e?e[t]||e.default||e:void 0}const i6={skipAnimations:!1,useManualTiming:!1},s6=e=>e!==null;function Sy(e,{repeat:t,repeatType:n="loop"},s){const c=e.filter(s6),d=t&&n!=="loop"&&t%2===1?0:c.length-1;return!d||s===void 0?c[d]:s}const Br=e=>e;function o6(e){let t=new Set,n=new Set,s=!1,c=!1;const d=new WeakSet;let m={delta:0,timestamp:0,isProcessing:!1};function l(b){d.has(b)&&(w.schedule(b),e()),b(m)}const w={schedule:(b,A=!1,k=!1)=>{const B=k&&s?t:n;return A&&d.add(b),B.has(b)||B.add(b),b},cancel:b=>{n.delete(b),d.delete(b)},process:b=>{if(m=b,s){c=!0;return}s=!0,[t,n]=[n,t],n.clear(),t.forEach(l),s=!1,c&&(c=!1,w.process(b))}};return w}const rm=["read","resolveKeyframes","update","preRender","render","postRender"],a6=40;function eI(e,t){let n=!1,s=!0;const c={delta:0,timestamp:0,isProcessing:!1},d=()=>n=!0,m=rm.reduce((N,F)=>(N[F]=o6(d),N),{}),{read:l,resolveKeyframes:w,update:b,preRender:A,render:k,postRender:D}=m,B=()=>{const N=performance.now();n=!1,c.delta=s?1e3/60:Math.max(Math.min(N-c.timestamp,a6),1),c.timestamp=N,c.isProcessing=!0,l.process(c),w.process(c),b.process(c),A.process(c),k.process(c),D.process(c),c.isProcessing=!1,n&&t&&(s=!1,e(B))},q=()=>{n=!0,s=!0,c.isProcessing||e(B)};return{schedule:rm.reduce((N,F)=>{const H=m[F];return N[F]=(te,me=!1,Se=!1)=>(n||q(),H.schedule(te,me,Se)),N},{}),cancel:N=>{for(let F=0;F<rm.length;F++)m[rm[F]].cancel(N)},state:c,steps:m}}const{schedule:pn,cancel:al,state:Fr,steps:C_}=eI(typeof requestAnimationFrame<"u"?requestAnimationFrame:Br,!0),tI=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,l6=1e-7,u6=12;function c6(e,t,n,s,c){let d,m,l=0;do m=t+(n-t)/2,d=tI(m,s,c)-e,d>0?n=m:t=m;while(Math.abs(d)>l6&&++l<u6);return m}function Cf(e,t,n,s){if(e===t&&n===s)return Br;const c=d=>c6(d,0,1,e,n);return d=>d===0||d===1?d:tI(c(d),t,s)}const nI=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,rI=e=>t=>1-e(1-t),iI=Cf(.33,1.53,.69,.99),i1=rI(iI),sI=nI(i1),oI=e=>(e*=2)<1?.5*i1(e):.5*(2-Math.pow(2,-10*(e-1))),s1=e=>1-Math.sin(Math.acos(e)),aI=rI(s1),lI=nI(s1),uI=e=>/^0[^.\s]+$/u.test(e);function h6(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||uI(e):!0}let d6=Br,cI=Br;const hI=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),dI=e=>t=>typeof t=="string"&&t.startsWith(e),fI=dI("--"),f6=dI("var(--"),o1=e=>f6(e)?p6.test(e.split("/*")[0].trim()):!1,p6=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,m6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function g6(e){const t=m6.exec(e);if(!t)return[,];const[,n,s,c]=t;return[`--${n??s}`,c]}function pI(e,t,n=1){const[s,c]=g6(e);if(!s)return;const d=window.getComputedStyle(t).getPropertyValue(s);if(d){const m=d.trim();return hI(m)?parseFloat(m):m}return o1(c)?pI(c,t,n+1):c}const ll=(e,t,n)=>n>t?t:n<e?e:n,Qc={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ff={...Qc,transform:e=>ll(0,1,e)},im={...Qc,default:1},Tf=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Da=Tf("deg"),_o=Tf("%"),It=Tf("px"),y6=Tf("vh"),v6=Tf("vw"),IC={..._o,parse:e=>_o.parse(e)/100,transform:e=>_o.transform(e*100)},_6=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),MC=e=>e===Qc||e===It,DC=(e,t)=>parseFloat(e.split(", ")[t]),zC=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const c=s.match(/^matrix3d\((.+)\)$/u);if(c)return DC(c[1],t);{const d=s.match(/^matrix\((.+)\)$/u);return d?DC(d[1],e):0}},x6=new Set(["x","y","z"]),w6=Sf.filter(e=>!x6.has(e));function b6(e){const t=[];return w6.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const Vc={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:zC(4,13),y:zC(5,14)};Vc.translateX=Vc.x;Vc.translateY=Vc.y;const mI=e=>t=>t.test(e),S6={test:e=>e==="auto",parse:e=>e},gI=[Qc,It,_o,Da,v6,y6,S6],RC=e=>gI.find(mI(e)),ru=new Set;let e0=!1,t0=!1;function yI(){if(t0){const e=Array.from(ru).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const c=b6(s);c.length&&(n.set(s,c),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const c=n.get(s);c&&c.forEach(([d,m])=>{var l;(l=s.getValue(d))===null||l===void 0||l.set(m)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}t0=!1,e0=!1,ru.forEach(e=>e.complete()),ru.clear()}function vI(){ru.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(t0=!0)})}function C6(){vI(),yI()}class a1{constructor(t,n,s,c,d,m=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=c,this.element=d,this.isAsync=m}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ru.add(this),e0||(e0=!0,pn.read(vI),pn.resolveKeyframes(yI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:c}=this;for(let d=0;d<t.length;d++)if(t[d]===null)if(d===0){const m=c==null?void 0:c.get(),l=t[t.length-1];if(m!==void 0)t[0]=m;else if(s&&n){const w=s.readValue(n,l);w!=null&&(t[0]=w)}t[0]===void 0&&(t[0]=l),c&&m===void 0&&c.set(t[0])}else t[d]=t[d-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ru.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ru.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Nd=e=>Math.round(e*1e5)/1e5,l1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function T6(e){return e==null}const E6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,u1=(e,t)=>n=>!!(typeof n=="string"&&E6.test(n)&&n.startsWith(e)||t&&!T6(n)&&Object.prototype.hasOwnProperty.call(n,t)),_I=(e,t,n)=>s=>{if(typeof s!="string")return s;const[c,d,m,l]=s.match(l1);return{[e]:parseFloat(c),[t]:parseFloat(d),[n]:parseFloat(m),alpha:l!==void 0?parseFloat(l):1}},P6=e=>ll(0,255,e),T_={...Qc,transform:e=>Math.round(P6(e))},Jl={test:u1("rgb","red"),parse:_I("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+T_.transform(e)+", "+T_.transform(t)+", "+T_.transform(n)+", "+Nd(ff.transform(s))+")"};function A6(e){let t="",n="",s="",c="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),c=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),c=e.substring(4,5),t+=t,n+=n,s+=s,c+=c),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:c?parseInt(c,16)/255:1}}const n0={test:u1("#"),parse:A6,transform:Jl.transform},mc={test:u1("hsl","hue"),parse:_I("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+_o.transform(Nd(t))+", "+_o.transform(Nd(n))+", "+Nd(ff.transform(s))+")"},ti={test:e=>Jl.test(e)||n0.test(e)||mc.test(e),parse:e=>Jl.test(e)?Jl.parse(e):mc.test(e)?mc.parse(e):n0.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Jl.transform(e):mc.transform(e)},k6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function I6(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(l1))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(k6))===null||n===void 0?void 0:n.length)||0)>0}const xI="number",wI="color",M6="var",D6="var(",LC="${}",z6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function pf(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},c=[];let d=0;const l=t.replace(z6,w=>(ti.test(w)?(s.color.push(d),c.push(wI),n.push(ti.parse(w))):w.startsWith(D6)?(s.var.push(d),c.push(M6),n.push(w)):(s.number.push(d),c.push(xI),n.push(parseFloat(w))),++d,LC)).split(LC);return{values:n,split:l,indexes:s,types:c}}function bI(e){return pf(e).values}function SI(e){const{split:t,types:n}=pf(e),s=t.length;return c=>{let d="";for(let m=0;m<s;m++)if(d+=t[m],c[m]!==void 0){const l=n[m];l===xI?d+=Nd(c[m]):l===wI?d+=ti.transform(c[m]):d+=c[m]}return d}}const R6=e=>typeof e=="number"?0:e;function L6(e){const t=bI(e);return SI(e)(t.map(R6))}const ul={test:I6,parse:bI,createTransformer:SI,getAnimatableNone:L6},O6=new Set(["brightness","contrast","saturate","opacity"]);function F6(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(l1)||[];if(!s)return e;const c=n.replace(s,"");let d=O6.has(t)?1:0;return s!==n&&(d*=100),t+"("+d+c+")"}const N6=/\b([a-z-]*)\(.*?\)/gu,r0={...ul,getAnimatableNone:e=>{const t=e.match(N6);return t?t.map(F6).join(" "):e}},B6={borderWidth:It,borderTopWidth:It,borderRightWidth:It,borderBottomWidth:It,borderLeftWidth:It,borderRadius:It,radius:It,borderTopLeftRadius:It,borderTopRightRadius:It,borderBottomRightRadius:It,borderBottomLeftRadius:It,width:It,maxWidth:It,height:It,maxHeight:It,top:It,right:It,bottom:It,left:It,padding:It,paddingTop:It,paddingRight:It,paddingBottom:It,paddingLeft:It,margin:It,marginTop:It,marginRight:It,marginBottom:It,marginLeft:It,backgroundPositionX:It,backgroundPositionY:It},V6={rotate:Da,rotateX:Da,rotateY:Da,rotateZ:Da,scale:im,scaleX:im,scaleY:im,scaleZ:im,skew:Da,skewX:Da,skewY:Da,distance:It,translateX:It,translateY:It,translateZ:It,x:It,y:It,z:It,perspective:It,transformPerspective:It,opacity:ff,originX:IC,originY:IC,originZ:It},OC={...Qc,transform:Math.round},c1={...B6,...V6,zIndex:OC,size:It,fillOpacity:ff,strokeOpacity:ff,numOctaves:OC},$6={...c1,color:ti,backgroundColor:ti,outlineColor:ti,fill:ti,stroke:ti,borderColor:ti,borderTopColor:ti,borderRightColor:ti,borderBottomColor:ti,borderLeftColor:ti,filter:r0,WebkitFilter:r0},h1=e=>$6[e];function CI(e,t){let n=h1(e);return n!==r0&&(n=ul),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const j6=new Set(["auto","none","0"]);function U6(e,t,n){let s=0,c;for(;s<e.length&&!c;){const d=e[s];typeof d=="string"&&!j6.has(d)&&pf(d).values.length&&(c=e[s]),s++}if(c&&n)for(const d of t)e[d]=CI(n,c)}class TI extends a1{constructor(t,n,s,c,d){super(t,n,s,c,d,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let w=0;w<t.length;w++){let b=t[w];if(typeof b=="string"&&(b=b.trim(),o1(b))){const A=pI(b,n.current);A!==void 0&&(t[w]=A),w===t.length-1&&(this.finalKeyframe=b)}}if(this.resolveNoneKeyframes(),!_6.has(s)||t.length!==2)return;const[c,d]=t,m=RC(c),l=RC(d);if(m!==l)if(MC(m)&&MC(l))for(let w=0;w<t.length;w++){const b=t[w];typeof b=="string"&&(t[w]=parseFloat(b))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,s=[];for(let c=0;c<t.length;c++)h6(t[c])&&s.push(c);s.length&&U6(t,s,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vc[s](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const c=n[n.length-1];c!==void 0&&t.getValue(s,c).jump(c,!1)}measureEndState(){var t;const{element:n,name:s,unresolvedKeyframes:c}=this;if(!n||!n.current)return;const d=n.getValue(s);d&&d.jump(this.measuredOrigin,!1);const m=c.length-1,l=c[m];c[m]=Vc[s](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([w,b])=>{n.getValue(w).set(b)}),this.resolveNoneKeyframes()}}function d1(e){return typeof e=="function"}let km;function q6(){km=void 0}const xo={now:()=>(km===void 0&&xo.set(Fr.isProcessing||i6.useManualTiming?Fr.timestamp:performance.now()),km),set:e=>{km=e,queueMicrotask(q6)}},FC=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ul.test(e)||e==="0")&&!e.startsWith("url("));function G6(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Z6(e,t,n,s){const c=e[0];if(c===null)return!1;if(t==="display"||t==="visibility")return!0;const d=e[e.length-1],m=FC(c,t),l=FC(d,t);return!m||!l?!1:G6(e)||(n==="spring"||d1(n))&&s}const W6=40;class EI{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:c=0,repeatDelay:d=0,repeatType:m="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=xo.now(),this.options={autoplay:t,delay:n,type:s,repeat:c,repeatDelay:d,repeatType:m,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>W6?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&C6(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=xo.now(),this.hasAttemptedResolve=!0;const{name:s,type:c,velocity:d,delay:m,onComplete:l,onUpdate:w,isGenerator:b}=this.options;if(!b&&!Z6(t,s,c,d))if(m)this.options.duration=0;else{w==null||w(Sy(t,this.options,n)),l==null||l(),this.resolveFinishedPromise();return}const A=this.initPlayback(t,n);A!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...A},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}function PI(e,t){return t?e*(1e3/t):0}const H6=5;function AI(e,t,n){const s=Math.max(t-H6,0);return PI(n-e(s),t-s)}const E_=.001,K6=.01,NC=10,X6=.05,Y6=1;function Q6({duration:e=800,bounce:t=.25,velocity:n=0,mass:s=1}){let c,d;d6(e<=vo(NC));let m=1-t;m=ll(X6,Y6,m),e=ll(K6,NC,Ko(e)),m<1?(c=b=>{const A=b*m,k=A*e,D=A-n,B=i0(b,m),q=Math.exp(-k);return E_-D/B*q},d=b=>{const k=b*m*e,D=k*n+n,B=Math.pow(m,2)*Math.pow(b,2)*e,q=Math.exp(-k),Z=i0(Math.pow(b,2),m);return(-c(b)+E_>0?-1:1)*((D-B)*q)/Z}):(c=b=>{const A=Math.exp(-b*e),k=(b-n)*e+1;return-E_+A*k},d=b=>{const A=Math.exp(-b*e),k=(n-b)*(e*e);return A*k});const l=5/e,w=eV(c,d,l);if(e=vo(e),isNaN(w))return{stiffness:100,damping:10,duration:e};{const b=Math.pow(w,2)*s;return{stiffness:b,damping:m*2*Math.sqrt(s*b),duration:e}}}const J6=12;function eV(e,t,n){let s=n;for(let c=1;c<J6;c++)s=s-e(s)/t(s);return s}function i0(e,t){return e*Math.sqrt(1-t*t)}const tV=["duration","bounce"],nV=["stiffness","damping","mass"];function BC(e,t){return t.some(n=>e[n]!==void 0)}function rV(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!BC(e,nV)&&BC(e,tV)){const n=Q6(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function kI({keyframes:e,restDelta:t,restSpeed:n,...s}){const c=e[0],d=e[e.length-1],m={done:!1,value:c},{stiffness:l,damping:w,mass:b,duration:A,velocity:k,isResolvedFromDuration:D}=rV({...s,velocity:-Ko(s.velocity||0)}),B=k||0,q=w/(2*Math.sqrt(l*b)),Z=d-c,K=Ko(Math.sqrt(l/b)),N=Math.abs(Z)<5;n||(n=N?.01:2),t||(t=N?.005:.5);let F;if(q<1){const H=i0(K,q);F=te=>{const me=Math.exp(-q*K*te);return d-me*((B+q*K*Z)/H*Math.sin(H*te)+Z*Math.cos(H*te))}}else if(q===1)F=H=>d-Math.exp(-K*H)*(Z+(B+K*Z)*H);else{const H=K*Math.sqrt(q*q-1);F=te=>{const me=Math.exp(-q*K*te),Se=Math.min(H*te,300);return d-me*((B+q*K*Z)*Math.sinh(Se)+H*Z*Math.cosh(Se))/H}}return{calculatedDuration:D&&A||null,next:H=>{const te=F(H);if(D)m.done=H>=A;else{let me=0;q<1&&(me=H===0?vo(B):AI(F,H,te));const Se=Math.abs(me)<=n,Ie=Math.abs(d-te)<=t;m.done=Se&&Ie}return m.value=m.done?d:te,m}}}function VC({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:c=10,bounceStiffness:d=500,modifyTarget:m,min:l,max:w,restDelta:b=.5,restSpeed:A}){const k=e[0],D={done:!1,value:k},B=Ce=>l!==void 0&&Ce<l||w!==void 0&&Ce>w,q=Ce=>l===void 0?w:w===void 0||Math.abs(l-Ce)<Math.abs(w-Ce)?l:w;let Z=n*t;const K=k+Z,N=m===void 0?K:m(K);N!==K&&(Z=N-k);const F=Ce=>-Z*Math.exp(-Ce/s),H=Ce=>N+F(Ce),te=Ce=>{const Ge=F(Ce),Le=H(Ce);D.done=Math.abs(Ge)<=b,D.value=D.done?N:Le};let me,Se;const Ie=Ce=>{B(D.value)&&(me=Ce,Se=kI({keyframes:[D.value,q(D.value)],velocity:AI(H,Ce,D.value),damping:c,stiffness:d,restDelta:b,restSpeed:A}))};return Ie(0),{calculatedDuration:null,next:Ce=>{let Ge=!1;return!Se&&me===void 0&&(Ge=!0,te(Ce),Ie(Ce)),me!==void 0&&Ce>=me?Se.next(Ce-me):(!Ge&&te(Ce),D)}}}const iV=Cf(.42,0,1,1),sV=Cf(0,0,.58,1),II=Cf(.42,0,.58,1),oV=e=>Array.isArray(e)&&typeof e[0]!="number",f1=e=>Array.isArray(e)&&typeof e[0]=="number",aV={linear:Br,easeIn:iV,easeInOut:II,easeOut:sV,circIn:s1,circInOut:lI,circOut:aI,backIn:i1,backInOut:sI,backOut:iI,anticipate:oI},$C=e=>{if(f1(e)){cI(e.length===4);const[t,n,s,c]=e;return Cf(t,n,s,c)}else if(typeof e=="string")return aV[e];return e},lV=(e,t)=>n=>t(e(n)),Xo=(...e)=>e.reduce(lV),$c=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},Un=(e,t,n)=>e+(t-e)*n;function P_(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function uV({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let c=0,d=0,m=0;if(!t)c=d=m=n;else{const l=n<.5?n*(1+t):n+t-n*t,w=2*n-l;c=P_(w,l,e+1/3),d=P_(w,l,e),m=P_(w,l,e-1/3)}return{red:Math.round(c*255),green:Math.round(d*255),blue:Math.round(m*255),alpha:s}}function pg(e,t){return n=>n>0?t:e}const A_=(e,t,n)=>{const s=e*e,c=n*(t*t-s)+s;return c<0?0:Math.sqrt(c)},cV=[n0,Jl,mc],hV=e=>cV.find(t=>t.test(e));function jC(e){const t=hV(e);if(!t)return!1;let n=t.parse(e);return t===mc&&(n=uV(n)),n}const UC=(e,t)=>{const n=jC(e),s=jC(t);if(!n||!s)return pg(e,t);const c={...n};return d=>(c.red=A_(n.red,s.red,d),c.green=A_(n.green,s.green,d),c.blue=A_(n.blue,s.blue,d),c.alpha=Un(n.alpha,s.alpha,d),Jl.transform(c))},s0=new Set(["none","hidden"]);function dV(e,t){return s0.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function fV(e,t){return n=>Un(e,t,n)}function p1(e){return typeof e=="number"?fV:typeof e=="string"?o1(e)?pg:ti.test(e)?UC:gV:Array.isArray(e)?MI:typeof e=="object"?ti.test(e)?UC:pV:pg}function MI(e,t){const n=[...e],s=n.length,c=e.map((d,m)=>p1(d)(d,t[m]));return d=>{for(let m=0;m<s;m++)n[m]=c[m](d);return n}}function pV(e,t){const n={...e,...t},s={};for(const c in n)e[c]!==void 0&&t[c]!==void 0&&(s[c]=p1(e[c])(e[c],t[c]));return c=>{for(const d in s)n[d]=s[d](c);return n}}function mV(e,t){var n;const s=[],c={color:0,var:0,number:0};for(let d=0;d<t.values.length;d++){const m=t.types[d],l=e.indexes[m][c[m]],w=(n=e.values[l])!==null&&n!==void 0?n:0;s[d]=w,c[m]++}return s}const gV=(e,t)=>{const n=ul.createTransformer(t),s=pf(e),c=pf(t);return s.indexes.var.length===c.indexes.var.length&&s.indexes.color.length===c.indexes.color.length&&s.indexes.number.length>=c.indexes.number.length?s0.has(e)&&!c.values.length||s0.has(t)&&!s.values.length?dV(e,t):Xo(MI(mV(s,c),c.values),n):pg(e,t)};function DI(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Un(e,t,n):p1(e)(e,t)}function yV(e,t,n){const s=[],c=n||DI,d=e.length-1;for(let m=0;m<d;m++){let l=c(e[m],e[m+1]);if(t){const w=Array.isArray(t)?t[m]||Br:t;l=Xo(w,l)}s.push(l)}return s}function vV(e,t,{clamp:n=!0,ease:s,mixer:c}={}){const d=e.length;if(cI(d===t.length),d===1)return()=>t[0];if(d===2&&e[0]===e[1])return()=>t[1];e[0]>e[d-1]&&(e=[...e].reverse(),t=[...t].reverse());const m=yV(t,s,c),l=m.length,w=b=>{let A=0;if(l>1)for(;A<e.length-2&&!(b<e[A+1]);A++);const k=$c(e[A],e[A+1],b);return m[A](k)};return n?b=>w(ll(e[0],e[d-1],b)):w}function _V(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const c=$c(0,t,s);e.push(Un(n,1,c))}}function xV(e){const t=[0];return _V(t,e.length-1),t}function wV(e,t){return e.map(n=>n*t)}function bV(e,t){return e.map(()=>t||II).splice(0,e.length-1)}function mg({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const c=oV(s)?s.map($C):$C(s),d={done:!1,value:t[0]},m=wV(n&&n.length===t.length?n:xV(t),e),l=vV(m,t,{ease:Array.isArray(c)?c:bV(t,c)});return{calculatedDuration:e,next:w=>(d.value=l(w),d.done=w>=e,d)}}const qC=2e4;function SV(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<qC;)t+=n,s=e.next(t);return t>=qC?1/0:t}const CV=e=>{const t=({timestamp:n})=>e(n);return{start:()=>pn.update(t,!0),stop:()=>al(t),now:()=>Fr.isProcessing?Fr.timestamp:xo.now()}},TV={decay:VC,inertia:VC,tween:mg,keyframes:mg,spring:kI},EV=e=>e/100;class m1 extends EI{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:w}=this.options;w&&w()};const{name:n,motionValue:s,element:c,keyframes:d}=this.options,m=(c==null?void 0:c.KeyframeResolver)||a1,l=(w,b)=>this.onKeyframesResolved(w,b);this.resolver=new m(d,l,n,s,c),this.resolver.scheduleResolve()}initPlayback(t){const{type:n="keyframes",repeat:s=0,repeatDelay:c=0,repeatType:d,velocity:m=0}=this.options,l=d1(n)?n:TV[n]||mg;let w,b;l!==mg&&typeof t[0]!="number"&&(w=Xo(EV,DI(t[0],t[1])),t=[0,100]);const A=l({...this.options,keyframes:t});d==="mirror"&&(b=l({...this.options,keyframes:[...t].reverse(),velocity:-m})),A.calculatedDuration===null&&(A.calculatedDuration=SV(A));const{calculatedDuration:k}=A,D=k+c,B=D*(s+1)-c;return{generator:A,mirroredGenerator:b,mapPercentToKeyframes:w,calculatedDuration:k,resolvedDuration:D,totalDuration:B}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:s}=this;if(!s){const{keyframes:Ce}=this.options;return{done:!0,value:Ce[Ce.length-1]}}const{finalKeyframe:c,generator:d,mirroredGenerator:m,mapPercentToKeyframes:l,keyframes:w,calculatedDuration:b,totalDuration:A,resolvedDuration:k}=s;if(this.startTime===null)return d.next(0);const{delay:D,repeat:B,repeatType:q,repeatDelay:Z,onUpdate:K}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-A/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const N=this.currentTime-D*(this.speed>=0?1:-1),F=this.speed>=0?N<0:N>A;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=A);let H=this.currentTime,te=d;if(B){const Ce=Math.min(this.currentTime,A)/k;let Ge=Math.floor(Ce),Le=Ce%1;!Le&&Ce>=1&&(Le=1),Le===1&&Ge--,Ge=Math.min(Ge,B+1),!!(Ge%2)&&(q==="reverse"?(Le=1-Le,Z&&(Le-=Z/k)):q==="mirror"&&(te=m)),H=ll(0,1,Le)*k}const me=F?{done:!1,value:w[0]}:te.next(H);l&&(me.value=l(me.value));let{done:Se}=me;!F&&b!==null&&(Se=this.speed>=0?this.currentTime>=A:this.currentTime<=0);const Ie=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Se);return Ie&&c!==void 0&&(me.value=Sy(w,this.options,c)),K&&K(me.value),Ie&&this.finish(),me}get duration(){const{resolved:t}=this;return t?Ko(t.calculatedDuration):0}get time(){return Ko(this.currentTime)}set time(t){t=vo(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Ko(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=CV,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=t(d=>this.tick(d))),n&&n();const c=this.driver.now();this.holdTime!==null?this.startTime=c-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=c):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const zI=new Set(["opacity","clipPath","filter","transform"]),PV=10,AV=(e,t)=>{let n="";const s=Math.max(Math.round(t/PV),2);for(let c=0;c<s;c++)n+=e($c(0,s-1,c))+", ";return`linear(${n.substring(0,n.length-2)})`};function g1(e){let t;return()=>(t===void 0&&(t=e()),t)}const kV={linearEasing:void 0};function IV(e,t){const n=g1(e);return()=>{var s;return(s=kV[t])!==null&&s!==void 0?s:n()}}const gg=IV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function RI(e){return!!(typeof e=="function"&&gg()||!e||typeof e=="string"&&(e in o0||gg())||f1(e)||Array.isArray(e)&&e.every(RI))}const Cd=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,o0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Cd([0,.65,.55,1]),circOut:Cd([.55,0,1,.45]),backIn:Cd([.31,.01,.66,-.59]),backOut:Cd([.33,1.53,.69,.99])};function LI(e,t){if(e)return typeof e=="function"&&gg()?AV(e,t):f1(e)?Cd(e):Array.isArray(e)?e.map(n=>LI(n,t)||o0.easeOut):o0[e]}function MV(e,t,n,{delay:s=0,duration:c=300,repeat:d=0,repeatType:m="loop",ease:l,times:w}={}){const b={[t]:n};w&&(b.offset=w);const A=LI(l,c);return Array.isArray(A)&&(b.easing=A),e.animate(b,{delay:s,duration:c,easing:Array.isArray(A)?"linear":A,fill:"both",iterations:d+1,direction:m==="reverse"?"alternate":"normal"})}function GC(e,t){e.timeline=t,e.onfinish=null}const DV=g1(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),yg=10,zV=2e4;function RV(e){return d1(e.type)||e.type==="spring"||!RI(e.ease)}function LV(e,t){const n=new m1({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:e[0]};const c=[];let d=0;for(;!s.done&&d<zV;)s=n.sample(d),c.push(s.value),d+=yg;return{times:void 0,keyframes:c,duration:d-yg,ease:"linear"}}const OI={anticipate:oI,backInOut:sI,circInOut:lI};function OV(e){return e in OI}class ZC extends EI{constructor(t){super(t);const{name:n,motionValue:s,element:c,keyframes:d}=this.options;this.resolver=new TI(d,(m,l)=>this.onKeyframesResolved(m,l),n,s,c),this.resolver.scheduleResolve()}initPlayback(t,n){var s;let{duration:c=300,times:d,ease:m,type:l,motionValue:w,name:b,startTime:A}=this.options;if(!(!((s=w.owner)===null||s===void 0)&&s.current))return!1;if(typeof m=="string"&&gg()&&OV(m)&&(m=OI[m]),RV(this.options)){const{onComplete:D,onUpdate:B,motionValue:q,element:Z,...K}=this.options,N=LV(t,K);t=N.keyframes,t.length===1&&(t[1]=t[0]),c=N.duration,d=N.times,m=N.ease,l="keyframes"}const k=MV(w.owner.current,b,t,{...this.options,duration:c,times:d,ease:m});return k.startTime=A??this.calcStartTime(),this.pendingTimeline?(GC(k,this.pendingTimeline),this.pendingTimeline=void 0):k.onfinish=()=>{const{onComplete:D}=this.options;w.set(Sy(t,this.options,n)),D&&D(),this.cancel(),this.resolveFinishedPromise()},{animation:k,duration:c,times:d,type:l,ease:m,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Ko(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Ko(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=vo(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Br;const{animation:s}=n;GC(s,t)}return Br}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:s,duration:c,type:d,ease:m,times:l}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:b,onUpdate:A,onComplete:k,element:D,...B}=this.options,q=new m1({...B,keyframes:s,duration:c,type:d,ease:m,times:l,isGenerator:!0}),Z=vo(this.time);b.setWithVelocity(q.sample(Z-yg).value,q.sample(Z).value,yg)}const{onStop:w}=this.options;w&&w(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:s,repeatDelay:c,repeatType:d,damping:m,type:l}=t;return DV()&&s&&zI.has(s)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!c&&d!=="mirror"&&m!==0&&l!=="inertia"}}const FV=g1(()=>window.ScrollTimeline!==void 0);class NV{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=n}attachTimeline(t,n){const s=this.animations.map(c=>FV()&&c.attachTimeline?c.attachTimeline(t):n(c));return()=>{s.forEach((c,d)=>{c&&c(),this.animations[d].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function BV({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:c,repeat:d,repeatType:m,repeatDelay:l,from:w,elapsed:b,...A}){return!!Object.keys(A).length}const y1=(e,t,n,s={},c,d)=>m=>{const l=r1(s,e)||{},w=l.delay||s.delay||0;let{elapsed:b=0}=s;b=b-vo(w);let A={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-b,onUpdate:D=>{t.set(D),l.onUpdate&&l.onUpdate(D)},onComplete:()=>{m(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:d?void 0:c};BV(l)||(A={...A,...r6(e,A)}),A.duration&&(A.duration=vo(A.duration)),A.repeatDelay&&(A.repeatDelay=vo(A.repeatDelay)),A.from!==void 0&&(A.keyframes[0]=A.from);let k=!1;if((A.type===!1||A.duration===0&&!A.repeatDelay)&&(A.duration=0,A.delay===0&&(k=!0)),k&&!d&&t.get()!==void 0){const D=Sy(A.keyframes,l);if(D!==void 0)return pn.update(()=>{A.onUpdate(D),A.onComplete()}),new NV([])}return!d&&ZC.supports(A)?new ZC(A):new m1(A)},VV=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),$V=e=>Jx(e)?e[e.length-1]||0:e;function v1(e,t){e.indexOf(t)===-1&&e.push(t)}function _1(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class x1{constructor(){this.subscriptions=[]}add(t){return v1(this.subscriptions,t),()=>_1(this.subscriptions,t)}notify(t,n,s){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](t,n,s);else for(let d=0;d<c;d++){const m=this.subscriptions[d];m&&m(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const WC=30,jV=e=>!isNaN(parseFloat(e));class UV{constructor(t,n={}){this.version="11.11.8",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,c=!0)=>{const d=xo.now();this.updatedAt!==d&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),c&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=xo.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=jV(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new x1);const s=this.events[t].add(n);return t==="change"?()=>{s(),pn.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=xo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>WC)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,WC);return PI(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function mf(e,t){return new UV(e,t)}function qV(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,mf(n))}function GV(e,t){const n=by(e,t);let{transitionEnd:s={},transition:c={},...d}=n||{};d={...d,...s};for(const m in d){const l=$V(d[m]);qV(e,m,l)}}const Cy=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ZV="framerAppearId",FI="data-"+Cy(ZV);function NI(e){return e.props[FI]}const ri=e=>!!(e&&e.getVelocity);function WV(e){return!!(ri(e)&&e.add)}function BI(e){if(pl.has(e))return"transform";if(zI.has(e))return Cy(e)}function a0(e,t){var n;if(!e.applyWillChange)return;const s=e.getValue("willChange");if(WV(s))return s.add(t);!(!((n=e.props.style)===null||n===void 0)&&n.willChange)&&BI(t)&&e.setStaticValue("willChange","transform")}function HV({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function VI(e,t,{delay:n=0,transitionOverride:s,type:c}={}){var d;let{transition:m=e.getDefaultTransition(),transitionEnd:l,...w}=t;s&&(m=s);const b=[],A=c&&e.animationState&&e.animationState.getState()[c];for(const k in w){const D=e.getValue(k,(d=e.latestValues[k])!==null&&d!==void 0?d:null),B=w[k];if(B===void 0||A&&HV(A,k))continue;const q={delay:n,...r1(m||{},k)};let Z=!1;if(window.MotionHandoffAnimation){const N=NI(e);if(N){const F=window.MotionHandoffAnimation(N,k,pn);F!==null&&(q.startTime=F,Z=!0)}}a0(e,k),D.start(y1(k,D,B,e.shouldReduceMotion&&pl.has(k)?{type:!1}:q,e,Z));const K=D.animation;K&&b.push(K)}return l&&Promise.all(b).then(()=>{pn.update(()=>{l&&GV(e,l)})}),b}function l0(e,t,n={}){var s;const c=by(e,t,n.type==="exit"?(s=e.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:d=e.getDefaultTransition()||{}}=c||{};n.transitionOverride&&(d=n.transitionOverride);const m=c?()=>Promise.all(VI(e,c,n)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(b=0)=>{const{delayChildren:A=0,staggerChildren:k,staggerDirection:D}=d;return KV(e,t,A+b,k,D,n)}:()=>Promise.resolve(),{when:w}=d;if(w){const[b,A]=w==="beforeChildren"?[m,l]:[l,m];return b().then(()=>A())}else return Promise.all([m(),l(n.delay)])}function KV(e,t,n=0,s=0,c=1,d){const m=[],l=(e.variantChildren.size-1)*s,w=c===1?(b=0)=>b*s:(b=0)=>l-b*s;return Array.from(e.variantChildren).sort(XV).forEach((b,A)=>{b.notify("AnimationStart",t),m.push(l0(b,t,{...d,delay:n+w(A)}).then(()=>b.notify("AnimationComplete",t)))}),Promise.all(m)}function XV(e,t){return e.sortNodePosition(t)}function YV(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const c=t.map(d=>l0(e,d,n));s=Promise.all(c)}else if(typeof t=="string")s=l0(e,t,n);else{const c=typeof t=="function"?by(e,t,n.custom):t;s=Promise.all(VI(e,c,n))}return s.then(()=>{e.notify("AnimationComplete",t)})}const QV=n1.length;function $I(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?$I(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<QV;n++){const s=n1[n],c=e.props[s];(df(c)||c===!1)&&(t[s]=c)}return t}const JV=[...t1].reverse(),e$=t1.length;function t$(e){return t=>Promise.all(t.map(({animation:n,options:s})=>YV(e,n,s)))}function n$(e){let t=t$(e),n=HC(),s=!0;const c=w=>(b,A)=>{var k;const D=by(e,A,w==="exit"?(k=e.presenceContext)===null||k===void 0?void 0:k.custom:void 0);if(D){const{transition:B,transitionEnd:q,...Z}=D;b={...b,...Z,...q}}return b};function d(w){t=w(e)}function m(w){const{props:b}=e,A=$I(e.parent)||{},k=[],D=new Set;let B={},q=1/0;for(let K=0;K<e$;K++){const N=JV[K],F=n[N],H=b[N]!==void 0?b[N]:A[N],te=df(H),me=N===w?F.isActive:null;me===!1&&(q=K);let Se=H===A[N]&&H!==b[N]&&te;if(Se&&s&&e.manuallyAnimateOnMount&&(Se=!1),F.protectedKeys={...B},!F.isActive&&me===null||!H&&!F.prevProp||hf(H)||typeof H=="boolean")continue;const Ie=r$(F.prevProp,H);let Ce=Ie||N===w&&F.isActive&&!Se&&te||K>q&&te,Ge=!1;const Le=Array.isArray(H)?H:[H];let Tt=Le.reduce(c(N),{});me===!1&&(Tt={});const{prevResolvedValues:Ue={}}=F,gt={...Ue,...Tt},_t=bt=>{Ce=!0,D.has(bt)&&(Ge=!0,D.delete(bt)),F.needsAnimating[bt]=!0;const $e=e.getValue(bt);$e&&($e.liveStyle=!1)};for(const bt in gt){const $e=Tt[bt],ut=Ue[bt];if(B.hasOwnProperty(bt))continue;let Et=!1;Jx($e)&&Jx(ut)?Et=!Jk($e,ut):Et=$e!==ut,Et?$e!=null?_t(bt):D.add(bt):$e!==void 0&&D.has(bt)?_t(bt):F.protectedKeys[bt]=!0}F.prevProp=H,F.prevResolvedValues=Tt,F.isActive&&(B={...B,...Tt}),s&&e.blockInitialAnimation&&(Ce=!1),Ce&&(!(Se&&Ie)||Ge)&&k.push(...Le.map(bt=>({animation:bt,options:{type:N}})))}if(D.size){const K={};D.forEach(N=>{const F=e.getBaseTarget(N),H=e.getValue(N);H&&(H.liveStyle=!0),K[N]=F??null}),k.push({animation:K})}let Z=!!k.length;return s&&(b.initial===!1||b.initial===b.animate)&&!e.manuallyAnimateOnMount&&(Z=!1),s=!1,Z?t(k):Promise.resolve()}function l(w,b){var A;if(n[w].isActive===b)return Promise.resolve();(A=e.variantChildren)===null||A===void 0||A.forEach(D=>{var B;return(B=D.animationState)===null||B===void 0?void 0:B.setActive(w,b)}),n[w].isActive=b;const k=m(w);for(const D in n)n[D].protectedKeys={};return k}return{animateChanges:m,setActive:l,setAnimateFunction:d,getState:()=>n,reset:()=>{n=HC(),s=!0}}}function r$(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Jk(t,e):!1}function Fl(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function HC(){return{animate:Fl(!0),whileInView:Fl(),whileHover:Fl(),whileTap:Fl(),whileDrag:Fl(),whileFocus:Fl(),exit:Fl()}}class ml{constructor(t){this.isMounted=!1,this.node=t}update(){}}class i$ extends ml{constructor(t){super(t),t.animationState||(t.animationState=n$(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();hf(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let s$=0;class o$ extends ml{constructor(){super(...arguments),this.id=s$++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const c=this.node.animationState.setActive("exit",!t);n&&!t&&c.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const a$={animation:{Feature:i$},exit:{Feature:o$}},jI=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Ty(e,t="page"){return{point:{x:e[`${t}X`],y:e[`${t}Y`]}}}const l$=e=>t=>jI(t)&&e(t,Ty(t));function Wo(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}function Yo(e,t,n,s){return Wo(e,t,l$(n),s)}const KC=(e,t)=>Math.abs(e-t);function u$(e,t){const n=KC(e.x,t.x),s=KC(e.y,t.y);return Math.sqrt(n**2+s**2)}class UI{constructor(t,n,{transformPagePoint:s,contextWindow:c,dragSnapToOrigin:d=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=I_(this.lastMoveEventInfo,this.history),D=this.startEvent!==null,B=u$(k.offset,{x:0,y:0})>=3;if(!D&&!B)return;const{point:q}=k,{timestamp:Z}=Fr;this.history.push({...q,timestamp:Z});const{onStart:K,onMove:N}=this.handlers;D||(K&&K(this.lastMoveEvent,k),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,k)},this.handlePointerMove=(k,D)=>{this.lastMoveEvent=k,this.lastMoveEventInfo=k_(D,this.transformPagePoint),pn.update(this.updatePoint,!0)},this.handlePointerUp=(k,D)=>{this.end();const{onEnd:B,onSessionEnd:q,resumeAnimation:Z}=this.handlers;if(this.dragSnapToOrigin&&Z&&Z(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const K=I_(k.type==="pointercancel"?this.lastMoveEventInfo:k_(D,this.transformPagePoint),this.history);this.startEvent&&B&&B(k,K),q&&q(k,K)},!jI(t))return;this.dragSnapToOrigin=d,this.handlers=n,this.transformPagePoint=s,this.contextWindow=c||window;const m=Ty(t),l=k_(m,this.transformPagePoint),{point:w}=l,{timestamp:b}=Fr;this.history=[{...w,timestamp:b}];const{onSessionStart:A}=n;A&&A(t,I_(l,this.history)),this.removeListeners=Xo(Yo(this.contextWindow,"pointermove",this.handlePointerMove),Yo(this.contextWindow,"pointerup",this.handlePointerUp),Yo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),al(this.updatePoint)}}function k_(e,t){return t?{point:t(e.point)}:e}function XC(e,t){return{x:e.x-t.x,y:e.y-t.y}}function I_({point:e},t){return{point:e,delta:XC(e,qI(t)),offset:XC(e,c$(t)),velocity:h$(t,.1)}}function c$(e){return e[0]}function qI(e){return e[e.length-1]}function h$(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const c=qI(e);for(;n>=0&&(s=e[n],!(c.timestamp-s.timestamp>vo(t)));)n--;if(!s)return{x:0,y:0};const d=Ko(c.timestamp-s.timestamp);if(d===0)return{x:0,y:0};const m={x:(c.x-s.x)/d,y:(c.y-s.y)/d};return m.x===1/0&&(m.x=0),m.y===1/0&&(m.y=0),m}function GI(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const YC=GI("dragHorizontal"),QC=GI("dragVertical");function ZI(e){let t=!1;if(e==="y")t=QC();else if(e==="x")t=YC();else{const n=YC(),s=QC();n&&s?t=()=>{n(),s()}:(n&&n(),s&&s())}return t}function WI(){const e=ZI(!0);return e?(e(),!1):!0}function gc(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const HI=1e-4,d$=1-HI,f$=1+HI,KI=.01,p$=0-KI,m$=0+KI;function ts(e){return e.max-e.min}function g$(e,t,n){return Math.abs(e-t)<=n}function JC(e,t,n,s=.5){e.origin=s,e.originPoint=Un(t.min,t.max,e.origin),e.scale=ts(n)/ts(t),e.translate=Un(n.min,n.max,e.origin)-e.originPoint,(e.scale>=d$&&e.scale<=f$||isNaN(e.scale))&&(e.scale=1),(e.translate>=p$&&e.translate<=m$||isNaN(e.translate))&&(e.translate=0)}function Bd(e,t,n,s){JC(e.x,t.x,n.x,s?s.originX:void 0),JC(e.y,t.y,n.y,s?s.originY:void 0)}function eT(e,t,n){e.min=n.min+t.min,e.max=e.min+ts(t)}function y$(e,t,n){eT(e.x,t.x,n.x),eT(e.y,t.y,n.y)}function tT(e,t,n){e.min=t.min-n.min,e.max=e.min+ts(t)}function Vd(e,t,n){tT(e.x,t.x,n.x),tT(e.y,t.y,n.y)}function v$(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?Un(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?Un(n,e,s.max):Math.min(e,n)),e}function nT(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function _$(e,{top:t,left:n,bottom:s,right:c}){return{x:nT(e.x,n,c),y:nT(e.y,t,s)}}function rT(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function x$(e,t){return{x:rT(e.x,t.x),y:rT(e.y,t.y)}}function w$(e,t){let n=.5;const s=ts(e),c=ts(t);return c>s?n=$c(t.min,t.max-s,e.min):s>c&&(n=$c(e.min,e.max-c,t.min)),ll(0,1,n)}function b$(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const u0=.35;function S$(e=u0){return e===!1?e=0:e===!0&&(e=u0),{x:iT(e,"left","right"),y:iT(e,"top","bottom")}}function iT(e,t,n){return{min:sT(e,t),max:sT(e,n)}}function sT(e,t){return typeof e=="number"?e:e[t]||0}const oT=()=>({translate:0,scale:1,origin:0,originPoint:0}),yc=()=>({x:oT(),y:oT()}),aT=()=>({min:0,max:0}),sr=()=>({x:aT(),y:aT()});function vs(e){return[e("x"),e("y")]}function XI({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function C$({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function T$(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function M_(e){return e===void 0||e===1}function c0({scale:e,scaleX:t,scaleY:n}){return!M_(e)||!M_(t)||!M_(n)}function $l(e){return c0(e)||YI(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function YI(e){return lT(e.x)||lT(e.y)}function lT(e){return e&&e!=="0%"}function vg(e,t,n){const s=e-n,c=t*s;return n+c}function uT(e,t,n,s,c){return c!==void 0&&(e=vg(e,c,s)),vg(e,n,s)+t}function h0(e,t=0,n=1,s,c){e.min=uT(e.min,t,n,s,c),e.max=uT(e.max,t,n,s,c)}function QI(e,{x:t,y:n}){h0(e.x,t.translate,t.scale,t.originPoint),h0(e.y,n.translate,n.scale,n.originPoint)}const cT=.999999999999,hT=1.0000000000001;function E$(e,t,n,s=!1){const c=n.length;if(!c)return;t.x=t.y=1;let d,m;for(let l=0;l<c;l++){d=n[l],m=d.projectionDelta;const{visualElement:w}=d.options;w&&w.props.style&&w.props.style.display==="contents"||(s&&d.options.layoutScroll&&d.scroll&&d!==d.root&&_c(e,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),m&&(t.x*=m.x.scale,t.y*=m.y.scale,QI(e,m)),s&&$l(d.latestValues)&&_c(e,d.latestValues))}t.x<hT&&t.x>cT&&(t.x=1),t.y<hT&&t.y>cT&&(t.y=1)}function vc(e,t){e.min=e.min+t,e.max=e.max+t}function dT(e,t,n,s,c=.5){const d=Un(e.min,e.max,c);h0(e,t,n,d,s)}function _c(e,t){dT(e.x,t.x,t.scaleX,t.scale,t.originX),dT(e.y,t.y,t.scaleY,t.scale,t.originY)}function JI(e,t){return XI(T$(e.getBoundingClientRect(),t))}function P$(e,t,n){const s=JI(e,n),{scroll:c}=t;return c&&(vc(s.x,c.offset.x),vc(s.y,c.offset.y)),s}const eM=({current:e})=>e?e.ownerDocument.defaultView:null,A$=new WeakMap;class k${constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=sr(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const c=A=>{const{dragSnapToOrigin:k}=this.getProps();k?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ty(A,"page").point)},d=(A,k)=>{const{drag:D,dragPropagation:B,onDragStart:q}=this.getProps();if(D&&!B&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=ZI(D),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vs(K=>{let N=this.getAxisMotionValue(K).get()||0;if(_o.test(N)){const{projection:F}=this.visualElement;if(F&&F.layout){const H=F.layout.layoutBox[K];H&&(N=ts(H)*(parseFloat(N)/100))}}this.originPoint[K]=N}),q&&pn.postRender(()=>q(A,k)),a0(this.visualElement,"transform");const{animationState:Z}=this.visualElement;Z&&Z.setActive("whileDrag",!0)},m=(A,k)=>{const{dragPropagation:D,dragDirectionLock:B,onDirectionLock:q,onDrag:Z}=this.getProps();if(!D&&!this.openGlobalLock)return;const{offset:K}=k;if(B&&this.currentDirection===null){this.currentDirection=I$(K),this.currentDirection!==null&&q&&q(this.currentDirection);return}this.updateAxis("x",k.point,K),this.updateAxis("y",k.point,K),this.visualElement.render(),Z&&Z(A,k)},l=(A,k)=>this.stop(A,k),w=()=>vs(A=>{var k;return this.getAnimationState(A)==="paused"&&((k=this.getAxisMotionValue(A).animation)===null||k===void 0?void 0:k.play())}),{dragSnapToOrigin:b}=this.getProps();this.panSession=new UI(t,{onSessionStart:c,onStart:d,onMove:m,onSessionEnd:l,resumeAnimation:w},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:b,contextWindow:eM(this.visualElement)})}stop(t,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:c}=n;this.startAnimation(c);const{onDragEnd:d}=this.getProps();d&&pn.postRender(()=>d(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:c}=this.getProps();if(!s||!sm(t,c,this.currentDirection))return;const d=this.getAxisMotionValue(t);let m=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(m=v$(m,this.constraints[t],this.elastic[t])),d.set(m)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:s}=this.getProps(),c=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,d=this.constraints;n&&gc(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&c?this.constraints=_$(c.layoutBox,n):this.constraints=!1,this.elastic=S$(s),d!==this.constraints&&c&&this.constraints&&!this.hasMutatedConstraints&&vs(m=>{this.constraints!==!1&&this.getAxisMotionValue(m)&&(this.constraints[m]=b$(c.layoutBox[m],this.constraints[m]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!gc(t))return!1;const s=t.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const d=P$(s,c.root,this.visualElement.getTransformPagePoint());let m=x$(c.layout.layoutBox,d);if(n){const l=n(C$(m));this.hasMutatedConstraints=!!l,l&&(m=XI(l))}return m}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:c,dragTransition:d,dragSnapToOrigin:m,onDragTransitionEnd:l}=this.getProps(),w=this.constraints||{},b=vs(A=>{if(!sm(A,n,this.currentDirection))return;let k=w&&w[A]||{};m&&(k={min:0,max:0});const D=c?200:1e6,B=c?40:1e7,q={type:"inertia",velocity:s?t[A]:0,bounceStiffness:D,bounceDamping:B,timeConstant:750,restDelta:1,restSpeed:10,...d,...k};return this.startAxisValueAnimation(A,q)});return Promise.all(b).then(l)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return a0(this.visualElement,t),s.start(y1(t,s,0,n,this.visualElement,!1))}stopAnimation(){vs(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){vs(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),c=s[n];return c||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){vs(n=>{const{drag:s}=this.getProps();if(!sm(n,s,this.currentDirection))return;const{projection:c}=this.visualElement,d=this.getAxisMotionValue(n);if(c&&c.layout){const{min:m,max:l}=c.layout.layoutBox[n];d.set(t[n]-Un(m,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!gc(n)||!s||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};vs(m=>{const l=this.getAxisMotionValue(m);if(l&&this.constraints!==!1){const w=l.get();c[m]=w$({min:w,max:w},this.constraints[m])}});const{transformTemplate:d}=this.visualElement.getProps();this.visualElement.current.style.transform=d?d({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),vs(m=>{if(!sm(m,t,null))return;const l=this.getAxisMotionValue(m),{min:w,max:b}=this.constraints[m];l.set(Un(w,b,c[m]))})}addListeners(){if(!this.visualElement.current)return;A$.set(this.visualElement,this);const t=this.visualElement.current,n=Yo(t,"pointerdown",w=>{const{drag:b,dragListener:A=!0}=this.getProps();b&&A&&this.start(w)}),s=()=>{const{dragConstraints:w}=this.getProps();gc(w)&&w.current&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,d=c.addEventListener("measure",s);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),pn.read(s);const m=Wo(window,"resize",()=>this.scalePositionWithinConstraints()),l=c.addEventListener("didUpdate",({delta:w,hasLayoutChanged:b})=>{this.isDragging&&b&&(vs(A=>{const k=this.getAxisMotionValue(A);k&&(this.originPoint[A]+=w[A].translate,k.set(k.get()+w[A].translate))}),this.visualElement.render())});return()=>{m(),n(),d(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:c=!1,dragConstraints:d=!1,dragElastic:m=u0,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:c,dragConstraints:d,dragElastic:m,dragMomentum:l}}}function sm(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function I$(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class M$ extends ml{constructor(t){super(t),this.removeGroupControls=Br,this.removeListeners=Br,this.controls=new k$(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Br}unmount(){this.removeGroupControls(),this.removeListeners()}}const fT=e=>(t,n)=>{e&&pn.postRender(()=>e(t,n))};class D$ extends ml{constructor(){super(...arguments),this.removePointerDownListener=Br}onPointerDown(t){this.session=new UI(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:eM(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:c}=this.node.getProps();return{onSessionStart:fT(t),onStart:fT(n),onMove:s,onEnd:(d,m)=>{delete this.session,c&&pn.postRender(()=>c(d,m))}}}mount(){this.removePointerDownListener=Yo(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const w1=ie.createContext(null);function z$(){const e=ie.useContext(w1);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,c=ie.useId();ie.useEffect(()=>s(c),[]);const d=ie.useCallback(()=>n&&n(c),[c,n]);return!t&&n?[!1,d]:[!0]}const tM=ie.createContext({}),nM=ie.createContext({}),Im={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pT(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const md={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(It.test(e))e=parseFloat(e);else return e;const n=pT(e,t.target.x),s=pT(e,t.target.y);return`${n}% ${s}%`}},R$={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,c=ul.parse(e);if(c.length>5)return s;const d=ul.createTransformer(e),m=typeof c[0]!="number"?1:0,l=n.x.scale*t.x,w=n.y.scale*t.y;c[0+m]/=l,c[1+m]/=w;const b=Un(l,w,.5);return typeof c[2+m]=="number"&&(c[2+m]/=b),typeof c[3+m]=="number"&&(c[3+m]/=b),d(c)}},_g={};function L$(e){Object.assign(_g,e)}const{schedule:b1,cancel:K9}=eI(queueMicrotask,!1);class O$ extends ie.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:c}=this.props,{projection:d}=t;L$(F$),d&&(n.group&&n.group.add(d),s&&s.register&&c&&s.register(d),d.root.didUpdate(),d.addEventListener("animationComplete",()=>{this.safeToRemove()}),d.setOptions({...d.options,onExitComplete:()=>this.safeToRemove()})),Im.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:c,isPresent:d}=this.props,m=s.projection;return m&&(m.isPresent=d,c||t.layoutDependency!==n||n===void 0?m.willUpdate():this.safeToRemove(),t.isPresent!==d&&(d?m.promote():m.relegate()||pn.postRender(()=>{const l=m.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),b1.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:c}=t;c&&(c.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(c),s&&s.deregister&&s.deregister(c))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function rM(e){const[t,n]=z$(),s=ie.useContext(tM);return de(O$,{...e,layoutGroup:s,switchLayoutGroup:ie.useContext(nM),isPresent:t,safeToRemove:n})}const F$={borderRadius:{...md,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:md,borderTopRightRadius:md,borderBottomLeftRadius:md,borderBottomRightRadius:md,boxShadow:R$},iM=["TopLeft","TopRight","BottomLeft","BottomRight"],N$=iM.length,mT=e=>typeof e=="string"?parseFloat(e):e,gT=e=>typeof e=="number"||It.test(e);function B$(e,t,n,s,c,d){c?(e.opacity=Un(0,n.opacity!==void 0?n.opacity:1,V$(s)),e.opacityExit=Un(t.opacity!==void 0?t.opacity:1,0,$$(s))):d&&(e.opacity=Un(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let m=0;m<N$;m++){const l=`border${iM[m]}Radius`;let w=yT(t,l),b=yT(n,l);if(w===void 0&&b===void 0)continue;w||(w=0),b||(b=0),w===0||b===0||gT(w)===gT(b)?(e[l]=Math.max(Un(mT(w),mT(b),s),0),(_o.test(b)||_o.test(w))&&(e[l]+="%")):e[l]=b}(t.rotate||n.rotate)&&(e.rotate=Un(t.rotate||0,n.rotate||0,s))}function yT(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const V$=sM(0,.5,aI),$$=sM(.5,.95,Br);function sM(e,t,n){return s=>s<e?0:s>t?1:n($c(e,t,s))}function vT(e,t){e.min=t.min,e.max=t.max}function gs(e,t){vT(e.x,t.x),vT(e.y,t.y)}function _T(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function xT(e,t,n,s,c){return e-=t,e=vg(e,1/n,s),c!==void 0&&(e=vg(e,1/c,s)),e}function j$(e,t=0,n=1,s=.5,c,d=e,m=e){if(_o.test(t)&&(t=parseFloat(t),t=Un(m.min,m.max,t/100)-m.min),typeof t!="number")return;let l=Un(d.min,d.max,s);e===d&&(l-=t),e.min=xT(e.min,t,n,l,c),e.max=xT(e.max,t,n,l,c)}function wT(e,t,[n,s,c],d,m){j$(e,t[n],t[s],t[c],t.scale,d,m)}const U$=["x","scaleX","originX"],q$=["y","scaleY","originY"];function bT(e,t,n,s){wT(e.x,t,U$,n?n.x:void 0,s?s.x:void 0),wT(e.y,t,q$,n?n.y:void 0,s?s.y:void 0)}function ST(e){return e.translate===0&&e.scale===1}function oM(e){return ST(e.x)&&ST(e.y)}function CT(e,t){return e.min===t.min&&e.max===t.max}function G$(e,t){return CT(e.x,t.x)&&CT(e.y,t.y)}function TT(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function aM(e,t){return TT(e.x,t.x)&&TT(e.y,t.y)}function ET(e){return ts(e.x)/ts(e.y)}function PT(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Z${constructor(){this.members=[]}add(t){v1(this.members,t),t.scheduleRender()}remove(t){if(_1(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(c=>t===c);if(n===0)return!1;let s;for(let c=n;c>=0;c--){const d=this.members[c];if(d.isPresent!==!1){s=d;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:c}=t.options;c===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function W$(e,t,n){let s="";const c=e.x.translate/t.x,d=e.y.translate/t.y,m=(n==null?void 0:n.z)||0;if((c||d||m)&&(s=`translate3d(${c}px, ${d}px, ${m}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:b,rotate:A,rotateX:k,rotateY:D,skewX:B,skewY:q}=n;b&&(s=`perspective(${b}px) ${s}`),A&&(s+=`rotate(${A}deg) `),k&&(s+=`rotateX(${k}deg) `),D&&(s+=`rotateY(${D}deg) `),B&&(s+=`skewX(${B}deg) `),q&&(s+=`skewY(${q}deg) `)}const l=e.x.scale*t.x,w=e.y.scale*t.y;return(l!==1||w!==1)&&(s+=`scale(${l}, ${w})`),s||"none"}const H$=(e,t)=>e.depth-t.depth;class K${constructor(){this.children=[],this.isDirty=!1}add(t){v1(this.children,t),this.isDirty=!0}remove(t){_1(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(H$),this.isDirty=!1,this.children.forEach(t)}}function Mm(e){const t=ri(e)?e.get():e;return VV(t)?t.toValue():t}function X$(e,t){const n=xo.now(),s=({timestamp:c})=>{const d=c-n;d>=t&&(al(s),e(d-t))};return pn.read(s,!0),()=>al(s)}function Y$(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Q$(e,t,n){const s=ri(e)?e:mf(e);return s.start(y1("",s,t,n)),s.animation}const jl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Td=typeof window<"u"&&window.MotionDebug!==void 0,D_=["","X","Y","Z"],J$={visibility:"hidden"},AT=1e3;let ej=0;function z_(e,t,n,s){const{latestValues:c}=t;c[e]&&(n[e]=c[e],t.setStaticValue(e,0),s&&(s[e]=0))}function lM(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=NI(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:c,layoutId:d}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",pn,!(c||d))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&lM(s)}function uM({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:c}){return class{constructor(m={},l=t==null?void 0:t()){this.id=ej++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Td&&(jl.totalNodes=jl.resolvedTargetDeltas=jl.recalculatedProjection=0),this.nodes.forEach(rj),this.nodes.forEach(lj),this.nodes.forEach(uj),this.nodes.forEach(ij),Td&&window.MotionDebug.record(jl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=m,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let w=0;w<this.path.length;w++)this.path[w].shouldResetTransform=!0;this.root===this&&(this.nodes=new K$)}addEventListener(m,l){return this.eventHandlers.has(m)||this.eventHandlers.set(m,new x1),this.eventHandlers.get(m).add(l)}notifyListeners(m,...l){const w=this.eventHandlers.get(m);w&&w.notify(...l)}hasListeners(m){return this.eventHandlers.has(m)}mount(m,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Y$(m),this.instance=m;const{layoutId:w,layout:b,visualElement:A}=this.options;if(A&&!A.current&&A.mount(m),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(b||w)&&(this.isLayoutDirty=!0),e){let k;const D=()=>this.root.updateBlockedByResize=!1;e(m,()=>{this.root.updateBlockedByResize=!0,k&&k(),k=X$(D,250),Im.hasAnimatedSinceResize&&(Im.hasAnimatedSinceResize=!1,this.nodes.forEach(IT))})}w&&this.root.registerSharedNode(w,this),this.options.animate!==!1&&A&&(w||b)&&this.addEventListener("didUpdate",({delta:k,hasLayoutChanged:D,hasRelativeTargetChanged:B,layout:q})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const Z=this.options.transition||A.getDefaultTransition()||pj,{onLayoutAnimationStart:K,onLayoutAnimationComplete:N}=A.getProps(),F=!this.targetLayout||!aM(this.targetLayout,q)||B,H=!D&&B;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||H||D&&(F||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(k,H);const te={...r1(Z,"layout"),onPlay:K,onComplete:N};(A.shouldReduceMotion||this.options.layoutRoot)&&(te.delay=0,te.type=!1),this.startAnimation(te)}else D||IT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=q})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const m=this.getStack();m&&m.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,al(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(cj),this.animationId++)}getTransformTemplate(){const{visualElement:m}=this.options;return m&&m.getProps().transformTemplate}willUpdate(m=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&lM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let A=0;A<this.path.length;A++){const k=this.path[A];k.shouldResetTransform=!0,k.updateScroll("snapshot"),k.options.layoutRoot&&k.willUpdate(!1)}const{layoutId:l,layout:w}=this.options;if(l===void 0&&!w)return;const b=this.getTransformTemplate();this.prevTransformTemplateValue=b?b(this.latestValues,""):void 0,this.updateSnapshot(),m&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kT);return}this.isUpdating||this.nodes.forEach(oj),this.isUpdating=!1,this.nodes.forEach(aj),this.nodes.forEach(tj),this.nodes.forEach(nj),this.clearAllSnapshots();const l=xo.now();Fr.delta=ll(0,1e3/60,l-Fr.timestamp),Fr.timestamp=l,Fr.isProcessing=!0,C_.update.process(Fr),C_.preRender.process(Fr),C_.render.process(Fr),Fr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,b1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(sj),this.sharedNodes.forEach(hj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,pn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){pn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let w=0;w<this.path.length;w++)this.path[w].updateScroll();const m=this.layout;this.layout=this.measure(!1),this.layoutCorrected=sr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,m?m.layoutBox:void 0)}updateScroll(m="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===m&&(l=!1),l){const w=s(this.instance);this.scroll={animationId:this.root.animationId,phase:m,isRoot:w,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:w}}}resetTransform(){if(!c)return;const m=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!oM(this.projectionDelta),w=this.getTransformTemplate(),b=w?w(this.latestValues,""):void 0,A=b!==this.prevTransformTemplateValue;m&&(l||$l(this.latestValues)||A)&&(c(this.instance,b),this.shouldResetTransform=!1,this.scheduleRender())}measure(m=!0){const l=this.measurePageBox();let w=this.removeElementScroll(l);return m&&(w=this.removeTransform(w)),mj(w),{animationId:this.root.animationId,measuredBox:l,layoutBox:w,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:l}=this.options;if(!l)return sr();const w=l.measureViewportBox();if(!(((m=this.scroll)===null||m===void 0?void 0:m.wasRoot)||this.path.some(gj))){const{scroll:A}=this.root;A&&(vc(w.x,A.offset.x),vc(w.y,A.offset.y))}return w}removeElementScroll(m){var l;const w=sr();if(gs(w,m),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return w;for(let b=0;b<this.path.length;b++){const A=this.path[b],{scroll:k,options:D}=A;A!==this.root&&k&&D.layoutScroll&&(k.wasRoot&&gs(w,m),vc(w.x,k.offset.x),vc(w.y,k.offset.y))}return w}applyTransform(m,l=!1){const w=sr();gs(w,m);for(let b=0;b<this.path.length;b++){const A=this.path[b];!l&&A.options.layoutScroll&&A.scroll&&A!==A.root&&_c(w,{x:-A.scroll.offset.x,y:-A.scroll.offset.y}),$l(A.latestValues)&&_c(w,A.latestValues)}return $l(this.latestValues)&&_c(w,this.latestValues),w}removeTransform(m){const l=sr();gs(l,m);for(let w=0;w<this.path.length;w++){const b=this.path[w];if(!b.instance||!$l(b.latestValues))continue;c0(b.latestValues)&&b.updateSnapshot();const A=sr(),k=b.measurePageBox();gs(A,k),bT(l,b.latestValues,b.snapshot?b.snapshot.layoutBox:void 0,A)}return $l(this.latestValues)&&bT(l,this.latestValues),l}setTargetDelta(m){this.targetDelta=m,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(m){this.options={...this.options,...m,crossfade:m.crossfade!==void 0?m.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Fr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(m=!1){var l;const w=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=w.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=w.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=w.isSharedProjectionDirty);const b=!!this.resumingFrom||this!==w;if(!(m||b&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:k,layoutId:D}=this.options;if(!(!this.layout||!(k||D))){if(this.resolvedRelativeTargetAt=Fr.timestamp,!this.targetDelta&&!this.relativeTarget){const B=this.getClosestProjectingParent();B&&B.layout&&this.animationProgress!==1?(this.relativeParent=B,this.forceRelativeParentToResolveTarget(),this.relativeTarget=sr(),this.relativeTargetOrigin=sr(),Vd(this.relativeTargetOrigin,this.layout.layoutBox,B.layout.layoutBox),gs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=sr(),this.targetWithTransforms=sr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),y$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gs(this.target,this.layout.layoutBox),QI(this.target,this.targetDelta)):gs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const B=this.getClosestProjectingParent();B&&!!B.resumingFrom==!!this.resumingFrom&&!B.options.layoutScroll&&B.target&&this.animationProgress!==1?(this.relativeParent=B,this.forceRelativeParentToResolveTarget(),this.relativeTarget=sr(),this.relativeTargetOrigin=sr(),Vd(this.relativeTargetOrigin,this.target,B.target),gs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Td&&jl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||c0(this.parent.latestValues)||YI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const l=this.getLead(),w=!!this.resumingFrom||this!==l;let b=!0;if((this.isProjectionDirty||!((m=this.parent)===null||m===void 0)&&m.isProjectionDirty)&&(b=!1),w&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(b=!1),this.resolvedRelativeTargetAt===Fr.timestamp&&(b=!1),b)return;const{layout:A,layoutId:k}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(A||k))return;gs(this.layoutCorrected,this.layout.layoutBox);const D=this.treeScale.x,B=this.treeScale.y;E$(this.layoutCorrected,this.treeScale,this.path,w),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=sr());const{target:q}=l;if(!q){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(_T(this.prevProjectionDelta.x,this.projectionDelta.x),_T(this.prevProjectionDelta.y,this.projectionDelta.y)),Bd(this.projectionDelta,this.layoutCorrected,q,this.latestValues),(this.treeScale.x!==D||this.treeScale.y!==B||!PT(this.projectionDelta.x,this.prevProjectionDelta.x)||!PT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",q)),Td&&jl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(m=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),m){const w=this.getStack();w&&w.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=yc(),this.projectionDelta=yc(),this.projectionDeltaWithTransform=yc()}setAnimationOrigin(m,l=!1){const w=this.snapshot,b=w?w.latestValues:{},A={...this.latestValues},k=yc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const D=sr(),B=w?w.source:void 0,q=this.layout?this.layout.source:void 0,Z=B!==q,K=this.getStack(),N=!K||K.members.length<=1,F=!!(Z&&!N&&this.options.crossfade===!0&&!this.path.some(fj));this.animationProgress=0;let H;this.mixTargetDelta=te=>{const me=te/1e3;MT(k.x,m.x,me),MT(k.y,m.y,me),this.setTargetDelta(k),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Vd(D,this.layout.layoutBox,this.relativeParent.layout.layoutBox),dj(this.relativeTarget,this.relativeTargetOrigin,D,me),H&&G$(this.relativeTarget,H)&&(this.isProjectionDirty=!1),H||(H=sr()),gs(H,this.relativeTarget)),Z&&(this.animationValues=A,B$(A,b,this.latestValues,me,F,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=me},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(m){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(al(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=pn.update(()=>{Im.hasAnimatedSinceResize=!0,this.currentAnimation=Q$(0,AT,{...m,onUpdate:l=>{this.mixTargetDelta(l),m.onUpdate&&m.onUpdate(l)},onComplete:()=>{m.onComplete&&m.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const m=this.getStack();m&&m.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(AT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const m=this.getLead();let{targetWithTransforms:l,target:w,layout:b,latestValues:A}=m;if(!(!l||!w||!b)){if(this!==m&&this.layout&&b&&cM(this.options.animationType,this.layout.layoutBox,b.layoutBox)){w=this.target||sr();const k=ts(this.layout.layoutBox.x);w.x.min=m.target.x.min,w.x.max=w.x.min+k;const D=ts(this.layout.layoutBox.y);w.y.min=m.target.y.min,w.y.max=w.y.min+D}gs(l,w),_c(l,A),Bd(this.projectionDeltaWithTransform,this.layoutCorrected,l,A)}}registerSharedNode(m,l){this.sharedNodes.has(m)||this.sharedNodes.set(m,new Z$),this.sharedNodes.get(m).add(l);const b=l.options.initialPromotionConfig;l.promote({transition:b?b.transition:void 0,preserveFollowOpacity:b&&b.shouldPreserveFollowOpacity?b.shouldPreserveFollowOpacity(l):void 0})}isLead(){const m=this.getStack();return m?m.lead===this:!0}getLead(){var m;const{layoutId:l}=this.options;return l?((m=this.getStack())===null||m===void 0?void 0:m.lead)||this:this}getPrevLead(){var m;const{layoutId:l}=this.options;return l?(m=this.getStack())===null||m===void 0?void 0:m.prevLead:void 0}getStack(){const{layoutId:m}=this.options;if(m)return this.root.sharedNodes.get(m)}promote({needsReset:m,transition:l,preserveFollowOpacity:w}={}){const b=this.getStack();b&&b.promote(this,w),m&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const m=this.getStack();return m?m.relegate(this):!1}resetSkewAndRotation(){const{visualElement:m}=this.options;if(!m)return;let l=!1;const{latestValues:w}=m;if((w.z||w.rotate||w.rotateX||w.rotateY||w.rotateZ||w.skewX||w.skewY)&&(l=!0),!l)return;const b={};w.z&&z_("z",m,b,this.animationValues);for(let A=0;A<D_.length;A++)z_(`rotate${D_[A]}`,m,b,this.animationValues),z_(`skew${D_[A]}`,m,b,this.animationValues);m.render();for(const A in b)m.setStaticValue(A,b[A]),this.animationValues&&(this.animationValues[A]=b[A]);m.scheduleRender()}getProjectionStyles(m){var l,w;if(!this.instance||this.isSVG)return;if(!this.isVisible)return J$;const b={visibility:""},A=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,b.opacity="",b.pointerEvents=Mm(m==null?void 0:m.pointerEvents)||"",b.transform=A?A(this.latestValues,""):"none",b;const k=this.getLead();if(!this.projectionDelta||!this.layout||!k.target){const Z={};return this.options.layoutId&&(Z.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,Z.pointerEvents=Mm(m==null?void 0:m.pointerEvents)||""),this.hasProjected&&!$l(this.latestValues)&&(Z.transform=A?A({},""):"none",this.hasProjected=!1),Z}const D=k.animationValues||k.latestValues;this.applyTransformsToTarget(),b.transform=W$(this.projectionDeltaWithTransform,this.treeScale,D),A&&(b.transform=A(D,b.transform));const{x:B,y:q}=this.projectionDelta;b.transformOrigin=`${B.origin*100}% ${q.origin*100}% 0`,k.animationValues?b.opacity=k===this?(w=(l=D.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&w!==void 0?w:1:this.preserveOpacity?this.latestValues.opacity:D.opacityExit:b.opacity=k===this?D.opacity!==void 0?D.opacity:"":D.opacityExit!==void 0?D.opacityExit:0;for(const Z in _g){if(D[Z]===void 0)continue;const{correct:K,applyTo:N}=_g[Z],F=b.transform==="none"?D[Z]:K(D[Z],k);if(N){const H=N.length;for(let te=0;te<H;te++)b[N[te]]=F}else b[Z]=F}return this.options.layoutId&&(b.pointerEvents=k===this?Mm(m==null?void 0:m.pointerEvents)||"":"none"),b}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(m=>{var l;return(l=m.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(kT),this.root.sharedNodes.clear()}}}function tj(e){e.updateLayout()}function nj(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:c}=e.layout,{animationType:d}=e.options,m=n.source!==e.layout.source;d==="size"?vs(k=>{const D=m?n.measuredBox[k]:n.layoutBox[k],B=ts(D);D.min=s[k].min,D.max=D.min+B}):cM(d,n.layoutBox,s)&&vs(k=>{const D=m?n.measuredBox[k]:n.layoutBox[k],B=ts(s[k]);D.max=D.min+B,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[k].max=e.relativeTarget[k].min+B)});const l=yc();Bd(l,s,n.layoutBox);const w=yc();m?Bd(w,e.applyTransform(c,!0),n.measuredBox):Bd(w,s,n.layoutBox);const b=!oM(l);let A=!1;if(!e.resumeFrom){const k=e.getClosestProjectingParent();if(k&&!k.resumeFrom){const{snapshot:D,layout:B}=k;if(D&&B){const q=sr();Vd(q,n.layoutBox,D.layoutBox);const Z=sr();Vd(Z,s,B.layoutBox),aM(q,Z)||(A=!0),k.options.layoutRoot&&(e.relativeTarget=Z,e.relativeTargetOrigin=q,e.relativeParent=k)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:w,layoutDelta:l,hasLayoutChanged:b,hasRelativeTargetChanged:A})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function rj(e){Td&&jl.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function ij(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function sj(e){e.clearSnapshot()}function kT(e){e.clearMeasurements()}function oj(e){e.isLayoutDirty=!1}function aj(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function IT(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function lj(e){e.resolveTargetDelta()}function uj(e){e.calcProjection()}function cj(e){e.resetSkewAndRotation()}function hj(e){e.removeLeadSnapshot()}function MT(e,t,n){e.translate=Un(t.translate,0,n),e.scale=Un(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function DT(e,t,n,s){e.min=Un(t.min,n.min,s),e.max=Un(t.max,n.max,s)}function dj(e,t,n,s){DT(e.x,t.x,n.x,s),DT(e.y,t.y,n.y,s)}function fj(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const pj={duration:.45,ease:[.4,0,.1,1]},zT=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),RT=zT("applewebkit/")&&!zT("chrome/")?Math.round:Br;function LT(e){e.min=RT(e.min),e.max=RT(e.max)}function mj(e){LT(e.x),LT(e.y)}function cM(e,t,n){return e==="position"||e==="preserve-aspect"&&!g$(ET(t),ET(n),.2)}function gj(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const yj=uM({attachResizeListener:(e,t)=>Wo(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),R_={current:void 0},hM=uM({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!R_.current){const e=new yj({});e.mount(window),e.setOptions({layoutScroll:!0}),R_.current=e}return R_.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),vj={pan:{Feature:D$},drag:{Feature:M$,ProjectionNode:hM,MeasureLayout:rM}};function OT(e,t){const n=t?"pointerenter":"pointerleave",s=t?"onHoverStart":"onHoverEnd",c=(d,m)=>{if(d.pointerType==="touch"||WI())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t);const w=l[s];w&&pn.postRender(()=>w(d,m))};return Yo(e.current,n,c,{passive:!e.getProps()[s]})}class _j extends ml{mount(){this.unmount=Xo(OT(this.node,!0),OT(this.node,!1))}unmount(){}}class xj extends ml{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xo(Wo(this.node.current,"focus",()=>this.onFocus()),Wo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const dM=(e,t)=>t?e===t?!0:dM(e,t.parentElement):!1;function L_(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Ty(n))}class wj extends ml{constructor(){super(...arguments),this.removeStartListeners=Br,this.removeEndListeners=Br,this.removeAccessibleListeners=Br,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),d=Yo(window,"pointerup",(l,w)=>{if(!this.checkPressEnd())return;const{onTap:b,onTapCancel:A,globalTapTarget:k}=this.node.getProps(),D=!k&&!dM(this.node.current,l.target)?A:b;D&&pn.update(()=>D(l,w))},{passive:!(s.onTap||s.onPointerUp)}),m=Yo(window,"pointercancel",(l,w)=>this.cancelPress(l,w),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=Xo(d,m),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=d=>{if(d.key!=="Enter"||this.isPressing)return;const m=l=>{l.key!=="Enter"||!this.checkPressEnd()||L_("up",(w,b)=>{const{onTap:A}=this.node.getProps();A&&pn.postRender(()=>A(w,b))})};this.removeEndListeners(),this.removeEndListeners=Wo(this.node.current,"keyup",m),L_("down",(l,w)=>{this.startPress(l,w)})},n=Wo(this.node.current,"keydown",t),s=()=>{this.isPressing&&L_("cancel",(d,m)=>this.cancelPress(d,m))},c=Wo(this.node.current,"blur",s);this.removeAccessibleListeners=Xo(n,c)}}startPress(t,n){this.isPressing=!0;const{onTapStart:s,whileTap:c}=this.node.getProps();c&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&pn.postRender(()=>s(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!WI()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&pn.postRender(()=>s(t,n))}mount(){const t=this.node.getProps(),n=Yo(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=Wo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Xo(n,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const d0=new WeakMap,O_=new WeakMap,bj=e=>{const t=d0.get(e.target);t&&t(e)},Sj=e=>{e.forEach(bj)};function Cj({root:e,...t}){const n=e||document;O_.has(n)||O_.set(n,{});const s=O_.get(n),c=JSON.stringify(t);return s[c]||(s[c]=new IntersectionObserver(Sj,{root:e,...t})),s[c]}function Tj(e,t,n){const s=Cj(t);return d0.set(e,n),s.observe(e),()=>{d0.delete(e),s.unobserve(e)}}const Ej={some:0,all:1};class Pj extends ml{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:c="some",once:d}=t,m={root:n?n.current:void 0,rootMargin:s,threshold:typeof c=="number"?c:Ej[c]},l=w=>{const{isIntersecting:b}=w;if(this.isInView===b||(this.isInView=b,d&&!b&&this.hasEnteredView))return;b&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",b);const{onViewportEnter:A,onViewportLeave:k}=this.node.getProps(),D=b?A:k;D&&D(w)};return Tj(this.node.current,m,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Aj(t,n))&&this.startObserver()}unmount(){}}function Aj({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const kj={inView:{Feature:Pj},tap:{Feature:wj},focus:{Feature:xj},hover:{Feature:_j}},Ij={layout:{ProjectionNode:hM,MeasureLayout:rM}},fM=ie.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Ey=ie.createContext({}),S1=typeof window<"u",Mj=S1?ie.useLayoutEffect:ie.useEffect,pM=ie.createContext({strict:!1});function Dj(e,t,n,s,c){var d,m;const{visualElement:l}=ie.useContext(Ey),w=ie.useContext(pM),b=ie.useContext(w1),A=ie.useContext(fM).reducedMotion,k=ie.useRef();s=s||w.renderer,!k.current&&s&&(k.current=s(e,{visualState:t,parent:l,props:n,presenceContext:b,blockInitialAnimation:b?b.initial===!1:!1,reducedMotionConfig:A}));const D=k.current,B=ie.useContext(nM);D&&!D.projection&&c&&(D.type==="html"||D.type==="svg")&&zj(k.current,n,c,B),ie.useInsertionEffect(()=>{D&&D.update(n,b)});const q=n[FI],Z=ie.useRef(!!q&&!(!((d=window.MotionHandoffIsComplete)===null||d===void 0)&&d.call(window,q))&&((m=window.MotionHasOptimisedAnimation)===null||m===void 0?void 0:m.call(window,q)));return Mj(()=>{D&&(window.MotionIsMounted=!0,D.updateFeatures(),b1.render(D.render),Z.current&&D.animationState&&D.animationState.animateChanges())}),ie.useEffect(()=>{D&&(!Z.current&&D.animationState&&D.animationState.animateChanges(),Z.current&&(queueMicrotask(()=>{var K;(K=window.MotionHandoffMarkAsComplete)===null||K===void 0||K.call(window,q)}),Z.current=!1))}),D}function zj(e,t,n,s){const{layoutId:c,layout:d,drag:m,dragConstraints:l,layoutScroll:w,layoutRoot:b}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:mM(e.parent)),e.projection.setOptions({layoutId:c,layout:d,alwaysMeasureLayout:!!m||l&&gc(l),visualElement:e,animationType:typeof d=="string"?d:"both",initialPromotionConfig:s,layoutScroll:w,layoutRoot:b})}function mM(e){if(e)return e.options.allowProjection!==!1?e.projection:mM(e.parent)}function Rj(e,t,n){return ie.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):gc(n)&&(n.current=s))},[t])}function Py(e){return hf(e.animate)||n1.some(t=>df(e[t]))}function gM(e){return!!(Py(e)||e.variants)}function Lj(e,t){if(Py(e)){const{initial:n,animate:s}=e;return{initial:n===!1||df(n)?n:void 0,animate:df(s)?s:void 0}}return e.inherit!==!1?t:{}}function Oj(e){const{initial:t,animate:n}=Lj(e,ie.useContext(Ey));return ie.useMemo(()=>({initial:t,animate:n}),[FT(t),FT(n)])}function FT(e){return Array.isArray(e)?e.join(" "):e}const NT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jc={};for(const e in NT)jc[e]={isEnabled:t=>NT[e].some(n=>!!t[n])};function Fj(e){for(const t in e)jc[t]={...jc[t],...e[t]}}const Nj=Symbol.for("motionComponentSymbol");function Bj({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:c}){e&&Fj(e);function d(l,w){let b;const A={...ie.useContext(fM),...l,layoutId:Vj(l)},{isStatic:k}=A,D=Oj(l),B=s(l,k);if(!k&&S1){$j();const q=jj(A);b=q.MeasureLayout,D.visualElement=Dj(c,B,A,t,q.ProjectionNode)}return mt(Ey.Provider,{value:D,children:[b&&D.visualElement?de(b,{visualElement:D.visualElement,...A}):null,n(c,l,Rj(B,D.visualElement,w),B,k,D.visualElement)]})}const m=ie.forwardRef(d);return m[Nj]=c,m}function Vj({layoutId:e}){const t=ie.useContext(tM).id;return t&&e!==void 0?t+"-"+e:e}function $j(e,t){ie.useContext(pM).strict}function jj(e){const{drag:t,layout:n}=jc;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const Uj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function C1(e){return typeof e!="string"||e.includes("-")?!1:!!(Uj.indexOf(e)>-1||/[A-Z]/u.test(e))}function yM(e,{style:t,vars:n},s,c){Object.assign(e.style,t,c&&c.getProjectionStyles(s));for(const d in n)e.style.setProperty(d,n[d])}const vM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _M(e,t,n,s){yM(e,t,void 0,s);for(const c in t.attrs)e.setAttribute(vM.has(c)?c:Cy(c),t.attrs[c])}function xM(e,{layout:t,layoutId:n}){return pl.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!_g[e]||e==="opacity")}function T1(e,t,n){var s;const{style:c}=e,d={};for(const m in c)(ri(c[m])||t.style&&ri(t.style[m])||xM(m,e)||((s=n==null?void 0:n.getValue(m))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(d[m]=c[m]);return n&&c&&typeof c.willChange=="string"&&(n.applyWillChange=!1),d}function wM(e,t,n){const s=T1(e,t,n);for(const c in e)if(ri(e[c])||ri(t[c])){const d=Sf.indexOf(c)!==-1?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c;s[d]=e[c]}return s}function qj(e){const t=ie.useRef(null);return t.current===null&&(t.current=e()),t.current}function Gj({applyWillChange:e=!1,scrapeMotionValuesFromProps:t,createRenderState:n,onMount:s},c,d,m,l){const w={latestValues:Zj(c,d,m,l?!1:e,t),renderState:n()};return s&&(w.mount=b=>s(c,b,w)),w}const bM=e=>(t,n)=>{const s=ie.useContext(Ey),c=ie.useContext(w1),d=()=>Gj(e,t,s,c,n);return n?d():qj(d)};function BT(e,t,n){const s=Array.isArray(t)?t:[t];for(let c=0;c<s.length;c++){const d=e1(e,s[c]);if(d){const{transitionEnd:m,transition:l,...w}=d;n(w,m)}}}function Zj(e,t,n,s,c){var d;const m={};let l=s&&((d=e.style)===null||d===void 0?void 0:d.willChange)===void 0;const w=c(e,{});for(const Z in w)m[Z]=Mm(w[Z]);let{initial:b,animate:A}=e;const k=Py(e),D=gM(e);t&&D&&!k&&e.inherit!==!1&&(b===void 0&&(b=t.initial),A===void 0&&(A=t.animate));let B=n?n.initial===!1:!1;B=B||b===!1;const q=B?A:b;return q&&typeof q!="boolean"&&!hf(q)&&BT(e,q,(Z,K)=>{for(const N in Z){let F=Z[N];if(Array.isArray(F)){const H=B?F.length-1:0;F=F[H]}F!==null&&(m[N]=F)}for(const N in K)m[N]=K[N]}),l&&A&&b!==!1&&!hf(A)&&BT(e,A,Z=>{for(const K in Z)if(BI(K)){m.willChange="transform";return}}),m}const E1=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),SM=()=>({...E1(),attrs:{}}),CM=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Wj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Hj=Sf.length;function Kj(e,t,n){let s="",c=!0;for(let d=0;d<Hj;d++){const m=Sf[d],l=e[m];if(l===void 0)continue;let w=!0;if(typeof l=="number"?w=l===(m.startsWith("scale")?1:0):w=parseFloat(l)===0,!w||n){const b=CM(l,c1[m]);if(!w){c=!1;const A=Wj[m]||m;s+=`${A}(${b}) `}n&&(t[m]=b)}}return s=s.trim(),n?s=n(t,c?"":s):c&&(s="none"),s}function P1(e,t,n){const{style:s,vars:c,transformOrigin:d}=e;let m=!1,l=!1;for(const w in t){const b=t[w];if(pl.has(w)){m=!0;continue}else if(fI(w)){c[w]=b;continue}else{const A=CM(b,c1[w]);w.startsWith("origin")?(l=!0,d[w]=A):s[w]=A}}if(t.transform||(m||n?s.transform=Kj(t,e.transform,n):s.transform&&(s.transform="none")),l){const{originX:w="50%",originY:b="50%",originZ:A=0}=d;s.transformOrigin=`${w} ${b} ${A}`}}function VT(e,t,n){return typeof e=="string"?e:It.transform(t+n*e)}function Xj(e,t,n){const s=VT(t,e.x,e.width),c=VT(n,e.y,e.height);return`${s} ${c}`}const Yj={offset:"stroke-dashoffset",array:"stroke-dasharray"},Qj={offset:"strokeDashoffset",array:"strokeDasharray"};function Jj(e,t,n=1,s=0,c=!0){e.pathLength=1;const d=c?Yj:Qj;e[d.offset]=It.transform(-s);const m=It.transform(t),l=It.transform(n);e[d.array]=`${m} ${l}`}function A1(e,{attrX:t,attrY:n,attrScale:s,originX:c,originY:d,pathLength:m,pathSpacing:l=1,pathOffset:w=0,...b},A,k){if(P1(e,b,k),A){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:D,style:B,dimensions:q}=e;D.transform&&(q&&(B.transform=D.transform),delete D.transform),q&&(c!==void 0||d!==void 0||B.transform)&&(B.transformOrigin=Xj(q,c!==void 0?c:.5,d!==void 0?d:.5)),t!==void 0&&(D.x=t),n!==void 0&&(D.y=n),s!==void 0&&(D.scale=s),m!==void 0&&Jj(D,m,l,w,!1)}const k1=e=>typeof e=="string"&&e.toLowerCase()==="svg",e8={useVisualState:bM({scrapeMotionValuesFromProps:wM,createRenderState:SM,onMount:(e,t,{renderState:n,latestValues:s})=>{pn.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),pn.render(()=>{A1(n,s,k1(t.tagName),e.transformTemplate),_M(t,n)})}})},t8={useVisualState:bM({applyWillChange:!0,scrapeMotionValuesFromProps:T1,createRenderState:E1})};function TM(e,t,n){for(const s in t)!ri(t[s])&&!xM(s,n)&&(e[s]=t[s])}function n8({transformTemplate:e},t){return ie.useMemo(()=>{const n=E1();return P1(n,t,e),Object.assign({},n.vars,n.style)},[t])}function r8(e,t){const n=e.style||{},s={};return TM(s,n,e),Object.assign(s,n8(e,t)),s}function i8(e,t){const n={},s=r8(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const s8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function xg(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||s8.has(e)}let EM=e=>!xg(e);function o8(e){e&&(EM=t=>t.startsWith("on")?!xg(t):e(t))}try{o8(require("@emotion/is-prop-valid").default)}catch{}function a8(e,t,n){const s={};for(const c in e)c==="values"&&typeof e.values=="object"||(EM(c)||n===!0&&xg(c)||!t&&!xg(c)||e.draggable&&c.startsWith("onDrag"))&&(s[c]=e[c]);return s}function l8(e,t,n,s){const c=ie.useMemo(()=>{const d=SM();return A1(d,t,k1(s),e.transformTemplate),{...d.attrs,style:{...d.style}}},[t]);if(e.style){const d={};TM(d,e.style,e),c.style={...d,...c.style}}return c}function u8(e=!1){return(n,s,c,{latestValues:d},m)=>{const w=(C1(n)?l8:i8)(s,d,m,n),b=a8(s,typeof n=="string",e),A=n!==ie.Fragment?{...b,...w,ref:c}:{},{children:k}=s,D=ie.useMemo(()=>ri(k)?k.get():k,[k]);return ie.createElement(n,{...A,children:D})}}function c8(e,t){return function(s,{forwardMotionProps:c}={forwardMotionProps:!1}){const m={...C1(s)?e8:t8,preloadedFeatures:e,useRender:u8(c),createVisualElement:t,Component:s};return Bj(m)}}const f0={current:null},PM={current:!1};function h8(){if(PM.current=!0,!!S1)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>f0.current=e.matches;e.addListener(t),t()}else f0.current=!1}function d8(e,t,n){for(const s in t){const c=t[s],d=n[s];if(ri(c))e.addValue(s,c);else if(ri(d))e.addValue(s,mf(c,{owner:e}));else if(d!==c)if(e.hasValue(s)){const m=e.getValue(s);m.liveStyle===!0?m.jump(c):m.hasAnimated||m.set(c)}else{const m=e.getStaticValue(s);e.addValue(s,mf(m!==void 0?m:c,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const $T=new WeakMap,f8=[...gI,ti,ul],p8=e=>f8.find(mI(e)),jT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class m8{scrapeMotionValuesFromProps(t,n,s){return{}}constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:c,blockInitialAnimation:d,visualState:m},l={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=a1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const D=xo.now();this.renderScheduledAt<D&&(this.renderScheduledAt=D,pn.render(this.render,!1,!0))};const{latestValues:w,renderState:b}=m;this.latestValues=w,this.baseTarget={...w},this.initialValues=n.initial?{...w}:{},this.renderState=b,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=c,this.options=l,this.blockInitialAnimation=!!d,this.isControllingVariants=Py(n),this.isVariantNode=gM(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:A,...k}=this.scrapeMotionValuesFromProps(n,{},this);for(const D in k){const B=k[D];w[D]!==void 0&&ri(B)&&B.set(w[D],!1)}}mount(t){this.current=t,$T.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),PM.current||h8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:f0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){$T.delete(this.current),this.projection&&this.projection.unmount(),al(this.notifyUpdate),al(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=pl.has(t),c=n.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&pn.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),d=n.on("renderRequest",this.scheduleRender);let m;window.MotionCheckAppearSync&&(m=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{c(),d(),m&&m(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in jc){const n=jc[t];if(!n)continue;const{isEnabled:s,Feature:c}=n;if(!this.features[t]&&c&&s(this.props)&&(this.features[t]=new c(this)),this.features[t]){const d=this.features[t];d.isMounted?d.update():(d.mount(),d.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):sr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<jT.length;s++){const c=jT[s];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const d="on"+c,m=t[d];m&&(this.propEventSubscriptions[c]=this.on(c,m))}this.prevMotionValues=d8(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const s=this.values.get(t);n!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=mf(n===null?void 0:n,{owner:this}),this.addValue(t,s)),s}readValue(t,n){var s;let c=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options);return c!=null&&(typeof c=="string"&&(hI(c)||uI(c))?c=parseFloat(c):!p8(c)&&ul.test(n)&&(c=CI(t,n)),this.setBaseTarget(t,ri(c)?c.get():c)),ri(c)?c.get():c}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:s}=this.props;let c;if(typeof s=="string"||typeof s=="object"){const m=e1(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);m&&(c=m[t])}if(s&&c!==void 0)return c;const d=this.getBaseTargetFromProps(this.props,t);return d!==void 0&&!ri(d)?d:this.initialValues[t]!==void 0&&c===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new x1),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class AM extends m8{constructor(){super(...arguments),this.KeyframeResolver=TI}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}}function g8(e){return window.getComputedStyle(e)}class y8 extends AM{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=yM}readValueFromInstance(t,n){if(pl.has(n)){const s=h1(n);return s&&s.default||0}else{const s=g8(t),c=(fI(n)?s.getPropertyValue(n):s[n])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(t,{transformPagePoint:n}){return JI(t,n)}build(t,n,s){P1(t,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,n,s){return T1(t,n,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ri(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class v8 extends AM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=sr}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(pl.has(n)){const s=h1(n);return s&&s.default||0}return n=vM.has(n)?n:Cy(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,s){return wM(t,n,s)}build(t,n,s){A1(t,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,s,c){_M(t,n,s,c)}mount(t){this.isSVGTag=k1(t.tagName),super.mount(t)}}const _8=(e,t)=>C1(e)?new v8(t):new y8(t,{allowProjection:e!==ie.Fragment}),x8=c8({...a$,...kj,...vj,...Ij},_8),Uc=QB(x8);function w8(){return de("section",{className:"about naxatw-bg-white naxatw-h-fit lg:naxatw-h-[25rem]",children:mt("div",{className:"naxatw-flex naxatw-flex-col lg:naxatw-flex-row naxatw-container naxatw-py-10 lg:naxatw-py-20 naxatw-text-gray-800 naxatw-items-center",children:[de(Uc.div,{initial:{translateX:-200,opacity:0},whileInView:{translateX:0,opacity:1},transition:{duration:.7},viewport:{once:!0},className:"naxatw-w-1/2",children:de(Zo,{src:YB,width:350})}),mt(Uc.div,{initial:{translateX:200,opacity:0},whileInView:{translateX:0,opacity:1},transition:{duration:.7},viewport:{once:!0},className:"naxatw-flex naxatw-flex-col naxatw-gap-8 naxatw-w-full lg:naxatw-w-1/2",children:[de("p",{className:"naxatw-text-[3rem]",children:"About Us"}),de("p",{children:"At Geosewa, we provide essential resources for geomatics engineers, including mock tests and past exam questions for the NEC Geomatics Engineering License. Our services also encompass professional mapping and IT solutions. Join us to access top-tier study materials, expert guidance, and advanced mapping services, all designed to help you excel in your geomatics engineering career."})]})]})})}const b8=""+new URL("Nec-License-66fc4921.svg",import.meta.url).href,S8=""+new URL("Nec-mocktest-c99ca461.svg",import.meta.url).href,C8=""+new URL("Psc-prepration-40714612.svg",import.meta.url).href,T8=""+new URL("It-services-13bbd2a9.svg",import.meta.url).href,E8=""+new URL("arun-bhumi-91b25f28.jpg",import.meta.url).href,P8=""+new URL("bishal-gyawali-a96bd964.jpg",import.meta.url).href,A8=""+new URL("karan-chaudhary-be801aac.jpg",import.meta.url).href,k8=""+new URL("samrat-acharya-073d53b9.jpg",import.meta.url).href,I8=[{id:1,image:b8,title:"NEC License Material",description:"Comprehensive materials for Nepal Engineering Councils GeomaticsEngineering License exam, aligned with the latest syllabus"},{id:2,image:S8,title:"NEC License Mocktest",description:"Extensive mock tests with previous NEC questions help gauge preparation and build confidence for the exam."},{id:3,image:C8,title:"PSC Preparation",description:"We offer curated materials for PSC exams in Nepal, focusing on 4th, 5th, and 7th levels to give you an edge."},{id:4,image:T8,title:"GeoSpatial And IT services",description:"At GeoSewa, we provide geomatics and IT services, including mapping, surveys, drone services, and digital solutions."}],M8=[{id:1,question:"What is GeoSewa?",answer:"Geosewa is an educational and it service company decidated for sharing top-tier study materials, expert guidance, and advanced mapping services."},{id:2,question:"How can we get license exam materials?",answer:"You can simply email us on geosewa7@gmail.com requesting for the materials."},{id:3,question:"When does the mock test generally happen?",answer:"Generally, before one or two weeks before NEC license examination."},{id:4,question:"Is this page only for geomatics engineering mock test?",answer:"Yes, you can try us for free for 30 days.If you want, we'll provide you with a free, personalized 30-minute onboading call to get you up and running as soon as possible. "},{id:5,question:"How does billing work?",answer:"Yes, you can try us for free for a few days.If you want, we'll provide you with a free, personalized 30-minute onboading call to get you up and running as soon as possible. "},{id:6,question:"How can we contact you?",answer:"You can contact or whatsapp us at 9763252325 or DM us at geosewa page."}],D8=[{id:3,student:"Karan Chaudhary",organization:"IOE, WRC",image:A8,quote:"Very helpful and worth it. I recommend everyone to participate in the moct test conducted by Geo Sewa. It helps a lot."},{id:1,student:"Arun Kumar Bhomi",organization:"KU",image:E8,quote:"I took five Geosewa mock exams, which closely mirrored the NEC format and provided excellent practice. Many questions in the actual license exam were similar, significantly boosting my confidence and success. I highly recommend Geosewa's tests for anyone preparing for the exam."},{id:2,student:"Bishal Gyawali",organization:"IOE, WRC",image:P8,quote:"Thanks for encouraging and better confidence as the mock test is really worth it. Huge love for all Geosewa team and memebers"},{id:4,student:"Samrat Acharya",organization:"KU",image:k8,quote:"Thank you for everything. Mock Test was really a worth it. It gives you the time calculation for the questions, past question (which gets repeat in Real Examination).So, Thank you for everything."}];function z8({image:e,title:t,description:n}){return mt(Ql,{gap:2,className:"naxatw-p-4 naxatw-transform naxatw-transition-transform naxatw-duration-300 hover:naxatw-scale-105 naxatw-bg-white naxatw-rounded-xl naxatw-border naxatw-shadow-lg",children:[de(Zo,{src:e,width:60}),de("h4",{className:"naxatw-text-gray-800",children:t}),de("p",{children:n})]})}const kM={hidden:{opacity:0,scale:1},visible:{opacity:1,scale:1,transition:{delayChildren:.3,staggerChildren:.2}}},IM={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};function R8(){return de("section",{className:"services naxatw-w-full naxatw-bg-[#F5FAFF]",children:mt("div",{className:"naxatw-container naxatw-py-10 md:naxatw-py-20",children:[mt(Fi,{gap:2,children:[de("p",{className:"naxatw-text-[3rem] naxatw-text-gray-800 naxatw-text-center naxatw-mb-8",children:"Our"}),de("p",{className:"naxatw-text-[3rem] naxatw-text-[#59AAFB] naxatw-text-center naxatw-mb-8",children:"Services"})]}),de(Uc.div,{variants:kM,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"naxatw-grid naxatw-grid-cols-1 md:naxatw-grid-cols-2 naxatw-gap-14",children:I8.map(e=>de(Uc.div,{variants:IM,children:de(z8,{image:e.image,title:e.title,description:e.description},e.id)},e.id))})]})})}const L8=e=>{const{image:t,student:n,quote:s,organization:c}=e;return mt("div",{className:"testimonial-card naxatw-cursor-default naxatw-shadow-lg naxatw-rounded-xl naxatw-border naxatw-border-solid naxatw-border-[#E7EAEE] naxatw-bg-white naxatw-p-8 naxatw-text-center",children:[de("div",{className:"image-container naxatw-mx-auto naxatw-mb-10 naxatw-h-16 naxatw-w-16",children:de("img",{src:t,alt:n,width:100,height:100,className:"naxatw-rounded-[50%] naxatw-object-cover naxatw-object-center"})}),mt("div",{className:"text-container",children:[de("div",{className:"description naxatw-mb-10",children:de("p",{className:"naxatw-text-base naxatw-leading-7 naxatw-tracking-[-0.01125rem] naxatw-text-[#07090D]",children:s})}),mt("div",{className:"cutomer-details",children:[de("p",{className:"naxatw-text-base naxatw-font-medium naxatw-leading-6 naxatw-tracking-[-0.03rem] naxatw-text-[#07090D]",children:n}),de("span",{className:"naxatw-text-[0.875rem] naxatw-leading-6 naxatw-tracking-[-0.00875rem] naxatw-text-[#818A9C]",children:c})]})]})]})};function O8(){return de("section",{className:"what-students-say naxatw-bg-[#FBF8F3]",children:mt("div",{className:"naxatw-py-10 md:naxatw-py-20 naxatw-container",children:[mt("p",{className:"naxatw-text-[3rem] naxatw-text-gray-800 naxatw-text-center",children:["Our Students",de("span",{className:"naxatw-text-[3rem] naxatw-ml-2 naxatw-text-[#59AAFB]",children:"Say !"})]}),de(Uc.div,{variants:kM,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"naxatw-grid naxatw-grid-cols-1 naxatw-gap-10 naxatw-mt-8 md:naxatw-grid-cols-2 xl:naxatw-grid-cols-3",children:D8.slice(1,4).map(e=>de(Uc.div,{variants:IM,children:de(L8,{...e},e.id)},e.id))})]})})}function MM(e,t=[]){let n=[];function s(d,m){const l=ie.createContext(m),w=n.length;n=[...n,m];const b=k=>{var N;const{scope:D,children:B,...q}=k,Z=((N=D==null?void 0:D[e])==null?void 0:N[w])||l,K=ie.useMemo(()=>q,Object.values(q));return de(Z.Provider,{value:K,children:B})};b.displayName=d+"Provider";function A(k,D){var Z;const B=((Z=D==null?void 0:D[e])==null?void 0:Z[w])||l,q=ie.useContext(B);if(q)return q;if(m!==void 0)return m;throw new Error(`\`${k}\` must be used within \`${d}\``)}return[b,A]}const c=()=>{const d=n.map(m=>ie.createContext(m));return function(l){const w=(l==null?void 0:l[e])||d;return ie.useMemo(()=>({[`__scope${e}`]:{...l,[e]:w}}),[l,w])}};return c.scopeName=e,[s,F8(c,...t)]}function F8(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(d){const m=s.reduce((l,{useScope:w,scopeName:b})=>{const k=w(d)[`__scope${b}`];return{...l,...k}},{});return ie.useMemo(()=>({[`__scope${t.scopeName}`]:m}),[m])}};return n.scopeName=t.scopeName,n}function N8(e,t=[]){let n=[];function s(d,m){const l=ie.createContext(m),w=n.length;n=[...n,m];function b(k){const{scope:D,children:B,...q}=k,Z=(D==null?void 0:D[e][w])||l,K=ie.useMemo(()=>q,Object.values(q));return de(Z.Provider,{value:K,children:B})}function A(k,D){const B=(D==null?void 0:D[e][w])||l,q=ie.useContext(B);if(q)return q;if(m!==void 0)return m;throw new Error(`\`${k}\` must be used within \`${d}\``)}return b.displayName=d+"Provider",[b,A]}const c=()=>{const d=n.map(m=>ie.createContext(m));return function(l){const w=(l==null?void 0:l[e])||d;return ie.useMemo(()=>({[`__scope${e}`]:{...l,[e]:w}}),[l,w])}};return c.scopeName=e,[s,B8(c,...t)]}function B8(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(d){const m=s.reduce((l,{useScope:w,scopeName:b})=>{const k=w(d)[`__scope${b}`];return{...l,...k}},{});return ie.useMemo(()=>({[`__scope${t.scopeName}`]:m}),[m])}};return n.scopeName=t.scopeName,n}function V8(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function I1(...e){return t=>e.forEach(n=>V8(n,t))}function gf(...e){return ie.useCallback(I1(...e),e)}var p0=ie.forwardRef((e,t)=>{const{children:n,...s}=e,c=ie.Children.toArray(n),d=c.find(j8);if(d){const m=d.props.children,l=c.map(w=>w===d?ie.Children.count(m)>1?ie.Children.only(null):ie.isValidElement(m)?m.props.children:null:w);return de(m0,{...s,ref:t,children:ie.isValidElement(m)?ie.cloneElement(m,void 0,l):null})}return de(m0,{...s,ref:t,children:n})});p0.displayName="Slot";var m0=ie.forwardRef((e,t)=>{const{children:n,...s}=e;if(ie.isValidElement(n)){const c=q8(n);return ie.cloneElement(n,{...U8(s,n.props),ref:t?I1(t,c):c})}return ie.Children.count(n)>1?ie.Children.only(null):null});m0.displayName="SlotClone";var $8=({children:e})=>de(Qo,{children:e});function j8(e){return ie.isValidElement(e)&&e.type===$8}function U8(e,t){const n={...t};for(const s in t){const c=e[s],d=t[s];/^on[A-Z]/.test(s)?c&&d?n[s]=(...l)=>{d(...l),c(...l)}:c&&(n[s]=c):s==="style"?n[s]={...c,...d}:s==="className"&&(n[s]=[c,d].filter(Boolean).join(" "))}return{...e,...n}}function q8(e){var s,c;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(c=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:c.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function G8(e){const t=e+"CollectionProvider",[n,s]=N8(t),[c,d]=n(t,{collectionRef:{current:null},itemMap:new Map}),m=B=>{const{scope:q,children:Z}=B,K=dt.useRef(null),N=dt.useRef(new Map).current;return de(c,{scope:q,itemMap:N,collectionRef:K,children:Z})};m.displayName=t;const l=e+"CollectionSlot",w=dt.forwardRef((B,q)=>{const{scope:Z,children:K}=B,N=d(l,Z),F=gf(q,N.collectionRef);return de(p0,{ref:F,children:K})});w.displayName=l;const b=e+"CollectionItemSlot",A="data-radix-collection-item",k=dt.forwardRef((B,q)=>{const{scope:Z,children:K,...N}=B,F=dt.useRef(null),H=gf(q,F),te=d(b,Z);return dt.useEffect(()=>(te.itemMap.set(F,{ref:F,...N}),()=>void te.itemMap.delete(F))),de(p0,{[A]:"",ref:H,children:K})});k.displayName=b;function D(B){const q=d(e+"CollectionConsumer",B);return dt.useCallback(()=>{const K=q.collectionRef.current;if(!K)return[];const N=Array.from(K.querySelectorAll(`[${A}]`));return Array.from(q.itemMap.values()).sort((te,me)=>N.indexOf(te.ref.current)-N.indexOf(me.ref.current))},[q.collectionRef,q.itemMap])}return[{Provider:m,Slot:w,ItemSlot:k},D,s]}function DM(e,t,{checkForDefaultPrevented:n=!0}={}){return function(c){if(e==null||e(c),n===!1||!c.defaultPrevented)return t==null?void 0:t(c)}}function zM(e){const t=ie.useRef(e);return ie.useEffect(()=>{t.current=e}),ie.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function M1({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,c]=Z8({defaultProp:t,onChange:n}),d=e!==void 0,m=d?e:s,l=zM(n),w=ie.useCallback(b=>{if(d){const k=typeof b=="function"?b(e):b;k!==e&&l(k)}else c(b)},[d,e,c,l]);return[m,w]}function Z8({defaultProp:e,onChange:t}){const n=ie.useState(e),[s]=n,c=ie.useRef(s),d=zM(t);return ie.useEffect(()=>{c.current!==s&&(d(s),c.current=s)},[s,c,d]),n}var RM=ie.forwardRef((e,t)=>{const{children:n,...s}=e,c=ie.Children.toArray(n),d=c.find(H8);if(d){const m=d.props.children,l=c.map(w=>w===d?ie.Children.count(m)>1?ie.Children.only(null):ie.isValidElement(m)?m.props.children:null:w);return de(g0,{...s,ref:t,children:ie.isValidElement(m)?ie.cloneElement(m,void 0,l):null})}return de(g0,{...s,ref:t,children:n})});RM.displayName="Slot";var g0=ie.forwardRef((e,t)=>{const{children:n,...s}=e;if(ie.isValidElement(n)){const c=X8(n);return ie.cloneElement(n,{...K8(s,n.props),ref:t?I1(t,c):c})}return ie.Children.count(n)>1?ie.Children.only(null):null});g0.displayName="SlotClone";var W8=({children:e})=>de(Qo,{children:e});function H8(e){return ie.isValidElement(e)&&e.type===W8}function K8(e,t){const n={...t};for(const s in t){const c=e[s],d=t[s];/^on[A-Z]/.test(s)?c&&d?n[s]=(...l)=>{d(...l),c(...l)}:c&&(n[s]=c):s==="style"?n[s]={...c,...d}:s==="className"&&(n[s]=[c,d].filter(Boolean).join(" "))}return{...e,...n}}function X8(e){var s,c;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(c=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:c.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Y8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ef=Y8.reduce((e,t)=>{const n=ie.forwardRef((s,c)=>{const{asChild:d,...m}=s,l=d?RM:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),de(l,{...m,ref:c})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),wg=globalThis!=null&&globalThis.document?ie.useLayoutEffect:()=>{};function Q8(e,t){return ie.useReducer((n,s)=>t[n][s]??n,e)}var LM=e=>{const{present:t,children:n}=e,s=J8(t),c=typeof n=="function"?n({present:s.isPresent}):ie.Children.only(n),d=gf(s.ref,eU(c));return typeof n=="function"||s.isPresent?ie.cloneElement(c,{ref:d}):null};LM.displayName="Presence";function J8(e){const[t,n]=ie.useState(),s=ie.useRef({}),c=ie.useRef(e),d=ie.useRef("none"),m=e?"mounted":"unmounted",[l,w]=Q8(m,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return ie.useEffect(()=>{const b=om(s.current);d.current=l==="mounted"?b:"none"},[l]),wg(()=>{const b=s.current,A=c.current;if(A!==e){const D=d.current,B=om(b);e?w("MOUNT"):B==="none"||(b==null?void 0:b.display)==="none"?w("UNMOUNT"):w(A&&D!==B?"ANIMATION_OUT":"UNMOUNT"),c.current=e}},[e,w]),wg(()=>{if(t){let b;const A=t.ownerDocument.defaultView??window,k=B=>{const Z=om(s.current).includes(B.animationName);if(B.target===t&&Z&&(w("ANIMATION_END"),!c.current)){const K=t.style.animationFillMode;t.style.animationFillMode="forwards",b=A.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=K)})}},D=B=>{B.target===t&&(d.current=om(s.current))};return t.addEventListener("animationstart",D),t.addEventListener("animationcancel",k),t.addEventListener("animationend",k),()=>{A.clearTimeout(b),t.removeEventListener("animationstart",D),t.removeEventListener("animationcancel",k),t.removeEventListener("animationend",k)}}else w("ANIMATION_END")},[t,w]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:ie.useCallback(b=>{b&&(s.current=getComputedStyle(b)),n(b)},[])}}function om(e){return(e==null?void 0:e.animationName)||"none"}function eU(e){var s,c;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(c=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:c.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var tU=vE["useId".toString()]||(()=>{}),nU=0;function OM(e){const[t,n]=ie.useState(tU());return wg(()=>{e||n(s=>s??String(nU++))},[e]),e||(t?`radix-${t}`:"")}var D1="Collapsible",[rU,FM]=MM(D1),[iU,z1]=rU(D1),NM=ie.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:s,defaultOpen:c,disabled:d,onOpenChange:m,...l}=e,[w=!1,b]=M1({prop:s,defaultProp:c,onChange:m});return de(iU,{scope:n,disabled:d,contentId:OM(),open:w,onOpenToggle:ie.useCallback(()=>b(A=>!A),[b]),children:de(Ef.div,{"data-state":L1(w),"data-disabled":d?"":void 0,...l,ref:t})})});NM.displayName=D1;var BM="CollapsibleTrigger",VM=ie.forwardRef((e,t)=>{const{__scopeCollapsible:n,...s}=e,c=z1(BM,n);return de(Ef.button,{type:"button","aria-controls":c.contentId,"aria-expanded":c.open||!1,"data-state":L1(c.open),"data-disabled":c.disabled?"":void 0,disabled:c.disabled,...s,ref:t,onClick:DM(e.onClick,c.onOpenToggle)})});VM.displayName=BM;var R1="CollapsibleContent",$M=ie.forwardRef((e,t)=>{const{forceMount:n,...s}=e,c=z1(R1,e.__scopeCollapsible);return de(LM,{present:n||c.open,children:({present:d})=>de(sU,{...s,ref:t,present:d})})});$M.displayName=R1;var sU=ie.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:s,children:c,...d}=e,m=z1(R1,n),[l,w]=ie.useState(s),b=ie.useRef(null),A=gf(t,b),k=ie.useRef(0),D=k.current,B=ie.useRef(0),q=B.current,Z=m.open||l,K=ie.useRef(Z),N=ie.useRef();return ie.useEffect(()=>{const F=requestAnimationFrame(()=>K.current=!1);return()=>cancelAnimationFrame(F)},[]),wg(()=>{const F=b.current;if(F){N.current=N.current||{transitionDuration:F.style.transitionDuration,animationName:F.style.animationName},F.style.transitionDuration="0s",F.style.animationName="none";const H=F.getBoundingClientRect();k.current=H.height,B.current=H.width,K.current||(F.style.transitionDuration=N.current.transitionDuration,F.style.animationName=N.current.animationName),w(s)}},[m.open,s]),de(Ef.div,{"data-state":L1(m.open),"data-disabled":m.disabled?"":void 0,id:m.contentId,hidden:!Z,...d,ref:A,style:{"--radix-collapsible-content-height":D?`${D}px`:void 0,"--radix-collapsible-content-width":q?`${q}px`:void 0,...e.style},children:Z&&c})});function L1(e){return e?"open":"closed"}var oU=NM,aU=VM,lU=$M,uU=ie.createContext(void 0);function cU(e){const t=ie.useContext(uU);return e||t||"ltr"}var aa="Accordion",hU=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[O1,dU,fU]=G8(aa),[Ay,Y9]=MM(aa,[fU,FM]),F1=FM(),jM=dt.forwardRef((e,t)=>{const{type:n,...s}=e,c=s,d=s;return de(O1.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?de(yU,{...d,ref:t}):de(gU,{...c,ref:t})})});jM.displayName=aa;var[UM,pU]=Ay(aa),[qM,mU]=Ay(aa,{collapsible:!1}),gU=dt.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:c=()=>{},collapsible:d=!1,...m}=e,[l,w]=M1({prop:n,defaultProp:s,onChange:c});return de(UM,{scope:e.__scopeAccordion,value:l?[l]:[],onItemOpen:w,onItemClose:dt.useCallback(()=>d&&w(""),[d,w]),children:de(qM,{scope:e.__scopeAccordion,collapsible:d,children:de(GM,{...m,ref:t})})})}),yU=dt.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:c=()=>{},...d}=e,[m=[],l]=M1({prop:n,defaultProp:s,onChange:c}),w=dt.useCallback(A=>l((k=[])=>[...k,A]),[l]),b=dt.useCallback(A=>l((k=[])=>k.filter(D=>D!==A)),[l]);return de(UM,{scope:e.__scopeAccordion,value:m,onItemOpen:w,onItemClose:b,children:de(qM,{scope:e.__scopeAccordion,collapsible:!0,children:de(GM,{...d,ref:t})})})}),[vU,ky]=Ay(aa),GM=dt.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:s,dir:c,orientation:d="vertical",...m}=e,l=dt.useRef(null),w=gf(l,t),b=dU(n),k=cU(c)==="ltr",D=DM(e.onKeyDown,B=>{var Ce;if(!hU.includes(B.key))return;const q=B.target,Z=b().filter(Ge=>{var Le;return!((Le=Ge.ref.current)!=null&&Le.disabled)}),K=Z.findIndex(Ge=>Ge.ref.current===q),N=Z.length;if(K===-1)return;B.preventDefault();let F=K;const H=0,te=N-1,me=()=>{F=K+1,F>te&&(F=H)},Se=()=>{F=K-1,F<H&&(F=te)};switch(B.key){case"Home":F=H;break;case"End":F=te;break;case"ArrowRight":d==="horizontal"&&(k?me():Se());break;case"ArrowDown":d==="vertical"&&me();break;case"ArrowLeft":d==="horizontal"&&(k?Se():me());break;case"ArrowUp":d==="vertical"&&Se();break}const Ie=F%N;(Ce=Z[Ie].ref.current)==null||Ce.focus()});return de(vU,{scope:n,disabled:s,direction:c,orientation:d,children:de(O1.Slot,{scope:n,children:de(Ef.div,{...m,"data-orientation":d,ref:w,onKeyDown:s?void 0:D})})})}),bg="AccordionItem",[_U,N1]=Ay(bg),ZM=dt.forwardRef((e,t)=>{const{__scopeAccordion:n,value:s,...c}=e,d=ky(bg,n),m=pU(bg,n),l=F1(n),w=OM(),b=s&&m.value.includes(s)||!1,A=d.disabled||e.disabled;return de(_U,{scope:n,open:b,disabled:A,triggerId:w,children:de(oU,{"data-orientation":d.orientation,"data-state":QM(b),...l,...c,ref:t,disabled:A,open:b,onOpenChange:k=>{k?m.onItemOpen(s):m.onItemClose(s)}})})});ZM.displayName=bg;var WM="AccordionHeader",HM=dt.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,c=ky(aa,n),d=N1(WM,n);return de(Ef.h3,{"data-orientation":c.orientation,"data-state":QM(d.open),"data-disabled":d.disabled?"":void 0,...s,ref:t})});HM.displayName=WM;var y0="AccordionTrigger",KM=dt.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,c=ky(aa,n),d=N1(y0,n),m=mU(y0,n),l=F1(n);return de(O1.ItemSlot,{scope:n,children:de(aU,{"aria-disabled":d.open&&!m.collapsible||void 0,"data-orientation":c.orientation,id:d.triggerId,...l,...s,ref:t})})});KM.displayName=y0;var XM="AccordionContent",YM=dt.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,c=ky(aa,n),d=N1(XM,n),m=F1(n);return de(lU,{role:"region","aria-labelledby":d.triggerId,"data-orientation":c.orientation,...m,...s,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});YM.displayName=XM;function QM(e){return e?"open":"closed"}var xU=jM,wU=ZM,bU=HM,JM=KM,eD=YM;const SU=xU,tD=dt.forwardRef(({className:e,...t},n)=>de(wU,{ref:n,className:fl("",e),...t}));tD.displayName="AccordionItem";const nD=dt.forwardRef(({className:e,children:t,...n},s)=>de(bU,{children:de(JM,{ref:s,className:fl("",e),...n,children:t})}));nD.displayName=JM.displayName;const rD=dt.forwardRef(({className:e,children:t,...n},s)=>de(eD,{ref:s,className:fl("naxatw-overflow-hidden data-[state=closed]:naxatw-animate-accordion-up data-[state=open]:naxatw-animate-accordion-down",e),...n,children:t}));rD.displayName=eD.displayName;function $i({name:e,className:t,iconSymbolType:n="material-symbols-outlined",onClick:s}){return de("i",{role:"button",tabIndex:0,onKeyUp:()=>{},onClick:s,className:`naxatw-text-icon-sm lg:naxatw-text-2xl ${t} ${n}`,children:e})}const CU=({faqsDataList:e})=>{const[t,n]=ie.useState(null);return de("div",{className:"accordion-wrapper",children:de(SU,{type:"single",collapsible:!0,className:"naxatw-transition-all naxatw-duration-300 naxatw-ease-out",children:e.map(s=>mt(tD,{value:`item-${s.id}`,className:"naxatw-border-b naxatw-border-b-[#A9A9A9]",onClick:()=>{if(t===s.id){n(null);return}n(s.id)},children:[mt(nD,{className:"naxatw-flex naxatw-w-full  naxatw-items-center naxatw-justify-between naxatw-gap-4 naxatw-py-6 naxatw-text-left",children:[de("p",{className:"naxatw-text-xl naxatw-font-medium naxatw-leading-6 naxatw-tracking-[-0.01125rem] naxatw-text-[#2B2B2B] ",children:s.question}),t===s.id?de($i,{name:"remove_circle_outline",className:"naxatw-text-main"}):de($i,{name:"add_circle_outline",className:"hover:naxatw-text-main"})]}),t===s.id&&de(rD,{className:"data-[state=closed]:naxatw-animate-accordion-up",children:de("p",{className:"naxatw-overflow-hidden naxatw-pb-6 naxatw-text-lg naxatw-font-normal naxatw-tracking-[-0.01125rem] naxatw-text-[#4E4E4E]",children:s.answer})})]},s.id))})})};function TU(){return de("section",{className:"faq-section naxatw-bg-[#F5FAFF]",children:mt("div",{className:"naxatw-container naxatw-py-10 md:naxatw-py-20",children:[de("p",{className:"naxatw-text-[3rem] naxatw-text-gray-800",children:"FAQs"}),de("div",{className:"faqs-container",children:de(CU,{faqsDataList:M8})})]})})}const EU=""+new URL("twitter-icon-26997669.svg",import.meta.url).href,PU=""+new URL("facebook-icon-2cec1970.svg",import.meta.url).href,AU=""+new URL("linkedin-icon-575d4072.svg",import.meta.url).href,kU=""+new URL("instagram-icon-1a2c4b29.svg",import.meta.url).href;function IU(){return de("section",{className:"footer naxatw-bg-primary",children:mt("div",{className:"naxatw-container naxatw-py-10 md:naxatw-py-20 naxatw-flex naxatw-justify-between naxatw-flex-col md:naxatw-flex-row naxatw-items-center naxatw-gap-14 naxatw-animate-fade-up",children:[mt(Ql,{gap:2.5,children:[mt(Fi,{className:"naxatw-text-white naxatw-items-center",gap:2,children:[de($i,{name:"public"}),de("div",{className:"naxatw-cursor-pointer",role:"presentation",children:de("h3",{className:"naxatw-text-white naxatw-font-medium",children:"GeoSewa"})})]}),mt(Ql,{gap:1,className:"naxatw-ml-3",children:[de("p",{className:"naxatw-text-white naxatw-text-body-lg",children:"geosewa7@gmail.com"}),de("p",{className:"naxatw-text-white naxatw-text-body-lg",children:"+977-9763252325"})]})]}),mt(Ql,{gap:2.5,children:[de("h4",{className:"naxatw-text-white naxatw-font-medium",children:"Follow Us On"}),mt(Fi,{gap:2,children:[de(Zo,{src:EU,width:20}),de(Zo,{src:PU,width:20}),de(Zo,{src:AU,width:20}),de(Zo,{src:kU,width:20})]})]}),mt(Ql,{children:[de("h4",{className:"naxatw-text-white naxatw-font-medium naxatw-mb-2",children:"Payment Partners"}),de(Fi,{children:de("p",{className:"naxatw-text-white naxatw-text-xl",children:"Khalti"})})]})]})})}function MU(){return mt("main",{className:"scrollbar",children:[de(XB,{}),de(w8,{}),de(R8,{}),de(O8,{}),de(TU,{}),de(IU,{})]})}function DU(){return de("main",{className:"notes naxatw-h-screen-nav naxatw-w-full",children:de(Qk,{className:"naxatw-h-full naxatw-justify-center naxatw-animate-fade-up naxatw-font-medium naxatw-items-center",children:de("h3",{children:"The notes section is in progress. Stay tuned...."})})})}function zU(){return de(DU,{})}function RU(){return de("main",{className:"notes naxatw-h-screen-nav naxatw-w-full naxatw-bg-white",children:mt("div",{className:"naxatw-container naxatw-py-14",children:[de("h4",{className:"naxatw-mb-4",children:"One Exam Form Currently Open :"}),de("div",{title:"Click to fill the form",onClick:()=>{window.open("https://forms.gle/GKfsJFVb8ACvhPbn9","_blank")},className:"naxatw-rounded-md hover:naxatw-scale-105 naxatw-duration-300 naxatw-border naxatw-cursor-pointer naxatw-bg-grey-50 naxatw-border-black naxatw-w-full naxatw-py-4 naxatw-px-3",children:mt(Fi,{className:"naxatw-justify-between",children:[mt(Fi,{className:"naxatw-items-center",children:[de($i,{name:"quiz",className:"naxatw-w-10"}),de("p",{children:"NEC License Mock Exam"})]}),de("p",{children:"Kartik 04, 2081"})]})})]})})}function LU(){return de(RU,{})}function F_({children:e,htmlFor:t,required:n}){return mt("label",{className:"naxatw-text-sm naxatw-text-grey-800",htmlFor:t==null?void 0:t.toString(),children:[e,n&&de("span",{className:"naxatw-text-red-500",children:"*"})]})}const Ua=ie.forwardRef(({className:e,placeholder:t,type:n,...s},c)=>de("input",{type:n,placeholder:t||"Search",className:fl("naxatw-flex naxatw-rounded-[4px] naxatw-border naxatw-border-[#555555] naxatw-bg-transparent naxatw-p-2 naxatw-text-body-md file:naxatw-font-medium hover:naxatw-border-red focus:naxatw-border-red focus:naxatw-bg-transparent focus:naxatw-outline-none disabled:naxatw-cursor-not-allowed",e),ref:c,...s}));Ua.displayName="Input";function UT({children:e,className:t}){return de(Ql,{className:t,children:e})}function OU(){return mt("div",{className:"contact-form animation-area",children:[de("div",{className:"title naxatw-mb-12 md:naxatw-mb-16",children:mt("p",{className:"naxatw-text-[2.75rem] naxatw-leading-[3.75rem] naxatw-tracking-[-0.04125rem] naxatw-text-[#07090D]",children:["Get in Touch with Us"," "]})}),mt("form",{action:"",children:[mt("div",{className:"naxatw-grid naxatw-grid-cols-2 naxatw-gap-x-7 naxatw-gap-y-4",children:[mt("div",{className:"form-control naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-2",children:[de("p",{className:"naxatw-text-[0.875rem] naxatw-leading-4 naxatw-text-[#343434]",children:"Name"}),de(Ua,{type:"text",name:"name",className:"naxatw-w-full !naxatw-rounded-lg naxatw-border !naxatw-border-b naxatw-border-solid !naxatw-border-[#969696] !naxatw-text-[0.875rem] naxatw-leading-5 !naxatw-text-[#343434] hover:!naxatw-border-[#969696] focus:!naxatw-border-[#343434]",placeholder:"Name"})]}),mt("div",{className:"form-control naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-2",children:[de("p",{className:"naxatw-text-[0.875rem] naxatw-leading-4 naxatw-text-[#343434]",children:"Email"}),de(Ua,{type:"text",className:" naxatw-w-full !naxatw-rounded-lg naxatw-border !naxatw-border-b naxatw-border-solid !naxatw-border-[#969696]  !naxatw-text-[0.875rem] naxatw-leading-5 !naxatw-text-[#343434] hover:!naxatw-border-[#969696] focus:!naxatw-border-[#343434]",placeholder:"Email"})]}),mt("div",{className:"form-control naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-2",children:[de("p",{className:"naxatw-text-[0.875rem] naxatw-leading-4 naxatw-text-[#343434]",children:"Phone"}),de(Ua,{type:"text",className:"naxatw-w-full !naxatw-rounded-lg naxatw-border !naxatw-border-b naxatw-border-solid !naxatw-border-[#969696] !naxatw-text-[0.875rem] naxatw-leading-5 !naxatw-text-[#343434] hover:!naxatw-border-[#969696] focus:!naxatw-border-[#343434]",placeholder:"Phone"})]}),mt("div",{className:"form-control naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-2",children:[de("p",{className:"naxatw-text-[0.875rem] naxatw-leading-4 naxatw-text-[#343434]",children:"College/Organization"}),de(Ua,{type:"text",className:"naxatw-w-full !naxatw-rounded-lg naxatw-border !naxatw-border-b naxatw-border-solid !naxatw-border-[#969696] !naxatw-text-[0.875rem] naxatw-leading-5 !naxatw-text-[#343434] hover:!naxatw-border-[#969696] focus:!naxatw-border-[#343434]",placeholder:"College/Organization"})]})]}),de("div",{className:"naxatw-my-6",children:de("textarea",{placeholder:"Describe to us how you would use GeoSewa",className:"naxatw-h-[7.75rem] naxatw-w-full  naxatw-resize-none naxatw-rounded-lg !naxatw-border !naxatw-border-solid !naxatw-border-[#969696] naxatw-p-3  naxatw-text-[#343434] focus:!naxatw-border-[#343434] focus:!naxatw-outline-none"})}),mt("button",{className:"btn hover:naxatw-bg-primary naxatw-relative naxatw-z-10 naxatw-flex naxatw-h-14 naxatw-items-center naxatw-justify-start naxatw-gap-4 naxatw-overflow-hidden naxatw-rounded-[2.4375rem] naxatw-bg-[#39CDF2] naxatw-px-5 naxatw-py-3 naxatw-no-underline naxatw-shadow-[0px_1px_2px_0px_rgba(16,24,40,0.05)] naxatw-w-[12.5rem]",type:"button",children:[de("span",{className:"naxatw-text-base naxatw-font-semibold naxatw-leading-6 naxatw-tracking-[-0.011rem] naxatw-text-white",children:"Send message"}),de($i,{name:"east",className:"naxatw-text-white"})]})]})]})}const{Children:qT,cloneElement:GT,forwardRef:FU}=dt,NU=FU(({children:e,map:t,isMapLoaded:n,...s},c)=>{const d=qT.count(e),m={map:t,isMapLoaded:n};return de("div",{id:"maplibre-gl-map",...s,children:d<1?de(Qo,{}):d>1?qT.map(e,l=>l?GT(l,{...m}):de(Qo,{})):GT(e,{...m})})});var iD={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(vR,function(){var n,s,c;function d(l,w){if(!n)n=w;else if(!s)s=w;else{var b="var sharedChunk = {}; ("+n+")(sharedChunk); ("+s+")(sharedChunk);",A={};n(A),c=w(A),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"})))}}d(["exports"],function(l){function w(o,r,a,h){return new(a||(a=Promise))(function(p,v){function x(I){try{E(h.next(I))}catch(z){v(z)}}function S(I){try{E(h.throw(I))}catch(z){v(z)}}function E(I){var z;I.done?p(I.value):(z=I.value,z instanceof a?z:new a(function(O){O(z)})).then(x,S)}E((h=h.apply(o,r||[])).next())})}function b(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var A=k;function k(o,r){this.x=o,this.y=r}k.prototype={clone:function(){return new k(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,a=o.y-this.y;return r*r+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),a=Math.sin(o),h=a*this.x+r*this.y;return this.x=r*this.x-a*this.y,this.y=h,this},_rotateAround:function(o,r){var a=Math.cos(o),h=Math.sin(o),p=r.y+h*(this.x-r.x)+a*(this.y-r.y);return this.x=r.x+a*(this.x-r.x)-h*(this.y-r.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},k.convert=function(o){return o instanceof k?o:Array.isArray(o)?new k(o[0],o[1]):o};var D=b(A),B=q;function q(o,r,a,h){this.cx=3*o,this.bx=3*(a-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(h-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=a,this.p2y=h}q.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var a=o,h=0;h<8;h++){var p=this.sampleCurveX(a)-o;if(Math.abs(p)<r)return a;var v=this.sampleCurveDerivativeX(a);if(Math.abs(v)<1e-6)break;a-=p/v}var x=0,S=1;for(a=o,h=0;h<20&&(p=this.sampleCurveX(a),!(Math.abs(p-o)<r));h++)o>p?x=a:S=a,a=.5*(S-x)+x;return a},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var Z=b(B);let K,N;function F(){return K==null&&(K=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),K}function H(){if(N==null&&(N=!1,F())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let h=0;h<5*5;h++){const p=4*h;r.fillStyle=`rgb(${p},${p+1},${p+2})`,r.fillRect(h%5,Math.floor(h/5),1,1)}const a=r.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&a[h]!==h){N=!0;break}}}return N||!1}function te(o,r,a,h){const p=new Z(o,r,a,h);return function(v){return p.solve(v)}}const me=te(.25,.1,.25,1);function Se(o,r,a){return Math.min(a,Math.max(r,o))}function Ie(o,r,a){const h=a-r,p=((o-r)%h+h)%h+r;return p===r?a:p}function Ce(o,...r){for(const a of r)for(const h in a)o[h]=a[h];return o}let Ge=1;function Le(o,r,a){const h={};for(const p in o)h[p]=r.call(a||this,o[p],p,o);return h}function Tt(o,r,a){const h={};for(const p in o)r.call(a||this,o[p],p,o)&&(h[p]=o[p]);return h}function Ue(o){return Array.isArray(o)?o.map(Ue):typeof o=="object"&&o?Le(o,Ue):o}const gt={};function _t(o){gt[o]||(typeof console<"u"&&console.warn(o),gt[o]=!0)}function Lt(o,r,a){return(a.y-o.y)*(r.x-o.x)>(r.y-o.y)*(a.x-o.x)}function zt(o){let r=0;for(let a,h,p=0,v=o.length,x=v-1;p<v;x=p++)a=o[p],h=o[x],r+=(h.x-a.x)*(a.y+h.y);return r}function bt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let $e=null;function ut(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const Et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Wt(o,r,a,h,p){return w(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(o,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),E=new Uint8ClampedArray(h*p*4);if(yield v.copyTo(E,function(I,z,O,$,G){const W=4*Math.max(-z,0),Q=(Math.max(0,O)-O)*$*4+W,oe=4*$,ce=Math.max(0,z),xe=Math.max(0,O);return{rect:{x:ce,y:xe,width:Math.min(I.width,z+$)-ce,height:Math.min(I.height,O+G)-xe},layout:[{offset:Q,stride:oe}]}}(o,r,a,h,p)),S)for(let I=0;I<E.length;I+=4){const z=E[I];E[I]=E[I+2],E[I+2]=z}return E}finally{v.close()}})}let Gt,Mt,gn,si;const lr={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const r=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(o,r=0){return this.getImageCanvasContext(o).getImageData(-r,-r,o.width+2*r,o.height+2*r)},getImageCanvasContext(o){const r=window.document.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return r.width=o.width,r.height=o.height,a.drawImage(o,0,0,o.width,o.height),a},resolveURL:o=>(gn||(gn=document.createElement("a")),gn.href=o,gn.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(si==null&&(si=matchMedia("(prefers-reduced-motion: reduce)")),si.matches)}},$r={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Ci extends Error{constructor(r,a,h,p){super(`AJAXError: ${a} (${r}): ${h}`),this.status=r,this.statusText=a,this.url=h,this.body=p}}const jr=bt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Ur=o=>$r.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function Ys(o,r){const a=new AbortController,h=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:jr(),signal:a.signal});let p=!1,v=!1;return o.type==="json"&&h.headers.set("Accept","application/json"),v||fetch(h).then(x=>x.ok?(S=>{(o.type==="arrayBuffer"||o.type==="image"?S.arrayBuffer():o.type==="json"?S.json():S.text()).then(E=>{v||(p=!0,r(null,E,S.headers.get("Cache-Control"),S.headers.get("Expires")))}).catch(E=>{v||r(new Error(E.message))})})(x):x.blob().then(S=>r(new Ci(x.status,x.statusText,o.url,S)))).catch(x=>{x.code!==20&&r(new Error(x.message))}),{cancel:()=>{v=!0,p||a.abort()}}}const ss=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(bt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r);if(!bt())return(Ur(o.url)||Ys)(o,r)}if(!(/^file:/.test(a=o.url)||/^file:/.test(jr())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Ys(o,r);if(bt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r,void 0,!0)}var a;return function(h,p){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(v.responseType="arraybuffer");for(const x in h.headers)v.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{p(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(h.type==="json")try{x=JSON.parse(v.response)}catch(S){return p(S)}p(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});p(new Ci(v.status,v.statusText,h.url,x))}},v.send(h.body),{cancel:()=>v.abort()}}(o,r)},Qs=function(o,r){return ss(Ce(o,{type:"arrayBuffer"}),r)};function Ti(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),a=window.location;return r.protocol===a.protocol&&r.host===a.host}function wo(o,r,a){a[o]&&a[o].indexOf(r)!==-1||(a[o]=a[o]||[],a[o].push(r))}function Js(o,r,a){if(a&&a[o]){const h=a[o].indexOf(r);h!==-1&&a[o].splice(h,1)}}class Es{constructor(r,a={}){Ce(this,a),this.type=r}}class ge extends Es{constructor(r,a={}){super("error",Ce({error:r},a))}}class ke{on(r,a){return this._listeners=this._listeners||{},wo(r,a,this._listeners),this}off(r,a){return Js(r,a,this._listeners),Js(r,a,this._oneTimeListeners),this}once(r,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},wo(r,a,this._oneTimeListeners),this):new Promise(h=>this.once(r,h))}fire(r,a){typeof r=="string"&&(r=new Es(r,a||{}));const h=r.type;if(this.listens(h)){r.target=this;const p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of p)S.call(this,r);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of v)Js(h,S,this._oneTimeListeners),S.call(this,r);const x=this._eventedParent;x&&(Ce(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(r))}else r instanceof ge&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,a){return this._eventedParent=r,this._eventedParentData=a,this}}var le={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const et=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ye(o,r){const a={};for(const h in o)h!=="ref"&&(a[h]=o[h]);return et.forEach(h=>{h in r&&(a[h]=r[h])}),a}function Ne(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let a=0;a<o.length;a++)if(!Ne(o[a],r[a]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const a in o)if(!Ne(o[a],r[a]))return!1;return!0}return o===r}const Ke={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Bt(o,r,a){a.push({command:Ke.addSource,args:[o,r[o]]})}function yn(o,r,a){r.push({command:Ke.removeSource,args:[o]}),a[o]=!0}function En(o,r,a,h){yn(o,a,h),Bt(o,r,a)}function ji(o,r,a){let h;for(h in o[a])if(Object.prototype.hasOwnProperty.call(o[a],h)&&h!=="data"&&!Ne(o[a][h],r[a][h]))return!1;for(h in r[a])if(Object.prototype.hasOwnProperty.call(r[a],h)&&h!=="data"&&!Ne(o[a][h],r[a][h]))return!1;return!0}function eo(o,r,a,h,p,v){let x;for(x in r=r||{},o=o||{})Object.prototype.hasOwnProperty.call(o,x)&&(Ne(o[x],r[x])||a.push({command:v,args:[h,x,r[x],p]}));for(x in r)Object.prototype.hasOwnProperty.call(r,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(Ne(o[x],r[x])||a.push({command:v,args:[h,x,r[x],p]}))}function Ei(o){return o.id}function Ui(o,r){return o[r.id]=r,o}class qe{constructor(r,a,h,p){this.message=(r?`${r}: `:"")+h,p&&(this.identifier=p),a!=null&&a.__line__&&(this.line=a.__line__)}}function oi(o,...r){for(const a of r)for(const h in a)o[h]=a[h];return o}class vn extends Error{constructor(r,a){super(a),this.message=a,this.key=r}}class os{constructor(r,a=[]){this.parent=r,this.bindings={};for(const[h,p]of a)this.bindings[h]=p}concat(r){return new os(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Ps={kind:"null"},Xe={kind:"number"},Ot={kind:"string"},At={kind:"boolean"},Ar={kind:"color"},as={kind:"object"},Dt={kind:"value"},As={kind:"collator"},ne={kind:"formatted"},V={kind:"padding"},j={kind:"resolvedImage"},X={kind:"variableAnchorOffsetCollection"};function se(o,r){return{kind:"array",itemType:o,N:r}}function ae(o){if(o.kind==="array"){const r=ae(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const we=[Ps,Xe,Ot,At,Ar,ne,as,se(Dt),V,j,X];function pe(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!pe(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const a of we)if(!pe(a,r))return null}}return`Expected ${ae(o)} but found ${ae(r)} instead.`}function he(o,r){return r.some(a=>a.kind===o.kind)}function _e(o,r){return r.some(a=>a==="null"?o===null:a==="array"?Array.isArray(o):a==="object"?o&&!Array.isArray(o)&&typeof o=="object":a===typeof o)}function Me(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const De=.96422,Oe=.82521,yt=4/29,Pt=6/29,ot=3*Pt*Pt,xt=Pt*Pt*Pt,kt=Math.PI/180,en=180/Math.PI;function sn(o){return(o%=360)<0&&(o+=360),o}function Ht([o,r,a,h]){let p,v;const x=_r((.2225045*(o=Zt(o))+.7168786*(r=Zt(r))+.0606169*(a=Zt(a)))/1);o===r&&r===a?p=v=x:(p=_r((.4360747*o+.3850649*r+.1430804*a)/De),v=_r((.0139322*o+.0971045*r+.7141733*a)/Oe));const S=116*x-16;return[S<0?0:S,500*(p-x),200*(x-v),h]}function Zt(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function _r(o){return o>xt?Math.pow(o,1/3):o/ot+yt}function an([o,r,a,h]){let p=(o+16)/116,v=isNaN(r)?p:p+r/500,x=isNaN(a)?p:p-a/200;return p=1*cr(p),v=De*cr(v),x=Oe*cr(x),[Wn(3.1338561*v-1.6168667*p-.4906146*x),Wn(-.9787684*v+1.9161415*p+.033454*x),Wn(.0719453*v-.2289914*p+1.4052427*x),h]}function Wn(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function cr(o){return o>Pt?o*o*o:ot*(o-yt)}function Pi(o){return parseInt(o.padEnd(2,o),16)/255}function kf(o,r){return ua(r?o/100:o,0,1)}function ua(o,r,a){return Math.min(Math.max(r,o),a)}function ca(o){return!o.some(Number.isNaN)}const Iy={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class nn{constructor(r,a,h,p=1,v=!0){this.r=r,this.g=a,this.b=h,this.a=p,v||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[r,a,h,p]))}static parse(r){if(r instanceof nn)return r;if(typeof r!="string")return;const a=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const p=Iy[h];if(p){const[x,S,E]=p;return[x/255,S/255,E/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let S=1;return[Pi(h.slice(S,S+=x)),Pi(h.slice(S,S+=x)),Pi(h.slice(S,S+=x)),Pi(h.slice(S,S+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,E,I,z,O,$,G,W,Q,oe,ce,xe]=x,fe=[z||" ",G||" ",oe].join("");if(fe==="  "||fe==="  /"||fe===",,"||fe===",,,"){const be=[I,$,Q].join(""),Ee=be==="%%%"?100:be===""?255:0;if(Ee){const Re=[ua(+E/Ee,0,1),ua(+O/Ee,0,1),ua(+W/Ee,0,1),ce?kf(+ce,xe):1];if(ca(Re))return Re}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,S,E,I,z,O,$,G,W]=v,Q=[E||" ",z||" ",$].join("");if(Q==="  "||Q==="  /"||Q===",,"||Q===",,,"){const oe=[+S,ua(+I,0,100),ua(+O,0,100),G?kf(+G,W):1];if(ca(oe))return function([ce,xe,fe,be]){function Ee(Re){const rt=(Re+ce/30)%12,lt=xe*Math.min(fe,1-fe);return fe-lt*Math.max(-1,Math.min(rt-3,9-rt,1))}return ce=sn(ce),xe/=100,fe/=100,[Ee(0),Ee(8),Ee(4),be]}(oe)}}}(r);return a?new nn(...a,!1):void 0}get rgb(){const{r,g:a,b:h,a:p}=this,v=p||1/0;return this.overwriteGetter("rgb",[r/v,a/v,h/v,p])}get hcl(){return this.overwriteGetter("hcl",function(r){const[a,h,p,v]=Ht(r),x=Math.sqrt(h*h+p*p);return[Math.round(1e4*x)?sn(Math.atan2(p,h)*en):NaN,x,a,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ht(this.rgb))}overwriteGetter(r,a){return Object.defineProperty(this,r,{value:a}),a}toString(){const[r,a,h,p]=this.rgb;return`rgba(${[r,a,h].map(v=>Math.round(255*v)).join(",")},${p})`}}nn.black=new nn(0,0,0,1),nn.white=new nn(1,1,1,1),nn.transparent=new nn(0,0,0,0),nn.red=new nn(1,0,0,1);class Jc{constructor(r,a,h){this.sensitivity=r?a?"variant":"case":a?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,a){return this.collator.compare(r,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class pu{constructor(r,a,h,p,v){this.text=r,this.image=a,this.scale=h,this.fontStack=p,this.textColor=v}}class xr{constructor(r){this.sections=r}static fromString(r){return new xr([new pu(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof xr?r:xr.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class ai{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof ai)return r;if(typeof r=="number")return new ai([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const a of r)if(typeof a!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new ai(r)}}toString(){return JSON.stringify(this.values)}}const My=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ai{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Ai)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let a=0;a<r.length;a+=2){const h=r[a],p=r[a+1];if(typeof h!="string"||!My.has(h)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new Ai(r)}}toString(){return JSON.stringify(this.values)}}class hr{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new hr({name:r,available:!1}):null}}function mu(o,r,a,h){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof a=="number"&&a>=0&&a<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,r,a,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,r,a,h]:[o,r,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ha(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof nn||o instanceof Jc||o instanceof xr||o instanceof ai||o instanceof Ai||o instanceof hr)return!0;if(Array.isArray(o)){for(const r of o)if(!ha(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!ha(o[r]))return!1;return!0}return!1}function wn(o){if(o===null)return Ps;if(typeof o=="string")return Ot;if(typeof o=="boolean")return At;if(typeof o=="number")return Xe;if(o instanceof nn)return Ar;if(o instanceof Jc)return As;if(o instanceof xr)return ne;if(o instanceof ai)return V;if(o instanceof Ai)return X;if(o instanceof hr)return j;if(Array.isArray(o)){const r=o.length;let a;for(const h of o){const p=wn(h);if(a){if(a===p)continue;a=Dt;break}a=p}return se(a||Dt,r)}return as}function Yt(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof nn||o instanceof xr||o instanceof ai||o instanceof Ai||o instanceof hr?o.toString():JSON.stringify(o)}class bo{constructor(r,a){this.type=r,this.value=a}static parse(r,a){if(r.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!ha(r[1]))return a.error("invalid value");const h=r[1];let p=wn(h);const v=a.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new bo(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Pn{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const gu={string:Ot,number:Xe,boolean:At,object:as};class ki{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");let h,p=1;const v=r[0];if(v==="array"){let S,E;if(r.length>2){const I=r[1];if(typeof I!="string"||!(I in gu)||I==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);S=gu[I],p++}else S=Dt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return a.error('The length argument to "array" must be a positive integer literal',2);E=r[2],p++}h=se(S,E)}else{if(!gu[v])throw new Error(`Types doesn't contain name = ${v}`);h=gu[v]}const x=[];for(;p<r.length;p++){const S=a.parse(r[p],p,Dt);if(!S)return null;x.push(S)}return new ki(h,x)}evaluate(r){for(let a=0;a<this.args.length;a++){const h=this.args[a].evaluate(r);if(!pe(this.type,wn(h)))return h;if(a===this.args.length-1)throw new Pn(`Expected value to be of type ${ae(this.type)}, but found ${ae(wn(h))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const eh={"to-boolean":At,"to-color":Ar,"to-number":Xe,"to-string":Ot};class to{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");const h=r[0];if(!eh[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&r.length!==2)return a.error("Expected one argument.");const p=eh[h],v=[];for(let x=1;x<r.length;x++){const S=a.parse(r[x],x,Dt);if(!S)return null;v.push(S)}return new to(p,v)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let a,h;for(const p of this.args){if(a=p.evaluate(r),h=null,a instanceof nn)return a;if(typeof a=="string"){const v=r.parseColor(a);if(v)return v}else if(Array.isArray(a)&&(h=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:mu(a[0],a[1],a[2],a[3]),!h))return new nn(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new Pn(h||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"padding":{let a;for(const h of this.args){a=h.evaluate(r);const p=ai.parse(a);if(p)return p}throw new Pn(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"variableAnchorOffsetCollection":{let a;for(const h of this.args){a=h.evaluate(r);const p=Ai.parse(a);if(p)return p}throw new Pn(`Could not parse variableAnchorOffsetCollection from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"number":{let a=null;for(const h of this.args){if(a=h.evaluate(r),a===null)return 0;const p=Number(a);if(!isNaN(p))return p}throw new Pn(`Could not convert ${JSON.stringify(a)} to number.`)}case"formatted":return xr.fromString(Yt(this.args[0].evaluate(r)));case"resolvedImage":return hr.fromString(Yt(this.args[0].evaluate(r)));default:return Yt(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const If=["Unknown","Point","LineString","Polygon"];class th{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?If[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let a=this._parseColorCache[r];return a||(a=this._parseColorCache[r]=nn.parse(r)),a}}class yu{constructor(r,a,h=[],p,v=new os,x=[]){this.registry=r,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=v,this.errors=x,this.expectedType=p,this._isConstant=a}parse(r,a,h,p,v={}){return a?this.concat(a,h,p)._parse(r,v):this._parse(r,v)}_parse(r,a){function h(p,v,x){return x==="assert"?new ki(v,[p]):x==="coerce"?new to(v,[p]):p}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=r[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let x=v.parse(r,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,E=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||E.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string")if(S.kind!=="padding"||E.kind!=="value"&&E.kind!=="number"&&E.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||E.kind!=="value"&&E.kind!=="array"){if(this.checkSubtype(S,E))return null}else x=h(x,S,a.typeAnnotation||"coerce");else x=h(x,S,a.typeAnnotation||"coerce");else x=h(x,S,a.typeAnnotation||"coerce");else x=h(x,S,a.typeAnnotation||"assert")}if(!(x instanceof bo)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new th;try{x=new bo(x.type,x.evaluate(S))}catch(E){return this.error(E.message),null}}return x}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,a,h){const p=typeof r=="number"?this.path.concat(r):this.path,v=h?this.scope.concat(h):this.scope;return new yu(this.registry,this._isConstant,p,a||null,v,this.errors)}error(r,...a){const h=`${this.key}${a.map(p=>`[${p}]`).join("")}`;this.errors.push(new vn(h,r))}checkSubtype(r,a){const h=pe(r,a);return h&&this.error(h),h}}class vu{constructor(r,a,h){this.type=As,this.locale=h,this.caseSensitive=r,this.diacriticSensitive=a}static parse(r,a){if(r.length!==2)return a.error("Expected one argument.");const h=r[1];if(typeof h!="object"||Array.isArray(h))return a.error("Collator options argument must be an object.");const p=a.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,At);if(!p)return null;const v=a.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,At);if(!v)return null;let x=null;return h.locale&&(x=a.parse(h.locale,1,Ot),!x)?null:new vu(p,v,x)}evaluate(r){return new Jc(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const no=8192;function nh(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function gl(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function Mf(o,r){const a=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,p=Math.pow(2,r.z);return[Math.round(a*p*no),Math.round(h*p*no)]}function Dy(o,r,a){const h=o[0]-r[0],p=o[1]-r[1],v=o[0]-a[0],x=o[1]-a[1];return h*x-v*p==0&&h*v<=0&&p*x<=0}function rh(o,r){let a=!1;for(let x=0,S=r.length;x<S;x++){const E=r[x];for(let I=0,z=E.length;I<z-1;I++){if(Dy(o,E[I],E[I+1]))return!1;(p=E[I])[1]>(h=o)[1]!=(v=E[I+1])[1]>h[1]&&h[0]<(v[0]-p[0])*(h[1]-p[1])/(v[1]-p[1])+p[0]&&(a=!a)}}var h,p,v;return a}function ih(o,r){for(let a=0;a<r.length;a++)if(rh(o,r[a]))return!0;return!1}function Df(o,r,a,h){const p=h[0]-a[0],v=h[1]-a[1],x=(o[0]-a[0])*v-p*(o[1]-a[1]),S=(r[0]-a[0])*v-p*(r[1]-a[1]);return x>0&&S<0||x<0&&S>0}function zy(o,r,a){for(const I of a)for(let z=0;z<I.length-1;++z)if((S=[(x=I[z+1])[0]-(v=I[z])[0],x[1]-v[1]])[0]*(E=[(p=r)[0]-(h=o)[0],p[1]-h[1]])[1]-S[1]*E[0]!=0&&Df(h,p,v,x)&&Df(v,x,h,p))return!0;var h,p,v,x,S,E;return!1}function zf(o,r){for(let a=0;a<o.length;++a)if(!rh(o[a],r))return!1;for(let a=0;a<o.length-1;++a)if(zy(o[a],o[a+1],r))return!1;return!0}function Rf(o,r){for(let a=0;a<r.length;a++)if(zf(o,r[a]))return!0;return!1}function _u(o,r,a){const h=[];for(let p=0;p<o.length;p++){const v=[];for(let x=0;x<o[p].length;x++){const S=Mf(o[p][x],a);nh(r,S),v.push(S)}h.push(v)}return h}function Lf(o,r,a){const h=[];for(let p=0;p<o.length;p++){const v=_u(o[p],r,a);h.push(v)}return h}function Of(o,r,a,h){if(o[0]<a[0]||o[0]>a[2]){const p=.5*h;let v=o[0]-a[0]>p?-h:a[0]-o[0]>p?h:0;v===0&&(v=o[0]-a[2]>p?-h:a[2]-o[0]>p?h:0),o[0]+=v}nh(r,o)}function sh(o,r,a,h){const p=Math.pow(2,h.z)*no,v=[h.x*no,h.y*no],x=[];for(const S of o)for(const E of S){const I=[E.x+v[0],E.y+v[1]];Of(I,r,a,p),x.push(I)}return x}function oh(o,r,a,h){const p=Math.pow(2,h.z)*no,v=[h.x*no,h.y*no],x=[];for(const E of o){const I=[];for(const z of E){const O=[z.x+v[0],z.y+v[1]];nh(r,O),I.push(O)}x.push(I)}if(r[2]-r[0]<=p/2){(S=r)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const E of x)for(const I of E)Of(I,r,a,p)}var S;return x}class So{constructor(r,a){this.type=At,this.geojson=r,this.geometries=a}static parse(r,a){if(r.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(ha(r[1])){const h=r[1];if(h.type==="FeatureCollection")for(let p=0;p<h.features.length;++p){const v=h.features[p].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new So(h,h.features[p].geometry)}else if(h.type==="Feature"){const p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new So(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new So(h,h)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(a,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(h.type==="Polygon"){const S=_u(h.coordinates,v,x),E=sh(a.geometry(),p,v,x);if(!gl(p,v))return!1;for(const I of E)if(!rh(I,S))return!1}if(h.type==="MultiPolygon"){const S=Lf(h.coordinates,v,x),E=sh(a.geometry(),p,v,x);if(!gl(p,v))return!1;for(const I of E)if(!ih(I,S))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(a,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(h.type==="Polygon"){const S=_u(h.coordinates,v,x),E=oh(a.geometry(),p,v,x);if(!gl(p,v))return!1;for(const I of E)if(!zf(I,S))return!1}if(h.type==="MultiPolygon"){const S=Lf(h.coordinates,v,x),E=oh(a.geometry(),p,v,x);if(!gl(p,v))return!1;for(const I of E)if(!Rf(I,S))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class xu{constructor(r,a){this.type=a.type,this.name=r,this.boundExpression=a}static parse(r,a){if(r.length!==2||typeof r[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const h=r[1];return a.scope.has(h)?new xu(h,a.scope.get(h)):a.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class Ii{constructor(r,a,h,p){this.name=r,this.type=a,this._evaluate=h,this.args=p}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,a){const h=r[0],p=Ii.definitions[h];if(!p)return a.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,S=x.filter(([I])=>!Array.isArray(I)||I.length===r.length-1);let E=null;for(const[I,z]of S){E=new yu(a.registry,wu,a.path,null,a.scope);const O=[];let $=!1;for(let G=1;G<r.length;G++){const W=r[G],Q=Array.isArray(I)?I[G-1]:I.type,oe=E.parse(W,1+O.length,Q);if(!oe){$=!0;break}O.push(oe)}if(!$)if(Array.isArray(I)&&I.length!==O.length)E.error(`Expected ${I.length} arguments, but found ${O.length} instead.`);else{for(let G=0;G<O.length;G++){const W=Array.isArray(I)?I[G]:I.type,Q=O[G];E.concat(G+1).checkSubtype(W,Q.type)}if(E.errors.length===0)return new Ii(h,v,z,O)}}if(S.length===1)a.errors.push(...E.errors);else{const I=(S.length?S:x).map(([O])=>{return $=O,Array.isArray($)?`(${$.map(ae).join(", ")})`:`(${ae($.type)}...)`;var $}).join(" | "),z=[];for(let O=1;O<r.length;O++){const $=a.parse(r[O],1+z.length);if(!$)return null;z.push(ae($.type))}a.error(`Expected arguments of type ${I}, but found (${z.join(", ")}) instead.`)}return null}static register(r,a){Ii.definitions=a;for(const h in a)r[h]=Ii}}function wu(o){if(o instanceof xu)return wu(o.boundExpression);if(o instanceof Ii&&o.name==="error"||o instanceof vu||o instanceof So)return!1;const r=o instanceof to||o instanceof ki;let a=!0;return o.eachChild(h=>{a=r?a&&wu(h):a&&h instanceof bo}),!!a&&bu(o)&&Su(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function bu(o){if(o instanceof Ii&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof So)return!1;let r=!0;return o.eachChild(a=>{r&&!bu(a)&&(r=!1)}),r}function yl(o){if(o instanceof Ii&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(a=>{r&&!yl(a)&&(r=!1)}),r}function Su(o,r){if(o instanceof Ii&&r.indexOf(o.name)>=0)return!1;let a=!0;return o.eachChild(h=>{a&&!Su(h,r)&&(a=!1)}),a}function da(o,r){const a=o.length-1;let h,p,v=0,x=a,S=0;for(;v<=x;)if(S=Math.floor((v+x)/2),h=o[S],p=o[S+1],h<=r){if(S===a||r<p)return S;v=S+1}else{if(!(h>r))throw new Pn("Input is not a number.");x=S-1}return 0}class ro{constructor(r,a,h){this.type=r,this.input=a,this.labels=[],this.outputs=[];for(const[p,v]of h)this.labels.push(p),this.outputs.push(v)}static parse(r,a){if(r.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return a.error("Expected an even number of arguments.");const h=a.parse(r[1],1,Xe);if(!h)return null;const p=[];let v=null;a.expectedType&&a.expectedType.kind!=="value"&&(v=a.expectedType);for(let x=1;x<r.length;x+=2){const S=x===1?-1/0:r[x],E=r[x+1],I=x,z=x+1;if(typeof S!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(p.length&&p[p.length-1][0]>=S)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',I);const O=a.parse(E,z,v);if(!O)return null;v=v||O.type,p.push([S,O])}return new ro(v,h,p)}evaluate(r){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(r);const p=this.input.evaluate(r);if(p<=a[0])return h[0].evaluate(r);const v=a.length;return p>=a[v-1]?h[v-1].evaluate(r):h[da(a,p)].evaluate(r)}eachChild(r){r(this.input);for(const a of this.outputs)r(a)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Ut(o,r,a){return o+a*(r-o)}function Cu(o,r,a){return o.map((h,p)=>Ut(h,r[p],a))}const li={number:Ut,color:function(o,r,a,h="rgb"){switch(h){case"rgb":{const[p,v,x,S]=Cu(o.rgb,r.rgb,a);return new nn(p,v,x,S,!1)}case"hcl":{const[p,v,x,S]=o.hcl,[E,I,z,O]=r.hcl;let $,G;if(isNaN(p)||isNaN(E))isNaN(p)?isNaN(E)?$=NaN:($=E,x!==1&&x!==0||(G=I)):($=p,z!==1&&z!==0||(G=v));else{let xe=E-p;E>p&&xe>180?xe-=360:E<p&&p-E>180&&(xe+=360),$=p+a*xe}const[W,Q,oe,ce]=function([xe,fe,be,Ee]){return xe=isNaN(xe)?0:xe*kt,an([be,Math.cos(xe)*fe,Math.sin(xe)*fe,Ee])}([$,G??Ut(v,I,a),Ut(x,z,a),Ut(S,O,a)]);return new nn(W,Q,oe,ce,!1)}case"lab":{const[p,v,x,S]=an(Cu(o.lab,r.lab,a));return new nn(p,v,x,S,!1)}}},array:Cu,padding:function(o,r,a){return new ai(Cu(o.values,r.values,a))},variableAnchorOffsetCollection:function(o,r,a){const h=o.values,p=r.values;if(h.length!==p.length)throw new Pn(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${r.toString()}`);const v=[];for(let x=0;x<h.length;x+=2){if(h[x]!==p[x])throw new Pn(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${p[x]}`);v.push(h[x]);const[S,E]=h[x+1],[I,z]=p[x+1];v.push([Ut(S,I,a),Ut(E,z,a)])}return new Ai(v)}};class ui{constructor(r,a,h,p,v){this.type=r,this.operator=a,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(const[x,S]of v)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(r,a,h,p){let v=0;if(r.name==="exponential")v=ah(a,r.base,h,p);else if(r.name==="linear")v=ah(a,1,h,p);else if(r.name==="cubic-bezier"){const x=r.controlPoints;v=new Z(x[0],x[1],x[2],x[3]).solve(ah(a,1,h,p))}return v}static parse(r,a){let[h,p,v,...x]=r;if(!Array.isArray(p)||p.length===0)return a.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const I=p[1];if(typeof I!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:I}}else{if(p[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const I=p.slice(1);if(I.length!==4||I.some(z=>typeof z!="number"||z<0||z>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:I}}}if(r.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(v=a.parse(v,2,Xe),!v)return null;const S=[];let E=null;h==="interpolate-hcl"||h==="interpolate-lab"?E=Ar:a.expectedType&&a.expectedType.kind!=="value"&&(E=a.expectedType);for(let I=0;I<x.length;I+=2){const z=x[I],O=x[I+1],$=I+3,G=I+4;if(typeof z!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(S.length&&S[S.length-1][0]>=z)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',$);const W=a.parse(O,G,E);if(!W)return null;E=E||W.type,S.push([z,W])}return Me(E,Xe)||Me(E,Ar)||Me(E,V)||Me(E,X)||Me(E,se(Xe))?new ui(E,h,p,v,S):a.error(`Type ${ae(E)} is not interpolatable.`)}evaluate(r){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(r);const p=this.input.evaluate(r);if(p<=a[0])return h[0].evaluate(r);const v=a.length;if(p>=a[v-1])return h[v-1].evaluate(r);const x=da(a,p),S=ui.interpolationFactor(this.interpolation,p,a[x],a[x+1]),E=h[x].evaluate(r),I=h[x+1].evaluate(r);switch(this.operator){case"interpolate":return li[this.type.kind](E,I,S);case"interpolate-hcl":return li.color(E,I,S,"hcl");case"interpolate-lab":return li.color(E,I,S,"lab")}}eachChild(r){r(this.input);for(const a of this.outputs)r(a)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function ah(o,r,a,h){const p=h-a,v=o-a;return p===0?0:r===1?v/p:(Math.pow(r,v)-1)/(Math.pow(r,p)-1)}class Tu{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expectected at least one argument.");let h=null;const p=a.expectedType;p&&p.kind!=="value"&&(h=p);const v=[];for(const S of r.slice(1)){const E=a.parse(S,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!E)return null;h=h||E.type,v.push(E)}if(!h)throw new Error("No output type");const x=p&&v.some(S=>pe(p,S.type));return new Tu(x?Dt:h,v)}evaluate(r){let a,h=null,p=0;for(const v of this.args)if(p++,h=v.evaluate(r),h&&h instanceof hr&&!h.available&&(a||(a=h.name),h=null,p===this.args.length&&(h=a)),h!==null)break;return h}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class Eu{constructor(r,a){this.type=a.type,this.bindings=[].concat(r),this.result=a}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const a of this.bindings)r(a[1]);r(this.result)}static parse(r,a){if(r.length<4)return a.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const h=[];for(let v=1;v<r.length-1;v+=2){const x=r[v];if(typeof x!="string")return a.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return a.error("Variable names must contain only alphanumeric characters or '_'.",v);const S=a.parse(r[v+1],v+1);if(!S)return null;h.push([x,S])}const p=a.parse(r[r.length-1],r.length-1,a.expectedType,h);return p?new Eu(h,p):null}outputDefined(){return this.result.outputDefined()}}class lh{constructor(r,a,h){this.type=r,this.index=a,this.input=h}static parse(r,a){if(r.length!==3)return a.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=a.parse(r[1],1,Xe),p=a.parse(r[2],2,se(a.expectedType||Dt));return h&&p?new lh(p.type.itemType,h,p):null}evaluate(r){const a=this.index.evaluate(r),h=this.input.evaluate(r);if(a<0)throw new Pn(`Array index out of bounds: ${a} < 0.`);if(a>=h.length)throw new Pn(`Array index out of bounds: ${a} > ${h.length-1}.`);if(a!==Math.floor(a))throw new Pn(`Array index must be an integer, but found ${a} instead.`);return h[a]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class uh{constructor(r,a){this.type=At,this.needle=r,this.haystack=a}static parse(r,a){if(r.length!==3)return a.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=a.parse(r[1],1,Dt),p=a.parse(r[2],2,Dt);return h&&p?he(h.type,[At,Ot,Xe,Ps,Dt])?new uh(h,p):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${ae(h.type)} instead`):null}evaluate(r){const a=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!h)return!1;if(!_e(a,["boolean","string","number","null"]))throw new Pn(`Expected first argument to be of type boolean, string, number or null, but found ${ae(wn(a))} instead.`);if(!_e(h,["string","array"]))throw new Pn(`Expected second argument to be of type array or string, but found ${ae(wn(h))} instead.`);return h.indexOf(a)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Pu{constructor(r,a,h){this.type=Xe,this.needle=r,this.haystack=a,this.fromIndex=h}static parse(r,a){if(r.length<=2||r.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=a.parse(r[1],1,Dt),p=a.parse(r[2],2,Dt);if(!h||!p)return null;if(!he(h.type,[At,Ot,Xe,Ps,Dt]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${ae(h.type)} instead`);if(r.length===4){const v=a.parse(r[3],3,Xe);return v?new Pu(h,p,v):null}return new Pu(h,p)}evaluate(r){const a=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!_e(a,["boolean","string","number","null"]))throw new Pn(`Expected first argument to be of type boolean, string, number or null, but found ${ae(wn(a))} instead.`);if(!_e(h,["string","array"]))throw new Pn(`Expected second argument to be of type array or string, but found ${ae(wn(h))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(r);return h.indexOf(a,p)}return h.indexOf(a)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class ch{constructor(r,a,h,p,v,x){this.inputType=r,this.type=a,this.input=h,this.cases=p,this.outputs=v,this.otherwise=x}static parse(r,a){if(r.length<5)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return a.error("Expected an even number of arguments.");let h,p;a.expectedType&&a.expectedType.kind!=="value"&&(p=a.expectedType);const v={},x=[];for(let I=2;I<r.length-1;I+=2){let z=r[I];const O=r[I+1];Array.isArray(z)||(z=[z]);const $=a.concat(I);if(z.length===0)return $.error("Expected at least one branch label.");for(const W of z){if(typeof W!="number"&&typeof W!="string")return $.error("Branch labels must be numbers or strings.");if(typeof W=="number"&&Math.abs(W)>Number.MAX_SAFE_INTEGER)return $.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof W=="number"&&Math.floor(W)!==W)return $.error("Numeric branch labels must be integer values.");if(h){if($.checkSubtype(h,wn(W)))return null}else h=wn(W);if(v[String(W)]!==void 0)return $.error("Branch labels must be unique.");v[String(W)]=x.length}const G=a.parse(O,I,p);if(!G)return null;p=p||G.type,x.push(G)}const S=a.parse(r[1],1,Dt);if(!S)return null;const E=a.parse(r[r.length-1],r.length-1,p);return E?S.type.kind!=="value"&&a.concat(1).checkSubtype(h,S.type)?null:new ch(h,p,S,v,x,E):null}evaluate(r){const a=this.input.evaluate(r);return(wn(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class hh{constructor(r,a,h){this.type=r,this.branches=a,this.otherwise=h}static parse(r,a){if(r.length<4)return a.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return a.error("Expected an odd number of arguments.");let h;a.expectedType&&a.expectedType.kind!=="value"&&(h=a.expectedType);const p=[];for(let x=1;x<r.length-1;x+=2){const S=a.parse(r[x],x,At);if(!S)return null;const E=a.parse(r[x+1],x+1,h);if(!E)return null;p.push([S,E]),h=h||E.type}const v=a.parse(r[r.length-1],r.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new hh(h,p,v)}evaluate(r){for(const[a,h]of this.branches)if(a.evaluate(r))return h.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[a,h]of this.branches)r(a),r(h);r(this.otherwise)}outputDefined(){return this.branches.every(([r,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class Au{constructor(r,a,h,p){this.type=r,this.input=a,this.beginIndex=h,this.endIndex=p}static parse(r,a){if(r.length<=2||r.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=a.parse(r[1],1,Dt),p=a.parse(r[2],2,Xe);if(!h||!p)return null;if(!he(h.type,[se(Dt),Ot,Dt]))return a.error(`Expected first argument to be of type array or string, but found ${ae(h.type)} instead`);if(r.length===4){const v=a.parse(r[3],3,Xe);return v?new Au(h.type,h,p,v):null}return new Au(h.type,h,p)}evaluate(r){const a=this.input.evaluate(r),h=this.beginIndex.evaluate(r);if(!_e(a,["string","array"]))throw new Pn(`Expected first argument to be of type array or string, but found ${ae(wn(a))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(r);return a.slice(h,p)}return a.slice(h)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function Ff(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Nf(o,r,a,h){return h.compare(r,a)===0}function fa(o,r,a){const h=o!=="=="&&o!=="!=";return class sD{constructor(v,x,S){this.type=At,this.lhs=v,this.rhs=x,this.collator=S,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const S=v[0];let E=x.parse(v[1],1,Dt);if(!E)return null;if(!Ff(S,E.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${ae(E.type)}'.`);let I=x.parse(v[2],2,Dt);if(!I)return null;if(!Ff(S,I.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${ae(I.type)}'.`);if(E.type.kind!==I.type.kind&&E.type.kind!=="value"&&I.type.kind!=="value")return x.error(`Cannot compare types '${ae(E.type)}' and '${ae(I.type)}'.`);h&&(E.type.kind==="value"&&I.type.kind!=="value"?E=new ki(I.type,[E]):E.type.kind!=="value"&&I.type.kind==="value"&&(I=new ki(E.type,[I])));let z=null;if(v.length===4){if(E.type.kind!=="string"&&I.type.kind!=="string"&&E.type.kind!=="value"&&I.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(z=x.parse(v[3],3,As),!z)return null}return new sD(E,I,z)}evaluate(v){const x=this.lhs.evaluate(v),S=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const E=wn(x),I=wn(S);if(E.kind!==I.kind||E.kind!=="string"&&E.kind!=="number")throw new Pn(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${E.kind}, ${I.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const E=wn(x),I=wn(S);if(E.kind!=="string"||I.kind!=="string")return r(v,x,S)}return this.collator?a(v,x,S,this.collator.evaluate(v)):r(v,x,S)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const Ry=fa("==",function(o,r,a){return r===a},Nf),Ly=fa("!=",function(o,r,a){return r!==a},function(o,r,a,h){return!Nf(0,r,a,h)}),Oy=fa("<",function(o,r,a){return r<a},function(o,r,a,h){return h.compare(r,a)<0}),Fy=fa(">",function(o,r,a){return r>a},function(o,r,a,h){return h.compare(r,a)>0}),Ny=fa("<=",function(o,r,a){return r<=a},function(o,r,a,h){return h.compare(r,a)<=0}),By=fa(">=",function(o,r,a){return r>=a},function(o,r,a,h){return h.compare(r,a)>=0});class dh{constructor(r,a,h,p,v){this.type=Ot,this.number=r,this.locale=a,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=v}static parse(r,a){if(r.length!==3)return a.error("Expected two arguments.");const h=a.parse(r[1],1,Xe);if(!h)return null;const p=r[2];if(typeof p!="object"||Array.isArray(p))return a.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=a.parse(p.locale,1,Ot),!v))return null;let x=null;if(p.currency&&(x=a.parse(p.currency,1,Ot),!x))return null;let S=null;if(p["min-fraction-digits"]&&(S=a.parse(p["min-fraction-digits"],1,Xe),!S))return null;let E=null;return p["max-fraction-digits"]&&(E=a.parse(p["max-fraction-digits"],1,Xe),!E)?null:new dh(h,v,x,S,E)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class ku{constructor(r){this.type=ne,this.sections=r}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");const h=r[1];if(!Array.isArray(h)&&typeof h=="object")return a.error("First argument must be an image or text section.");const p=[];let v=!1;for(let x=1;x<=r.length-1;++x){const S=r[x];if(v&&typeof S=="object"&&!Array.isArray(S)){v=!1;let E=null;if(S["font-scale"]&&(E=a.parse(S["font-scale"],1,Xe),!E))return null;let I=null;if(S["text-font"]&&(I=a.parse(S["text-font"],1,se(Ot)),!I))return null;let z=null;if(S["text-color"]&&(z=a.parse(S["text-color"],1,Ar),!z))return null;const O=p[p.length-1];O.scale=E,O.font=I,O.textColor=z}else{const E=a.parse(r[x],1,Dt);if(!E)return null;const I=E.type.kind;if(I!=="string"&&I!=="value"&&I!=="null"&&I!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:E,scale:null,font:null,textColor:null})}}return new ku(p)}evaluate(r){return new xr(this.sections.map(a=>{const h=a.content.evaluate(r);return wn(h)===j?new pu("",h,null,null,null):new pu(Yt(h),null,a.scale?a.scale.evaluate(r):null,a.font?a.font.evaluate(r).join(","):null,a.textColor?a.textColor.evaluate(r):null)}))}eachChild(r){for(const a of this.sections)r(a.content),a.scale&&r(a.scale),a.font&&r(a.font),a.textColor&&r(a.textColor)}outputDefined(){return!1}}class fh{constructor(r){this.type=j,this.input=r}static parse(r,a){if(r.length!==2)return a.error("Expected two arguments.");const h=a.parse(r[1],1,Ot);return h?new fh(h):a.error("No image name provided.")}evaluate(r){const a=this.input.evaluate(r),h=hr.fromString(a);return h&&r.availableImages&&(h.available=r.availableImages.indexOf(a)>-1),h}eachChild(r){r(this.input)}outputDefined(){return!1}}class ph{constructor(r){this.type=Xe,this.input=r}static parse(r,a){if(r.length!==2)return a.error(`Expected 1 argument, but found ${r.length-1} instead.`);const h=a.parse(r[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${ae(h.type)} instead.`):new ph(h):null}evaluate(r){const a=this.input.evaluate(r);if(typeof a=="string"||Array.isArray(a))return a.length;throw new Pn(`Expected value to be of type string or array, but found ${ae(wn(a))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const pa={"==":Ry,"!=":Ly,">":Fy,"<":Oy,">=":By,"<=":Ny,array:ki,at:lh,boolean:ki,case:hh,coalesce:Tu,collator:vu,format:ku,image:fh,in:uh,"index-of":Pu,interpolate:ui,"interpolate-hcl":ui,"interpolate-lab":ui,length:ph,let:Eu,literal:bo,match:ch,number:ki,"number-format":dh,object:ki,slice:Au,step:ro,string:ki,"to-boolean":to,"to-color":to,"to-number":to,"to-string":to,var:xu,within:So};function Bf(o,[r,a,h,p]){r=r.evaluate(o),a=a.evaluate(o),h=h.evaluate(o);const v=p?p.evaluate(o):1,x=mu(r,a,h,v);if(x)throw new Pn(x);return new nn(r/255,a/255,h/255,v,!1)}function Vf(o,r){return o in r}function mh(o,r){const a=r[o];return a===void 0?null:a}function Co(o){return{type:o}}function $f(o){return{result:"success",value:o}}function io(o){return{result:"error",value:o}}function ma(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function jf(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function gh(o){return!!o.expression&&o.expression.interpolated}function Qt(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function bn(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Vy(o){return o}function qt(o,r){const a=r.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",p=h||!(h||o.property!==void 0),v=o.type||(gh(r)?"exponential":"interval");if(a||r.type==="padding"){const z=a?nn.parse:ai.parse;(o=oi({},o)).stops&&(o.stops=o.stops.map(O=>[O[0],z(O[1])])),o.default=z(o.default?o.default:r.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let S,E,I;if(v==="exponential")S=vl;else if(v==="interval")S=_n;else if(v==="categorical"){S=Sn,E=Object.create(null);for(const z of o.stops)E[z[0]]=z[1];I=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);S=Uf}if(h){const z={},O=[];for(let W=0;W<o.stops.length;W++){const Q=o.stops[W],oe=Q[0].zoom;z[oe]===void 0&&(z[oe]={zoom:oe,type:o.type,property:o.property,default:o.default,stops:[]},O.push(oe)),z[oe].stops.push([Q[0].value,Q[1]])}const $=[];for(const W of O)$.push([z[W].zoom,qt(z[W],r)]);const G={name:"linear"};return{kind:"composite",interpolationType:G,interpolationFactor:ui.interpolationFactor.bind(void 0,G),zoomStops:$.map(W=>W[0]),evaluate:({zoom:W},Q)=>vl({stops:$,base:o.base},r,W).evaluate(W,Q)}}if(p){const z=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:ui.interpolationFactor.bind(void 0,z),zoomStops:o.stops.map(O=>O[0]),evaluate:({zoom:O})=>S(o,r,O,E,I)}}return{kind:"source",evaluate(z,O){const $=O&&O.properties?O.properties[o.property]:void 0;return $===void 0?To(o.default,r.default):S(o,r,$,E,I)}}}function To(o,r,a){return o!==void 0?o:r!==void 0?r:a!==void 0?a:void 0}function Sn(o,r,a,h,p){return To(typeof a===p?h[a]:void 0,o.default,r.default)}function _n(o,r,a){if(Qt(a)!=="number")return To(o.default,r.default);const h=o.stops.length;if(h===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[h-1][0])return o.stops[h-1][1];const p=da(o.stops.map(v=>v[0]),a);return o.stops[p][1]}function vl(o,r,a){const h=o.base!==void 0?o.base:1;if(Qt(a)!=="number")return To(o.default,r.default);const p=o.stops.length;if(p===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[p-1][0])return o.stops[p-1][1];const v=da(o.stops.map(z=>z[0]),a),x=function(z,O,$,G){const W=G-$,Q=z-$;return W===0?0:O===1?Q/W:(Math.pow(O,Q)-1)/(Math.pow(O,W)-1)}(a,h,o.stops[v][0],o.stops[v+1][0]),S=o.stops[v][1],E=o.stops[v+1][1],I=li[r.type]||Vy;return typeof S.evaluate=="function"?{evaluate(...z){const O=S.evaluate.apply(void 0,z),$=E.evaluate.apply(void 0,z);if(O!==void 0&&$!==void 0)return I(O,$,x,o.colorSpace)}}:I(S,E,x,o.colorSpace)}function Uf(o,r,a){switch(r.type){case"color":a=nn.parse(a);break;case"formatted":a=xr.fromString(a.toString());break;case"resolvedImage":a=hr.fromString(a.toString());break;case"padding":a=ai.parse(a);break;default:Qt(a)===r.type||r.type==="enum"&&r.values[a]||(a=void 0)}return To(a,o.default,r.default)}Ii.register(pa,{error:[{kind:"error"},[Ot],(o,[r])=>{throw new Pn(r.evaluate(o))}],typeof:[Ot,[Dt],(o,[r])=>ae(wn(r.evaluate(o)))],"to-rgba":[se(Xe,4),[Ar],(o,[r])=>{const[a,h,p,v]=r.evaluate(o).rgb;return[255*a,255*h,255*p,v]}],rgb:[Ar,[Xe,Xe,Xe],Bf],rgba:[Ar,[Xe,Xe,Xe,Xe],Bf],has:{type:At,overloads:[[[Ot],(o,[r])=>Vf(r.evaluate(o),o.properties())],[[Ot,as],(o,[r,a])=>Vf(r.evaluate(o),a.evaluate(o))]]},get:{type:Dt,overloads:[[[Ot],(o,[r])=>mh(r.evaluate(o),o.properties())],[[Ot,as],(o,[r,a])=>mh(r.evaluate(o),a.evaluate(o))]]},"feature-state":[Dt,[Ot],(o,[r])=>mh(r.evaluate(o),o.featureState||{})],properties:[as,[],o=>o.properties()],"geometry-type":[Ot,[],o=>o.geometryType()],id:[Dt,[],o=>o.id()],zoom:[Xe,[],o=>o.globals.zoom],"heatmap-density":[Xe,[],o=>o.globals.heatmapDensity||0],"line-progress":[Xe,[],o=>o.globals.lineProgress||0],accumulated:[Dt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Xe,Co(Xe),(o,r)=>{let a=0;for(const h of r)a+=h.evaluate(o);return a}],"*":[Xe,Co(Xe),(o,r)=>{let a=1;for(const h of r)a*=h.evaluate(o);return a}],"-":{type:Xe,overloads:[[[Xe,Xe],(o,[r,a])=>r.evaluate(o)-a.evaluate(o)],[[Xe],(o,[r])=>-r.evaluate(o)]]},"/":[Xe,[Xe,Xe],(o,[r,a])=>r.evaluate(o)/a.evaluate(o)],"%":[Xe,[Xe,Xe],(o,[r,a])=>r.evaluate(o)%a.evaluate(o)],ln2:[Xe,[],()=>Math.LN2],pi:[Xe,[],()=>Math.PI],e:[Xe,[],()=>Math.E],"^":[Xe,[Xe,Xe],(o,[r,a])=>Math.pow(r.evaluate(o),a.evaluate(o))],sqrt:[Xe,[Xe],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[Xe,[Xe],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[Xe,[Xe],(o,[r])=>Math.log(r.evaluate(o))],log2:[Xe,[Xe],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[Xe,[Xe],(o,[r])=>Math.sin(r.evaluate(o))],cos:[Xe,[Xe],(o,[r])=>Math.cos(r.evaluate(o))],tan:[Xe,[Xe],(o,[r])=>Math.tan(r.evaluate(o))],asin:[Xe,[Xe],(o,[r])=>Math.asin(r.evaluate(o))],acos:[Xe,[Xe],(o,[r])=>Math.acos(r.evaluate(o))],atan:[Xe,[Xe],(o,[r])=>Math.atan(r.evaluate(o))],min:[Xe,Co(Xe),(o,r)=>Math.min(...r.map(a=>a.evaluate(o)))],max:[Xe,Co(Xe),(o,r)=>Math.max(...r.map(a=>a.evaluate(o)))],abs:[Xe,[Xe],(o,[r])=>Math.abs(r.evaluate(o))],round:[Xe,[Xe],(o,[r])=>{const a=r.evaluate(o);return a<0?-Math.round(-a):Math.round(a)}],floor:[Xe,[Xe],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[Xe,[Xe],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[At,[Ot,Dt],(o,[r,a])=>o.properties()[r.value]===a.value],"filter-id-==":[At,[Dt],(o,[r])=>o.id()===r.value],"filter-type-==":[At,[Ot],(o,[r])=>o.geometryType()===r.value],"filter-<":[At,[Ot,Dt],(o,[r,a])=>{const h=o.properties()[r.value],p=a.value;return typeof h==typeof p&&h<p}],"filter-id-<":[At,[Dt],(o,[r])=>{const a=o.id(),h=r.value;return typeof a==typeof h&&a<h}],"filter->":[At,[Ot,Dt],(o,[r,a])=>{const h=o.properties()[r.value],p=a.value;return typeof h==typeof p&&h>p}],"filter-id->":[At,[Dt],(o,[r])=>{const a=o.id(),h=r.value;return typeof a==typeof h&&a>h}],"filter-<=":[At,[Ot,Dt],(o,[r,a])=>{const h=o.properties()[r.value],p=a.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[At,[Dt],(o,[r])=>{const a=o.id(),h=r.value;return typeof a==typeof h&&a<=h}],"filter->=":[At,[Ot,Dt],(o,[r,a])=>{const h=o.properties()[r.value],p=a.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[At,[Dt],(o,[r])=>{const a=o.id(),h=r.value;return typeof a==typeof h&&a>=h}],"filter-has":[At,[Dt],(o,[r])=>r.value in o.properties()],"filter-has-id":[At,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[At,[se(Ot)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[At,[se(Dt)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[At,[Ot,se(Dt)],(o,[r,a])=>a.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[At,[Ot,se(Dt)],(o,[r,a])=>function(h,p,v,x){for(;v<=x;){const S=v+x>>1;if(p[S]===h)return!0;p[S]>h?x=S-1:v=S+1}return!1}(o.properties()[r.value],a.value,0,a.value.length-1)],all:{type:At,overloads:[[[At,At],(o,[r,a])=>r.evaluate(o)&&a.evaluate(o)],[Co(At),(o,r)=>{for(const a of r)if(!a.evaluate(o))return!1;return!0}]]},any:{type:At,overloads:[[[At,At],(o,[r,a])=>r.evaluate(o)||a.evaluate(o)],[Co(At),(o,r)=>{for(const a of r)if(a.evaluate(o))return!0;return!1}]]},"!":[At,[At],(o,[r])=>!r.evaluate(o)],"is-supported-script":[At,[Ot],(o,[r])=>{const a=o.globals&&o.globals.isSupportedScript;return!a||a(r.evaluate(o))}],upcase:[Ot,[Ot],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[Ot,[Ot],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[Ot,Co(Dt),(o,r)=>r.map(a=>Yt(a.evaluate(o))).join("")],"resolved-locale":[Ot,[As],(o,[r])=>r.evaluate(o).resolvedLocale()]});class yh{constructor(r,a){var h;this.expression=r,this._warningHistory={},this._evaluator=new th,this._defaultValue=a?(h=a).type==="color"&&bn(h.default)?new nn(0,0,0,0):h.type==="color"?nn.parse(h.default)||null:h.type==="padding"?ai.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?Ai.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(r,a,h,p,v,x){return this._evaluator.globals=r,this._evaluator.feature=a,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(r,a,h,p,v,x){this._evaluator.globals=r,this._evaluator.feature=a||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new Pn(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Iu(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in pa}function Mu(o,r){const a=new yu(pa,wu,[],r?function(p){const v={color:Ar,string:Ot,number:Xe,enum:Ot,boolean:At,formatted:ne,padding:V,resolvedImage:j,variableAnchorOffsetCollection:X};return p.type==="array"?se(v[p.value]||Dt,p.length):v[p.type]}(r):void 0),h=a.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?$f(new yh(h,r)):io(a.errors)}class vh{constructor(r,a){this.kind=r,this._styleExpression=a,this.isStateDependent=r!=="constant"&&!yl(a.expression)}evaluateWithoutErrorHandling(r,a,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(r,a,h,p,v,x)}evaluate(r,a,h,p,v,x){return this._styleExpression.evaluate(r,a,h,p,v,x)}}class Du{constructor(r,a,h,p){this.kind=r,this.zoomStops=h,this._styleExpression=a,this.isStateDependent=r!=="camera"&&!yl(a.expression),this.interpolationType=p}evaluateWithoutErrorHandling(r,a,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(r,a,h,p,v,x)}evaluate(r,a,h,p,v,x){return this._styleExpression.evaluate(r,a,h,p,v,x)}interpolationFactor(r,a,h){return this.interpolationType?ui.interpolationFactor(this.interpolationType,r,a,h):0}}function _h(o,r){const a=Mu(o,r);if(a.result==="error")return a;const h=a.value.expression,p=bu(h);if(!p&&!ma(r))return io([new vn("","data expressions not supported")]);const v=Su(h,["zoom"]);if(!v&&!jf(r))return io([new vn("","zoom expressions not supported")]);const x=xl(h);return x||v?x instanceof vn?io([x]):x instanceof ui&&!gh(r)?io([new vn("",'"interpolate" expressions cannot be used with this property')]):$f(x?new Du(p?"camera":"composite",a.value,x.labels,x instanceof ui?x.interpolation:void 0):new vh(p?"constant":"source",a.value)):io([new vn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class _l{constructor(r,a){this._parameters=r,this._specification=a,oi(this,qt(this._parameters,this._specification))}static deserialize(r){return new _l(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function xl(o){let r=null;if(o instanceof Eu)r=xl(o.result);else if(o instanceof Tu){for(const a of o.args)if(r=xl(a),r)break}else(o instanceof ro||o instanceof ui)&&o.input instanceof Ii&&o.input.name==="zoom"&&(r=o);return r instanceof vn||o.eachChild(a=>{const h=xl(a);h instanceof vn?r=h:!r&&h?r=new vn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&h&&r!==h&&(r=new vn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function wl(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!wl(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const $y={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function xh(o){if(o==null)return{filter:()=>!0,needGeometry:!1};wl(o)||(o=zu(o));const r=Mu(o,$y);if(r.result==="error")throw new Error(r.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,h,p)=>r.value.evaluate(a,h,{},p),needGeometry:qf(o)}}function jy(o,r){return o<r?-1:o>r?1:0}function qf(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let r=1;r<o.length;r++)if(qf(o[r]))return!0;return!1}function zu(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?wh(o[1],o[2],"=="):r==="!="?bl(wh(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?wh(o[1],o[2],r):r==="any"?(a=o.slice(1),["any"].concat(a.map(zu))):r==="all"?["all"].concat(o.slice(1).map(zu)):r==="none"?["all"].concat(o.slice(1).map(zu).map(bl)):r==="in"?Gf(o[1],o.slice(2)):r==="!in"?bl(Gf(o[1],o.slice(2))):r==="has"?Zf(o[1]):r==="!has"?bl(Zf(o[1])):r!=="within"||o;var a}function wh(o,r,a){switch(o){case"$type":return[`filter-type-${a}`,r];case"$id":return[`filter-id-${a}`,r];default:return[`filter-${a}`,o,r]}}function Gf(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(a=>typeof a!=typeof r[0])?["filter-in-large",o,["literal",r.sort(jy)]]:["filter-in-small",o,["literal",r]]}}function Zf(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function bl(o){return["!",o]}function Ru(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let p="[";for(const v of o)p+=`${Ru(v)},`;return`${p}]`}const a=Object.keys(o).sort();let h="{";for(let p=0;p<a.length;p++)h+=`${JSON.stringify(a[p])}:${Ru(o[a[p]])},`;return`${h}}`}function Lu(o){let r="";for(const a of et)r+=`/${Ru(o[a])}`;return r}function Wf(o){const r=o.value;return r?[new qe(o.key,r,"constants have been deprecated as of v8")]:[]}function An(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Eo(o){if(Array.isArray(o))return o.map(Eo);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const a in o)r[a]=Eo(o[a]);return r}return An(o)}function qr(o){const r=o.key,a=o.value,h=o.valueSpec||{},p=o.objectElementValidators||{},v=o.style,x=o.styleSpec,S=o.validateSpec;let E=[];const I=Qt(a);if(I!=="object")return[new qe(r,a,`object expected, ${I} found`)];for(const z in a){const O=z.split(".")[0],$=h[O]||h["*"];let G;if(p[O])G=p[O];else if(h[O])G=S;else if(p["*"])G=p["*"];else{if(!h["*"]){E.push(new qe(r,a[z],`unknown property "${z}"`));continue}G=S}E=E.concat(G({key:(r&&`${r}.`)+z,value:a[z],valueSpec:$,style:v,styleSpec:x,object:a,objectKey:z,validateSpec:S},a))}for(const z in h)p[z]||h[z].required&&h[z].default===void 0&&a[z]===void 0&&E.push(new qe(r,a,`missing required property "${z}"`));return E}function ga(o){const r=o.value,a=o.valueSpec,h=o.style,p=o.styleSpec,v=o.key,x=o.arrayElementValidator||o.validateSpec;if(Qt(r)!=="array")return[new qe(v,r,`array expected, ${Qt(r)} found`)];if(a.length&&r.length!==a.length)return[new qe(v,r,`array length ${a.length} expected, length ${r.length} found`)];if(a["min-length"]&&r.length<a["min-length"])return[new qe(v,r,`array length at least ${a["min-length"]} expected, length ${r.length} found`)];let S={type:a.value,values:a.values};p.$version<7&&(S.function=a.function),Qt(a.value)==="object"&&(S=a.value);let E=[];for(let I=0;I<r.length;I++)E=E.concat(x({array:r,arrayIndex:I,value:r[I],valueSpec:S,validateSpec:o.validateSpec,style:h,styleSpec:p,key:`${v}[${I}]`}));return E}function Sl(o){const r=o.key,a=o.value,h=o.valueSpec;let p=Qt(a);return p==="number"&&a!=a&&(p="NaN"),p!=="number"?[new qe(r,a,`number expected, ${p} found`)]:"minimum"in h&&a<h.minimum?[new qe(r,a,`${a} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&a>h.maximum?[new qe(r,a,`${a} is greater than the maximum value ${h.maximum}`)]:[]}function Ou(o){const r=o.valueSpec,a=An(o.value.type);let h,p,v,x={};const S=a!=="categorical"&&o.value.property===void 0,E=!S,I=Qt(o.value.stops)==="array"&&Qt(o.value.stops[0])==="array"&&Qt(o.value.stops[0][0])==="object",z=qr({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(G){if(a==="identity")return[new qe(G.key,G.value,'identity function may not have a "stops" property')];let W=[];const Q=G.value;return W=W.concat(ga({key:G.key,value:Q,valueSpec:G.valueSpec,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec,arrayElementValidator:O})),Qt(Q)==="array"&&Q.length===0&&W.push(new qe(G.key,Q,"array must have at least one stop")),W},default:function(G){return G.validateSpec({key:G.key,value:G.value,valueSpec:r,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec})}}});return a==="identity"&&S&&z.push(new qe(o.key,o.value,'missing required property "property"')),a==="identity"||o.value.stops||z.push(new qe(o.key,o.value,'missing required property "stops"')),a==="exponential"&&o.valueSpec.expression&&!gh(o.valueSpec)&&z.push(new qe(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(E&&!ma(o.valueSpec)?z.push(new qe(o.key,o.value,"property functions not supported")):S&&!jf(o.valueSpec)&&z.push(new qe(o.key,o.value,"zoom functions not supported"))),a!=="categorical"&&!I||o.value.property!==void 0||z.push(new qe(o.key,o.value,'"property" property is required')),z;function O(G){let W=[];const Q=G.value,oe=G.key;if(Qt(Q)!=="array")return[new qe(oe,Q,`array expected, ${Qt(Q)} found`)];if(Q.length!==2)return[new qe(oe,Q,`array length 2 expected, length ${Q.length} found`)];if(I){if(Qt(Q[0])!=="object")return[new qe(oe,Q,`object expected, ${Qt(Q[0])} found`)];if(Q[0].zoom===void 0)return[new qe(oe,Q,"object stop key must have zoom")];if(Q[0].value===void 0)return[new qe(oe,Q,"object stop key must have value")];if(v&&v>An(Q[0].zoom))return[new qe(oe,Q[0].zoom,"stop zoom values must appear in ascending order")];An(Q[0].zoom)!==v&&(v=An(Q[0].zoom),p=void 0,x={}),W=W.concat(qr({key:`${oe}[0]`,value:Q[0],valueSpec:{zoom:{}},validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec,objectElementValidators:{zoom:Sl,value:$}}))}else W=W.concat($({key:`${oe}[0]`,value:Q[0],valueSpec:{},validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec},Q));return Iu(Eo(Q[1]))?W.concat([new qe(`${oe}[1]`,Q[1],"expressions are not allowed in function stops.")]):W.concat(G.validateSpec({key:`${oe}[1]`,value:Q[1],valueSpec:r,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec}))}function $(G,W){const Q=Qt(G.value),oe=An(G.value),ce=G.value!==null?G.value:W;if(h){if(Q!==h)return[new qe(G.key,ce,`${Q} stop domain type must match previous stop domain type ${h}`)]}else h=Q;if(Q!=="number"&&Q!=="string"&&Q!=="boolean")return[new qe(G.key,ce,"stop domain value must be a number, string, or boolean")];if(Q!=="number"&&a!=="categorical"){let xe=`number expected, ${Q} found`;return ma(r)&&a===void 0&&(xe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new qe(G.key,ce,xe)]}return a!=="categorical"||Q!=="number"||isFinite(oe)&&Math.floor(oe)===oe?a!=="categorical"&&Q==="number"&&p!==void 0&&oe<p?[new qe(G.key,ce,"stop domain values must appear in ascending order")]:(p=oe,a==="categorical"&&oe in x?[new qe(G.key,ce,"stop domain values must be unique")]:(x[oe]=!0,[])):[new qe(G.key,ce,`integer expected, found ${oe}`)]}}function Po(o){const r=(o.expressionContext==="property"?_h:Mu)(Eo(o.value),o.valueSpec);if(r.result==="error")return r.value.map(h=>new qe(`${o.key}${h.key}`,o.value,h.message));const a=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!a.outputDefined())return[new qe(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!yl(a))return[new qe(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!yl(a))return[new qe(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Su(a,["zoom","feature-state"]))return[new qe(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!bu(a))return[new qe(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Cl(o){const r=o.key,a=o.value,h=o.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(An(a))===-1&&p.push(new qe(r,a,`expected one of [${h.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(h.values).indexOf(An(a))===-1&&p.push(new qe(r,a,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(a)} found`)),p}function ya(o){return wl(Eo(o.value))?Po(oi({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Hf(o)}function Hf(o){const r=o.value,a=o.key;if(Qt(r)!=="array")return[new qe(a,r,`array expected, ${Qt(r)} found`)];const h=o.styleSpec;let p,v=[];if(r.length<1)return[new qe(a,r,"filter array must have at least 1 element")];switch(v=v.concat(Cl({key:`${a}[0]`,value:r[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),An(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&An(r[1])==="$type"&&v.push(new qe(a,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&v.push(new qe(a,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(p=Qt(r[1]),p!=="string"&&v.push(new qe(`${a}[1]`,r[1],`string expected, ${p} found`)));for(let x=2;x<r.length;x++)p=Qt(r[x]),An(r[1])==="$type"?v=v.concat(Cl({key:`${a}[${x}]`,value:r[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new qe(`${a}[${x}]`,r[x],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let x=1;x<r.length;x++)v=v.concat(Hf({key:`${a}[${x}]`,value:r[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":p=Qt(r[1]),r.length!==2?v.push(new qe(a,r,`filter array for "${r[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new qe(`${a}[1]`,r[1],`string expected, ${p} found`));break;case"within":p=Qt(r[1]),r.length!==2?v.push(new qe(a,r,`filter array for "${r[0]}" operator must have 2 elements`)):p!=="object"&&v.push(new qe(`${a}[1]`,r[1],`object expected, ${p} found`))}return v}function Kf(o,r){const a=o.key,h=o.validateSpec,p=o.style,v=o.styleSpec,x=o.value,S=o.objectKey,E=v[`${r}_${o.layerType}`];if(!E)return[];const I=S.match(/^(.*)-transition$/);if(r==="paint"&&I&&E[I[1]]&&E[I[1]].transition)return h({key:a,value:x,valueSpec:v.transition,style:p,styleSpec:v});const z=o.valueSpec||E[S];if(!z)return[new qe(a,x,`unknown property "${S}"`)];let O;if(Qt(x)==="string"&&ma(z)&&!z.tokens&&(O=/^{([^}]+)}$/.exec(x)))return[new qe(a,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(O[1])} }\`.`)];const $=[];return o.layerType==="symbol"&&(S==="text-field"&&p&&!p.glyphs&&$.push(new qe(a,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&bn(Eo(x))&&An(x.type)==="identity"&&$.push(new qe(a,x,'"text-font" does not support identity functions'))),$.concat(h({key:o.key,value:x,valueSpec:z,style:p,styleSpec:v,expressionContext:"property",propertyType:r,propertyKey:S}))}function Xf(o){return Kf(o,"paint")}function Yf(o){return Kf(o,"layout")}function Qf(o){let r=[];const a=o.value,h=o.key,p=o.style,v=o.styleSpec;a.type||a.ref||r.push(new qe(h,a,'either "type" or "ref" is required'));let x=An(a.type);const S=An(a.ref);if(a.id){const E=An(a.id);for(let I=0;I<o.arrayIndex;I++){const z=p.layers[I];An(z.id)===E&&r.push(new qe(h,a.id,`duplicate layer id "${a.id}", previously used at line ${z.id.__line__}`))}}if("ref"in a){let E;["type","source","source-layer","filter","layout"].forEach(I=>{I in a&&r.push(new qe(h,a[I],`"${I}" is prohibited for ref layers`))}),p.layers.forEach(I=>{An(I.id)===S&&(E=I)}),E?E.ref?r.push(new qe(h,a.ref,"ref cannot reference another ref layer")):x=An(E.type):r.push(new qe(h,a.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(a.source){const E=p.sources&&p.sources[a.source],I=E&&An(E.type);E?I==="vector"&&x==="raster"?r.push(new qe(h,a.source,`layer "${a.id}" requires a raster source`)):I!=="raster-dem"&&x==="hillshade"?r.push(new qe(h,a.source,`layer "${a.id}" requires a raster-dem source`)):I==="raster"&&x!=="raster"?r.push(new qe(h,a.source,`layer "${a.id}" requires a vector source`)):I!=="vector"||a["source-layer"]?I==="raster-dem"&&x!=="hillshade"?r.push(new qe(h,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!a.paint||!a.paint["line-gradient"]||I==="geojson"&&E.lineMetrics||r.push(new qe(h,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new qe(h,a,`layer "${a.id}" must specify a "source-layer"`)):r.push(new qe(h,a.source,`source "${a.source}" not found`))}else r.push(new qe(h,a,'missing required property "source"'));return r=r.concat(qr({key:h,value:a,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:a.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:a,objectKey:"type"}),filter:ya,layout:E=>qr({layer:a,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":I=>Yf(oi({layerType:x},I))}}),paint:E=>qr({layer:a,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":I=>Xf(oi({layerType:x},I))}})}})),r}function ls(o){const r=o.value,a=o.key,h=Qt(r);return h!=="string"?[new qe(a,r,`string expected, ${h} found`)]:[]}const Tl={promoteId:function({key:o,value:r}){if(Qt(r)==="string")return ls({key:o,value:r});{const a=[];for(const h in r)a.push(...ls({key:`${o}.${h}`,value:r[h]}));return a}}};function ci(o){const r=o.value,a=o.key,h=o.styleSpec,p=o.style,v=o.validateSpec;if(!r.type)return[new qe(a,r,'"type" is required')];const x=An(r.type);let S;switch(x){case"vector":case"raster":return S=qr({key:a,value:r,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:Tl,validateSpec:v}),S;case"raster-dem":return S=function(E){var I;const z=(I=E.sourceName)!==null&&I!==void 0?I:"",O=E.value,$=E.styleSpec,G=$.source_raster_dem,W=E.style;let Q=[];const oe=Qt(O);if(O===void 0)return Q;if(oe!=="object")return Q.push(new qe("source_raster_dem",O,`object expected, ${oe} found`)),Q;const ce=An(O.encoding)==="custom",xe=["redFactor","greenFactor","blueFactor","baseShift"],fe=E.value.encoding?`"${E.value.encoding}"`:"Default";for(const be in O)!ce&&xe.includes(be)?Q.push(new qe(be,O[be],`In "${z}": "${be}" is only valid when "encoding" is set to "custom". ${fe} encoding found`)):G[be]?Q=Q.concat(E.validateSpec({key:be,value:O[be],valueSpec:G[be],validateSpec:E.validateSpec,style:W,styleSpec:$})):Q.push(new qe(be,O[be],`unknown property "${be}"`));return Q}({sourceName:a,value:r,style:o.style,styleSpec:h,validateSpec:v}),S;case"geojson":if(S=qr({key:a,value:r,valueSpec:h.source_geojson,style:p,styleSpec:h,validateSpec:v,objectElementValidators:Tl}),r.cluster)for(const E in r.clusterProperties){const[I,z]=r.clusterProperties[E],O=typeof I=="string"?[I,["accumulated"],["get",E]]:I;S.push(...Po({key:`${a}.${E}.map`,value:z,validateSpec:v,expressionContext:"cluster-map"})),S.push(...Po({key:`${a}.${E}.reduce`,value:O,validateSpec:v,expressionContext:"cluster-reduce"}))}return S;case"video":return qr({key:a,value:r,valueSpec:h.source_video,style:p,validateSpec:v,styleSpec:h});case"image":return qr({key:a,value:r,valueSpec:h.source_image,style:p,validateSpec:v,styleSpec:h});case"canvas":return[new qe(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Cl({key:`${a}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,validateSpec:v,styleSpec:h})}}function El(o){const r=o.value,a=o.styleSpec,h=a.light,p=o.style;let v=[];const x=Qt(r);if(r===void 0)return v;if(x!=="object")return v=v.concat([new qe("light",r,`object expected, ${x} found`)]),v;for(const S in r){const E=S.match(/^(.*)-transition$/);v=v.concat(E&&h[E[1]]&&h[E[1]].transition?o.validateSpec({key:S,value:r[S],valueSpec:a.transition,validateSpec:o.validateSpec,style:p,styleSpec:a}):h[S]?o.validateSpec({key:S,value:r[S],valueSpec:h[S],validateSpec:o.validateSpec,style:p,styleSpec:a}):[new qe(S,r[S],`unknown property "${S}"`)])}return v}function Jf(o){const r=o.value,a=o.styleSpec,h=a.terrain,p=o.style;let v=[];const x=Qt(r);if(r===void 0)return v;if(x!=="object")return v=v.concat([new qe("terrain",r,`object expected, ${x} found`)]),v;for(const S in r)v=v.concat(h[S]?o.validateSpec({key:S,value:r[S],valueSpec:h[S],validateSpec:o.validateSpec,style:p,styleSpec:a}):[new qe(S,r[S],`unknown property "${S}"`)]);return v}function ep(o){let r=[];const a=o.value,h=o.key;if(Array.isArray(a)){const p=[],v=[];for(const x in a)a[x].id&&p.includes(a[x].id)&&r.push(new qe(h,a,`all the sprites' ids must be unique, but ${a[x].id} is duplicated`)),p.push(a[x].id),a[x].url&&v.includes(a[x].url)&&r.push(new qe(h,a,`all the sprites' URLs must be unique, but ${a[x].url} is duplicated`)),v.push(a[x].url),r=r.concat(qr({key:`${h}[${x}]`,value:a[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return ls({key:h,value:a})}const tp={"*":()=>[],array:ga,boolean:function(o){const r=o.value,a=o.key,h=Qt(r);return h!=="boolean"?[new qe(a,r,`boolean expected, ${h} found`)]:[]},number:Sl,color:function(o){const r=o.key,a=o.value,h=Qt(a);return h!=="string"?[new qe(r,a,`color expected, ${h} found`)]:nn.parse(String(a))?[]:[new qe(r,a,`color expected, "${a}" found`)]},constants:Wf,enum:Cl,filter:ya,function:Ou,layer:Qf,object:qr,source:ci,light:El,terrain:Jf,string:ls,formatted:function(o){return ls(o).length===0?[]:Po(o)},resolvedImage:function(o){return ls(o).length===0?[]:Po(o)},padding:function(o){const r=o.key,a=o.value;if(Qt(a)==="array"){if(a.length<1||a.length>4)return[new qe(r,a,`padding requires 1 to 4 values; ${a.length} values found`)];const h={type:"number"};let p=[];for(let v=0;v<a.length;v++)p=p.concat(o.validateSpec({key:`${r}[${v}]`,value:a[v],validateSpec:o.validateSpec,valueSpec:h}));return p}return Sl({key:r,value:a,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const r=o.key,a=o.value,h=Qt(a),p=o.styleSpec;if(h!=="array"||a.length<1||a.length%2!=0)return[new qe(r,a,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<a.length;x+=2)v=v.concat(Cl({key:`${r}[${x}]`,value:a[x],valueSpec:p.layout_symbol["text-anchor"]})),v=v.concat(ga({key:`${r}[${x+1}]`,value:a[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:p}));return v},sprite:ep};function ks(o){const r=o.value,a=o.valueSpec,h=o.styleSpec;return o.validateSpec=ks,a.expression&&bn(An(r))?Ou(o):a.expression&&Iu(Eo(r))?Po(o):a.type&&tp[a.type]?tp[a.type](o):qr(oi({},o,{valueSpec:a.type?h[a.type]:a}))}function np(o){const r=o.value,a=o.key,h=ls(o);return h.length||(r.indexOf("{fontstack}")===-1&&h.push(new qe(a,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&h.push(new qe(a,r,'"glyphs" url must include a "{range}" token'))),h}function Mi(o,r=le){let a=[];return a=a.concat(ks({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:ks,objectElementValidators:{glyphs:np,"*":()=>[]}})),o.constants&&(a=a.concat(Wf({key:"constants",value:o.constants,style:o,styleSpec:r,validateSpec:ks}))),Fu(a)}function Is(o){return function(r){return o({...r,validateSpec:ks})}}function Fu(o){return[].concat(o).sort((r,a)=>r.line-a.line)}function Ms(o){return function(...r){return Fu(o.apply(this,r))}}Mi.source=Ms(Is(ci)),Mi.sprite=Ms(Is(ep)),Mi.glyphs=Ms(Is(np)),Mi.light=Ms(Is(El)),Mi.terrain=Ms(Is(Jf)),Mi.layer=Ms(Is(Qf)),Mi.filter=Ms(Is(ya)),Mi.paintProperty=Ms(Is(Xf)),Mi.layoutProperty=Ms(Is(Yf));const Ds=Mi,Uy=Ds.light,bh=Ds.paintProperty,rp=Ds.layoutProperty;function Nu(o,r){let a=!1;if(r&&r.length)for(const h of r)o.fire(new ge(new Error(h.message))),a=!0;return a}class va{constructor(r,a,h){const p=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const x=new Int32Array(this.arrayBuffer);r=x[0],this.d=(a=x[1])+2*(h=x[2]);for(let E=0;E<this.d*this.d;E++){const I=x[3+E],z=x[3+E+1];p.push(I===z?null:x.subarray(I,z))}const S=x[3+p.length+1];this.keys=x.subarray(x[3+p.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=a+2*h;for(let x=0;x<this.d*this.d;x++)p.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=r,this.padding=h,this.scale=a/r,this.uid=0;const v=h/a*r;this.min=-v,this.max=r+v}insert(r,a,h,p,v){this._forEachCell(a,h,p,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(a),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,a,h,p,v,x){this.cells[v].push(x)}query(r,a,h,p,v){const x=this.min,S=this.max;if(r<=x&&a<=x&&S<=h&&S<=p&&!v)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(r,a,h,p,this._queryCell,E,{},v),E}}_queryCell(r,a,h,p,v,x,S,E){const I=this.cells[v];if(I!==null){const z=this.keys,O=this.bboxes;for(let $=0;$<I.length;$++){const G=I[$];if(S[G]===void 0){const W=4*G;(E?E(O[W+0],O[W+1],O[W+2],O[W+3]):r<=O[W+2]&&a<=O[W+3]&&h>=O[W+0]&&p>=O[W+1])?(S[G]=!0,x.push(z[G])):S[G]=!1}}}}_forEachCell(r,a,h,p,v,x,S,E){const I=this._convertToCellCoord(r),z=this._convertToCellCoord(a),O=this._convertToCellCoord(h),$=this._convertToCellCoord(p);for(let G=I;G<=O;G++)for(let W=z;W<=$;W++){const Q=this.d*W+G;if((!E||E(this._convertFromCellCoord(G),this._convertFromCellCoord(W),this._convertFromCellCoord(G+1),this._convertFromCellCoord(W+1)))&&v.call(this,r,a,h,p,Q,x,S,E))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,a=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const p=new Int32Array(a+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let v=a;for(let x=0;x<r.length;x++){const S=r[x];p[3+x]=v,p.set(S,v),v+=S.length}return p[3+r.length]=v,p.set(this.keys,v),v+=this.keys.length,p[3+r.length+1]=v,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer}static serialize(r,a){const h=r.toArrayBuffer();return a&&a.push(h),{buffer:h}}static deserialize(r){return new va(r.buffer)}}const zs={};function it(o,r,a={}){if(zs[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),zs[o]={klass:r,omit:a.omit||[],shallow:a.shallow||[]}}it("Object",Object),it("TransferableGridIndex",va),it("Color",nn),it("Error",Error),it("AJAXError",Ci),it("ResolvedImage",hr),it("StylePropertyFunction",_l),it("StyleExpression",yh,{omit:["_evaluator"]}),it("ZoomDependentExpression",Du),it("ZoomConstantExpression",vh),it("CompoundExpression",Ii,{omit:["_evaluate"]});for(const o in pa)pa[o]._classRegistryKey||it(`Expression_${o}`,pa[o]);function Bu(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function so(o,r){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(Bu(o)||ut(o))return r&&r.push(o),o;if(ArrayBuffer.isView(o)){const a=o;return r&&r.push(a.buffer),a}if(o instanceof ImageData)return r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const a=[];for(const h of o)a.push(so(h,r));return a}if(typeof o=="object"){const a=o.constructor,h=a._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!zs[h])throw new Error(`${h} is not registered.`);const p=a.serialize?a.serialize(o,r):{};if(a.serialize){if(r&&p===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in o){if(!o.hasOwnProperty(v)||zs[h].omit.indexOf(v)>=0)continue;const x=o[v];p[v]=zs[h].shallow.indexOf(v)>=0?x:so(x,r)}o instanceof Error&&(p.message=o.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(p.$name=h),p}throw new Error("can't serialize object of type "+typeof o)}function _a(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||Bu(o)||ut(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(_a);if(typeof o=="object"){const r=o.$name||"Object";if(!zs[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:a}=zs[r];if(!a)throw new Error(`can't deserialize unregistered class ${r}`);if(a.deserialize)return a.deserialize(o);const h=Object.create(a.prototype);for(const p of Object.keys(o)){if(p==="$name")continue;const v=o[p];h[p]=zs[r].shallow.indexOf(p)>=0?v:_a(v)}return h}throw new Error("can't deserialize object of type "+typeof o)}class ip{constructor(){this.first=!0}update(r,a){const h=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=a),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=h,!0))}}const nt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Sh(o){for(const r of o)if(Th(r.charCodeAt(0)))return!0;return!1}function Ch(o){for(const r of o)if(!qy(r.charCodeAt(0)))return!1;return!0}function qy(o){return!(nt.Arabic(o)||nt["Arabic Supplement"](o)||nt["Arabic Extended-A"](o)||nt["Arabic Presentation Forms-A"](o)||nt["Arabic Presentation Forms-B"](o))}function Th(o){return!(o!==746&&o!==747&&(o<4352||!(nt["Bopomofo Extended"](o)||nt.Bopomofo(o)||nt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||nt["CJK Compatibility Ideographs"](o)||nt["CJK Compatibility"](o)||nt["CJK Radicals Supplement"](o)||nt["CJK Strokes"](o)||!(!nt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||nt["CJK Unified Ideographs Extension A"](o)||nt["CJK Unified Ideographs"](o)||nt["Enclosed CJK Letters and Months"](o)||nt["Hangul Compatibility Jamo"](o)||nt["Hangul Jamo Extended-A"](o)||nt["Hangul Jamo Extended-B"](o)||nt["Hangul Jamo"](o)||nt["Hangul Syllables"](o)||nt.Hiragana(o)||nt["Ideographic Description Characters"](o)||nt.Kanbun(o)||nt["Kangxi Radicals"](o)||nt["Katakana Phonetic Extensions"](o)||nt.Katakana(o)&&o!==12540||!(!nt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!nt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||nt["Unified Canadian Aboriginal Syllabics"](o)||nt["Unified Canadian Aboriginal Syllabics Extended"](o)||nt["Vertical Forms"](o)||nt["Yijing Hexagram Symbols"](o)||nt["Yi Syllables"](o)||nt["Yi Radicals"](o))))}function sp(o){return!(Th(o)||function(r){return!!(nt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||nt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||nt["Letterlike Symbols"](r)||nt["Number Forms"](r)||nt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||nt["Control Pictures"](r)&&r!==9251||nt["Optical Character Recognition"](r)||nt["Enclosed Alphanumerics"](r)||nt["Geometric Shapes"](r)||nt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||nt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||nt["CJK Symbols and Punctuation"](r)||nt.Katakana(r)||nt["Private Use Area"](r)||nt["CJK Compatibility Forms"](r)||nt["Small Form Variants"](r)||nt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function op(o){return o>=1424&&o<=2303||nt["Arabic Presentation Forms-A"](o)||nt["Arabic Presentation Forms-B"](o)}function ap(o,r){return!(!r&&op(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||nt.Khmer(o))}function Gy(o){for(const r of o)if(op(r.charCodeAt(0)))return!0;return!1}const Eh="deferred",Ph="loading",Ah="loaded";let kh=null,Gr="unavailable",oo=null;const Pl=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Gr="error"),kh&&kh(o)};function Ih(){Al.fire(new Es("pluginStateChange",{pluginStatus:Gr,pluginURL:oo}))}const Al=new ke,Mh=function(){return Gr},lp=function(){if(Gr!==Eh||!oo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Gr=Ph,Ih(),oo&&Qs({url:oo},o=>{o?Pl(o):(Gr=Ah,Ih())})},hi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Gr===Ah||hi.applyArabicShaping!=null,isLoading:()=>Gr===Ph,setState(o){if(!bt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Gr=o.pluginStatus,oo=o.pluginURL},isParsed(){if(!bt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return hi.applyArabicShaping!=null&&hi.processBidirectionalText!=null&&hi.processStyledBidirectionalText!=null},getPluginURL(){if(!bt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return oo}};class hn{constructor(r,a){this.zoom=r,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ip,this.transition={})}isSupportedScript(r){return function(a,h){for(const p of a)if(!ap(p.charCodeAt(0),h))return!1;return!0}(r,hi.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,a=r-Math.floor(r),h=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*a}}}class Vu{constructor(r,a){this.property=r,this.value=a,this.expression=function(h,p){if(bn(h))return new _l(h,p);if(Iu(h)){const v=_h(h,p);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return p.type==="color"&&typeof h=="string"?v=nn.parse(h):p.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?p.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(v=Ai.parse(h)):v=ai.parse(h),{kind:"constant",evaluate:()=>v}}}(a===void 0?r.specification.default:a,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,a,h){return this.property.possiblyEvaluate(this,r,a,h)}}class Dh{constructor(r){this.property=r,this.value=new Vu(r,void 0)}transitioned(r,a){return new cp(this.property,this.value,a,Ce({},r.transition,this.transition),r.now)}untransitioned(){return new cp(this.property,this.value,null,{},0)}}class up{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return Ue(this._values[r].value.value)}setValue(r,a){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Dh(this._values[r].property)),this._values[r].value=new Vu(this._values[r].property,a===null?void 0:Ue(a))}getTransition(r){return Ue(this._values[r].transition)}setTransition(r,a){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Dh(this._values[r].property)),this._values[r].transition=Ue(a)||void 0}serialize(){const r={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(r[a]=h);const p=this.getTransition(a);p!==void 0&&(r[`${a}-transition`]=p)}return r}transitioned(r,a){const h=new hp(this._properties);for(const p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(r,a._values[p]);return h}untransitioned(){const r=new hp(this._properties);for(const a of Object.keys(this._values))r._values[a]=this._values[a].untransitioned();return r}}class cp{constructor(r,a,h,p,v){this.property=r,this.value=a,this.begin=v+p.delay||0,this.end=this.begin+p.duration||0,r.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(r,a,h){const p=r.now||0,v=this.value.possiblyEvaluate(r,a,h),x=this.prior;if(x){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return x.possiblyEvaluate(r,a,h);{const S=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(r,a,h),v,function(E){if(E<=0)return 0;if(E>=1)return 1;const I=E*E,z=I*E;return 4*(E<.5?z:3*(E-I)+z-.75)}(S))}}return v}}class hp{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,a,h){const p=new $u(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(r,a,h);return p}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Zy{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return Ue(this._values[r].value)}setValue(r,a){this._values[r]=new Vu(this._values[r].property,a===null?void 0:Ue(a))}serialize(){const r={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(r[a]=h)}return r}possiblyEvaluate(r,a,h){const p=new $u(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(r,a,h);return p}}class kr{constructor(r,a,h){this.property=r,this.value=a,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,a,h,p){return this.property.evaluate(this.value,this.parameters,r,a,h,p)}}class $u{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class ft{constructor(r){this.specification=r}possiblyEvaluate(r,a){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(a)}interpolate(r,a,h){const p=li[this.specification.type];return p?p(r,a,h):r}}class St{constructor(r,a){this.specification=r,this.overrides=a}possiblyEvaluate(r,a,h,p){return new kr(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(a,null,{},h,p)}:r.expression,a)}interpolate(r,a,h){if(r.value.kind!=="constant"||a.value.kind!=="constant")return r;if(r.value.value===void 0||a.value.value===void 0)return new kr(this,{kind:"constant",value:void 0},r.parameters);const p=li[this.specification.type];if(p){const v=p(r.value.value,a.value.value,h);return new kr(this,{kind:"constant",value:v},r.parameters)}return r}evaluate(r,a,h,p,v,x){return r.kind==="constant"?r.value:r.evaluate(a,h,p,v,x)}}class kl extends St{possiblyEvaluate(r,a,h,p){if(r.value===void 0)return new kr(this,{kind:"constant",value:void 0},a);if(r.expression.kind==="constant"){const v=r.expression.evaluate(a,null,{},h,p),x=r.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,S=this._calculate(x,x,x,a);return new kr(this,{kind:"constant",value:S},a)}if(r.expression.kind==="camera"){const v=this._calculate(r.expression.evaluate({zoom:a.zoom-1}),r.expression.evaluate({zoom:a.zoom}),r.expression.evaluate({zoom:a.zoom+1}),a);return new kr(this,{kind:"constant",value:v},a)}return new kr(this,r.expression,a)}evaluate(r,a,h,p,v,x){if(r.kind==="source"){const S=r.evaluate(a,h,p,v,x);return this._calculate(S,S,S,a)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(a.zoom)-1},h,p),r.evaluate({zoom:Math.floor(a.zoom)},h,p),r.evaluate({zoom:Math.floor(a.zoom)+1},h,p),a):r.value}_calculate(r,a,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:r,to:a}:{from:h,to:a}}interpolate(r){return r}}class zh{constructor(r){this.specification=r}possiblyEvaluate(r,a,h,p){if(r.value!==void 0){if(r.expression.kind==="constant"){const v=r.expression.evaluate(a,null,{},h,p);return this._calculate(v,v,v,a)}return this._calculate(r.expression.evaluate(new hn(Math.floor(a.zoom-1),a)),r.expression.evaluate(new hn(Math.floor(a.zoom),a)),r.expression.evaluate(new hn(Math.floor(a.zoom+1),a)),a)}}_calculate(r,a,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:r,to:a}:{from:h,to:a}}interpolate(r){return r}}class Rh{constructor(r){this.specification=r}possiblyEvaluate(r,a,h,p){return!!r.expression.evaluate(a,null,{},h,p)}interpolate(){return!1}}class Bn{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in r){const h=r[a];h.specification.overridable&&this.overridableProperties.push(a);const p=this.defaultPropertyValues[a]=new Vu(h,void 0),v=this.defaultTransitionablePropertyValues[a]=new Dh(h);this.defaultTransitioningPropertyValues[a]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=p.possiblyEvaluate({})}}}it("DataDrivenProperty",St),it("DataConstantProperty",ft),it("CrossFadedDataDrivenProperty",kl),it("CrossFadedProperty",zh),it("ColorRampProperty",Rh);const Lh="-transition";class Di extends ke{constructor(r,a){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),a.layout&&(this._unevaluatedLayout=new Zy(a.layout)),a.paint)){this._transitionablePaint=new up(a.paint);for(const h in r.paint)this.setPaintProperty(h,r.paint[h],{validate:!1});for(const h in r.layout)this.setLayoutProperty(h,r.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new $u(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,a,h={}){a!=null&&this._validate(rp,`layers.${this.id}.layout.${r}`,r,a,h)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,a):this.visibility=a)}getPaintProperty(r){return r.endsWith(Lh)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,a,h={}){if(a!=null&&this._validate(bh,`layers.${this.id}.paint.${r}`,r,a,h))return!1;if(r.endsWith(Lh))return this._transitionablePaint.setTransition(r.slice(0,-11),a||void 0),!1;{const p=this._transitionablePaint._values[r],v=p.property.specification["property-type"]==="cross-faded-data-driven",x=p.value.isDataDriven(),S=p.value;this._transitionablePaint.setValue(r,a),this._handleSpecialPaintPropertyUpdate(r);const E=this._transitionablePaint._values[r].value;return E.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(r,S,E)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,a,h){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,a){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,a)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),Tt(r,(a,h)=>!(a===void 0||h==="layout"&&!Object.keys(a).length||h==="paint"&&!Object.keys(a).length))}_validate(r,a,h,p,v={}){return(!v||v.validate!==!1)&&Nu(this,r.call(Ds,{key:a,layerType:this.type,objectKey:h,value:p,styleSpec:le,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const a=this.paint.get(r);if(a instanceof kr&&ma(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const dp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ao{constructor(r,a){this._structArray=r,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class kn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,a){return r._trim(),a&&(r.isTransferred=!0,a.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const a=Object.create(this.prototype);return a.arrayBuffer=r.arrayBuffer,a.length=r.length,a.capacity=r.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Cn(o,r=1){let a=0,h=0;return{members:o.map(p=>{const v=dp[p.type].BYTES_PER_ELEMENT,x=a=xa(a,Math.max(r,v)),S=p.components||1;return h=Math.max(h,v),a+=v*S,{name:p.name,type:p.type,components:S,offset:x}}),size:xa(a,Math.max(h,r)),alignment:r}}function xa(o,r){return Math.ceil(o/r)*r}class Il extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a){const h=this.length;return this.resize(h+1),this.emplace(h,r,a)}emplace(r,a,h){const p=2*r;return this.int16[p+0]=a,this.int16[p+1]=h,r}}Il.prototype.bytesPerElement=4,it("StructArrayLayout2i4",Il);class Ml extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,r,a,h)}emplace(r,a,h,p){const v=3*r;return this.int16[v+0]=a,this.int16[v+1]=h,this.int16[v+2]=p,r}}Ml.prototype.bytesPerElement=6,it("StructArrayLayout3i6",Ml);class ko extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,r,a,h,p)}emplace(r,a,h,p,v){const x=4*r;return this.int16[x+0]=a,this.int16[x+1]=h,this.int16[x+2]=p,this.int16[x+3]=v,r}}ko.prototype.bytesPerElement=8,it("StructArrayLayout4i8",ko);class Oh extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,h,p,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,a,h,p,v,x)}emplace(r,a,h,p,v,x,S){const E=6*r;return this.int16[E+0]=a,this.int16[E+1]=h,this.int16[E+2]=p,this.int16[E+3]=v,this.int16[E+4]=x,this.int16[E+5]=S,r}}Oh.prototype.bytesPerElement=12,it("StructArrayLayout2i4i12",Oh);class Fh extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,h,p,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,a,h,p,v,x)}emplace(r,a,h,p,v,x,S){const E=4*r,I=8*r;return this.int16[E+0]=a,this.int16[E+1]=h,this.uint8[I+4]=p,this.uint8[I+5]=v,this.uint8[I+6]=x,this.uint8[I+7]=S,r}}Fh.prototype.bytesPerElement=8,it("StructArrayLayout2i4ub8",Fh);class wa extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a){const h=this.length;return this.resize(h+1),this.emplace(h,r,a)}emplace(r,a,h){const p=2*r;return this.float32[p+0]=a,this.float32[p+1]=h,r}}wa.prototype.bytesPerElement=8,it("StructArrayLayout2f8",wa);class Nh extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,h,p,v,x,S,E,I,z){const O=this.length;return this.resize(O+1),this.emplace(O,r,a,h,p,v,x,S,E,I,z)}emplace(r,a,h,p,v,x,S,E,I,z,O){const $=10*r;return this.uint16[$+0]=a,this.uint16[$+1]=h,this.uint16[$+2]=p,this.uint16[$+3]=v,this.uint16[$+4]=x,this.uint16[$+5]=S,this.uint16[$+6]=E,this.uint16[$+7]=I,this.uint16[$+8]=z,this.uint16[$+9]=O,r}}Nh.prototype.bytesPerElement=20,it("StructArrayLayout10ui20",Nh);class Bh extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,h,p,v,x,S,E,I,z,O,$){const G=this.length;return this.resize(G+1),this.emplace(G,r,a,h,p,v,x,S,E,I,z,O,$)}emplace(r,a,h,p,v,x,S,E,I,z,O,$,G){const W=12*r;return this.int16[W+0]=a,this.int16[W+1]=h,this.int16[W+2]=p,this.int16[W+3]=v,this.uint16[W+4]=x,this.uint16[W+5]=S,this.uint16[W+6]=E,this.uint16[W+7]=I,this.int16[W+8]=z,this.int16[W+9]=O,this.int16[W+10]=$,this.int16[W+11]=G,r}}Bh.prototype.bytesPerElement=24,it("StructArrayLayout4i4ui4i24",Bh);class Jt extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,r,a,h)}emplace(r,a,h,p){const v=3*r;return this.float32[v+0]=a,this.float32[v+1]=h,this.float32[v+2]=p,r}}Jt.prototype.bytesPerElement=12,it("StructArrayLayout3f12",Jt);class y extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.uint32[1*r+0]=a,r}}y.prototype.bytesPerElement=4,it("StructArrayLayout1ul4",y);class i extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,h,p,v,x,S,E,I){const z=this.length;return this.resize(z+1),this.emplace(z,r,a,h,p,v,x,S,E,I)}emplace(r,a,h,p,v,x,S,E,I,z){const O=10*r,$=5*r;return this.int16[O+0]=a,this.int16[O+1]=h,this.int16[O+2]=p,this.int16[O+3]=v,this.int16[O+4]=x,this.int16[O+5]=S,this.uint32[$+3]=E,this.uint16[O+8]=I,this.uint16[O+9]=z,r}}i.prototype.bytesPerElement=20,it("StructArrayLayout6i1ul2ui20",i);class u extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,h,p,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,a,h,p,v,x)}emplace(r,a,h,p,v,x,S){const E=6*r;return this.int16[E+0]=a,this.int16[E+1]=h,this.int16[E+2]=p,this.int16[E+3]=v,this.int16[E+4]=x,this.int16[E+5]=S,r}}u.prototype.bytesPerElement=12,it("StructArrayLayout2i2i2i12",u);class f extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,h,p,v){const x=this.length;return this.resize(x+1),this.emplace(x,r,a,h,p,v)}emplace(r,a,h,p,v,x){const S=4*r,E=8*r;return this.float32[S+0]=a,this.float32[S+1]=h,this.float32[S+2]=p,this.int16[E+6]=v,this.int16[E+7]=x,r}}f.prototype.bytesPerElement=16,it("StructArrayLayout2f1f2i16",f);class g extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,r,a,h,p)}emplace(r,a,h,p,v){const x=12*r,S=3*r;return this.uint8[x+0]=a,this.uint8[x+1]=h,this.float32[S+1]=p,this.float32[S+2]=v,r}}g.prototype.bytesPerElement=12,it("StructArrayLayout2ub2f12",g);class _ extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,r,a,h)}emplace(r,a,h,p){const v=3*r;return this.uint16[v+0]=a,this.uint16[v+1]=h,this.uint16[v+2]=p,r}}_.prototype.bytesPerElement=6,it("StructArrayLayout3ui6",_);class C extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,h,p,v,x,S,E,I,z,O,$,G,W,Q,oe,ce){const xe=this.length;return this.resize(xe+1),this.emplace(xe,r,a,h,p,v,x,S,E,I,z,O,$,G,W,Q,oe,ce)}emplace(r,a,h,p,v,x,S,E,I,z,O,$,G,W,Q,oe,ce,xe){const fe=24*r,be=12*r,Ee=48*r;return this.int16[fe+0]=a,this.int16[fe+1]=h,this.uint16[fe+2]=p,this.uint16[fe+3]=v,this.uint32[be+2]=x,this.uint32[be+3]=S,this.uint32[be+4]=E,this.uint16[fe+10]=I,this.uint16[fe+11]=z,this.uint16[fe+12]=O,this.float32[be+7]=$,this.float32[be+8]=G,this.uint8[Ee+36]=W,this.uint8[Ee+37]=Q,this.uint8[Ee+38]=oe,this.uint32[be+10]=ce,this.int16[fe+22]=xe,r}}C.prototype.bytesPerElement=48,it("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",C);class T extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,h,p,v,x,S,E,I,z,O,$,G,W,Q,oe,ce,xe,fe,be,Ee,Re,rt,lt,tt,Je,Ze,st){const He=this.length;return this.resize(He+1),this.emplace(He,r,a,h,p,v,x,S,E,I,z,O,$,G,W,Q,oe,ce,xe,fe,be,Ee,Re,rt,lt,tt,Je,Ze,st)}emplace(r,a,h,p,v,x,S,E,I,z,O,$,G,W,Q,oe,ce,xe,fe,be,Ee,Re,rt,lt,tt,Je,Ze,st,He){const Ve=32*r,vt=16*r;return this.int16[Ve+0]=a,this.int16[Ve+1]=h,this.int16[Ve+2]=p,this.int16[Ve+3]=v,this.int16[Ve+4]=x,this.int16[Ve+5]=S,this.int16[Ve+6]=E,this.int16[Ve+7]=I,this.uint16[Ve+8]=z,this.uint16[Ve+9]=O,this.uint16[Ve+10]=$,this.uint16[Ve+11]=G,this.uint16[Ve+12]=W,this.uint16[Ve+13]=Q,this.uint16[Ve+14]=oe,this.uint16[Ve+15]=ce,this.uint16[Ve+16]=xe,this.uint16[Ve+17]=fe,this.uint16[Ve+18]=be,this.uint16[Ve+19]=Ee,this.uint16[Ve+20]=Re,this.uint16[Ve+21]=rt,this.uint16[Ve+22]=lt,this.uint32[vt+12]=tt,this.float32[vt+13]=Je,this.float32[vt+14]=Ze,this.uint16[Ve+30]=st,this.uint16[Ve+31]=He,r}}T.prototype.bytesPerElement=64,it("StructArrayLayout8i15ui1ul2f2ui64",T);class P extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.float32[1*r+0]=a,r}}P.prototype.bytesPerElement=4,it("StructArrayLayout1f4",P);class M extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,r,a,h)}emplace(r,a,h,p){const v=3*r;return this.uint16[6*r+0]=a,this.float32[v+1]=h,this.float32[v+2]=p,r}}M.prototype.bytesPerElement=12,it("StructArrayLayout1ui2f12",M);class R extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,r,a,h)}emplace(r,a,h,p){const v=4*r;return this.uint32[2*r+0]=a,this.uint16[v+2]=h,this.uint16[v+3]=p,r}}R.prototype.bytesPerElement=8,it("StructArrayLayout1ul2ui8",R);class L extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a){const h=this.length;return this.resize(h+1),this.emplace(h,r,a)}emplace(r,a,h){const p=2*r;return this.uint16[p+0]=a,this.uint16[p+1]=h,r}}L.prototype.bytesPerElement=4,it("StructArrayLayout2ui4",L);class U extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.uint16[1*r+0]=a,r}}U.prototype.bytesPerElement=2,it("StructArrayLayout1ui2",U);class ee extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,r,a,h,p)}emplace(r,a,h,p,v){const x=4*r;return this.float32[x+0]=a,this.float32[x+1]=h,this.float32[x+2]=p,this.float32[x+3]=v,r}}ee.prototype.bytesPerElement=16,it("StructArrayLayout4f16",ee);class J extends Ao{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new D(this.anchorPointX,this.anchorPointY)}}J.prototype.size=20;class re extends i{get(r){return new J(this,r)}}it("CollisionBoxArray",re);class Y extends Ao{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Y.prototype.size=48;class ye extends C{get(r){return new Y(this,r)}}it("PlacedSymbolArray",ye);class Te extends Ao{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Te.prototype.size=64;class ue extends T{get(r){return new Te(this,r)}}it("SymbolInstanceArray",ue);class ve extends P{getoffsetX(r){return this.float32[1*r+0]}}it("GlyphOffsetArray",ve);class Pe extends Ml{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}it("SymbolLineVertexArray",Pe);class Ae extends Ao{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ae.prototype.size=12;class ze extends M{get(r){return new Ae(this,r)}}it("TextAnchorOffsetArray",ze);class Be extends Ao{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Be.prototype.size=8;class Fe extends R{get(r){return new Be(this,r)}}it("FeatureIndexArray",Fe);class je extends Il{}class at extends Il{}class Vt extends Il{}class Qe extends Oh{}class Ct extends Fh{}class ct extends wa{}class rn extends Nh{}class Nt extends Bh{}class Rt extends Jt{}class $t extends y{}class Rn extends u{}class ln extends g{}class dr extends _{}class Yn extends L{}const Vn=Cn([{name:"a_pos",components:2,type:"Int16"}],4),{members:di}=Vn;class dn{constructor(r=[]){this.segments=r}prepareSegment(r,a,h,p){let v=this.segments[this.segments.length-1];return r>dn.MAX_VERTEX_ARRAY_LENGTH&&_t(`Max vertices per segment is ${dn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!v||v.vertexLength+r>dn.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p)&&(v={vertexOffset:a.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(v.sortKey=p),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const r of this.segments)for(const a in r.vaos)r.vaos[a].destroy()}static simpleSegment(r,a,h,p){return new dn([{vertexOffset:r,primitiveOffset:a,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function us(o,r){return 256*(o=Se(Math.floor(o),0,255))+Se(Math.floor(r),0,255)}dn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,it("SegmentVector",dn);const cs=Cn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ao={exports:{}},Io={exports:{}};Io.exports=function(o,r){var a,h,p,v,x,S,E,I;for(h=o.length-(a=3&o.length),p=r,x=3432918353,S=461845907,I=0;I<h;)E=255&o.charCodeAt(I)|(255&o.charCodeAt(++I))<<8|(255&o.charCodeAt(++I))<<16|(255&o.charCodeAt(++I))<<24,++I,p=27492+(65535&(v=5*(65535&(p=(p^=E=(65535&(E=(E=(65535&E)*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*S+(((E>>>16)*S&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(E=0,a){case 3:E^=(255&o.charCodeAt(I+2))<<16;case 2:E^=(255&o.charCodeAt(I+1))<<8;case 1:p^=E=(65535&(E=(E=(65535&(E^=255&o.charCodeAt(I)))*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*S+(((E>>>16)*S&65535)<<16)&4294967295}return p^=o.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var ba=Io.exports,wr={exports:{}};wr.exports=function(o,r){for(var a,h=o.length,p=r^h,v=0;h>=4;)a=1540483477*(65535&(a=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(a>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:p^=(255&o.charCodeAt(v+2))<<16;case 2:p^=(255&o.charCodeAt(v+1))<<8;case 1:p=1540483477*(65535&(p^=255&o.charCodeAt(v)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var fr=ba,Ir=wr.exports;ao.exports=fr,ao.exports.murmur3=fr,ao.exports.murmur2=Ir;var Mo=b(ao.exports);class Ln{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,a,h,p){this.ids.push(Qn(r)),this.positions.push(a,h,p)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=Qn(r);let h=0,p=this.ids.length-1;for(;h<p;){const x=h+p>>1;this.ids[x]>=a?p=x:h=x+1}const v=[];for(;this.ids[h]===a;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(r,a){const h=new Float64Array(r.ids),p=new Uint32Array(r.positions);return Zr(h,p,0,h.length-1),a&&a.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(r){const a=new Ln;return a.ids=r.ids,a.positions=r.positions,a.indexed=!0,a}}function Qn(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:Mo(String(o))}function Zr(o,r,a,h){for(;a<h;){const p=o[a+h>>1];let v=a-1,x=h+1;for(;;){do v++;while(o[v]<p);do x--;while(o[x]>p);if(v>=x)break;On(o,v,x),On(r,3*v,3*x),On(r,3*v+1,3*x+1),On(r,3*v+2,3*x+2)}x-a<h-x?(Zr(o,r,a,x),a=x+1):(Zr(o,r,x+1,h),h=x)}}function On(o,r,a){const h=o[r];o[r]=o[a],o[a]=h}it("FeaturePositionMap",Ln);class Do{constructor(r,a){this.gl=r.gl,this.location=a}}class ju extends Do{constructor(r,a){super(r,a),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class fp extends Do{constructor(r,a){super(r,a),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class pp extends Do{constructor(r,a){super(r,a),this.current=nn.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const Wy=new Float32Array(16);function Vh(o){return[us(255*o.r,255*o.g),us(255*o.b,255*o.a)]}class hs{constructor(r,a,h){this.value=r,this.uniformNames=a.map(p=>`u_${p}`),this.type=h}setUniform(r,a,h){r.set(h.constantOr(this.value))}getBinding(r,a,h){return this.type==="color"?new pp(r,a):new ju(r,a)}}class zo{constructor(r,a){this.uniformNames=a.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=r.tlbr}setUniform(r,a,h,p){const v=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&r.set(v)}getBinding(r,a,h){return h.substr(0,9)==="u_pattern"?new fp(r,a):new ju(r,a)}}class ds{constructor(r,a,h,p){this.expression=r,this.type=h,this.maxValue=0,this.paintVertexAttributes=a.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(r,a,h,p,v){const x=this.paintVertexArray.length,S=this.expression.evaluate(new hn(0),a,{},p,[],v);this.paintVertexArray.resize(r),this._setPaintValue(x,r,S)}updatePaintArray(r,a,h,p){const v=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(r,a,v)}_setPaintValue(r,a,h){if(this.type==="color"){const p=Vh(h);for(let v=r;v<a;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=r;p<a;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class zi{constructor(r,a,h,p,v,x){this.expression=r,this.uniformNames=a.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=a.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(r,a,h,p,v){const x=this.expression.evaluate(new hn(this.zoom),a,{},p,[],v),S=this.expression.evaluate(new hn(this.zoom+1),a,{},p,[],v),E=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(E,r,x,S)}updatePaintArray(r,a,h,p){const v=this.expression.evaluate({zoom:this.zoom},h,p),x=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(r,a,v,x)}_setPaintValue(r,a,h,p){if(this.type==="color"){const v=Vh(h),x=Vh(p);for(let S=r;S<a;S++)this.paintVertexArray.emplace(S,v[0],v[1],x[0],x[1])}else{for(let v=r;v<a;v++)this.paintVertexArray.emplace(v,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,a){const h=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,p=Se(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);r.set(p)}getBinding(r,a,h){return new ju(r,a)}}class fs{constructor(r,a,h,p,v,x){this.expression=r,this.type=a,this.useIntegerZoom=h,this.zoom=p,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(r,a,h){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(p,r,a.patterns&&a.patterns[this.layerId],h)}updatePaintArray(r,a,h,p,v){this._setPaintValues(r,a,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(r,a,h,p){if(!p||!h)return;const{min:v,mid:x,max:S}=h,E=p[v],I=p[x],z=p[S];if(E&&I&&z)for(let O=r;O<a;O++)this.zoomInPaintVertexArray.emplace(O,I.tl[0],I.tl[1],I.br[0],I.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],I.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(O,I.tl[0],I.tl[1],I.br[0],I.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],I.pixelRatio,z.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,cs.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,cs.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class $h{constructor(r,a,h){this.binders={},this._buffers=[];const p=[];for(const v in r.paint._values){if(!h(v))continue;const x=r.paint.get(v);if(!(x instanceof kr&&ma(x.property.specification)))continue;const S=SD(v,r.type),E=x.value,I=x.property.specification.type,z=x.property.useIntegerZoom,O=x.property.specification["property-type"],$=O==="cross-faded"||O==="cross-faded-data-driven";if(E.kind==="constant")this.binders[v]=$?new zo(E.value,S):new hs(E.value,S,I),p.push(`/u_${v}`);else if(E.kind==="source"||$){const G=q1(v,I,"source");this.binders[v]=$?new fs(E,I,z,a,G,r.id):new ds(E,S,I,G),p.push(`/a_${v}`)}else{const G=q1(v,I,"composite");this.binders[v]=new zi(E,S,I,z,a,G),p.push(`/z_${v}`)}}this.cacheKey=p.sort().join("")}getMaxValue(r){const a=this.binders[r];return a instanceof ds||a instanceof zi?a.maxValue:0}populatePaintArrays(r,a,h,p,v){for(const x in this.binders){const S=this.binders[x];(S instanceof ds||S instanceof zi||S instanceof fs)&&S.populatePaintArray(r,a,h,p,v)}}setConstantPatternPositions(r,a){for(const h in this.binders){const p=this.binders[h];p instanceof zo&&p.setConstantPatternPositions(r,a)}}updatePaintArrays(r,a,h,p,v){let x=!1;for(const S in r){const E=a.getPositions(S);for(const I of E){const z=h.feature(I.index);for(const O in this.binders){const $=this.binders[O];if(($ instanceof ds||$ instanceof zi||$ instanceof fs)&&$.expression.isStateDependent===!0){const G=p.paint.get(O);$.expression=G.value,$.updatePaintArray(I.start,I.end,z,r[S],v),x=!0}}}}return x}defines(){const r=[];for(const a in this.binders){const h=this.binders[a];(h instanceof hs||h instanceof zo)&&r.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return r}getBinderAttributes(){const r=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof ds||h instanceof zi)for(let p=0;p<h.paintVertexAttributes.length;p++)r.push(h.paintVertexAttributes[p].name);else if(h instanceof fs)for(let p=0;p<cs.members.length;p++)r.push(cs.members[p].name)}return r}getBinderUniforms(){const r=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof hs||h instanceof zo||h instanceof zi)for(const p of h.uniformNames)r.push(p)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,a){const h=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof hs||v instanceof zo||v instanceof zi){for(const x of v.uniformNames)if(a[x]){const S=v.getBinding(r,a[x],x);h.push({name:x,property:p,binding:S})}}}return h}setUniforms(r,a,h,p){for(const{name:v,property:x,binding:S}of a)this.binders[x].setUniform(S,p,h.get(x),v)}updatePaintBuffers(r){this._buffers=[];for(const a in this.binders){const h=this.binders[a];if(r&&h instanceof fs){const p=r.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof ds||h instanceof zi)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(r){for(const a in this.binders){const h=this.binders[a];(h instanceof ds||h instanceof zi||h instanceof fs)&&h.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const a=this.binders[r];(a instanceof ds||a instanceof zi||a instanceof fs)&&a.destroy()}}}class Rs{constructor(r,a,h=()=>!0){this.programConfigurations={};for(const p of r)this.programConfigurations[p.id]=new $h(p,a,h);this.needsUpload=!1,this._featureMap=new Ln,this._bufferOffset=0}populatePaintArrays(r,a,h,p,v,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(r,a,p,v,x);a.id!==void 0&&this._featureMap.add(a.id,h,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,a,h,p){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(r,this._featureMap,a,v,p)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function SD(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function q1(o,r,a){const h={color:{source:wa,composite:ee},number:{source:P,composite:wa}},p=function(v){return{"line-pattern":{source:rn,composite:rn},"fill-pattern":{source:rn,composite:rn},"fill-extrusion-pattern":{source:rn,composite:rn}}[v]}(o);return p&&p[a]||h[r][a]}it("ConstantBinder",hs),it("CrossFadedConstantBinder",zo),it("SourceExpressionBinder",ds),it("CrossFadedCompositeBinder",fs),it("CompositeExpressionBinder",zi),it("ProgramConfiguration",$h,{omit:["_buffers"]}),it("ProgramConfigurationSet",Rs);const Hn=8192,Hy=Math.pow(2,14)-1,G1=-Hy-1;function Dl(o){const r=Hn/o.extent,a=o.loadGeometry();for(let h=0;h<a.length;h++){const p=a[h];for(let v=0;v<p.length;v++){const x=p[v],S=Math.round(x.x*r),E=Math.round(x.y*r);x.x=Se(S,G1,Hy),x.y=Se(E,G1,Hy),(S<x.x||S>x.x+1||E<x.y||E>x.y+1)&&_t("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function zl(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?Dl(o):[]}}function mp(o,r,a,h,p){o.emplaceBack(2*r+(h+1)/2,2*a+(p+1)/2)}class Ky{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new at,this.indexArray=new dr,this.segments=new dn,this.programConfigurations=new Rs(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,h){const p=this.layers[0],v=[];let x=null,S=!1;p.type==="circle"&&(x=p.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:E,id:I,index:z,sourceLayerIndex:O}of r){const $=this.layers[0]._featureFilter.needGeometry,G=zl(E,$);if(!this.layers[0]._featureFilter.filter(new hn(this.zoom),G,h))continue;const W=S?x.evaluate(G,{},h):void 0,Q={id:I,properties:E.properties,type:E.type,sourceLayerIndex:O,index:z,geometry:$?G.geometry:Dl(E),patterns:{},sortKey:W};v.push(Q)}S&&v.sort((E,I)=>E.sortKey-I.sortKey);for(const E of v){const{geometry:I,index:z,sourceLayerIndex:O}=E,$=r[z].feature;this.addFeature(E,I,z,h),a.featureIndex.insert($,I,z,O,this.index)}}update(r,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,di),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,a,h,p){for(const v of a)for(const x of v){const S=x.x,E=x.y;if(S<0||S>=Hn||E<0||E>=Hn)continue;const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),z=I.vertexLength;mp(this.layoutVertexArray,S,E,-1,-1),mp(this.layoutVertexArray,S,E,1,-1),mp(this.layoutVertexArray,S,E,1,1),mp(this.layoutVertexArray,S,E,-1,1),this.indexArray.emplaceBack(z,z+1,z+2),this.indexArray.emplaceBack(z,z+3,z+2),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,{},p)}}function Z1(o,r){for(let a=0;a<o.length;a++)if(Uu(r,o[a]))return!0;for(let a=0;a<r.length;a++)if(Uu(o,r[a]))return!0;return!!Xy(o,r)}function CD(o,r,a){return!!Uu(o,r)||!!Yy(r,o,a)}function W1(o,r){if(o.length===1)return K1(r,o[0]);for(let a=0;a<r.length;a++){const h=r[a];for(let p=0;p<h.length;p++)if(Uu(o,h[p]))return!0}for(let a=0;a<o.length;a++)if(K1(r,o[a]))return!0;for(let a=0;a<r.length;a++)if(Xy(o,r[a]))return!0;return!1}function TD(o,r,a){if(o.length>1){if(Xy(o,r))return!0;for(let h=0;h<r.length;h++)if(Yy(r[h],o,a))return!0}for(let h=0;h<o.length;h++)if(Yy(o[h],r,a))return!0;return!1}function Xy(o,r){if(o.length===0||r.length===0)return!1;for(let a=0;a<o.length-1;a++){const h=o[a],p=o[a+1];for(let v=0;v<r.length-1;v++)if(ED(h,p,r[v],r[v+1]))return!0}return!1}function ED(o,r,a,h){return Lt(o,a,h)!==Lt(r,a,h)&&Lt(o,r,a)!==Lt(o,r,h)}function Yy(o,r,a){const h=a*a;if(r.length===1)return o.distSqr(r[0])<h;for(let p=1;p<r.length;p++)if(H1(o,r[p-1],r[p])<h)return!0;return!1}function H1(o,r,a){const h=r.distSqr(a);if(h===0)return o.distSqr(r);const p=((o.x-r.x)*(a.x-r.x)+(o.y-r.y)*(a.y-r.y))/h;return o.distSqr(p<0?r:p>1?a:a.sub(r)._mult(p)._add(r))}function K1(o,r){let a,h,p,v=!1;for(let x=0;x<o.length;x++){a=o[x];for(let S=0,E=a.length-1;S<a.length;E=S++)h=a[S],p=a[E],h.y>r.y!=p.y>r.y&&r.x<(p.x-h.x)*(r.y-h.y)/(p.y-h.y)+h.x&&(v=!v)}return v}function Uu(o,r){let a=!1;for(let h=0,p=o.length-1;h<o.length;p=h++){const v=o[h],x=o[p];v.y>r.y!=x.y>r.y&&r.x<(x.x-v.x)*(r.y-v.y)/(x.y-v.y)+v.x&&(a=!a)}return a}function PD(o,r,a){const h=a[0],p=a[2];if(o.x<h.x&&r.x<h.x||o.x>p.x&&r.x>p.x||o.y<h.y&&r.y<h.y||o.y>p.y&&r.y>p.y)return!1;const v=Lt(o,r,a[0]);return v!==Lt(o,r,a[1])||v!==Lt(o,r,a[2])||v!==Lt(o,r,a[3])}function jh(o,r,a){const h=r.paint.get(o).value;return h.kind==="constant"?h.value:a.programConfigurations.get(r.id).getMaxValue(o)}function gp(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function yp(o,r,a,h,p){if(!r[0]&&!r[1])return o;const v=D.convert(r)._mult(p);a==="viewport"&&v._rotate(-h);const x=[];for(let S=0;S<o.length;S++)x.push(o[S].sub(v));return x}let X1,Y1;it("CircleBucket",Ky,{omit:["layers"]});var AD={get paint(){return Y1=Y1||new Bn({"circle-radius":new St(le.paint_circle["circle-radius"]),"circle-color":new St(le.paint_circle["circle-color"]),"circle-blur":new St(le.paint_circle["circle-blur"]),"circle-opacity":new St(le.paint_circle["circle-opacity"]),"circle-translate":new ft(le.paint_circle["circle-translate"]),"circle-translate-anchor":new ft(le.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ft(le.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ft(le.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new St(le.paint_circle["circle-stroke-width"]),"circle-stroke-color":new St(le.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new St(le.paint_circle["circle-stroke-opacity"])})},get layout(){return X1=X1||new Bn({"circle-sort-key":new St(le.layout_circle["circle-sort-key"])})}},Wr=1e-6,qu=typeof Float32Array<"u"?Float32Array:Array;function Qy(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Q1(o,r,a){var h=r[0],p=r[1],v=r[2],x=r[3],S=r[4],E=r[5],I=r[6],z=r[7],O=r[8],$=r[9],G=r[10],W=r[11],Q=r[12],oe=r[13],ce=r[14],xe=r[15],fe=a[0],be=a[1],Ee=a[2],Re=a[3];return o[0]=fe*h+be*S+Ee*O+Re*Q,o[1]=fe*p+be*E+Ee*$+Re*oe,o[2]=fe*v+be*I+Ee*G+Re*ce,o[3]=fe*x+be*z+Ee*W+Re*xe,o[4]=(fe=a[4])*h+(be=a[5])*S+(Ee=a[6])*O+(Re=a[7])*Q,o[5]=fe*p+be*E+Ee*$+Re*oe,o[6]=fe*v+be*I+Ee*G+Re*ce,o[7]=fe*x+be*z+Ee*W+Re*xe,o[8]=(fe=a[8])*h+(be=a[9])*S+(Ee=a[10])*O+(Re=a[11])*Q,o[9]=fe*p+be*E+Ee*$+Re*oe,o[10]=fe*v+be*I+Ee*G+Re*ce,o[11]=fe*x+be*z+Ee*W+Re*xe,o[12]=(fe=a[12])*h+(be=a[13])*S+(Ee=a[14])*O+(Re=a[15])*Q,o[13]=fe*p+be*E+Ee*$+Re*oe,o[14]=fe*v+be*I+Ee*G+Re*ce,o[15]=fe*x+be*z+Ee*W+Re*xe,o}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var Uh,kD=Q1;function vp(o,r,a){var h=r[0],p=r[1],v=r[2],x=r[3];return o[0]=a[0]*h+a[4]*p+a[8]*v+a[12]*x,o[1]=a[1]*h+a[5]*p+a[9]*v+a[13]*x,o[2]=a[2]*h+a[6]*p+a[10]*v+a[14]*x,o[3]=a[3]*h+a[7]*p+a[11]*v+a[15]*x,o}Uh=new qu(4),qu!=Float32Array&&(Uh[0]=0,Uh[1]=0,Uh[2]=0,Uh[3]=0);class ID extends Di{constructor(r){super(r,AD)}createBucket(r){return new Ky(r)}queryRadius(r){const a=r;return jh("circle-radius",this,a)+jh("circle-stroke-width",this,a)+gp(this.paint.get("circle-translate"))}queryIntersectsFeature(r,a,h,p,v,x,S,E){const I=yp(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),z=this.paint.get("circle-radius").evaluate(a,h)+this.paint.get("circle-stroke-width").evaluate(a,h),O=this.paint.get("circle-pitch-alignment")==="map",$=O?I:function(W,Q){return W.map(oe=>J1(oe,Q))}(I,E),G=O?z*S:z;for(const W of p)for(const Q of W){const oe=O?Q:J1(Q,E);let ce=G;const xe=vp([],[Q.x,Q.y,0,1],E);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ce*=xe[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ce*=x.cameraToCenterDistance/xe[3]),CD($,oe,ce))return!0}return!1}}function J1(o,r){const a=vp([],[o.x,o.y,0,1],r);return new D(a[0]/a[3],a[1]/a[3])}class eb extends Ky{}let tb;it("HeatmapBucket",eb,{omit:["layers"]});var MD={get paint(){return tb=tb||new Bn({"heatmap-radius":new St(le.paint_heatmap["heatmap-radius"]),"heatmap-weight":new St(le.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ft(le.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Rh(le.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ft(le.paint_heatmap["heatmap-opacity"])})}};function Jy(o,{width:r,height:a},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==r*a*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${r*a*h}`)}else p=new Uint8Array(r*a*h);return o.width=r,o.height=a,o.data=p,o}function nb(o,{width:r,height:a},h){if(r===o.width&&a===o.height)return;const p=Jy({},{width:r,height:a},h);ev(o,p,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,r),height:Math.min(o.height,a)},h),o.width=r,o.height=a,o.data=p.data}function ev(o,r,a,h,p,v){if(p.width===0||p.height===0)return r;if(p.width>o.width||p.height>o.height||a.x>o.width-p.width||a.y>o.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>r.width||p.height>r.height||h.x>r.width-p.width||h.y>r.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,S=r.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<p.height;E++){const I=((a.y+E)*o.width+a.x)*v,z=((h.y+E)*r.width+h.x)*v;for(let O=0;O<p.width*v;O++)S[z+O]=x[I+O]}return r}class qh{constructor(r,a){Jy(this,r,1,a)}resize(r){nb(this,r,1)}clone(){return new qh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,a,h,p,v){ev(r,a,h,p,v,1)}}class qi{constructor(r,a){Jy(this,r,4,a)}resize(r){nb(this,r,4)}replace(r,a){a?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new qi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,a,h,p,v){ev(r,a,h,p,v,4)}}function rb(o){const r={},a=o.resolution||256,h=o.clips?o.clips.length:1,p=o.image||new qi({width:a,height:h});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const v=(x,S,E)=>{r[o.evaluationKey]=E;const I=o.expression.evaluate(r);p.data[x+S+0]=Math.floor(255*I.r/I.a),p.data[x+S+1]=Math.floor(255*I.g/I.a),p.data[x+S+2]=Math.floor(255*I.b/I.a),p.data[x+S+3]=Math.floor(255*I.a)};if(o.clips)for(let x=0,S=0;x<h;++x,S+=4*a)for(let E=0,I=0;E<a;E++,I+=4){const z=E/(a-1),{start:O,end:$}=o.clips[x];v(S,I,O*(1-z)+$*z)}else for(let x=0,S=0;x<a;x++,S+=4)v(0,S,x/(a-1));return p}it("AlphaImage",qh),it("RGBAImage",qi);class DD extends Di{createBucket(r){return new eb(r)}constructor(r){super(r,MD),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=rb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let ib;var zD={get paint(){return ib=ib||new Bn({"hillshade-illumination-direction":new ft(le.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ft(le.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ft(le.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ft(le.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ft(le.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ft(le.paint_hillshade["hillshade-accent-color"])})}};class RD extends Di{constructor(r){super(r,zD)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const LD=Cn([{name:"a_pos",components:2,type:"Int16"}],4),{members:OD}=LD;var tv={exports:{}};function _p(o,r,a){a=a||2;var h,p,v,x,S,E,I,z=r&&r.length,O=z?r[0]*a:o.length,$=sb(o,0,O,a,!0),G=[];if(!$||$.next===$.prev)return G;if(z&&($=function(Q,oe,ce,xe){var fe,be,Ee,Re=[];for(fe=0,be=oe.length;fe<be;fe++)(Ee=sb(Q,oe[fe]*xe,fe<be-1?oe[fe+1]*xe:Q.length,xe,!1))===Ee.next&&(Ee.steiner=!0),Re.push(qD(Ee));for(Re.sort($D),fe=0;fe<Re.length;fe++)ce=jD(Re[fe],ce);return ce}(o,r,$,a)),o.length>80*a){h=v=o[0],p=x=o[1];for(var W=a;W<O;W+=a)(S=o[W])<h&&(h=S),(E=o[W+1])<p&&(p=E),S>v&&(v=S),E>x&&(x=E);I=(I=Math.max(v-h,x-p))!==0?32767/I:0}return Gh($,G,a,h,p,I,0),G}function sb(o,r,a,h,p){var v,x;if(p===iv(o,r,a,h)>0)for(v=r;v<a;v+=h)x=lb(v,o[v],o[v+1],x);else for(v=a-h;v>=r;v-=h)x=lb(v,o[v],o[v+1],x);return x&&xp(x,x.next)&&(Wh(x),x=x.next),x}function Rl(o,r){if(!o)return o;r||(r=o);var a,h=o;do if(a=!1,h.steiner||!xp(h,h.next)&&$n(h.prev,h,h.next)!==0)h=h.next;else{if(Wh(h),(h=r=h.prev)===h.next)break;a=!0}while(a||h!==r);return r}function Gh(o,r,a,h,p,v,x){if(o){!x&&v&&function(z,O,$,G){var W=z;do W.z===0&&(W.z=nv(W.x,W.y,O,$,G)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next;while(W!==z);W.prevZ.nextZ=null,W.prevZ=null,function(Q){var oe,ce,xe,fe,be,Ee,Re,rt,lt=1;do{for(ce=Q,Q=null,be=null,Ee=0;ce;){for(Ee++,xe=ce,Re=0,oe=0;oe<lt&&(Re++,xe=xe.nextZ);oe++);for(rt=lt;Re>0||rt>0&&xe;)Re!==0&&(rt===0||!xe||ce.z<=xe.z)?(fe=ce,ce=ce.nextZ,Re--):(fe=xe,xe=xe.nextZ,rt--),be?be.nextZ=fe:Q=fe,fe.prevZ=be,be=fe;ce=xe}be.nextZ=null,lt*=2}while(Ee>1)}(W)}(o,h,p,v);for(var S,E,I=o;o.prev!==o.next;)if(S=o.prev,E=o.next,v?ND(o,h,p,v):FD(o))r.push(S.i/a|0),r.push(o.i/a|0),r.push(E.i/a|0),Wh(o),o=E.next,I=E.next;else if((o=E)===I){x?x===1?Gh(o=BD(Rl(o),r,a),r,a,h,p,v,2):x===2&&VD(o,r,a,h,p,v):Gh(Rl(o),r,a,h,p,v,1);break}}}function FD(o){var r=o.prev,a=o,h=o.next;if($n(r,a,h)>=0)return!1;for(var p=r.x,v=a.x,x=h.x,S=r.y,E=a.y,I=h.y,z=p<v?p<x?p:x:v<x?v:x,O=S<E?S<I?S:I:E<I?E:I,$=p>v?p>x?p:x:v>x?v:x,G=S>E?S>I?S:I:E>I?E:I,W=h.next;W!==r;){if(W.x>=z&&W.x<=$&&W.y>=O&&W.y<=G&&Gu(p,S,v,E,x,I,W.x,W.y)&&$n(W.prev,W,W.next)>=0)return!1;W=W.next}return!0}function ND(o,r,a,h){var p=o.prev,v=o,x=o.next;if($n(p,v,x)>=0)return!1;for(var S=p.x,E=v.x,I=x.x,z=p.y,O=v.y,$=x.y,G=S<E?S<I?S:I:E<I?E:I,W=z<O?z<$?z:$:O<$?O:$,Q=S>E?S>I?S:I:E>I?E:I,oe=z>O?z>$?z:$:O>$?O:$,ce=nv(G,W,r,a,h),xe=nv(Q,oe,r,a,h),fe=o.prevZ,be=o.nextZ;fe&&fe.z>=ce&&be&&be.z<=xe;){if(fe.x>=G&&fe.x<=Q&&fe.y>=W&&fe.y<=oe&&fe!==p&&fe!==x&&Gu(S,z,E,O,I,$,fe.x,fe.y)&&$n(fe.prev,fe,fe.next)>=0||(fe=fe.prevZ,be.x>=G&&be.x<=Q&&be.y>=W&&be.y<=oe&&be!==p&&be!==x&&Gu(S,z,E,O,I,$,be.x,be.y)&&$n(be.prev,be,be.next)>=0))return!1;be=be.nextZ}for(;fe&&fe.z>=ce;){if(fe.x>=G&&fe.x<=Q&&fe.y>=W&&fe.y<=oe&&fe!==p&&fe!==x&&Gu(S,z,E,O,I,$,fe.x,fe.y)&&$n(fe.prev,fe,fe.next)>=0)return!1;fe=fe.prevZ}for(;be&&be.z<=xe;){if(be.x>=G&&be.x<=Q&&be.y>=W&&be.y<=oe&&be!==p&&be!==x&&Gu(S,z,E,O,I,$,be.x,be.y)&&$n(be.prev,be,be.next)>=0)return!1;be=be.nextZ}return!0}function BD(o,r,a){var h=o;do{var p=h.prev,v=h.next.next;!xp(p,v)&&ob(p,h,h.next,v)&&Zh(p,v)&&Zh(v,p)&&(r.push(p.i/a|0),r.push(h.i/a|0),r.push(v.i/a|0),Wh(h),Wh(h.next),h=o=v),h=h.next}while(h!==o);return Rl(h)}function VD(o,r,a,h,p,v){var x=o;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&GD(x,S)){var E=ab(x,S);return x=Rl(x,x.next),E=Rl(E,E.next),Gh(x,r,a,h,p,v,0),void Gh(E,r,a,h,p,v,0)}S=S.next}x=x.next}while(x!==o)}function $D(o,r){return o.x-r.x}function jD(o,r){var a=function(p,v){var x,S=v,E=p.x,I=p.y,z=-1/0;do{if(I<=S.y&&I>=S.next.y&&S.next.y!==S.y){var O=S.x+(I-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(O<=E&&O>z&&(z=O,x=S.x<S.next.x?S:S.next,O===E))return x}S=S.next}while(S!==v);if(!x)return null;var $,G=x,W=x.x,Q=x.y,oe=1/0;S=x;do E>=S.x&&S.x>=W&&E!==S.x&&Gu(I<Q?E:z,I,W,Q,I<Q?z:E,I,S.x,S.y)&&($=Math.abs(I-S.y)/(E-S.x),Zh(S,p)&&($<oe||$===oe&&(S.x>x.x||S.x===x.x&&UD(x,S)))&&(x=S,oe=$)),S=S.next;while(S!==G);return x}(o,r);if(!a)return r;var h=ab(a,o);return Rl(h,h.next),Rl(a,a.next)}function UD(o,r){return $n(o.prev,o,r.prev)<0&&$n(r.next,o,o.next)<0}function nv(o,r,a,h,p){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-a)*p|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-h)*p|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function qD(o){var r=o,a=o;do(r.x<a.x||r.x===a.x&&r.y<a.y)&&(a=r),r=r.next;while(r!==o);return a}function Gu(o,r,a,h,p,v,x,S){return(p-x)*(r-S)>=(o-x)*(v-S)&&(o-x)*(h-S)>=(a-x)*(r-S)&&(a-x)*(v-S)>=(p-x)*(h-S)}function GD(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(a,h){var p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==h.i&&p.next.i!==h.i&&ob(p,p.next,a,h))return!0;p=p.next}while(p!==a);return!1}(o,r)&&(Zh(o,r)&&Zh(r,o)&&function(a,h){var p=a,v=!1,x=(a.x+h.x)/2,S=(a.y+h.y)/2;do p.y>S!=p.next.y>S&&p.next.y!==p.y&&x<(p.next.x-p.x)*(S-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==a);return v}(o,r)&&($n(o.prev,o,r.prev)||$n(o,r.prev,r))||xp(o,r)&&$n(o.prev,o,o.next)>0&&$n(r.prev,r,r.next)>0)}function $n(o,r,a){return(r.y-o.y)*(a.x-r.x)-(r.x-o.x)*(a.y-r.y)}function xp(o,r){return o.x===r.x&&o.y===r.y}function ob(o,r,a,h){var p=bp($n(o,r,a)),v=bp($n(o,r,h)),x=bp($n(a,h,o)),S=bp($n(a,h,r));return p!==v&&x!==S||!(p!==0||!wp(o,a,r))||!(v!==0||!wp(o,h,r))||!(x!==0||!wp(a,o,h))||!(S!==0||!wp(a,r,h))}function wp(o,r,a){return r.x<=Math.max(o.x,a.x)&&r.x>=Math.min(o.x,a.x)&&r.y<=Math.max(o.y,a.y)&&r.y>=Math.min(o.y,a.y)}function bp(o){return o>0?1:o<0?-1:0}function Zh(o,r){return $n(o.prev,o,o.next)<0?$n(o,r,o.next)>=0&&$n(o,o.prev,r)>=0:$n(o,r,o.prev)<0||$n(o,o.next,r)<0}function ab(o,r){var a=new rv(o.i,o.x,o.y),h=new rv(r.i,r.x,r.y),p=o.next,v=r.prev;return o.next=r,r.prev=o,a.next=p,p.prev=a,h.next=a,a.prev=h,v.next=h,h.prev=v,h}function lb(o,r,a,h){var p=new rv(o,r,a);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function Wh(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function rv(o,r,a){this.i=o,this.x=r,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function iv(o,r,a,h){for(var p=0,v=r,x=a-h;v<a;v+=h)p+=(o[x]-o[v])*(o[v+1]+o[x+1]),x=v;return p}tv.exports=_p,tv.exports.default=_p,_p.deviation=function(o,r,a,h){var p=r&&r.length,v=Math.abs(iv(o,0,p?r[0]*a:o.length,a));if(p)for(var x=0,S=r.length;x<S;x++)v-=Math.abs(iv(o,r[x]*a,x<S-1?r[x+1]*a:o.length,a));var E=0;for(x=0;x<h.length;x+=3){var I=h[x]*a,z=h[x+1]*a,O=h[x+2]*a;E+=Math.abs((o[I]-o[O])*(o[z+1]-o[I+1])-(o[I]-o[z])*(o[O+1]-o[I+1]))}return v===0&&E===0?0:Math.abs((E-v)/v)},_p.flatten=function(o){for(var r=o[0][0].length,a={vertices:[],holes:[],dimensions:r},h=0,p=0;p<o.length;p++){for(var v=0;v<o[p].length;v++)for(var x=0;x<r;x++)a.vertices.push(o[p][v][x]);p>0&&a.holes.push(h+=o[p-1].length)}return a};var ub=b(tv.exports);function ZD(o,r,a,h,p){cb(o,r,a||0,h||o.length-1,p||WD)}function cb(o,r,a,h,p){for(;h>a;){if(h-a>600){var v=h-a+1,x=r-a+1,S=Math.log(v),E=.5*Math.exp(2*S/3),I=.5*Math.sqrt(S*E*(v-E)/v)*(x-v/2<0?-1:1);cb(o,r,Math.max(a,Math.floor(r-x*E/v+I)),Math.min(h,Math.floor(r+(v-x)*E/v+I)),p)}var z=o[r],O=a,$=h;for(Hh(o,a,r),p(o[h],z)>0&&Hh(o,a,h);O<$;){for(Hh(o,O,$),O++,$--;p(o[O],z)<0;)O++;for(;p(o[$],z)>0;)$--}p(o[a],z)===0?Hh(o,a,$):Hh(o,++$,h),$<=r&&(a=$+1),r<=$&&(h=$-1)}}function Hh(o,r,a){var h=o[r];o[r]=o[a],o[a]=h}function WD(o,r){return o<r?-1:o>r?1:0}function sv(o,r){const a=o.length;if(a<=1)return[o];const h=[];let p,v;for(let x=0;x<a;x++){const S=zt(o[x]);S!==0&&(o[x].area=Math.abs(S),v===void 0&&(v=S<0),v===S<0?(p&&h.push(p),p=[o[x]]):p.push(o[x]))}if(p&&h.push(p),r>1)for(let x=0;x<h.length;x++)h[x].length<=r||(ZD(h[x],r,1,h[x].length-1,HD),h[x]=h[x].slice(0,r));return h}function HD(o,r){return r.area-o.area}function ov(o,r,a){const h=a.patternDependencies;let p=!1;for(const v of r){const x=v.paint.get(`${o}-pattern`);x.isConstant()||(p=!0);const S=x.constantOr(null);S&&(p=!0,h[S.to]=!0,h[S.from]=!0)}return p}function av(o,r,a,h,p){const v=p.patternDependencies;for(const x of r){const S=x.paint.get(`${o}-pattern`).value;if(S.kind!=="constant"){let E=S.evaluate({zoom:h-1},a,{},p.availableImages),I=S.evaluate({zoom:h},a,{},p.availableImages),z=S.evaluate({zoom:h+1},a,{},p.availableImages);E=E&&E.name?E.name:E,I=I&&I.name?I.name:I,z=z&&z.name?z.name:z,v[E]=!0,v[I]=!0,v[z]=!0,a.patterns[x.id]={min:E,mid:I,max:z}}}return a}class lv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Vt,this.indexArray=new dr,this.indexArray2=new Yn,this.programConfigurations=new Rs(r.layers,r.zoom),this.segments=new dn,this.segments2=new dn,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,h){this.hasPattern=ov("fill",this.layers,a);const p=this.layers[0].layout.get("fill-sort-key"),v=!p.isConstant(),x=[];for(const{feature:S,id:E,index:I,sourceLayerIndex:z}of r){const O=this.layers[0]._featureFilter.needGeometry,$=zl(S,O);if(!this.layers[0]._featureFilter.filter(new hn(this.zoom),$,h))continue;const G=v?p.evaluate($,{},h,a.availableImages):void 0,W={id:E,properties:S.properties,type:S.type,sourceLayerIndex:z,index:I,geometry:O?$.geometry:Dl(S),patterns:{},sortKey:G};x.push(W)}v&&x.sort((S,E)=>S.sortKey-E.sortKey);for(const S of x){const{geometry:E,index:I,sourceLayerIndex:z}=S;if(this.hasPattern){const O=av("fill",this.layers,S,this.zoom,a);this.patternFeatures.push(O)}else this.addFeature(S,E,I,h,{});a.featureIndex.insert(r[I].feature,E,I,z,this.index)}}update(r,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,h)}addFeatures(r,a,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,a,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,OD),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,a,h,p,v){for(const x of sv(a,500)){let S=0;for(const G of x)S+=G.length;const E=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),I=E.vertexLength,z=[],O=[];for(const G of x){if(G.length===0)continue;G!==x[0]&&O.push(z.length/2);const W=this.segments2.prepareSegment(G.length,this.layoutVertexArray,this.indexArray2),Q=W.vertexLength;this.layoutVertexArray.emplaceBack(G[0].x,G[0].y),this.indexArray2.emplaceBack(Q+G.length-1,Q),z.push(G[0].x),z.push(G[0].y);for(let oe=1;oe<G.length;oe++)this.layoutVertexArray.emplaceBack(G[oe].x,G[oe].y),this.indexArray2.emplaceBack(Q+oe-1,Q+oe),z.push(G[oe].x),z.push(G[oe].y);W.vertexLength+=G.length,W.primitiveLength+=G.length}const $=ub(z,O);for(let G=0;G<$.length;G+=3)this.indexArray.emplaceBack(I+$[G],I+$[G+1],I+$[G+2]);E.vertexLength+=S,E.primitiveLength+=$.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,v,p)}}let hb,db;it("FillBucket",lv,{omit:["layers","patternFeatures"]});var KD={get paint(){return db=db||new Bn({"fill-antialias":new ft(le.paint_fill["fill-antialias"]),"fill-opacity":new St(le.paint_fill["fill-opacity"]),"fill-color":new St(le.paint_fill["fill-color"]),"fill-outline-color":new St(le.paint_fill["fill-outline-color"]),"fill-translate":new ft(le.paint_fill["fill-translate"]),"fill-translate-anchor":new ft(le.paint_fill["fill-translate-anchor"]),"fill-pattern":new kl(le.paint_fill["fill-pattern"])})},get layout(){return hb=hb||new Bn({"fill-sort-key":new St(le.layout_fill["fill-sort-key"])})}};class XD extends Di{constructor(r){super(r,KD)}recalculate(r,a){super.recalculate(r,a);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new lv(r)}queryRadius(){return gp(this.paint.get("fill-translate"))}queryIntersectsFeature(r,a,h,p,v,x,S){return W1(yp(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),p)}isTileClipped(){return!0}}const YD=Cn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),QD=Cn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:JD}=YD;var Sa={},ez=A,fb=Zu;function Zu(o,r,a,h,p){this.properties={},this.extent=a,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=p,o.readFields(tz,this,r)}function tz(o,r,a){o==1?r.id=a.readVarint():o==2?function(h,p){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=p._keys[h.readVarint()],S=p._values[h.readVarint()];p.properties[x]=S}}(a,r):o==3?r.type=a.readVarint():o==4&&(r._geometry=a.pos)}function nz(o){for(var r,a,h=0,p=0,v=o.length,x=v-1;p<v;x=p++)h+=((a=o[x]).x-(r=o[p]).x)*(r.y+a.y);return h}Zu.types=["Unknown","Point","LineString","Polygon"],Zu.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,a=o.readVarint()+o.pos,h=1,p=0,v=0,x=0,S=[];o.pos<a;){if(p<=0){var E=o.readVarint();h=7&E,p=E>>3}if(p--,h===1||h===2)v+=o.readSVarint(),x+=o.readSVarint(),h===1&&(r&&S.push(r),r=[]),r.push(new ez(v,x));else{if(h!==7)throw new Error("unknown command "+h);r&&r.push(r[0].clone())}}return r&&S.push(r),S},Zu.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,a=1,h=0,p=0,v=0,x=1/0,S=-1/0,E=1/0,I=-1/0;o.pos<r;){if(h<=0){var z=o.readVarint();a=7&z,h=z>>3}if(h--,a===1||a===2)(p+=o.readSVarint())<x&&(x=p),p>S&&(S=p),(v+=o.readSVarint())<E&&(E=v),v>I&&(I=v);else if(a!==7)throw new Error("unknown command "+a)}return[x,E,S,I]},Zu.prototype.toGeoJSON=function(o,r,a){var h,p,v=this.extent*Math.pow(2,a),x=this.extent*o,S=this.extent*r,E=this.loadGeometry(),I=Zu.types[this.type];function z(G){for(var W=0;W<G.length;W++){var Q=G[W];G[W]=[360*(Q.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Q.y+S)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var O=[];for(h=0;h<E.length;h++)O[h]=E[h][0];z(E=O);break;case 2:for(h=0;h<E.length;h++)z(E[h]);break;case 3:for(E=function(G){var W=G.length;if(W<=1)return[G];for(var Q,oe,ce=[],xe=0;xe<W;xe++){var fe=nz(G[xe]);fe!==0&&(oe===void 0&&(oe=fe<0),oe===fe<0?(Q&&ce.push(Q),Q=[G[xe]]):Q.push(G[xe]))}return Q&&ce.push(Q),ce}(E),h=0;h<E.length;h++)for(p=0;p<E[h].length;p++)z(E[h][p])}E.length===1?E=E[0]:I="Multi"+I;var $={type:"Feature",geometry:{type:I,coordinates:E},properties:this.properties};return"id"in this&&($.id=this.id),$};var rz=fb,pb=mb;function mb(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(iz,this,r),this.length=this._features.length}function iz(o,r,a){o===15?r.version=a.readVarint():o===1?r.name=a.readString():o===5?r.extent=a.readVarint():o===2?r._features.push(a.pos):o===3?r._keys.push(a.readString()):o===4&&r._values.push(function(h){for(var p=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;p=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return p}(a))}mb.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new rz(this._pbf,r,this.extent,this._keys,this._values)};var sz=pb;function oz(o,r,a){if(o===3){var h=new sz(a,a.readVarint()+a.pos);h.length&&(r[h.name]=h)}}Sa.VectorTile=function(o,r){this.layers=o.readFields(oz,{},r)},Sa.VectorTileFeature=fb,Sa.VectorTileLayer=pb;const az=Sa.VectorTileFeature.types,uv=Math.pow(2,13);function Kh(o,r,a,h,p,v,x,S){o.emplaceBack(r,a,2*Math.floor(h*uv)+x,p*uv*2,v*uv*2,Math.round(S))}class cv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Qe,this.centroidVertexArray=new je,this.indexArray=new dr,this.programConfigurations=new Rs(r.layers,r.zoom),this.segments=new dn,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,h){this.features=[],this.hasPattern=ov("fill-extrusion",this.layers,a);for(const{feature:p,id:v,index:x,sourceLayerIndex:S}of r){const E=this.layers[0]._featureFilter.needGeometry,I=zl(p,E);if(!this.layers[0]._featureFilter.filter(new hn(this.zoom),I,h))continue;const z={id:v,sourceLayerIndex:S,index:x,geometry:E?I.geometry:Dl(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(av("fill-extrusion",this.layers,z,this.zoom,a)):this.addFeature(z,z.geometry,x,h,{}),a.featureIndex.insert(p,z.geometry,x,S,this.index,!0)}}addFeatures(r,a,h){for(const p of this.features){const{geometry:v}=p;this.addFeature(p,v,p.index,a,h)}}update(r,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,JD),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,QD.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,a,h,p,v){const x={x:0,y:0,vertexCount:0};for(const S of sv(a,500)){let E=0;for(const W of S)E+=W.length;let I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const W of S){if(W.length===0||uz(W))continue;let Q=0;for(let oe=0;oe<W.length;oe++){const ce=W[oe];if(oe>=1){const xe=W[oe-1];if(!lz(ce,xe)){I.vertexLength+4>dn.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const fe=ce.sub(xe)._perp()._unit(),be=xe.dist(ce);Q+be>32768&&(Q=0),Kh(this.layoutVertexArray,ce.x,ce.y,fe.x,fe.y,0,0,Q),Kh(this.layoutVertexArray,ce.x,ce.y,fe.x,fe.y,0,1,Q),x.x+=2*ce.x,x.y+=2*ce.y,x.vertexCount+=2,Q+=be,Kh(this.layoutVertexArray,xe.x,xe.y,fe.x,fe.y,0,0,Q),Kh(this.layoutVertexArray,xe.x,xe.y,fe.x,fe.y,0,1,Q),x.x+=2*xe.x,x.y+=2*xe.y,x.vertexCount+=2;const Ee=I.vertexLength;this.indexArray.emplaceBack(Ee,Ee+2,Ee+1),this.indexArray.emplaceBack(Ee+1,Ee+2,Ee+3),I.vertexLength+=4,I.primitiveLength+=2}}}}if(I.vertexLength+E>dn.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray)),az[r.type]!=="Polygon")continue;const z=[],O=[],$=I.vertexLength;for(const W of S)if(W.length!==0){W!==S[0]&&O.push(z.length/2);for(let Q=0;Q<W.length;Q++){const oe=W[Q];Kh(this.layoutVertexArray,oe.x,oe.y,0,0,1,1,0),x.x+=oe.x,x.y+=oe.y,x.vertexCount+=1,z.push(oe.x),z.push(oe.y)}}const G=ub(z,O);for(let W=0;W<G.length;W+=3)this.indexArray.emplaceBack($+G[W],$+G[W+2],$+G[W+1]);I.primitiveLength+=G.length/3,I.vertexLength+=E}for(let S=0;S<x.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,v,p)}}function lz(o,r){return o.x===r.x&&(o.x<0||o.x>Hn)||o.y===r.y&&(o.y<0||o.y>Hn)}function uz(o){return o.every(r=>r.x<0)||o.every(r=>r.x>Hn)||o.every(r=>r.y<0)||o.every(r=>r.y>Hn)}let gb;it("FillExtrusionBucket",cv,{omit:["layers","features"]});var cz={get paint(){return gb=gb||new Bn({"fill-extrusion-opacity":new ft(le["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new St(le["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ft(le["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ft(le["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new kl(le["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new St(le["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new St(le["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ft(le["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class hz extends Di{constructor(r){super(r,cz)}createBucket(r){return new cv(r)}queryRadius(){return gp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,a,h,p,v,x,S,E){const I=yp(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),z=this.paint.get("fill-extrusion-height").evaluate(a,h),O=this.paint.get("fill-extrusion-base").evaluate(a,h),$=function(W,Q,oe,ce){const xe=[];for(const fe of W){const be=[fe.x,fe.y,0,1];vp(be,be,Q),xe.push(new D(be[0]/be[3],be[1]/be[3]))}return xe}(I,E),G=function(W,Q,oe,ce){const xe=[],fe=[],be=ce[8]*Q,Ee=ce[9]*Q,Re=ce[10]*Q,rt=ce[11]*Q,lt=ce[8]*oe,tt=ce[9]*oe,Je=ce[10]*oe,Ze=ce[11]*oe;for(const st of W){const He=[],Ve=[];for(const vt of st){const ht=vt.x,Ft=vt.y,fn=ce[0]*ht+ce[4]*Ft+ce[12],xn=ce[1]*ht+ce[5]*Ft+ce[13],er=ce[2]*ht+ce[6]*Ft+ce[14],Ri=ce[3]*ht+ce[7]*Ft+ce[15],Hr=er+Re,Kn=Ri+rt,pr=fn+lt,Sr=xn+tt,Kr=er+Je,Xr=Ri+Ze,tr=new D((fn+be)/Kn,(xn+Ee)/Kn);tr.z=Hr/Kn,He.push(tr);const nr=new D(pr/Xr,Sr/Xr);nr.z=Kr/Xr,Ve.push(nr)}xe.push(He),fe.push(Ve)}return[xe,fe]}(p,O,z,E);return function(W,Q,oe){let ce=1/0;W1(oe,Q)&&(ce=yb(oe,Q[0]));for(let xe=0;xe<Q.length;xe++){const fe=Q[xe],be=W[xe];for(let Ee=0;Ee<fe.length-1;Ee++){const Re=fe[Ee],rt=[Re,fe[Ee+1],be[Ee+1],be[Ee],Re];Z1(oe,rt)&&(ce=Math.min(ce,yb(oe,rt)))}}return ce!==1/0&&ce}(G[0],G[1],$)}}function Xh(o,r){return o.x*r.x+o.y*r.y}function yb(o,r){if(o.length===1){let a=0;const h=r[a++];let p;for(;!p||h.equals(p);)if(p=r[a++],!p)return 1/0;for(;a<r.length;a++){const v=r[a],x=o[0],S=p.sub(h),E=v.sub(h),I=x.sub(h),z=Xh(S,S),O=Xh(S,E),$=Xh(E,E),G=Xh(I,S),W=Xh(I,E),Q=z*$-O*O,oe=($*G-O*W)/Q,ce=(z*W-O*G)/Q,xe=h.z*(1-oe-ce)+p.z*oe+v.z*ce;if(isFinite(xe))return xe}return 1/0}{let a=1/0;for(const h of r)a=Math.min(a,h.z);return a}}const dz=Cn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:fz}=dz,pz=Cn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:mz}=pz,gz=Sa.VectorTileFeature.types,yz=Math.cos(Math.PI/180*37.5),vb=Math.pow(2,14)/.5;class hv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new Ct,this.layoutVertexArray2=new ct,this.indexArray=new dr,this.programConfigurations=new Rs(r.layers,r.zoom),this.segments=new dn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,h){this.hasPattern=ov("line",this.layers,a);const p=this.layers[0].layout.get("line-sort-key"),v=!p.isConstant(),x=[];for(const{feature:S,id:E,index:I,sourceLayerIndex:z}of r){const O=this.layers[0]._featureFilter.needGeometry,$=zl(S,O);if(!this.layers[0]._featureFilter.filter(new hn(this.zoom),$,h))continue;const G=v?p.evaluate($,{},h):void 0,W={id:E,properties:S.properties,type:S.type,sourceLayerIndex:z,index:I,geometry:O?$.geometry:Dl(S),patterns:{},sortKey:G};x.push(W)}v&&x.sort((S,E)=>S.sortKey-E.sortKey);for(const S of x){const{geometry:E,index:I,sourceLayerIndex:z}=S;if(this.hasPattern){const O=av("line",this.layers,S,this.zoom,a);this.patternFeatures.push(O)}else this.addFeature(S,E,I,h,{});a.featureIndex.insert(r[I].feature,E,I,z,this.index)}}update(r,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,h)}addFeatures(r,a,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,a,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,mz)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,fz),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,a,h,p,v){const x=this.layers[0].layout,S=x.get("line-join").evaluate(r,{}),E=x.get("line-cap"),I=x.get("line-miter-limit"),z=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const O of a)this.addLine(O,r,S,E,I,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,v,p)}addLine(r,a,h,p,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ce=0;ce<r.length-1;ce++)this.totalDistance+=r[ce].dist(r[ce+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=gz[a.type]==="Polygon";let E=r.length;for(;E>=2&&r[E-1].equals(r[E-2]);)E--;let I=0;for(;I<E-1&&r[I].equals(r[I+1]);)I++;if(E<(S?3:2))return;h==="bevel"&&(v=1.05);const z=this.overscaling<=16?15*Hn/(512*this.overscaling):0,O=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let $,G,W,Q,oe;this.e1=this.e2=-1,S&&($=r[E-2],oe=r[I].sub($)._unit()._perp());for(let ce=I;ce<E;ce++){if(W=ce===E-1?S?r[I+1]:void 0:r[ce+1],W&&r[ce].equals(W))continue;oe&&(Q=oe),$&&(G=$),$=r[ce],oe=W?W.sub($)._unit()._perp():Q,Q=Q||oe;let xe=Q.add(oe);xe.x===0&&xe.y===0||xe._unit();const fe=Q.x*oe.x+Q.y*oe.y,be=xe.x*oe.x+xe.y*oe.y,Ee=be!==0?1/be:1/0,Re=2*Math.sqrt(2-2*be),rt=be<yz&&G&&W,lt=Q.x*oe.y-Q.y*oe.x>0;if(rt&&ce>I){const Ze=$.dist(G);if(Ze>2*z){const st=$.sub($.sub(G)._mult(z/Ze)._round());this.updateDistance(G,st),this.addCurrentVertex(st,Q,0,0,O),G=st}}const tt=G&&W;let Je=tt?h:S?"butt":p;if(tt&&Je==="round"&&(Ee<x?Je="miter":Ee<=2&&(Je="fakeround")),Je==="miter"&&Ee>v&&(Je="bevel"),Je==="bevel"&&(Ee>2&&(Je="flipbevel"),Ee<v&&(Je="miter")),G&&this.updateDistance(G,$),Je==="miter")xe._mult(Ee),this.addCurrentVertex($,xe,0,0,O);else if(Je==="flipbevel"){if(Ee>100)xe=oe.mult(-1);else{const Ze=Ee*Q.add(oe).mag()/Q.sub(oe).mag();xe._perp()._mult(Ze*(lt?-1:1))}this.addCurrentVertex($,xe,0,0,O),this.addCurrentVertex($,xe.mult(-1),0,0,O)}else if(Je==="bevel"||Je==="fakeround"){const Ze=-Math.sqrt(Ee*Ee-1),st=lt?Ze:0,He=lt?0:Ze;if(G&&this.addCurrentVertex($,Q,st,He,O),Je==="fakeround"){const Ve=Math.round(180*Re/Math.PI/20);for(let vt=1;vt<Ve;vt++){let ht=vt/Ve;if(ht!==.5){const fn=ht-.5;ht+=ht*fn*(ht-1)*((1.0904+fe*(fe*(3.55645-1.43519*fe)-3.2452))*fn*fn+(.848013+fe*(.215638*fe-1.06021)))}const Ft=oe.sub(Q)._mult(ht)._add(Q)._unit()._mult(lt?-1:1);this.addHalfVertex($,Ft.x,Ft.y,!1,lt,0,O)}}W&&this.addCurrentVertex($,oe,-st,-He,O)}else if(Je==="butt")this.addCurrentVertex($,xe,0,0,O);else if(Je==="square"){const Ze=G?1:-1;this.addCurrentVertex($,xe,Ze,Ze,O)}else Je==="round"&&(G&&(this.addCurrentVertex($,Q,0,0,O),this.addCurrentVertex($,Q,1,1,O,!0)),W&&(this.addCurrentVertex($,oe,-1,-1,O,!0),this.addCurrentVertex($,oe,0,0,O)));if(rt&&ce<E-1){const Ze=$.dist(W);if(Ze>2*z){const st=$.add(W.sub($)._mult(z/Ze)._round());this.updateDistance($,st),this.addCurrentVertex(st,oe,0,0,O),$=st}}}}addCurrentVertex(r,a,h,p,v,x=!1){const S=a.y*p-a.x,E=-a.y-a.x*p;this.addHalfVertex(r,a.x+a.y*h,a.y-a.x*h,x,!1,h,v),this.addHalfVertex(r,S,E,x,!0,-p,v),this.distance>vb/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,a,h,p,v,x))}addHalfVertex({x:r,y:a},h,p,v,x,S,E){const I=.5*(this.lineClips?this.scaledDistance*(vb-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(v?1:0),(a<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(S===0?0:S<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const z=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,z),E.primitiveLength++),x?this.e2=z:this.e1=z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,a){this.distance+=r.dist(a),this.updateScaledDistance()}}let _b,xb;it("LineBucket",hv,{omit:["layers","patternFeatures"]});var wb={get paint(){return xb=xb||new Bn({"line-opacity":new St(le.paint_line["line-opacity"]),"line-color":new St(le.paint_line["line-color"]),"line-translate":new ft(le.paint_line["line-translate"]),"line-translate-anchor":new ft(le.paint_line["line-translate-anchor"]),"line-width":new St(le.paint_line["line-width"]),"line-gap-width":new St(le.paint_line["line-gap-width"]),"line-offset":new St(le.paint_line["line-offset"]),"line-blur":new St(le.paint_line["line-blur"]),"line-dasharray":new zh(le.paint_line["line-dasharray"]),"line-pattern":new kl(le.paint_line["line-pattern"]),"line-gradient":new Rh(le.paint_line["line-gradient"])})},get layout(){return _b=_b||new Bn({"line-cap":new ft(le.layout_line["line-cap"]),"line-join":new St(le.layout_line["line-join"]),"line-miter-limit":new ft(le.layout_line["line-miter-limit"]),"line-round-limit":new ft(le.layout_line["line-round-limit"]),"line-sort-key":new St(le.layout_line["line-sort-key"])})}};class vz extends St{possiblyEvaluate(r,a){return a=new hn(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(r,a)}evaluate(r,a,h,p){return a=Ce({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(r,a,h,p)}}let Sp;class _z extends Di{constructor(r){super(r,wb),this.gradientVersion=0,Sp||(Sp=new vz(wb.paint.properties["line-width"].specification),Sp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const a=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(a)&&a._styleExpression.expression instanceof ro,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,a){super.recalculate(r,a),this.paint._values["line-floorwidth"]=Sp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new hv(r)}queryRadius(r){const a=r,h=bb(jh("line-width",this,a),jh("line-gap-width",this,a)),p=jh("line-offset",this,a);return h/2+Math.abs(p)+gp(this.paint.get("line-translate"))}queryIntersectsFeature(r,a,h,p,v,x,S){const E=yp(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),I=S/2*bb(this.paint.get("line-width").evaluate(a,h),this.paint.get("line-gap-width").evaluate(a,h)),z=this.paint.get("line-offset").evaluate(a,h);return z&&(p=function(O,$){const G=[];for(let W=0;W<O.length;W++){const Q=O[W],oe=[];for(let ce=0;ce<Q.length;ce++){const xe=Q[ce-1],fe=Q[ce],be=Q[ce+1],Ee=ce===0?new D(0,0):fe.sub(xe)._unit()._perp(),Re=ce===Q.length-1?new D(0,0):be.sub(fe)._unit()._perp(),rt=Ee._add(Re)._unit(),lt=rt.x*Re.x+rt.y*Re.y;lt!==0&&rt._mult(1/lt),oe.push(rt._mult($)._add(fe))}G.push(oe)}return G}(p,z*S)),function(O,$,G){for(let W=0;W<$.length;W++){const Q=$[W];if(O.length>=3){for(let oe=0;oe<Q.length;oe++)if(Uu(O,Q[oe]))return!0}if(TD(O,Q,G))return!0}return!1}(E,p,I)}isTileClipped(){return!0}}function bb(o,r){return r>0?r+2*o:o}const xz=Cn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),wz=Cn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Cn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const bz=Cn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Cn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Sb=Cn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Sz=Cn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Cz(o,r,a){return o.sections.forEach(h=>{h.text=function(p,v,x){const S=v.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?p=p.toLocaleUpperCase():S==="lowercase"&&(p=p.toLocaleLowerCase()),hi.applyArabicShaping&&(p=hi.applyArabicShaping(p)),p}(h.text,r,a)}),o}Cn([{name:"triangle",components:3,type:"Uint16"}]),Cn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Cn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Cn([{type:"Float32",name:"offsetX"}]),Cn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Cn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Yh={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Jn=24,Cb=on,Tb=function(o,r,a,h,p){var v,x,S=8*p-h-1,E=(1<<S)-1,I=E>>1,z=-7,O=a?p-1:0,$=a?-1:1,G=o[r+O];for(O+=$,v=G&(1<<-z)-1,G>>=-z,z+=S;z>0;v=256*v+o[r+O],O+=$,z-=8);for(x=v&(1<<-z)-1,v>>=-z,z+=h;z>0;x=256*x+o[r+O],O+=$,z-=8);if(v===0)v=1-I;else{if(v===E)return x?NaN:1/0*(G?-1:1);x+=Math.pow(2,h),v-=I}return(G?-1:1)*x*Math.pow(2,v-h)},Eb=function(o,r,a,h,p,v){var x,S,E,I=8*v-p-1,z=(1<<I)-1,O=z>>1,$=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,G=h?0:v-1,W=h?1:-1,Q=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(S=isNaN(r)?1:0,x=z):(x=Math.floor(Math.log(r)/Math.LN2),r*(E=Math.pow(2,-x))<1&&(x--,E*=2),(r+=x+O>=1?$/E:$*Math.pow(2,1-O))*E>=2&&(x++,E/=2),x+O>=z?(S=0,x=z):x+O>=1?(S=(r*E-1)*Math.pow(2,p),x+=O):(S=r*Math.pow(2,O-1)*Math.pow(2,p),x=0));p>=8;o[a+G]=255&S,G+=W,S/=256,p-=8);for(x=x<<p|S,I+=p;I>0;o[a+G]=255&x,G+=W,x/=256,I-=8);o[a+G-W]|=128*Q};function on(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}on.Varint=0,on.Fixed64=1,on.Bytes=2,on.Fixed32=5;var dv=4294967296,Pb=1/dv,Ab=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ro(o){return o.type===on.Bytes?o.readVarint()+o.pos:o.pos+1}function Wu(o,r,a){return a?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function kb(o,r,a){var h=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));a.realloc(h);for(var p=a.pos-1;p>=o;p--)a.buf[p+h]=a.buf[p]}function Tz(o,r){for(var a=0;a<o.length;a++)r.writeVarint(o[a])}function Ez(o,r){for(var a=0;a<o.length;a++)r.writeSVarint(o[a])}function Pz(o,r){for(var a=0;a<o.length;a++)r.writeFloat(o[a])}function Az(o,r){for(var a=0;a<o.length;a++)r.writeDouble(o[a])}function kz(o,r){for(var a=0;a<o.length;a++)r.writeBoolean(o[a])}function Iz(o,r){for(var a=0;a<o.length;a++)r.writeFixed32(o[a])}function Mz(o,r){for(var a=0;a<o.length;a++)r.writeSFixed32(o[a])}function Dz(o,r){for(var a=0;a<o.length;a++)r.writeFixed64(o[a])}function zz(o,r){for(var a=0;a<o.length;a++)r.writeSFixed64(o[a])}function Cp(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function Hu(o,r,a){o[a]=r,o[a+1]=r>>>8,o[a+2]=r>>>16,o[a+3]=r>>>24}function Ib(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}on.prototype={destroy:function(){this.buf=null},readFields:function(o,r,a){for(a=a||this.length;this.pos<a;){var h=this.readVarint(),p=h>>3,v=this.pos;this.type=7&h,o(p,r,this),this.pos===v&&this.skip(h)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=Cp(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Ib(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Cp(this.buf,this.pos)+Cp(this.buf,this.pos+4)*dv;return this.pos+=8,o},readSFixed64:function(){var o=Cp(this.buf,this.pos)+Ib(this.buf,this.pos+4)*dv;return this.pos+=8,o},readFloat:function(){var o=Tb(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Tb(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,a,h=this.buf;return r=127&(a=h[this.pos++]),a<128?r:(r|=(127&(a=h[this.pos++]))<<7,a<128?r:(r|=(127&(a=h[this.pos++]))<<14,a<128?r:(r|=(127&(a=h[this.pos++]))<<21,a<128?r:function(p,v,x){var S,E,I=x.buf;if(S=(112&(E=I[x.pos++]))>>4,E<128||(S|=(127&(E=I[x.pos++]))<<3,E<128)||(S|=(127&(E=I[x.pos++]))<<10,E<128)||(S|=(127&(E=I[x.pos++]))<<17,E<128)||(S|=(127&(E=I[x.pos++]))<<24,E<128)||(S|=(1&(E=I[x.pos++]))<<31,E<128))return Wu(p,S,v);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(a=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&Ab?function(a,h,p){return Ab.decode(a.subarray(h,p))}(this.buf,r,o):function(a,h,p){for(var v="",x=h;x<p;){var S,E,I,z=a[x],O=null,$=z>239?4:z>223?3:z>191?2:1;if(x+$>p)break;$===1?z<128&&(O=z):$===2?(192&(S=a[x+1]))==128&&(O=(31&z)<<6|63&S)<=127&&(O=null):$===3?(E=a[x+2],(192&(S=a[x+1]))==128&&(192&E)==128&&((O=(15&z)<<12|(63&S)<<6|63&E)<=2047||O>=55296&&O<=57343)&&(O=null)):$===4&&(E=a[x+2],I=a[x+3],(192&(S=a[x+1]))==128&&(192&E)==128&&(192&I)==128&&((O=(15&z)<<18|(63&S)<<12|(63&E)<<6|63&I)<=65535||O>=1114112)&&(O=null)),O===null?(O=65533,$=1):O>65535&&(O-=65536,v+=String.fromCharCode(O>>>10&1023|55296),O=56320|1023&O),v+=String.fromCharCode(O),x+=$}return v}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==on.Bytes)return o.push(this.readVarint(r));var a=Ro(this);for(o=o||[];this.pos<a;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==on.Bytes)return o.push(this.readSVarint());var r=Ro(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==on.Bytes)return o.push(this.readBoolean());var r=Ro(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==on.Bytes)return o.push(this.readFloat());var r=Ro(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==on.Bytes)return o.push(this.readDouble());var r=Ro(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==on.Bytes)return o.push(this.readFixed32());var r=Ro(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==on.Bytes)return o.push(this.readSFixed32());var r=Ro(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==on.Bytes)return o.push(this.readFixed64());var r=Ro(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==on.Bytes)return o.push(this.readSFixed64());var r=Ro(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===on.Varint)for(;this.buf[this.pos++]>127;);else if(r===on.Bytes)this.pos=this.readVarint()+this.pos;else if(r===on.Fixed32)this.pos+=4;else{if(r!==on.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var a=new Uint8Array(r);a.set(this.buf),this.buf=a,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Hu(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Hu(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Hu(this.buf,-1&o,this.pos),Hu(this.buf,Math.floor(o*Pb),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Hu(this.buf,-1&o,this.pos),Hu(this.buf,Math.floor(o*Pb),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,a){var h,p;if(r>=0?(h=r%4294967296|0,p=r/4294967296|0):(p=~(-r/4294967296),4294967295^(h=~(-r%4294967296))?h=h+1|0:(h=0,p=p+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(v,x,S){S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,S.buf[S.pos]=127&(v>>>=7)}(h,0,a),function(v,x){var S=(7&v)<<4;x.buf[x.pos++]|=S|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(p,a)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(h,p,v){for(var x,S,E=0;E<p.length;E++){if((x=p.charCodeAt(E))>55295&&x<57344){if(!S){x>56319||E+1===p.length?(h[v++]=239,h[v++]=191,h[v++]=189):S=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(h[v++]=239,h[v++]=191,h[v++]=189,S=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,o,this.pos);var a=this.pos-r;a>=128&&kb(r,a,this),this.pos=r-1,this.writeVarint(a),this.pos+=a},writeFloat:function(o){this.realloc(4),Eb(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Eb(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var a=0;a<r;a++)this.buf[this.pos++]=o[a]},writeRawMessage:function(o,r){this.pos++;var a=this.pos;o(r,this);var h=this.pos-a;h>=128&&kb(a,h,this),this.pos=a-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,r,a){this.writeTag(o,on.Bytes),this.writeRawMessage(r,a)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,Tz,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,Ez,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,kz,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,Pz,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,Az,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,Iz,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,Mz,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,Dz,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,zz,r)},writeBytesField:function(o,r){this.writeTag(o,on.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,on.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,on.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,on.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,on.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,on.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,on.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,on.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,on.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,on.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var fv=b(Cb);const pv=3;function Rz(o,r,a){o===1&&a.readMessage(Lz,r)}function Lz(o,r,a){if(o===3){const{id:h,bitmap:p,width:v,height:x,left:S,top:E,advance:I}=a.readMessage(Oz,{});r.push({id:h,bitmap:new qh({width:v+2*pv,height:x+2*pv},p),metrics:{width:v,height:x,left:S,top:E,advance:I}})}}function Oz(o,r,a){o===1?r.id=a.readVarint():o===2?r.bitmap=a.readBytes():o===3?r.width=a.readVarint():o===4?r.height=a.readVarint():o===5?r.left=a.readSVarint():o===6?r.top=a.readSVarint():o===7&&(r.advance=a.readVarint())}const Mb=pv;function Db(o){let r=0,a=0;for(const x of o)r+=x.w*x.h,a=Math.max(a,x.w);o.sort((x,S)=>S.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),a),h:1/0}];let p=0,v=0;for(const x of o)for(let S=h.length-1;S>=0;S--){const E=h[S];if(!(x.w>E.w||x.h>E.h)){if(x.x=E.x,x.y=E.y,v=Math.max(v,x.y+x.h),p=Math.max(p,x.x+x.w),x.w===E.w&&x.h===E.h){const I=h.pop();S<h.length&&(h[S]=I)}else x.h===E.h?(E.x+=x.w,E.w-=x.w):x.w===E.w?(E.y+=x.h,E.h-=x.h):(h.push({x:E.x+x.w,y:E.y,w:E.w-x.w,h:x.h}),E.y+=x.h,E.h-=x.h);break}}return{w:p,h:v,fill:r/(p*v)||0}}const fi=1;class mv{constructor(r,{pixelRatio:a,version:h,stretchX:p,stretchY:v,content:x}){this.paddedRect=r,this.pixelRatio=a,this.stretchX=p,this.stretchY=v,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+fi,this.paddedRect.y+fi]}get br(){return[this.paddedRect.x+this.paddedRect.w-fi,this.paddedRect.y+this.paddedRect.h-fi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*fi)/this.pixelRatio,(this.paddedRect.h-2*fi)/this.pixelRatio]}}class zb{constructor(r,a){const h={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(r,h,v),this.addImages(a,p,v);const{w:x,h:S}=Db(v),E=new qi({width:x||1,height:S||1});for(const I in r){const z=r[I],O=h[I].paddedRect;qi.copy(z.data,E,{x:0,y:0},{x:O.x+fi,y:O.y+fi},z.data)}for(const I in a){const z=a[I],O=p[I].paddedRect,$=O.x+fi,G=O.y+fi,W=z.data.width,Q=z.data.height;qi.copy(z.data,E,{x:0,y:0},{x:$,y:G},z.data),qi.copy(z.data,E,{x:0,y:Q-1},{x:$,y:G-1},{width:W,height:1}),qi.copy(z.data,E,{x:0,y:0},{x:$,y:G+Q},{width:W,height:1}),qi.copy(z.data,E,{x:W-1,y:0},{x:$-1,y:G},{width:1,height:Q}),qi.copy(z.data,E,{x:0,y:0},{x:$+W,y:G},{width:1,height:Q})}this.image=E,this.iconPositions=h,this.patternPositions=p}addImages(r,a,h){for(const p in r){const v=r[p],x={x:0,y:0,w:v.data.width+2*fi,h:v.data.height+2*fi};h.push(x),a[p]=new mv(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(r,a){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in r.updatedImages)this.patchUpdatedImage(this.iconPositions[h],r.getImage(h),a),this.patchUpdatedImage(this.patternPositions[h],r.getImage(h),a)}patchUpdatedImage(r,a,h){if(!r||!a||r.version===a.version)return;r.version=a.version;const[p,v]=r.tl;h.update(a.data,void 0,{x:p,y:v})}}var Ca;it("ImagePosition",mv),it("ImageAtlas",zb),l.ai=void 0,(Ca=l.ai||(l.ai={}))[Ca.none=0]="none",Ca[Ca.horizontal=1]="horizontal",Ca[Ca.vertical=2]="vertical",Ca[Ca.horizontalOnly=3]="horizontalOnly";const Qh=-17;class Jh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,a){const h=new Jh;return h.scale=r||1,h.fontStack=a,h}static forImage(r){const a=new Jh;return a.imageName=r,a}}class Ku{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,a){const h=new Ku;for(let p=0;p<r.sections.length;p++){const v=r.sections[p];v.image?h.addImageSection(v):h.addTextSection(v,a)}return h}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let a="";for(let h=0;h<r.length;h++){const p=r.charCodeAt(h+1)||null,v=r.charCodeAt(h-1)||null;a+=p&&sp(p)&&!Yh[r[h+1]]||v&&sp(v)&&!Yh[r[h-1]]||!Yh[r[h]]?r[h]:Yh[r[h]]}return a}(this.text)}trim(){let r=0;for(let h=0;h<this.text.length&&Ep[this.text.charCodeAt(h)];h++)r++;let a=this.text.length;for(let h=this.text.length-1;h>=0&&h>=r&&Ep[this.text.charCodeAt(h)];h--)a--;this.text=this.text.substring(r,a),this.sectionIndex=this.sectionIndex.slice(r,a)}substring(r,a){const h=new Ku;return h.text=this.text.substring(r,a),h.sectionIndex=this.sectionIndex.slice(r,a),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,a)=>Math.max(r,this.sections[a].scale),0)}addTextSection(r,a){this.text+=r.text,this.sections.push(Jh.forText(r.scale,r.fontStack||a));const h=this.sections.length-1;for(let p=0;p<r.text.length;++p)this.sectionIndex.push(h)}addImageSection(r){const a=r.image?r.image.name:"";if(a.length===0)return void _t("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Jh.forImage(a)),this.sectionIndex.push(this.sections.length-1)):_t("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Tp(o,r,a,h,p,v,x,S,E,I,z,O,$,G,W,Q){const oe=Ku.fromFeature(o,p);let ce;O===l.ai.vertical&&oe.verticalizePunctuation();const{processBidirectionalText:xe,processStyledBidirectionalText:fe}=hi;if(xe&&oe.sections.length===1){ce=[];const Re=xe(oe.toString(),gv(oe,I,v,r,h,G,W));for(const rt of Re){const lt=new Ku;lt.text=rt,lt.sections=oe.sections;for(let tt=0;tt<rt.length;tt++)lt.sectionIndex.push(0);ce.push(lt)}}else if(fe){ce=[];const Re=fe(oe.text,oe.sectionIndex,gv(oe,I,v,r,h,G,W));for(const rt of Re){const lt=new Ku;lt.text=rt[0],lt.sectionIndex=rt[1],lt.sections=oe.sections,ce.push(lt)}}else ce=function(Re,rt){const lt=[],tt=Re.text;let Je=0;for(const Ze of rt)lt.push(Re.substring(Je,Ze)),Je=Ze;return Je<tt.length&&lt.push(Re.substring(Je,tt.length)),lt}(oe,gv(oe,I,v,r,h,G,W));const be=[],Ee={positionedLines:be,text:oe.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:O,iconsInText:!1,verticalizable:!1};return function(Re,rt,lt,tt,Je,Ze,st,He,Ve,vt,ht,Ft){let fn=0,xn=Qh,er=0,Ri=0;const Hr=He==="right"?1:He==="left"?0:.5;let Kn=0;for(const tr of Je){tr.trim();const nr=tr.getMaxScale(),Mr=(nr-1)*Jn,Yr={positionedGlyphs:[],lineOffset:0};Re.positionedLines[Kn]=Yr;const Dr=Yr.positionedGlyphs;let pi=0;if(!tr.length()){xn+=Ze,++Kn;continue}for(let rr=0;rr<tr.length();rr++){const jt=tr.getSection(rr),zr=tr.getSectionIndex(rr),Cr=tr.getCharCode(rr);let ir=0,ps=null,Ls=null,Os=null,Lo=Jn;const ms=!(Ve===l.ai.horizontal||!ht&&!Th(Cr)||ht&&(Ep[Cr]||(pr=Cr,nt.Arabic(pr)||nt["Arabic Supplement"](pr)||nt["Arabic Extended-A"](pr)||nt["Arabic Presentation Forms-A"](pr)||nt["Arabic Presentation Forms-B"](pr))));if(jt.imageName){const Zi=tt[jt.imageName];if(!Zi)continue;Os=jt.imageName,Re.iconsInText=Re.iconsInText||!0,Ls=Zi.paddedRect;const gi=Zi.displaySize;jt.scale=jt.scale*Jn/Ft,ps={width:gi[0],height:gi[1],left:fi,top:-Mb,advance:ms?gi[1]:gi[0]},ir=Mr+(Jn-gi[1]*jt.scale),Lo=ps.advance;const Oo=ms?gi[0]*jt.scale-Jn*nr:gi[1]*jt.scale-Jn*nr;Oo>0&&Oo>pi&&(pi=Oo)}else{const Zi=lt[jt.fontStack],gi=Zi&&Zi[Cr];if(gi&&gi.rect)Ls=gi.rect,ps=gi.metrics;else{const Oo=rt[jt.fontStack],id=Oo&&Oo[Cr];if(!id)continue;ps=id.metrics}ir=(nr-jt.scale)*Jn}ms?(Re.verticalizable=!0,Dr.push({glyph:Cr,imageName:Os,x:fn,y:xn+ir,vertical:ms,scale:jt.scale,fontStack:jt.fontStack,sectionIndex:zr,metrics:ps,rect:Ls}),fn+=Lo*jt.scale+vt):(Dr.push({glyph:Cr,imageName:Os,x:fn,y:xn+ir,vertical:ms,scale:jt.scale,fontStack:jt.fontStack,sectionIndex:zr,metrics:ps,rect:Ls}),fn+=ps.advance*jt.scale+vt)}Dr.length!==0&&(er=Math.max(fn-vt,er),Bz(Dr,0,Dr.length-1,Hr,pi)),fn=0;const mi=Ze*nr+pi;Yr.lineOffset=Math.max(pi,Mr),xn+=mi,Ri=Math.max(mi,Ri),++Kn}var pr;const Sr=xn-Qh,{horizontalAlign:Kr,verticalAlign:Xr}=yv(st);(function(tr,nr,Mr,Yr,Dr,pi,mi,rr,jt){const zr=(nr-Mr)*Dr;let Cr=0;Cr=pi!==mi?-rr*Yr-Qh:(-Yr*jt+.5)*mi;for(const ir of tr)for(const ps of ir.positionedGlyphs)ps.x+=zr,ps.y+=Cr})(Re.positionedLines,Hr,Kr,Xr,er,Ri,Ze,Sr,Je.length),Re.top+=-Xr*Sr,Re.bottom=Re.top+Sr,Re.left+=-Kr*er,Re.right=Re.left+er}(Ee,r,a,h,ce,x,S,E,O,I,$,Q),!function(Re){for(const rt of Re)if(rt.positionedGlyphs.length!==0)return!1;return!0}(be)&&Ee}const Ep={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Fz={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Rb(o,r,a,h,p,v){if(r.imageName){const x=h[r.imageName];return x?x.displaySize[0]*r.scale*Jn/v+p:0}{const x=a[r.fontStack],S=x&&x[o];return S?S.metrics.advance*r.scale+p:0}}function Lb(o,r,a,h){const p=Math.pow(o-r,2);return h?o<r?p/2:2*p:p+Math.abs(a)*a}function Nz(o,r,a){let h=0;return o===10&&(h-=1e4),a&&(h+=150),o!==40&&o!==65288||(h+=50),r!==41&&r!==65289||(h+=50),h}function Ob(o,r,a,h,p,v){let x=null,S=Lb(r,a,p,v);for(const E of h){const I=Lb(r-E.x,a,p,v)+E.badness;I<=S&&(x=E,S=I)}return{index:o,x:r,priorBreak:x,badness:S}}function Fb(o){return o?Fb(o.priorBreak).concat(o.index):[]}function gv(o,r,a,h,p,v,x){if(v!=="point")return[];if(!o)return[];const S=[],E=function($,G,W,Q,oe,ce){let xe=0;for(let fe=0;fe<$.length();fe++){const be=$.getSection(fe);xe+=Rb($.getCharCode(fe),be,Q,oe,G,ce)}return xe/Math.max(1,Math.ceil(xe/W))}(o,r,a,h,p,x),I=o.text.indexOf("​")>=0;let z=0;for(let $=0;$<o.length();$++){const G=o.getSection($),W=o.getCharCode($);if(Ep[W]||(z+=Rb(W,G,h,p,r,x)),$<o.length()-1){const Q=!((O=W)<11904||!(nt["Bopomofo Extended"](O)||nt.Bopomofo(O)||nt["CJK Compatibility Forms"](O)||nt["CJK Compatibility Ideographs"](O)||nt["CJK Compatibility"](O)||nt["CJK Radicals Supplement"](O)||nt["CJK Strokes"](O)||nt["CJK Symbols and Punctuation"](O)||nt["CJK Unified Ideographs Extension A"](O)||nt["CJK Unified Ideographs"](O)||nt["Enclosed CJK Letters and Months"](O)||nt["Halfwidth and Fullwidth Forms"](O)||nt.Hiragana(O)||nt["Ideographic Description Characters"](O)||nt["Kangxi Radicals"](O)||nt["Katakana Phonetic Extensions"](O)||nt.Katakana(O)||nt["Vertical Forms"](O)||nt["Yi Radicals"](O)||nt["Yi Syllables"](O)));(Fz[W]||Q||G.imageName)&&S.push(Ob($+1,z,E,S,Nz(W,o.getCharCode($+1),Q&&I),!1))}}var O;return Fb(Ob(o.length(),z,E,S,0,!0))}function yv(o){let r=.5,a=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:r,verticalAlign:a}}function Bz(o,r,a,h,p){if(!h&&!p)return;const v=o[a],x=(o[a].x+v.metrics.advance*v.scale)*h;for(let S=r;S<=a;S++)o[S].x-=x,o[S].y+=p}function Vz(o,r,a){const{horizontalAlign:h,verticalAlign:p}=yv(a),v=r[0]-o.displaySize[0]*h,x=r[1]-o.displaySize[1]*p;return{image:o,top:x,bottom:x+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function Nb(o,r,a,h,p,v){const x=o.image;let S;if(x.content){const oe=x.content,ce=x.pixelRatio||1;S=[oe[0]/ce,oe[1]/ce,x.displaySize[0]-oe[2]/ce,x.displaySize[1]-oe[3]/ce]}const E=r.left*v,I=r.right*v;let z,O,$,G;a==="width"||a==="both"?(G=p[0]+E-h[3],O=p[0]+I+h[1]):(G=p[0]+(E+I-x.displaySize[0])/2,O=G+x.displaySize[0]);const W=r.top*v,Q=r.bottom*v;return a==="height"||a==="both"?(z=p[1]+W-h[0],$=p[1]+Q+h[2]):(z=p[1]+(W+Q-x.displaySize[1])/2,$=z+x.displaySize[1]),{image:x,top:z,right:O,bottom:$,left:G,collisionPadding:S}}const ed=255,lo=128,Ta=ed*lo;function Bb(o,r){const{expression:a}=r;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new hn(o+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:p}=a;let v=0;for(;v<h.length&&h[v]<=o;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const S=h[v],E=h[x];return a.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:E,interpolationType:p}:{kind:"camera",minZoom:S,maxZoom:E,minSize:a.evaluate(new hn(S)),maxSize:a.evaluate(new hn(E)),interpolationType:p}}}function vv(o,r,a){let h="never";const p=o.get(r);return p?h=p:o.get(a)&&(h="always"),h}const $z=Sa.VectorTileFeature.types,jz=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Pp(o,r,a,h,p,v,x,S,E,I,z,O,$){const G=S?Math.min(Ta,Math.round(S[0])):0,W=S?Math.min(Ta,Math.round(S[1])):0;o.emplaceBack(r,a,Math.round(32*h),Math.round(32*p),v,x,(G<<1)+(E?1:0),W,16*I,16*z,256*O,256*$)}function _v(o,r,a){o.emplaceBack(r.x,r.y,a),o.emplaceBack(r.x,r.y,a),o.emplaceBack(r.x,r.y,a),o.emplaceBack(r.x,r.y,a)}function Uz(o){for(const r of o.sections)if(Gy(r.text))return!0;return!1}class xv{constructor(r){this.layoutVertexArray=new Nt,this.indexArray=new dr,this.programConfigurations=r,this.segments=new dn,this.dynamicLayoutVertexArray=new Rt,this.opacityVertexArray=new $t,this.hasVisibleVertices=!1,this.placedSymbolArray=new ye}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,a,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,xz.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,wz.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,jz,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}it("SymbolBuffers",xv);class wv{constructor(r,a,h){this.layoutVertexArray=new r,this.layoutAttributes=a,this.indexArray=new h,this.segments=new dn,this.collisionVertexArray=new ln}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,bz.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}it("CollisionBuffers",wv);class Xu{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(x=>x.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Qy([]),this.placementViewportMatrix=Qy([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Bb(this.zoom,a["text-size"]),this.iconSizeData=Bb(this.zoom,a["icon-size"]);const h=this.layers[0].layout,p=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=vv(h,"text-overlap","text-allow-overlap")!=="never"||vv(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>l.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=r.sourceID}createArrays(){this.text=new xv(new Rs(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new xv(new Rs(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new ve,this.lineVertexArray=new Pe,this.symbolInstances=new ue,this.textAnchorOffsets=new ze}calculateGlyphDependencies(r,a,h,p,v){for(let x=0;x<r.length;x++)if(a[r.charCodeAt(x)]=!0,(h||p)&&v){const S=Yh[r.charAt(x)];S&&(a[S.charCodeAt(0)]=!0)}}populate(r,a,h){const p=this.layers[0],v=p.layout,x=v.get("text-font"),S=v.get("text-field"),E=v.get("icon-image"),I=(S.value.kind!=="constant"||S.value.value instanceof xr&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),z=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,O=v.get("symbol-sort-key");if(this.features=[],!I&&!z)return;const $=a.iconDependencies,G=a.glyphDependencies,W=a.availableImages,Q=new hn(this.zoom);for(const{feature:oe,id:ce,index:xe,sourceLayerIndex:fe}of r){const be=p._featureFilter.needGeometry,Ee=zl(oe,be);if(!p._featureFilter.filter(Q,Ee,h))continue;let Re,rt;if(be||(Ee.geometry=Dl(oe)),I){const tt=p.getValueAndResolveTokens("text-field",Ee,h,W),Je=xr.factory(tt);Uz(Je)&&(this.hasRTLText=!0),(!this.hasRTLText||Mh()==="unavailable"||this.hasRTLText&&hi.isParsed())&&(Re=Cz(Je,p,Ee))}if(z){const tt=p.getValueAndResolveTokens("icon-image",Ee,h,W);rt=tt instanceof hr?tt:hr.fromString(tt)}if(!Re&&!rt)continue;const lt=this.sortFeaturesByKey?O.evaluate(Ee,{},h):void 0;if(this.features.push({id:ce,text:Re,icon:rt,index:xe,sourceLayerIndex:fe,geometry:Ee.geometry,properties:oe.properties,type:$z[oe.type],sortKey:lt}),rt&&($[rt.name]=!0),Re){const tt=x.evaluate(Ee,{},h).join(","),Je=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ai.vertical)>=0;for(const Ze of Re.sections)if(Ze.image)$[Ze.image.name]=!0;else{const st=Sh(Re.toString()),He=Ze.fontStack||tt,Ve=G[He]=G[He]||{};this.calculateGlyphDependencies(Ze.text,Ve,Je,this.allowVerticalPlacement,st)}}}v.get("symbol-placement")==="line"&&(this.features=function(oe){const ce={},xe={},fe=[];let be=0;function Ee(tt){fe.push(oe[tt]),be++}function Re(tt,Je,Ze){const st=xe[tt];return delete xe[tt],xe[Je]=st,fe[st].geometry[0].pop(),fe[st].geometry[0]=fe[st].geometry[0].concat(Ze[0]),st}function rt(tt,Je,Ze){const st=ce[Je];return delete ce[Je],ce[tt]=st,fe[st].geometry[0].shift(),fe[st].geometry[0]=Ze[0].concat(fe[st].geometry[0]),st}function lt(tt,Je,Ze){const st=Ze?Je[0][Je[0].length-1]:Je[0][0];return`${tt}:${st.x}:${st.y}`}for(let tt=0;tt<oe.length;tt++){const Je=oe[tt],Ze=Je.geometry,st=Je.text?Je.text.toString():null;if(!st){Ee(tt);continue}const He=lt(st,Ze),Ve=lt(st,Ze,!0);if(He in xe&&Ve in ce&&xe[He]!==ce[Ve]){const vt=rt(He,Ve,Ze),ht=Re(He,Ve,fe[vt].geometry);delete ce[He],delete xe[Ve],xe[lt(st,fe[ht].geometry,!0)]=ht,fe[vt].geometry=null}else He in xe?Re(He,Ve,Ze):Ve in ce?rt(He,Ve,Ze):(Ee(tt),ce[He]=be-1,xe[Ve]=be-1)}return fe.filter(tt=>tt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((oe,ce)=>oe.sortKey-ce.sortKey)}update(r,a,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,a,this.layers,h),this.icon.programConfigurations.updatePaintArrays(r,a,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,a){const h=this.lineVertexArray.length;if(r.segment!==void 0){let p=r.dist(a[r.segment+1]),v=r.dist(a[r.segment]);const x={};for(let S=r.segment+1;S<a.length;S++)x[S]={x:a[S].x,y:a[S].y,tileUnitDistanceFromAnchor:p},S<a.length-1&&(p+=a[S+1].dist(a[S]));for(let S=r.segment||0;S>=0;S--)x[S]={x:a[S].x,y:a[S].y,tileUnitDistanceFromAnchor:v},S>0&&(v+=a[S-1].dist(a[S]));for(let S=0;S<a.length;S++){const E=x[S];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(r,a,h,p,v,x,S,E,I,z,O,$){const G=r.indexArray,W=r.layoutVertexArray,Q=r.segments.prepareSegment(4*a.length,W,G,this.canOverlap?x.sortKey:void 0),oe=this.glyphOffsetArray.length,ce=Q.vertexLength,xe=this.allowVerticalPlacement&&S===l.ai.vertical?Math.PI/2:0,fe=x.text&&x.text.sections;for(let be=0;be<a.length;be++){const{tl:Ee,tr:Re,bl:rt,br:lt,tex:tt,pixelOffsetTL:Je,pixelOffsetBR:Ze,minFontScaleX:st,minFontScaleY:He,glyphOffset:Ve,isSDF:vt,sectionIndex:ht}=a[be],Ft=Q.vertexLength,fn=Ve[1];Pp(W,E.x,E.y,Ee.x,fn+Ee.y,tt.x,tt.y,h,vt,Je.x,Je.y,st,He),Pp(W,E.x,E.y,Re.x,fn+Re.y,tt.x+tt.w,tt.y,h,vt,Ze.x,Je.y,st,He),Pp(W,E.x,E.y,rt.x,fn+rt.y,tt.x,tt.y+tt.h,h,vt,Je.x,Ze.y,st,He),Pp(W,E.x,E.y,lt.x,fn+lt.y,tt.x+tt.w,tt.y+tt.h,h,vt,Ze.x,Ze.y,st,He),_v(r.dynamicLayoutVertexArray,E,xe),G.emplaceBack(Ft,Ft+1,Ft+2),G.emplaceBack(Ft+1,Ft+2,Ft+3),Q.vertexLength+=4,Q.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ve[0]),be!==a.length-1&&ht===a[be+1].sectionIndex||r.programConfigurations.populatePaintArrays(W.length,x,x.index,{},$,fe&&fe[ht])}r.placedSymbolArray.emplaceBack(E.x,E.y,oe,this.glyphOffsetArray.length-oe,ce,I,z,E.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],S,0,!1,0,O)}_addCollisionDebugVertex(r,a,h,p,v,x){return a.emplaceBack(0,0),r.emplaceBack(h.x,h.y,p,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(r,a,h,p,v,x,S){const E=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),I=E.vertexLength,z=v.layoutVertexArray,O=v.collisionVertexArray,$=S.anchorX,G=S.anchorY;this._addCollisionDebugVertex(z,O,x,$,G,new D(r,a)),this._addCollisionDebugVertex(z,O,x,$,G,new D(h,a)),this._addCollisionDebugVertex(z,O,x,$,G,new D(h,p)),this._addCollisionDebugVertex(z,O,x,$,G,new D(r,p)),E.vertexLength+=4;const W=v.indexArray;W.emplaceBack(I,I+1),W.emplaceBack(I+1,I+2),W.emplaceBack(I+2,I+3),W.emplaceBack(I+3,I),E.primitiveLength+=4}addDebugCollisionBoxes(r,a,h,p){for(let v=r;v<a;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,p?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new wv(Rn,Sb.members,Yn),this.iconCollisionBox=new wv(Rn,Sb.members,Yn);for(let r=0;r<this.symbolInstances.length;r++){const a=this.symbolInstances.get(r);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(r,a,h,p,v,x,S,E,I){const z={};for(let O=a;O<h;O++){const $=r.get(O);z.textBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},z.textFeatureIndex=$.featureIndex;break}for(let O=p;O<v;O++){const $=r.get(O);z.verticalTextBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},z.verticalTextFeatureIndex=$.featureIndex;break}for(let O=x;O<S;O++){const $=r.get(O);z.iconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},z.iconFeatureIndex=$.featureIndex;break}for(let O=E;O<I;O++){const $=r.get(O);z.verticalIconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},z.verticalIconFeatureIndex=$.featureIndex;break}return z}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const h=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,a){const h=r.placedSymbolArray.get(a),p=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<p;v+=4)r.indexArray.emplaceBack(v,v+1,v+2),r.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(r),h=Math.cos(r),p=[],v=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const E=this.symbolInstances.get(S);p.push(0|Math.round(a*E.anchorX+h*E.anchorY)),v.push(E.featureIndex)}return x.sort((S,E)=>p[S]-p[E]||v[E]-v[S]),x}addToSortKeyRanges(r,a){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===a?h.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const h=this.symbolInstances.get(a);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,v,x)=>{p>=0&&x.indexOf(p)===v&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Vb,$b;it("SymbolBucket",Xu,{omit:["layers","collisionBoxArray","features","compareText"]}),Xu.MAX_GLYPHS=65535,Xu.addDynamicAttributes=_v;var bv={get paint(){return $b=$b||new Bn({"icon-opacity":new St(le.paint_symbol["icon-opacity"]),"icon-color":new St(le.paint_symbol["icon-color"]),"icon-halo-color":new St(le.paint_symbol["icon-halo-color"]),"icon-halo-width":new St(le.paint_symbol["icon-halo-width"]),"icon-halo-blur":new St(le.paint_symbol["icon-halo-blur"]),"icon-translate":new ft(le.paint_symbol["icon-translate"]),"icon-translate-anchor":new ft(le.paint_symbol["icon-translate-anchor"]),"text-opacity":new St(le.paint_symbol["text-opacity"]),"text-color":new St(le.paint_symbol["text-color"],{runtimeType:Ar,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new St(le.paint_symbol["text-halo-color"]),"text-halo-width":new St(le.paint_symbol["text-halo-width"]),"text-halo-blur":new St(le.paint_symbol["text-halo-blur"]),"text-translate":new ft(le.paint_symbol["text-translate"]),"text-translate-anchor":new ft(le.paint_symbol["text-translate-anchor"])})},get layout(){return Vb=Vb||new Bn({"symbol-placement":new ft(le.layout_symbol["symbol-placement"]),"symbol-spacing":new ft(le.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ft(le.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new St(le.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ft(le.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ft(le.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ft(le.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ft(le.layout_symbol["icon-ignore-placement"]),"icon-optional":new ft(le.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ft(le.layout_symbol["icon-rotation-alignment"]),"icon-size":new St(le.layout_symbol["icon-size"]),"icon-text-fit":new ft(le.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ft(le.layout_symbol["icon-text-fit-padding"]),"icon-image":new St(le.layout_symbol["icon-image"]),"icon-rotate":new St(le.layout_symbol["icon-rotate"]),"icon-padding":new St(le.layout_symbol["icon-padding"]),"icon-keep-upright":new ft(le.layout_symbol["icon-keep-upright"]),"icon-offset":new St(le.layout_symbol["icon-offset"]),"icon-anchor":new St(le.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ft(le.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ft(le.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ft(le.layout_symbol["text-rotation-alignment"]),"text-field":new St(le.layout_symbol["text-field"]),"text-font":new St(le.layout_symbol["text-font"]),"text-size":new St(le.layout_symbol["text-size"]),"text-max-width":new St(le.layout_symbol["text-max-width"]),"text-line-height":new ft(le.layout_symbol["text-line-height"]),"text-letter-spacing":new St(le.layout_symbol["text-letter-spacing"]),"text-justify":new St(le.layout_symbol["text-justify"]),"text-radial-offset":new St(le.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ft(le.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new St(le.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new St(le.layout_symbol["text-anchor"]),"text-max-angle":new ft(le.layout_symbol["text-max-angle"]),"text-writing-mode":new ft(le.layout_symbol["text-writing-mode"]),"text-rotate":new St(le.layout_symbol["text-rotate"]),"text-padding":new ft(le.layout_symbol["text-padding"]),"text-keep-upright":new ft(le.layout_symbol["text-keep-upright"]),"text-transform":new St(le.layout_symbol["text-transform"]),"text-offset":new St(le.layout_symbol["text-offset"]),"text-allow-overlap":new ft(le.layout_symbol["text-allow-overlap"]),"text-overlap":new ft(le.layout_symbol["text-overlap"]),"text-ignore-placement":new ft(le.layout_symbol["text-ignore-placement"]),"text-optional":new ft(le.layout_symbol["text-optional"])})}};class jb{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:Ps,this.defaultValue=r}evaluate(r){if(r.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(r.formattedSection))return a.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}it("FormatSectionOverride",jb,{omit:["defaultValue"]});class Ap extends Di{constructor(r){super(r,bv)}recalculate(r,a){if(super.recalculate(r,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const p=[];for(const v of h)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,a,h,p){const v=this.layout.get(r).evaluate(a,{},h,p),x=this._unevaluatedLayout._values[r];return x.isDataDriven()||Iu(x.value)||!v?v:function(S,E){return E.replace(/{([^{}]+)}/g,(I,z)=>S&&z in S?String(S[z]):"")}(a.properties,v)}createBucket(r){return new Xu(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of bv.paint.overridableProperties){if(!Ap.hasPaintOverride(this.layout,r))continue;const a=this.paint.get(r),h=new jb(a),p=new yh(h,a.property.specification);let v=null;v=a.value.kind==="constant"||a.value.kind==="source"?new vh("source",p):new Du("composite",p,a.value.zoomStops),this.paint._values[r]=new kr(a.property,v,a.parameters)}}_handleOverridablePaintPropertyUpdate(r,a,h){return!(!this.layout||a.isDataDriven()||h.isDataDriven())&&Ap.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,a){const h=r.get("text-field"),p=bv.paint.properties[a];let v=!1;const x=S=>{for(const E of S)if(p.overrides&&p.overrides.hasOverride(E))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof xr)x(h.value.value.sections);else if(h.value.kind==="source"){const S=I=>{v||(I instanceof bo&&wn(I.value)===ne?x(I.value.sections):I instanceof ku?x(I.sections):I.eachChild(S))},E=h.value;E._styleExpression&&S(E._styleExpression.expression)}return v}}let Ub;var qz={get paint(){return Ub=Ub||new Bn({"background-color":new ft(le.paint_background["background-color"]),"background-pattern":new zh(le.paint_background["background-pattern"]),"background-opacity":new ft(le.paint_background["background-opacity"])})}};class Gz extends Di{constructor(r){super(r,qz)}}let qb;var Zz={get paint(){return qb=qb||new Bn({"raster-opacity":new ft(le.paint_raster["raster-opacity"]),"raster-hue-rotate":new ft(le.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ft(le.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ft(le.paint_raster["raster-brightness-max"]),"raster-saturation":new ft(le.paint_raster["raster-saturation"]),"raster-contrast":new ft(le.paint_raster["raster-contrast"]),"raster-resampling":new ft(le.paint_raster["raster-resampling"]),"raster-fade-duration":new ft(le.paint_raster["raster-fade-duration"])})}};class Wz extends Di{constructor(r){super(r,Zz)}}class Hz extends Di{constructor(r){super(r,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Kz{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Sv=63710088e-1;class Ea{constructor(r,a){if(isNaN(r)||isNaN(a))throw new Error(`Invalid LngLat object: (${r}, ${a})`);if(this.lng=+r,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ea(Ie(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const a=Math.PI/180,h=this.lat*a,p=r.lat*a,v=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((r.lng-this.lng)*a);return Sv*Math.acos(Math.min(v,1))}static convert(r){if(r instanceof Ea)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Ea(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Ea(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Gb=2*Math.PI*Sv;function Zb(o){return Gb*Math.cos(o*Math.PI/180)}function Wb(o){return(180+o)/360}function Hb(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Kb(o,r){return o/Zb(r)}function Xb(o){return 360*o-180}function Cv(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class kp{constructor(r,a,h=0){this.x=+r,this.y=+a,this.z=+h}static fromLngLat(r,a=0){const h=Ea.convert(r);return new kp(Wb(h.lng),Hb(h.lat),Kb(a,h.lat))}toLngLat(){return new Ea(Xb(this.x),Cv(this.y))}toAltitude(){return this.z*Zb(Cv(this.y))}meterInMercatorCoordinateUnits(){return 1/Gb*(r=Cv(this.y),1/Math.cos(r*Math.PI/180));var r}}function Yb(o,r,a){var h=2*Math.PI*6378137/256/Math.pow(2,a);return[o*h-2*Math.PI*6378137/2,r*h-2*Math.PI*6378137/2]}class Tv{constructor(r,a,h){if(r<0||r>25||h<0||h>=Math.pow(2,r)||a<0||a>=Math.pow(2,r))throw new Error(`x=${a}, y=${h}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=a,this.y=h,this.key=td(0,r,r,a,h)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,a,h){const p=(x=this.y,S=this.z,E=Yb(256*(v=this.x),256*(x=Math.pow(2,S)-x-1),S),I=Yb(256*(v+1),256*(x+1),S),E[0]+","+E[1]+","+I[0]+","+I[1]);var v,x,S,E,I;const z=function(O,$,G){let W,Q="";for(let oe=O;oe>0;oe--)W=1<<oe-1,Q+=($&W?1:0)+(G&W?2:0);return Q}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,z).replace(/{bbox-epsg-3857}/g,p)}isChildOf(r){const a=this.z-r.z;return a>0&&r.x===this.x>>a&&r.y===this.y>>a}getTilePoint(r){const a=Math.pow(2,this.z);return new D((r.x*a-this.x)*Hn,(r.y*a-this.y)*Hn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Qb{constructor(r,a){this.wrap=r,this.canonical=a,this.key=td(r,a.z,a.z,a.x,a.y)}}class Gi{constructor(r,a,h,p,v){if(r<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${h}`);this.overscaledZ=r,this.wrap=a,this.canonical=new Tv(h,+p,+v),this.key=td(a,r,h,p,v)}clone(){return new Gi(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-r;return r>this.canonical.z?new Gi(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Gi(r,this.wrap,r,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(r,a){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-r;return r>this.canonical.z?td(this.wrap*+a,r,this.canonical.z,this.canonical.x,this.canonical.y):td(this.wrap*+a,r,r,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const a=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>a&&r.canonical.y===this.canonical.y>>a}children(r){if(this.overscaledZ>=r)return[new Gi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new Gi(a,this.wrap,a,h,p),new Gi(a,this.wrap,a,h+1,p),new Gi(a,this.wrap,a,h,p+1),new Gi(a,this.wrap,a,h+1,p+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Gi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Gi(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Qb(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new kp(r.x-this.wrap,r.y))}}function td(o,r,a,h,p){(o*=2)<0&&(o=-1*o-1);const v=1<<a;return(v*v*o+v*p+h).toString(36)+a.toString(36)+r.toString(36)}it("CanonicalTileID",Tv),it("OverscaledTileID",Gi,{omit:["posMatrix"]});class Jb{constructor(r,a,h,p=1,v=1,x=1,S=0){if(this.uid=r,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void _t(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=a.height;const E=this.dim=a.height-2;switch(this.data=new Uint32Array(a.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=v,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let I=0;I<E;I++)this.data[this._idx(-1,I)]=this.data[this._idx(0,I)],this.data[this._idx(E,I)]=this.data[this._idx(E-1,I)],this.data[this._idx(I,-1)]=this.data[this._idx(I,0)],this.data[this._idx(I,E)]=this.data[this._idx(I,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let I=0;I<E;I++)for(let z=0;z<E;z++){const O=this.get(I,z);O>this.max&&(this.max=O),O<this.min&&(this.min=O)}}get(r,a){const h=new Uint8Array(this.data.buffer),p=4*this._idx(r,a);return this.unpack(h[p],h[p+1],h[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,a){if(r<-1||r>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(r+1)}unpack(r,a,h){return r*this.redFactor+a*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new qi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,a,h){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let p=a*this.dim,v=a*this.dim+this.dim,x=h*this.dim,S=h*this.dim+this.dim;switch(a){case-1:p=v-1;break;case 1:v=p+1}switch(h){case-1:x=S-1;break;case 1:S=x+1}const E=-a*this.dim,I=-h*this.dim;for(let z=x;z<S;z++)for(let O=p;O<v;O++)this.data[this._idx(O,z)]=r.data[this._idx(O+E,z+I)]}}it("DEMData",Jb);class eS{constructor(r){this._stringToNumber={},this._numberToString=[];for(let a=0;a<r.length;a++){const h=r[a];this._stringToNumber[h]=a,this._numberToString[a]=h}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class tS{constructor(r,a,h,p,v){this.type="Feature",this._vectorTileFeature=r,r._z=a,r._x=h,r._y=p,this.properties=r.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&(r[a]=this[a]);return r}}class nS{constructor(r,a){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new va(Hn,16,0),this.grid3D=new va(Hn,16,0),this.featureIndexArray=new Fe,this.promoteId=a}insert(r,a,h,p,v,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,v);const E=x?this.grid3D:this.grid;for(let I=0;I<a.length;I++){const z=a[I],O=[1/0,1/0,-1/0,-1/0];for(let $=0;$<z.length;$++){const G=z[$];O[0]=Math.min(O[0],G.x),O[1]=Math.min(O[1],G.y),O[2]=Math.max(O[2],G.x),O[3]=Math.max(O[3],G.y)}O[0]<Hn&&O[1]<Hn&&O[2]>=0&&O[3]>=0&&E.insert(S,O[0],O[1],O[2],O[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Sa.VectorTile(new fv(this.rawTileData)).layers,this.sourceLayerCoder=new eS(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,a,h,p){this.loadVTLayers();const v=r.params||{},x=Hn/r.tileSize/r.scale,S=xh(v.filter),E=r.queryGeometry,I=r.queryPadding*x,z=iS(E),O=this.grid.query(z.minX-I,z.minY-I,z.maxX+I,z.maxY+I),$=iS(r.cameraQueryGeometry),G=this.grid3D.query($.minX-I,$.minY-I,$.maxX+I,$.maxY+I,(oe,ce,xe,fe)=>function(be,Ee,Re,rt,lt){for(const Je of be)if(Ee<=Je.x&&Re<=Je.y&&rt>=Je.x&&lt>=Je.y)return!0;const tt=[new D(Ee,Re),new D(Ee,lt),new D(rt,lt),new D(rt,Re)];if(be.length>2){for(const Je of tt)if(Uu(be,Je))return!0}for(let Je=0;Je<be.length-1;Je++)if(PD(be[Je],be[Je+1],tt))return!0;return!1}(r.cameraQueryGeometry,oe-I,ce-I,xe+I,fe+I));for(const oe of G)O.push(oe);O.sort(Xz);const W={};let Q;for(let oe=0;oe<O.length;oe++){const ce=O[oe];if(ce===Q)continue;Q=ce;const xe=this.featureIndexArray.get(ce);let fe=null;this.loadMatchingFeature(W,xe.bucketIndex,xe.sourceLayerIndex,xe.featureIndex,S,v.layers,v.availableImages,a,h,p,(be,Ee,Re)=>(fe||(fe=Dl(be)),Ee.queryIntersectsFeature(E,be,Re,fe,this.z,r.transform,x,r.pixelPosMatrix)))}return W}loadMatchingFeature(r,a,h,p,v,x,S,E,I,z,O){const $=this.bucketLayerIDs[a];if(x&&!function(oe,ce){for(let xe=0;xe<oe.length;xe++)if(ce.indexOf(oe[xe])>=0)return!0;return!1}(x,$))return;const G=this.sourceLayerCoder.decode(h),W=this.vtLayers[G].feature(p);if(v.needGeometry){const oe=zl(W,!0);if(!v.filter(new hn(this.tileID.overscaledZ),oe,this.tileID.canonical))return}else if(!v.filter(new hn(this.tileID.overscaledZ),W))return;const Q=this.getId(W,G);for(let oe=0;oe<$.length;oe++){const ce=$[oe];if(x&&x.indexOf(ce)<0)continue;const xe=E[ce];if(!xe)continue;let fe={};Q&&z&&(fe=z.getState(xe.sourceLayer||"_geojsonTileLayer",Q));const be=Ce({},I[ce]);be.paint=rS(be.paint,xe.paint,W,fe,S),be.layout=rS(be.layout,xe.layout,W,fe,S);const Ee=!O||O(W,xe,fe);if(!Ee)continue;const Re=new tS(W,this.z,this.x,this.y,Q);Re.layer=be;let rt=r[ce];rt===void 0&&(rt=r[ce]=[]),rt.push({featureIndex:p,feature:Re,intersectionZ:Ee})}}lookupSymbolFeatures(r,a,h,p,v,x,S,E){const I={};this.loadVTLayers();const z=xh(v);for(const O of r)this.loadMatchingFeature(I,h,p,O,z,x,S,E,a);return I}hasLayer(r){for(const a of this.bucketLayerIDs)for(const h of a)if(r===h)return!0;return!1}getId(r,a){let h=r.id;return this.promoteId&&(h=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof h=="boolean"&&(h=Number(h))),h}}function rS(o,r,a,h,p){return Le(o,(v,x)=>{const S=r instanceof $u?r.get(x):null;return S&&S.evaluate?S.evaluate(a,h,p):S})}function iS(o){let r=1/0,a=1/0,h=-1/0,p=-1/0;for(const v of o)r=Math.min(r,v.x),a=Math.min(a,v.y),h=Math.max(h,v.x),p=Math.max(p,v.y);return{minX:r,minY:a,maxX:h,maxY:p}}function Xz(o,r){return r-o}function sS(o,r,a,h,p){const v=[];for(let x=0;x<o.length;x++){const S=o[x];let E;for(let I=0;I<S.length-1;I++){let z=S[I],O=S[I+1];z.x<r&&O.x<r||(z.x<r?z=new D(r,z.y+(r-z.x)/(O.x-z.x)*(O.y-z.y))._round():O.x<r&&(O=new D(r,z.y+(r-z.x)/(O.x-z.x)*(O.y-z.y))._round()),z.y<a&&O.y<a||(z.y<a?z=new D(z.x+(a-z.y)/(O.y-z.y)*(O.x-z.x),a)._round():O.y<a&&(O=new D(z.x+(a-z.y)/(O.y-z.y)*(O.x-z.x),a)._round()),z.x>=h&&O.x>=h||(z.x>=h?z=new D(h,z.y+(h-z.x)/(O.x-z.x)*(O.y-z.y))._round():O.x>=h&&(O=new D(h,z.y+(h-z.x)/(O.x-z.x)*(O.y-z.y))._round()),z.y>=p&&O.y>=p||(z.y>=p?z=new D(z.x+(p-z.y)/(O.y-z.y)*(O.x-z.x),p)._round():O.y>=p&&(O=new D(z.x+(p-z.y)/(O.y-z.y)*(O.x-z.x),p)._round()),E&&z.equals(E[E.length-1])||(E=[z],v.push(E)),E.push(O)))))}}return v}it("FeatureIndex",nS,{omit:["rawTileData","sourceLayerCoder"]});class Pa extends D{constructor(r,a,h,p){super(r,a),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new Pa(this.x,this.y,this.angle,this.segment)}}function oS(o,r,a,h,p){if(r.segment===void 0||a===0)return!0;let v=r,x=r.segment+1,S=0;for(;S>-a/2;){if(x--,x<0)return!1;S-=o[x].dist(v),v=o[x]}S+=o[x].dist(o[x+1]),x++;const E=[];let I=0;for(;S<a/2;){const z=o[x],O=o[x+1];if(!O)return!1;let $=o[x-1].angleTo(z)-z.angleTo(O);for($=Math.abs(($+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:S,angleDelta:$}),I+=$;S-E[0].distance>h;)I-=E.shift().angleDelta;if(I>p)return!1;x++,S+=z.dist(O)}return!0}function aS(o){let r=0;for(let a=0;a<o.length-1;a++)r+=o[a].dist(o[a+1]);return r}function lS(o,r,a){return o?.6*r*a:0}function uS(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function Yz(o,r,a,h,p,v){const x=lS(a,p,v),S=uS(a,h)*v;let E=0;const I=aS(o)/2;for(let z=0;z<o.length-1;z++){const O=o[z],$=o[z+1],G=O.dist($);if(E+G>I){const W=(I-E)/G,Q=li.number(O.x,$.x,W),oe=li.number(O.y,$.y,W),ce=new Pa(Q,oe,$.angleTo(O),z);return ce._round(),!x||oS(o,ce,S,x,r)?ce:void 0}E+=G}}function Qz(o,r,a,h,p,v,x,S,E){const I=lS(h,v,x),z=uS(h,p),O=z*x,$=o[0].x===0||o[0].x===E||o[0].y===0||o[0].y===E;return r-O<r/4&&(r=O+r/4),cS(o,$?r/2*S%r:(z/2+2*v)*x*S%r,r,I,a,O,$,!1,E)}function cS(o,r,a,h,p,v,x,S,E){const I=v/2,z=aS(o);let O=0,$=r-a,G=[];for(let W=0;W<o.length-1;W++){const Q=o[W],oe=o[W+1],ce=Q.dist(oe),xe=oe.angleTo(Q);for(;$+a<O+ce;){$+=a;const fe=($-O)/ce,be=li.number(Q.x,oe.x,fe),Ee=li.number(Q.y,oe.y,fe);if(be>=0&&be<E&&Ee>=0&&Ee<E&&$-I>=0&&$+I<=z){const Re=new Pa(be,Ee,xe,W);Re._round(),h&&!oS(o,Re,v,h,p)||G.push(Re)}}O+=ce}return S||G.length||x||(G=cS(o,O/2,a,h,p,v,x,!0,E)),G}it("Anchor",Pa);const Yu=fi;function hS(o,r,a,h){const p=[],v=o.image,x=v.pixelRatio,S=v.paddedRect.w-2*Yu,E=v.paddedRect.h-2*Yu,I=o.right-o.left,z=o.bottom-o.top,O=v.stretchX||[[0,S]],$=v.stretchY||[[0,E]],G=(Ze,st)=>Ze+st[1]-st[0],W=O.reduce(G,0),Q=$.reduce(G,0),oe=S-W,ce=E-Q;let xe=0,fe=W,be=0,Ee=Q,Re=0,rt=oe,lt=0,tt=ce;if(v.content&&h){const Ze=v.content;xe=Ip(O,0,Ze[0]),be=Ip($,0,Ze[1]),fe=Ip(O,Ze[0],Ze[2]),Ee=Ip($,Ze[1],Ze[3]),Re=Ze[0]-xe,lt=Ze[1]-be,rt=Ze[2]-Ze[0]-fe,tt=Ze[3]-Ze[1]-Ee}const Je=(Ze,st,He,Ve)=>{const vt=Mp(Ze.stretch-xe,fe,I,o.left),ht=Dp(Ze.fixed-Re,rt,Ze.stretch,W),Ft=Mp(st.stretch-be,Ee,z,o.top),fn=Dp(st.fixed-lt,tt,st.stretch,Q),xn=Mp(He.stretch-xe,fe,I,o.left),er=Dp(He.fixed-Re,rt,He.stretch,W),Ri=Mp(Ve.stretch-be,Ee,z,o.top),Hr=Dp(Ve.fixed-lt,tt,Ve.stretch,Q),Kn=new D(vt,Ft),pr=new D(xn,Ft),Sr=new D(xn,Ri),Kr=new D(vt,Ri),Xr=new D(ht/x,fn/x),tr=new D(er/x,Hr/x),nr=r*Math.PI/180;if(nr){const Dr=Math.sin(nr),pi=Math.cos(nr),mi=[pi,-Dr,Dr,pi];Kn._matMult(mi),pr._matMult(mi),Kr._matMult(mi),Sr._matMult(mi)}const Mr=Ze.stretch+Ze.fixed,Yr=st.stretch+st.fixed;return{tl:Kn,tr:pr,bl:Kr,br:Sr,tex:{x:v.paddedRect.x+Yu+Mr,y:v.paddedRect.y+Yu+Yr,w:He.stretch+He.fixed-Mr,h:Ve.stretch+Ve.fixed-Yr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Xr,pixelOffsetBR:tr,minFontScaleX:rt/x/I,minFontScaleY:tt/x/z,isSDF:a}};if(h&&(v.stretchX||v.stretchY)){const Ze=dS(O,oe,W),st=dS($,ce,Q);for(let He=0;He<Ze.length-1;He++){const Ve=Ze[He],vt=Ze[He+1];for(let ht=0;ht<st.length-1;ht++)p.push(Je(Ve,st[ht],vt,st[ht+1]))}}else p.push(Je({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:E+1}));return p}function Ip(o,r,a){let h=0;for(const p of o)h+=Math.max(r,Math.min(a,p[1]))-Math.max(r,Math.min(a,p[0]));return h}function dS(o,r,a){const h=[{fixed:-Yu,stretch:0}];for(const[p,v]of o){const x=h[h.length-1];h.push({fixed:p-x.stretch,stretch:x.stretch}),h.push({fixed:p-x.stretch,stretch:x.stretch+(v-p)})}return h.push({fixed:r+Yu,stretch:a}),h}function Mp(o,r,a,h){return o/r*a+h}function Dp(o,r,a,h){return o-r*a/h}class zp{constructor(r,a,h,p,v,x,S,E,I,z){if(this.boxStartIndex=r.length,I){let O=x.top,$=x.bottom;const G=x.collisionPadding;G&&(O-=G[1],$+=G[3]);let W=$-O;W>0&&(W=Math.max(10,W),this.circleDiameter=W)}else{let O=x.top*S-E[0],$=x.bottom*S+E[2],G=x.left*S-E[3],W=x.right*S+E[1];const Q=x.collisionPadding;if(Q&&(G-=Q[0]*S,O-=Q[1]*S,W+=Q[2]*S,$+=Q[3]*S),z){const oe=new D(G,O),ce=new D(W,O),xe=new D(G,$),fe=new D(W,$),be=z*Math.PI/180;oe._rotate(be),ce._rotate(be),xe._rotate(be),fe._rotate(be),G=Math.min(oe.x,ce.x,xe.x,fe.x),W=Math.max(oe.x,ce.x,xe.x,fe.x),O=Math.min(oe.y,ce.y,xe.y,fe.y),$=Math.max(oe.y,ce.y,xe.y,fe.y)}r.emplaceBack(a.x,a.y,G,O,W,$,h,p,v)}this.boxEndIndex=r.length}}class Jz{constructor(r=[],a=eR){if(this.data=r,this.length=this.data.length,this.compare=a,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:a,compare:h}=this,p=a[r];for(;r>0;){const v=r-1>>1,x=a[v];if(h(p,x)>=0)break;a[r]=x,r=v}a[r]=p}_down(r){const{data:a,compare:h}=this,p=this.length>>1,v=a[r];for(;r<p;){let x=1+(r<<1),S=a[x];const E=x+1;if(E<this.length&&h(a[E],S)<0&&(x=E,S=a[E]),h(S,v)>=0)break;a[r]=S,r=x}a[r]=v}}function eR(o,r){return o<r?-1:o>r?1:0}function tR(o,r=1,a=!1){let h=1/0,p=1/0,v=-1/0,x=-1/0;const S=o[0];for(let G=0;G<S.length;G++){const W=S[G];(!G||W.x<h)&&(h=W.x),(!G||W.y<p)&&(p=W.y),(!G||W.x>v)&&(v=W.x),(!G||W.y>x)&&(x=W.y)}const E=Math.min(v-h,x-p);let I=E/2;const z=new Jz([],nR);if(E===0)return new D(h,p);for(let G=h;G<v;G+=E)for(let W=p;W<x;W+=E)z.push(new Qu(G+I,W+I,I,o));let O=function(G){let W=0,Q=0,oe=0;const ce=G[0];for(let xe=0,fe=ce.length,be=fe-1;xe<fe;be=xe++){const Ee=ce[xe],Re=ce[be],rt=Ee.x*Re.y-Re.x*Ee.y;Q+=(Ee.x+Re.x)*rt,oe+=(Ee.y+Re.y)*rt,W+=3*rt}return new Qu(Q/W,oe/W,0,G)}(o),$=z.length;for(;z.length;){const G=z.pop();(G.d>O.d||!O.d)&&(O=G,a&&console.log("found best %d after %d probes",Math.round(1e4*G.d)/1e4,$)),G.max-O.d<=r||(I=G.h/2,z.push(new Qu(G.p.x-I,G.p.y-I,I,o)),z.push(new Qu(G.p.x+I,G.p.y-I,I,o)),z.push(new Qu(G.p.x-I,G.p.y+I,I,o)),z.push(new Qu(G.p.x+I,G.p.y+I,I,o)),$+=4)}return a&&(console.log(`num probes: ${$}`),console.log(`best distance: ${O.d}`)),O.p}function nR(o,r){return r.max-o.max}function Qu(o,r,a,h){this.p=new D(o,r),this.h=a,this.d=function(p,v){let x=!1,S=1/0;for(let E=0;E<v.length;E++){const I=v[E];for(let z=0,O=I.length,$=O-1;z<O;$=z++){const G=I[z],W=I[$];G.y>p.y!=W.y>p.y&&p.x<(W.x-G.x)*(p.y-G.y)/(W.y-G.y)+G.x&&(x=!x),S=Math.min(S,H1(p,G,W))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var br;l.aq=void 0,(br=l.aq||(l.aq={}))[br.center=1]="center",br[br.left=2]="left",br[br.right=3]="right",br[br.top=4]="top",br[br.bottom=5]="bottom",br[br["top-left"]=6]="top-left",br[br["top-right"]=7]="top-right",br[br["bottom-left"]=8]="bottom-left",br[br["bottom-right"]=9]="bottom-right";const Aa=7,Ev=Number.POSITIVE_INFINITY;function fS(o,r){return r[1]!==Ev?function(a,h,p){let v=0,x=0;switch(h=Math.abs(h),p=Math.abs(p),a){case"top-right":case"top-left":case"top":x=p-Aa;break;case"bottom-right":case"bottom-left":case"bottom":x=-p+Aa}switch(a){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(o,r[0],r[1]):function(a,h){let p=0,v=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(a){case"top-right":case"top-left":v=x-Aa;break;case"bottom-right":case"bottom-left":v=-x+Aa;break;case"bottom":v=-h+Aa;break;case"top":v=h-Aa}switch(a){case"top-right":case"bottom-right":p=-x;break;case"top-left":case"bottom-left":p=x;break;case"left":p=h;break;case"right":p=-h}return[p,v]}(o,r[0])}function pS(o,r,a){var h;const p=o.layout,v=(h=p.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(r,{},a);if(v){const S=v.values,E=[];for(let I=0;I<S.length;I+=2){const z=E[I]=S[I],O=S[I+1].map($=>$*Jn);z.startsWith("top")?O[1]-=Aa:z.startsWith("bottom")&&(O[1]+=Aa),E[I+1]=O}return new Ai(E)}const x=p.get("text-variable-anchor");if(x){let S;S=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(r,{},a)*Jn,Ev]:p.get("text-offset").evaluate(r,{},a).map(I=>I*Jn);const E=[];for(const I of x)E.push(I,fS(I,S));return new Ai(E)}return null}function Pv(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function rR(o,r,a,h,p,v,x,S,E,I,z){let O=v.textMaxSize.evaluate(r,{});O===void 0&&(O=x);const $=o.layers[0].layout,G=$.get("icon-offset").evaluate(r,{},z),W=gS(a.horizontal),Q=x/24,oe=o.tilePixelRatio*Q,ce=o.tilePixelRatio*O/24,xe=o.tilePixelRatio*S,fe=o.tilePixelRatio*$.get("symbol-spacing"),be=$.get("text-padding")*o.tilePixelRatio,Ee=function(Ve,vt,ht,Ft=1){const fn=Ve.get("icon-padding").evaluate(vt,{},ht),xn=fn&&fn.values;return[xn[0]*Ft,xn[1]*Ft,xn[2]*Ft,xn[3]*Ft]}($,r,z,o.tilePixelRatio),Re=$.get("text-max-angle")/180*Math.PI,rt=$.get("text-rotation-alignment")!=="viewport"&&$.get("symbol-placement")!=="point",lt=$.get("icon-rotation-alignment")==="map"&&$.get("symbol-placement")!=="point",tt=$.get("symbol-placement"),Je=fe/2,Ze=$.get("icon-text-fit");let st;h&&Ze!=="none"&&(o.allowVerticalPlacement&&a.vertical&&(st=Nb(h,a.vertical,Ze,$.get("icon-text-fit-padding"),G,Q)),W&&(h=Nb(h,W,Ze,$.get("icon-text-fit-padding"),G,Q)));const He=(Ve,vt)=>{vt.x<0||vt.x>=Hn||vt.y<0||vt.y>=Hn||function(ht,Ft,fn,xn,er,Ri,Hr,Kn,pr,Sr,Kr,Xr,tr,nr,Mr,Yr,Dr,pi,mi,rr,jt,zr,Cr,ir,ps){const Ls=ht.addToLineVertexArray(Ft,fn);let Os,Lo,ms,Zi,gi=0,Oo=0,id=0,xS=0,Lv=-1,Ov=-1;const Fo={};let wS=Mo("");if(ht.allowVerticalPlacement&&xn.vertical){const Rr=Kn.layout.get("text-rotate").evaluate(jt,{},ir)+90;ms=new zp(pr,Ft,Sr,Kr,Xr,xn.vertical,tr,nr,Mr,Rr),Hr&&(Zi=new zp(pr,Ft,Sr,Kr,Xr,Hr,Dr,pi,Mr,Rr))}if(er){const Rr=Kn.layout.get("icon-rotate").evaluate(jt,{}),Wi=Kn.layout.get("icon-text-fit")!=="none",Ll=hS(er,Rr,Cr,Wi),Ns=Hr?hS(Hr,Rr,Cr,Wi):void 0;Lo=new zp(pr,Ft,Sr,Kr,Xr,er,Dr,pi,!1,Rr),gi=4*Ll.length;const Ol=ht.iconSizeData;let uo=null;Ol.kind==="source"?(uo=[lo*Kn.layout.get("icon-size").evaluate(jt,{})],uo[0]>Ta&&_t(`${ht.layerIds[0]}: Value for "icon-size" is >= ${ed}. Reduce your "icon-size".`)):Ol.kind==="composite"&&(uo=[lo*zr.compositeIconSizes[0].evaluate(jt,{},ir),lo*zr.compositeIconSizes[1].evaluate(jt,{},ir)],(uo[0]>Ta||uo[1]>Ta)&&_t(`${ht.layerIds[0]}: Value for "icon-size" is >= ${ed}. Reduce your "icon-size".`)),ht.addSymbols(ht.icon,Ll,uo,rr,mi,jt,l.ai.none,Ft,Ls.lineStartIndex,Ls.lineLength,-1,ir),Lv=ht.icon.placedSymbolArray.length-1,Ns&&(Oo=4*Ns.length,ht.addSymbols(ht.icon,Ns,uo,rr,mi,jt,l.ai.vertical,Ft,Ls.lineStartIndex,Ls.lineLength,-1,ir),Ov=ht.icon.placedSymbolArray.length-1)}const bS=Object.keys(xn.horizontal);for(const Rr of bS){const Wi=xn.horizontal[Rr];if(!Os){wS=Mo(Wi.text);const Ns=Kn.layout.get("text-rotate").evaluate(jt,{},ir);Os=new zp(pr,Ft,Sr,Kr,Xr,Wi,tr,nr,Mr,Ns)}const Ll=Wi.positionedLines.length===1;if(id+=mS(ht,Ft,Wi,Ri,Kn,Mr,jt,Yr,Ls,xn.vertical?l.ai.horizontal:l.ai.horizontalOnly,Ll?bS:[Rr],Fo,Lv,zr,ir),Ll)break}xn.vertical&&(xS+=mS(ht,Ft,xn.vertical,Ri,Kn,Mr,jt,Yr,Ls,l.ai.vertical,["vertical"],Fo,Ov,zr,ir));const oR=Os?Os.boxStartIndex:ht.collisionBoxArray.length,aR=Os?Os.boxEndIndex:ht.collisionBoxArray.length,lR=ms?ms.boxStartIndex:ht.collisionBoxArray.length,uR=ms?ms.boxEndIndex:ht.collisionBoxArray.length,cR=Lo?Lo.boxStartIndex:ht.collisionBoxArray.length,hR=Lo?Lo.boxEndIndex:ht.collisionBoxArray.length,dR=Zi?Zi.boxStartIndex:ht.collisionBoxArray.length,fR=Zi?Zi.boxEndIndex:ht.collisionBoxArray.length;let Fs=-1;const Lp=(Rr,Wi)=>Rr&&Rr.circleDiameter?Math.max(Rr.circleDiameter,Wi):Wi;Fs=Lp(Os,Fs),Fs=Lp(ms,Fs),Fs=Lp(Lo,Fs),Fs=Lp(Zi,Fs);const SS=Fs>-1?1:0;SS&&(Fs*=ps/Jn),ht.glyphOffsetArray.length>=Xu.MAX_GLYPHS&&_t("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),jt.sortKey!==void 0&&ht.addToSortKeyRanges(ht.symbolInstances.length,jt.sortKey);const pR=pS(Kn,jt,ir),[mR,gR]=function(Rr,Wi){const Ll=Rr.length,Ns=Wi==null?void 0:Wi.values;if((Ns==null?void 0:Ns.length)>0)for(let Ol=0;Ol<Ns.length;Ol+=2){const uo=Ns[Ol+1];Rr.emplaceBack(l.aq[Ns[Ol]],uo[0],uo[1])}return[Ll,Rr.length]}(ht.textAnchorOffsets,pR);ht.symbolInstances.emplaceBack(Ft.x,Ft.y,Fo.right>=0?Fo.right:-1,Fo.center>=0?Fo.center:-1,Fo.left>=0?Fo.left:-1,Fo.vertical||-1,Lv,Ov,wS,oR,aR,lR,uR,cR,hR,dR,fR,Sr,id,xS,gi,Oo,SS,0,tr,Fs,mR,gR)}(o,vt,Ve,a,h,p,st,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,oe,[be,be,be,be],rt,E,xe,Ee,lt,G,r,v,I,z,x)};if(tt==="line")for(const Ve of sS(r.geometry,0,0,Hn,Hn)){const vt=Qz(Ve,fe,Re,a.vertical||W,h,24,ce,o.overscaling,Hn);for(const ht of vt)W&&iR(o,W.text,Je,ht)||He(Ve,ht)}else if(tt==="line-center"){for(const Ve of r.geometry)if(Ve.length>1){const vt=Yz(Ve,Re,a.vertical||W,h,24,ce);vt&&He(Ve,vt)}}else if(r.type==="Polygon")for(const Ve of sv(r.geometry,0)){const vt=tR(Ve,16);He(Ve[0],new Pa(vt.x,vt.y,0))}else if(r.type==="LineString")for(const Ve of r.geometry)He(Ve,new Pa(Ve[0].x,Ve[0].y,0));else if(r.type==="Point")for(const Ve of r.geometry)for(const vt of Ve)He([vt],new Pa(vt.x,vt.y,0))}function mS(o,r,a,h,p,v,x,S,E,I,z,O,$,G,W){const Q=function(xe,fe,be,Ee,Re,rt,lt,tt){const Je=Ee.layout.get("text-rotate").evaluate(rt,{})*Math.PI/180,Ze=[];for(const st of fe.positionedLines)for(const He of st.positionedGlyphs){if(!He.rect)continue;const Ve=He.rect||{};let vt=Mb+1,ht=!0,Ft=1,fn=0;const xn=(Re||tt)&&He.vertical,er=He.metrics.advance*He.scale/2;if(tt&&fe.verticalizable&&(fn=st.lineOffset/2-(He.imageName?-(Jn-He.metrics.width*He.scale)/2:(He.scale-1)*Jn)),He.imageName){const rr=lt[He.imageName];ht=rr.sdf,Ft=rr.pixelRatio,vt=fi/Ft}const Ri=Re?[He.x+er,He.y]:[0,0];let Hr=Re?[0,0]:[He.x+er+be[0],He.y+be[1]-fn],Kn=[0,0];xn&&(Kn=Hr,Hr=[0,0]);const pr=He.metrics.isDoubleResolution?2:1,Sr=(He.metrics.left-vt)*He.scale-er+Hr[0],Kr=(-He.metrics.top-vt)*He.scale+Hr[1],Xr=Sr+Ve.w/pr*He.scale/Ft,tr=Kr+Ve.h/pr*He.scale/Ft,nr=new D(Sr,Kr),Mr=new D(Xr,Kr),Yr=new D(Sr,tr),Dr=new D(Xr,tr);if(xn){const rr=new D(-er,er-Qh),jt=-Math.PI/2,zr=Jn/2-er,Cr=new D(5-Qh-zr,-(He.imageName?zr:0)),ir=new D(...Kn);nr._rotateAround(jt,rr)._add(Cr)._add(ir),Mr._rotateAround(jt,rr)._add(Cr)._add(ir),Yr._rotateAround(jt,rr)._add(Cr)._add(ir),Dr._rotateAround(jt,rr)._add(Cr)._add(ir)}if(Je){const rr=Math.sin(Je),jt=Math.cos(Je),zr=[jt,-rr,rr,jt];nr._matMult(zr),Mr._matMult(zr),Yr._matMult(zr),Dr._matMult(zr)}const pi=new D(0,0),mi=new D(0,0);Ze.push({tl:nr,tr:Mr,bl:Yr,br:Dr,tex:Ve,writingMode:fe.writingMode,glyphOffset:Ri,sectionIndex:He.sectionIndex,isSDF:ht,pixelOffsetTL:pi,pixelOffsetBR:mi,minFontScaleX:0,minFontScaleY:0})}return Ze}(0,a,S,p,v,x,h,o.allowVerticalPlacement),oe=o.textSizeData;let ce=null;oe.kind==="source"?(ce=[lo*p.layout.get("text-size").evaluate(x,{})],ce[0]>Ta&&_t(`${o.layerIds[0]}: Value for "text-size" is >= ${ed}. Reduce your "text-size".`)):oe.kind==="composite"&&(ce=[lo*G.compositeTextSizes[0].evaluate(x,{},W),lo*G.compositeTextSizes[1].evaluate(x,{},W)],(ce[0]>Ta||ce[1]>Ta)&&_t(`${o.layerIds[0]}: Value for "text-size" is >= ${ed}. Reduce your "text-size".`)),o.addSymbols(o.text,Q,ce,S,v,x,I,r,E.lineStartIndex,E.lineLength,$,W);for(const xe of z)O[xe]=o.text.placedSymbolArray.length-1;return 4*Q.length}function gS(o){for(const r in o)return o[r];return null}function iR(o,r,a,h){const p=o.compareText;if(r in p){const v=p[r];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<a)return!0}else p[r]=[];return p[r].push(h),!1}const yS=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Av{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,h]=new Uint8Array(r,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=h>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const v=yS[15&h];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(r,2,1),[S]=new Uint32Array(r,4,1);return new Av(S,x,v,r)}constructor(r,a=64,h=Float64Array,p){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=h,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const v=yS.indexOf(this.ArrayType),x=2*r*this.ArrayType.BYTES_PER_ELEMENT,S=r*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-S%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+S+E,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+E),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+S+E,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=r)}add(r,a){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=r,this.coords[this._pos++]=a,h}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return kv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,a,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:S}=this,E=[0,v.length-1,0],I=[];for(;E.length;){const z=E.pop()||0,O=E.pop()||0,$=E.pop()||0;if(O-$<=S){for(let oe=$;oe<=O;oe++){const ce=x[2*oe],xe=x[2*oe+1];ce>=r&&ce<=h&&xe>=a&&xe<=p&&I.push(v[oe])}continue}const G=$+O>>1,W=x[2*G],Q=x[2*G+1];W>=r&&W<=h&&Q>=a&&Q<=p&&I.push(v[G]),(z===0?r<=W:a<=Q)&&(E.push($),E.push(G-1),E.push(1-z)),(z===0?h>=W:p>=Q)&&(E.push(G+1),E.push(O),E.push(1-z))}return I}within(r,a,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:v,nodeSize:x}=this,S=[0,p.length-1,0],E=[],I=h*h;for(;S.length;){const z=S.pop()||0,O=S.pop()||0,$=S.pop()||0;if(O-$<=x){for(let oe=$;oe<=O;oe++)_S(v[2*oe],v[2*oe+1],r,a)<=I&&E.push(p[oe]);continue}const G=$+O>>1,W=v[2*G],Q=v[2*G+1];_S(W,Q,r,a)<=I&&E.push(p[G]),(z===0?r-h<=W:a-h<=Q)&&(S.push($),S.push(G-1),S.push(1-z)),(z===0?r+h>=W:a+h>=Q)&&(S.push(G+1),S.push(O),S.push(1-z))}return E}}function kv(o,r,a,h,p,v){if(p-h<=a)return;const x=h+p>>1;vS(o,r,x,h,p,v),kv(o,r,a,h,x-1,1-v),kv(o,r,a,x+1,p,1-v)}function vS(o,r,a,h,p,v){for(;p>h;){if(p-h>600){const I=p-h+1,z=a-h+1,O=Math.log(I),$=.5*Math.exp(2*O/3),G=.5*Math.sqrt(O*$*(I-$)/I)*(z-I/2<0?-1:1);vS(o,r,a,Math.max(h,Math.floor(a-z*$/I+G)),Math.min(p,Math.floor(a+(I-z)*$/I+G)),v)}const x=r[2*a+v];let S=h,E=p;for(nd(o,r,h,a),r[2*p+v]>x&&nd(o,r,h,p);S<E;){for(nd(o,r,S,E),S++,E--;r[2*S+v]<x;)S++;for(;r[2*E+v]>x;)E--}r[2*h+v]===x?nd(o,r,h,E):(E++,nd(o,r,E,p)),E<=a&&(h=E+1),a<=E&&(p=E-1)}}function nd(o,r,a,h){Iv(o,a,h),Iv(r,2*a,2*h),Iv(r,2*a+1,2*h+1)}function Iv(o,r,a){const h=o[r];o[r]=o[a],o[a]=h}function _S(o,r,a,h){const p=o-a,v=r-h;return p*p+v*v}var Mv;l.bh=void 0,(Mv=l.bh||(l.bh={})).create="create",Mv.load="load",Mv.fullLoad="fullLoad";let Rp=null,rd=[];const Dv=1e3/60,zv="loadTime",Rv="fullLoadTime",sR={mark(o){performance.mark(o)},frame(o){const r=o;Rp!=null&&rd.push(r-Rp),Rp=r},clearMetrics(){Rp=null,rd=[],performance.clearMeasures(zv),performance.clearMeasures(Rv);for(const o in l.bh)performance.clearMarks(l.bh[o])},getPerformanceMetrics(){performance.measure(zv,l.bh.create,l.bh.load),performance.measure(Rv,l.bh.create,l.bh.fullLoad);const o=performance.getEntriesByName(zv)[0].duration,r=performance.getEntriesByName(Rv)[0].duration,a=rd.length,h=1/(rd.reduce((v,x)=>v+x,0)/a/1e3),p=rd.filter(v=>v>Dv).reduce((v,x)=>v+(x-Dv)/Dv,0);return{loadTime:o,fullLoadTime:r,fps:h,percentDroppedFrames:p/(a+p)*100,totalFrames:a}}};l.$=function(o,r,a){var h,p,v,x,S,E,I,z,O,$,G,W,Q=a[0],oe=a[1],ce=a[2];return r===o?(o[12]=r[0]*Q+r[4]*oe+r[8]*ce+r[12],o[13]=r[1]*Q+r[5]*oe+r[9]*ce+r[13],o[14]=r[2]*Q+r[6]*oe+r[10]*ce+r[14],o[15]=r[3]*Q+r[7]*oe+r[11]*ce+r[15]):(p=r[1],v=r[2],x=r[3],S=r[4],E=r[5],I=r[6],z=r[7],O=r[8],$=r[9],G=r[10],W=r[11],o[0]=h=r[0],o[1]=p,o[2]=v,o[3]=x,o[4]=S,o[5]=E,o[6]=I,o[7]=z,o[8]=O,o[9]=$,o[10]=G,o[11]=W,o[12]=h*Q+S*oe+O*ce+r[12],o[13]=p*Q+E*oe+$*ce+r[13],o[14]=v*Q+I*oe+G*ce+r[14],o[15]=x*Q+z*oe+W*ce+r[15]),o},l.A=qu,l.B=li,l.C=class{constructor(o,r,a){this.receive=h=>{const p=h.data,v=p.id;if(v&&(!p.targetMapId||this.mapId===p.targetMapId))if(p.type==="<cancel>"){delete this.tasks[v];const x=this.cancelCallbacks[v];delete this.cancelCallbacks[v],x&&x()}else bt()||p.mustQueue?(this.tasks[v]=p,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,p)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),p=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),p&&this.processTask(h,p)},this.target=o,this.parent=r,this.mapId=a,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new Kz(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=bt()?o:window}send(o,r,a,h,p=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(this.callbacks[v]=a);const x=[],S={id:v,type:o,hasCallback:!!a,targetMapId:h,mustQueue:p,sourceMapId:this.mapId,data:so(r,x)};return this.target.postMessage(S,{transfer:x}),{cancel:()=>{a&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(o,r){if(r.type==="<response>"){const a=this.callbacks[o];delete this.callbacks[o],a&&(r.error?a(_a(r.error)):a(null,_a(r.data)))}else{let a=!1;const h=[],p=r.hasCallback?(S,E)=>{a=!0,delete this.cancelCallbacks[o];const I={id:o,type:"<response>",sourceMapId:this.mapId,error:S?so(S):null,data:so(E,h)};this.target.postMessage(I,{transfer:h})}:S=>{a=!0};let v=null;const x=_a(r.data);if(this.parent[r.type])v=this.parent[r.type](r.sourceMapId,x,p);else if("getWorkerSource"in this.parent){const S=r.type.split(".");v=this.parent.getWorkerSource(r.sourceMapId,S[0],x.source)[S[1]](x,p)}else p(new Error(`Could not find function ${r.type}`));!a&&v&&v.cancel&&(this.cancelCallbacks[o]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.D=ft,l.E=ke,l.F=function(o,r){const a={};for(let h=0;h<r.length;h++){const p=r[h];p in o&&(a[p]=o[p])}return a},l.G=Wb,l.H=Hb,l.I=mv,l.J=F,l.K=H,l.L=Ea,l.M=Wt,l.N=Hn,l.O=Gi,l.P=D,l.Q=Cn,l.R=qi,l.S=dn,l.T=up,l.U=kp,l.V=class extends ko{},l.W=Tv,l.X=function(o,r){const a=window.document.createElement("video");a.muted=!0,a.onloadstart=function(){r(null,a)};for(let h=0;h<o.length;h++){const p=window.document.createElement("source");Ti(o[h])||(a.crossOrigin="Anonymous"),p.src=o[h],a.appendChild(p)}return{cancel:()=>{}}},l.Y=qe,l.Z=function(){var o=new qu(16);return qu!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},l._=w,l.a=ut,l.a$=class extends U{},l.a0=function(o,r,a){var h=a[0],p=a[1],v=a[2];return o[0]=r[0]*h,o[1]=r[1]*h,o[2]=r[2]*h,o[3]=r[3]*h,o[4]=r[4]*p,o[5]=r[5]*p,o[6]=r[6]*p,o[7]=r[7]*p,o[8]=r[8]*v,o[9]=r[9]*v,o[10]=r[10]*v,o[11]=r[11]*v,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},l.a1=Q1,l.a2=function(){return Ge++},l.a3=re,l.a4=Xu,l.a5=function(){hi.isLoading()||hi.isLoaded()||Mh()!=="deferred"||lp()},l.a6=xh,l.a7=zl,l.a8=hn,l.a9=tS,l.aA=Pl,l.aB=function(o){o=o.slice();const r=Object.create(null);for(let a=0;a<o.length;a++)r[o[a].id]=o[a];for(let a=0;a<o.length;a++)"ref"in o[a]&&(o[a]=Ye(o[a],r[o[a].ref]));return o},l.aC=function(o){if(o.type==="custom")return new Hz(o);switch(o.type){case"background":return new Gz(o);case"circle":return new ID(o);case"fill":return new XD(o);case"fill-extrusion":return new hz(o);case"heatmap":return new DD(o);case"hillshade":return new RD(o);case"line":return new _z(o);case"raster":return new Wz(o);case"symbol":return new Ap(o)}},l.aD=Ue,l.aE=function(o,r){if(!o)return[{command:Ke.setStyle,args:[r]}];let a=[];try{if(!Ne(o.version,r.version))return[{command:Ke.setStyle,args:[r]}];Ne(o.center,r.center)||a.push({command:Ke.setCenter,args:[r.center]}),Ne(o.zoom,r.zoom)||a.push({command:Ke.setZoom,args:[r.zoom]}),Ne(o.bearing,r.bearing)||a.push({command:Ke.setBearing,args:[r.bearing]}),Ne(o.pitch,r.pitch)||a.push({command:Ke.setPitch,args:[r.pitch]}),Ne(o.sprite,r.sprite)||a.push({command:Ke.setSprite,args:[r.sprite]}),Ne(o.glyphs,r.glyphs)||a.push({command:Ke.setGlyphs,args:[r.glyphs]}),Ne(o.transition,r.transition)||a.push({command:Ke.setTransition,args:[r.transition]}),Ne(o.light,r.light)||a.push({command:Ke.setLight,args:[r.light]});const h={},p=[];(function(x,S,E,I){let z;for(z in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,z)&&(Object.prototype.hasOwnProperty.call(S,z)||yn(z,E,I));for(z in S)Object.prototype.hasOwnProperty.call(S,z)&&(Object.prototype.hasOwnProperty.call(x,z)?Ne(x[z],S[z])||(x[z].type==="geojson"&&S[z].type==="geojson"&&ji(x,S,z)?E.push({command:Ke.setGeoJSONSourceData,args:[z,S[z].data]}):En(z,S,E,I)):Bt(z,S,E))})(o.sources,r.sources,p,h);const v=[];o.layers&&o.layers.forEach(x=>{h[x.source]?a.push({command:Ke.removeLayer,args:[x.id]}):v.push(x)}),a=a.concat(p),function(x,S,E){S=S||[];const I=(x=x||[]).map(Ei),z=S.map(Ei),O=x.reduce(Ui,{}),$=S.reduce(Ui,{}),G=I.slice(),W=Object.create(null);let Q,oe,ce,xe,fe,be,Ee;for(Q=0,oe=0;Q<I.length;Q++)ce=I[Q],Object.prototype.hasOwnProperty.call($,ce)?oe++:(E.push({command:Ke.removeLayer,args:[ce]}),G.splice(G.indexOf(ce,oe),1));for(Q=0,oe=0;Q<z.length;Q++)ce=z[z.length-1-Q],G[G.length-1-Q]!==ce&&(Object.prototype.hasOwnProperty.call(O,ce)?(E.push({command:Ke.removeLayer,args:[ce]}),G.splice(G.lastIndexOf(ce,G.length-oe),1)):oe++,be=G[G.length-Q],E.push({command:Ke.addLayer,args:[$[ce],be]}),G.splice(G.length-Q,0,ce),W[ce]=!0);for(Q=0;Q<z.length;Q++)if(ce=z[Q],xe=O[ce],fe=$[ce],!W[ce]&&!Ne(xe,fe))if(Ne(xe.source,fe.source)&&Ne(xe["source-layer"],fe["source-layer"])&&Ne(xe.type,fe.type)){for(Ee in eo(xe.layout,fe.layout,E,ce,null,Ke.setLayoutProperty),eo(xe.paint,fe.paint,E,ce,null,Ke.setPaintProperty),Ne(xe.filter,fe.filter)||E.push({command:Ke.setFilter,args:[ce,fe.filter]}),Ne(xe.minzoom,fe.minzoom)&&Ne(xe.maxzoom,fe.maxzoom)||E.push({command:Ke.setLayerZoomRange,args:[ce,fe.minzoom,fe.maxzoom]}),xe)Object.prototype.hasOwnProperty.call(xe,Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?eo(xe[Ee],fe[Ee],E,ce,Ee.slice(6),Ke.setPaintProperty):Ne(xe[Ee],fe[Ee])||E.push({command:Ke.setLayerProperty,args:[ce,Ee,fe[Ee]]}));for(Ee in fe)Object.prototype.hasOwnProperty.call(fe,Ee)&&!Object.prototype.hasOwnProperty.call(xe,Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?eo(xe[Ee],fe[Ee],E,ce,Ee.slice(6),Ke.setPaintProperty):Ne(xe[Ee],fe[Ee])||E.push({command:Ke.setLayerProperty,args:[ce,Ee,fe[Ee]]}))}else E.push({command:Ke.removeLayer,args:[ce]}),be=G[G.lastIndexOf(ce)+1],E.push({command:Ke.addLayer,args:[fe,be]})}(v,r.layers,a)}catch(h){console.warn("Unable to compute style diff:",h),a=[{command:Ke.setStyle,args:[r]}]}return a},l.aF=function(o){const r=[],a=o.id;return a===void 0&&r.push({message:`layers.${a}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${a}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),r},l.aG=function o(r,a){if(Array.isArray(r)){if(!Array.isArray(a)||r.length!==a.length)return!1;for(let h=0;h<r.length;h++)if(!o(r[h],a[h]))return!1;return!0}if(typeof r=="object"&&r!==null&&a!==null){if(typeof a!="object"||Object.keys(r).length!==Object.keys(a).length)return!1;for(const h in r)if(!o(r[h],a[h]))return!1;return!0}return r===a},l.aH=Le,l.aI=Tt,l.aJ=Al,l.aK=function(o){return o({pluginStatus:Gr,pluginURL:oo}),Al.on("pluginStateChange",o),o},l.aL=class extends Do{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},l.aM=ju,l.aN=class extends Do{constructor(o,r){super(o,r),this.current=Wy}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},l.aO=fp,l.aP=class extends Do{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},l.aQ=class extends Do{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},l.aR=pp,l.aS=function(o,r,a,h,p,v,x){var S=1/(r-a),E=1/(h-p),I=1/(v-x);return o[0]=-2*S,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*E,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*I,o[11]=0,o[12]=(r+a)*S,o[13]=(p+h)*E,o[14]=(x+v)*I,o[15]=1,o},l.aT=nn,l.aU=kD,l.aV=class extends f{},l.aW=Sz,l.aX=class extends _{},l.aY=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},l.aZ=rb,l.a_=je,l.aa=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,h,p,v)=>{const x=p||v;return r[h]=!x||x.toLowerCase(),""}),r["max-age"]){const a=parseInt(r["max-age"],10);isNaN(a)?delete r["max-age"]:r["max-age"]=a}return r},l.ab=function(o,r){const a=[];for(const h in o)h in r||a.push(h);return a},l.ac=function(o){if($e==null){const r=o.navigator?o.navigator.userAgent:null;$e=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return $e},l.ad=Se,l.ae=function(o,r,a){var h=Math.sin(a),p=Math.cos(a),v=r[0],x=r[1],S=r[2],E=r[3],I=r[4],z=r[5],O=r[6],$=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=v*p+I*h,o[1]=x*p+z*h,o[2]=S*p+O*h,o[3]=E*p+$*h,o[4]=I*p-v*h,o[5]=z*p-x*h,o[6]=O*p-S*h,o[7]=$*p-E*h,o},l.af=function(o){var r=new qu(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},l.ag=vp,l.ah=function(o,r){let a=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:x}=o,S=p?Se(ui.interpolationFactor(p,r,v,x),0,1):0;o.kind==="camera"?h=li.number(o.minSize,o.maxSize,S):a=S}return{uSizeT:a,uSize:h}},l.aj=function(o,{uSize:r,uSizeT:a},{lowerSize:h,upperSize:p}){return o.kind==="source"?h/lo:o.kind==="composite"?li.number(h/lo,p/lo,a):r},l.ak=_v,l.al=function(o,r,a,h){const p=r.y-o.y,v=r.x-o.x,x=h.y-a.y,S=h.x-a.x,E=x*v-S*p;if(E===0)return null;const I=(S*(o.y-a.y)-x*(o.x-a.x))/E;return new D(o.x+I*v,o.y+I*p)},l.am=sS,l.an=Z1,l.ao=Qy,l.ap=Jn,l.ar=vv,l.as=function(o,r){var a=r[0],h=r[1],p=r[2],v=r[3],x=r[4],S=r[5],E=r[6],I=r[7],z=r[8],O=r[9],$=r[10],G=r[11],W=r[12],Q=r[13],oe=r[14],ce=r[15],xe=a*S-h*x,fe=a*E-p*x,be=a*I-v*x,Ee=h*E-p*S,Re=h*I-v*S,rt=p*I-v*E,lt=z*Q-O*W,tt=z*oe-$*W,Je=z*ce-G*W,Ze=O*oe-$*Q,st=O*ce-G*Q,He=$*ce-G*oe,Ve=xe*He-fe*st+be*Ze+Ee*Je-Re*tt+rt*lt;return Ve?(o[0]=(S*He-E*st+I*Ze)*(Ve=1/Ve),o[1]=(p*st-h*He-v*Ze)*Ve,o[2]=(Q*rt-oe*Re+ce*Ee)*Ve,o[3]=($*Re-O*rt-G*Ee)*Ve,o[4]=(E*Je-x*He-I*tt)*Ve,o[5]=(a*He-p*Je+v*tt)*Ve,o[6]=(oe*be-W*rt-ce*fe)*Ve,o[7]=(z*rt-$*be+G*fe)*Ve,o[8]=(x*st-S*Je+I*lt)*Ve,o[9]=(h*Je-a*st-v*lt)*Ve,o[10]=(W*Re-Q*be+ce*xe)*Ve,o[11]=(O*be-z*Re-G*xe)*Ve,o[12]=(S*tt-x*Ze-E*lt)*Ve,o[13]=(a*Ze-h*tt+p*lt)*Ve,o[14]=(Q*fe-W*Ee-oe*xe)*Ve,o[15]=(z*Ee-O*fe+$*xe)*Ve,o):null},l.at=Pv,l.au=yv,l.av=Av,l.aw=function(){const o={},r=le.$version;for(const a in le.$root){const h=le.$root[a];if(h.required){let p=null;p=a==="version"?r:h.type==="array"?[]:{},p!=null&&(o[a]=p)}}return o},l.ax=Ke,l.ay=ip,l.az=jr,l.b=function(o,r){const a=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(a).then(h=>{r(null,h)}).catch(h=>{r(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.b0=dr,l.b1=function(o,r){var a=o[0],h=o[1],p=o[2],v=o[3],x=o[4],S=o[5],E=o[6],I=o[7],z=o[8],O=o[9],$=o[10],G=o[11],W=o[12],Q=o[13],oe=o[14],ce=o[15],xe=r[0],fe=r[1],be=r[2],Ee=r[3],Re=r[4],rt=r[5],lt=r[6],tt=r[7],Je=r[8],Ze=r[9],st=r[10],He=r[11],Ve=r[12],vt=r[13],ht=r[14],Ft=r[15];return Math.abs(a-xe)<=Wr*Math.max(1,Math.abs(a),Math.abs(xe))&&Math.abs(h-fe)<=Wr*Math.max(1,Math.abs(h),Math.abs(fe))&&Math.abs(p-be)<=Wr*Math.max(1,Math.abs(p),Math.abs(be))&&Math.abs(v-Ee)<=Wr*Math.max(1,Math.abs(v),Math.abs(Ee))&&Math.abs(x-Re)<=Wr*Math.max(1,Math.abs(x),Math.abs(Re))&&Math.abs(S-rt)<=Wr*Math.max(1,Math.abs(S),Math.abs(rt))&&Math.abs(E-lt)<=Wr*Math.max(1,Math.abs(E),Math.abs(lt))&&Math.abs(I-tt)<=Wr*Math.max(1,Math.abs(I),Math.abs(tt))&&Math.abs(z-Je)<=Wr*Math.max(1,Math.abs(z),Math.abs(Je))&&Math.abs(O-Ze)<=Wr*Math.max(1,Math.abs(O),Math.abs(Ze))&&Math.abs($-st)<=Wr*Math.max(1,Math.abs($),Math.abs(st))&&Math.abs(G-He)<=Wr*Math.max(1,Math.abs(G),Math.abs(He))&&Math.abs(W-Ve)<=Wr*Math.max(1,Math.abs(W),Math.abs(Ve))&&Math.abs(Q-vt)<=Wr*Math.max(1,Math.abs(Q),Math.abs(vt))&&Math.abs(oe-ht)<=Wr*Math.max(1,Math.abs(oe),Math.abs(ht))&&Math.abs(ce-Ft)<=Wr*Math.max(1,Math.abs(ce),Math.abs(Ft))},l.b2=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},l.b3=function(o,r,a){return o[0]=r[0]*a[0],o[1]=r[1]*a[1],o[2]=r[2]*a[2],o[3]=r[3]*a[3],o},l.b4=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]*r[3]},l.b5=Ie,l.b6=Qb,l.b7=Kb,l.b8=function(o,r,a,h,p){var v,x=1/Math.tan(r/2);return o[0]=x/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,p!=null&&p!==1/0?(o[10]=(p+h)*(v=1/(h-p)),o[14]=2*p*h*v):(o[10]=-1,o[14]=-2*h),o},l.b9=function(o,r,a){var h=Math.sin(a),p=Math.cos(a),v=r[4],x=r[5],S=r[6],E=r[7],I=r[8],z=r[9],O=r[10],$=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=v*p+I*h,o[5]=x*p+z*h,o[6]=S*p+O*h,o[7]=E*p+$*h,o[8]=I*p-v*h,o[9]=z*p-x*h,o[10]=O*p-S*h,o[11]=$*p-E*h,o},l.bA=A,l.bB=Cb,l.bC=Mu,l.bD=hi,l.ba=te,l.bb=me,l.bc=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},l.bd=class extends Ml{},l.be=Sv,l.bf=Xb,l.bg=sR,l.bi=Ci,l.bj=function(o,r,a=!1){if(Gr===Eh||Gr===Ph||Gr===Ah)throw new Error("setRTLTextPlugin cannot be called multiple times.");oo=lr.resolveURL(o),Gr=Eh,kh=r,Ih(),a||lp()},l.bk=Mh,l.bl=function(o,r){const a={};for(let p=0;p<o.length;p++){const v=r&&r[o[p].id]||Lu(o[p]);r&&(r[o[p].id]=v);let x=a[v];x||(x=a[v]=[]),x.push(o[p])}const h=[];for(const p in a)h.push(a[p]);return h},l.bm=it,l.bn=eS,l.bo=nS,l.bp=zb,l.bq=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Hn/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0],a=r.layout,h=r._unevaluatedLayout._values,p={layoutIconSize:h["icon-size"].possiblyEvaluate(new hn(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new hn(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new hn(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:I,maxZoom:z}=o.bucket.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new hn(I),o.canonical),h["text-size"].possiblyEvaluate(new hn(z),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:I,maxZoom:z}=o.bucket.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new hn(I),o.canonical),h["icon-size"].possiblyEvaluate(new hn(z),o.canonical)]}const v=a.get("text-line-height")*Jn,x=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",S=a.get("text-keep-upright"),E=a.get("text-size");for(const I of o.bucket.features){const z=a.get("text-font").evaluate(I,{},o.canonical).join(","),O=E.evaluate(I,{},o.canonical),$=p.layoutTextSize.evaluate(I,{},o.canonical),G=p.layoutIconSize.evaluate(I,{},o.canonical),W={horizontal:{},vertical:void 0},Q=I.text;let oe,ce=[0,0];if(Q){const be=Q.toString(),Ee=a.get("text-letter-spacing").evaluate(I,{},o.canonical)*Jn,Re=Ch(be)?Ee:0,rt=a.get("text-anchor").evaluate(I,{},o.canonical),lt=pS(r,I,o.canonical);if(!lt){const He=a.get("text-radial-offset").evaluate(I,{},o.canonical);ce=He?fS(rt,[He*Jn,Ev]):a.get("text-offset").evaluate(I,{},o.canonical).map(Ve=>Ve*Jn)}let tt=x?"center":a.get("text-justify").evaluate(I,{},o.canonical);const Je=a.get("symbol-placement"),Ze=Je==="point"?a.get("text-max-width").evaluate(I,{},o.canonical)*Jn:0,st=()=>{o.bucket.allowVerticalPlacement&&Sh(be)&&(W.vertical=Tp(Q,o.glyphMap,o.glyphPositions,o.imagePositions,z,Ze,v,rt,"left",Re,ce,l.ai.vertical,!0,Je,$,O))};if(!x&&lt){const He=new Set;if(tt==="auto")for(let vt=0;vt<lt.values.length;vt+=2)He.add(Pv(lt.values[vt]));else He.add(tt);let Ve=!1;for(const vt of He)if(!W.horizontal[vt])if(Ve)W.horizontal[vt]=W.horizontal[0];else{const ht=Tp(Q,o.glyphMap,o.glyphPositions,o.imagePositions,z,Ze,v,"center",vt,Re,ce,l.ai.horizontal,!1,Je,$,O);ht&&(W.horizontal[vt]=ht,Ve=ht.positionedLines.length===1)}st()}else{tt==="auto"&&(tt=Pv(rt));const He=Tp(Q,o.glyphMap,o.glyphPositions,o.imagePositions,z,Ze,v,rt,tt,Re,ce,l.ai.horizontal,!1,Je,$,O);He&&(W.horizontal[tt]=He),st(),Sh(be)&&x&&S&&(W.vertical=Tp(Q,o.glyphMap,o.glyphPositions,o.imagePositions,z,Ze,v,rt,tt,Re,ce,l.ai.vertical,!1,Je,$,O))}}let xe=!1;if(I.icon&&I.icon.name){const be=o.imageMap[I.icon.name];be&&(oe=Vz(o.imagePositions[I.icon.name],a.get("icon-offset").evaluate(I,{},o.canonical),a.get("icon-anchor").evaluate(I,{},o.canonical)),xe=!!be.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=xe:o.bucket.sdfIcons!==xe&&_t("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(be.pixelRatio!==o.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const fe=gS(W.horizontal)||W.vertical;o.bucket.iconsInText=!!fe&&fe.iconsInText,(fe||oe)&&rR(o.bucket,I,W,oe,o.imageMap,p,$,G,ce,xe,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},l.br=hv,l.bs=lv,l.bt=cv,l.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},l.bv=fv,l.bw=Sa,l.bx=function(o,r,a,h,p){return w(this,void 0,void 0,function*(){if(H())try{return yield Wt(o,r,a,h,p)}catch{}return function(v,x,S,E,I){const z=v.width,O=v.height;Gt&&Mt||(Gt=new OffscreenCanvas(z,O),Mt=Gt.getContext("2d",{willReadFrequently:!0})),Gt.width=z,Gt.height=O,Mt.drawImage(v,0,0,z,O);const $=Mt.getImageData(x,S,E,I);return Mt.clearRect(0,0,z,O),$.data}(o,r,a,h,p)})},l.by=Jb,l.bz=b,l.c=$r,l.d=function(o,r){const a=new Image;a.onload=()=>{r(null,a),URL.revokeObjectURL(a.src),a.onload=null,window.requestAnimationFrame(()=>{a.src=Et})},a.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(o)],{type:"image/png"});a.src=o.byteLength?URL.createObjectURL(h):Et},l.e=Ce,l.f=function(o,r){return ss(Ce(o,{type:"json"}),r)},l.g=Ur,l.h=lr,l.i=bt,l.j=ge,l.k=Es,l.l=Qs,l.m=ss,l.n=function(o){return new fv(o).readFields(Rz,[])},l.o=function(o,r,a){if(!o.length)return a(null,[]);let h=o.length;const p=new Array(o.length);let v=null;o.forEach((x,S)=>{r(x,(E,I)=>{E&&(v=E),p[S]=I,--h==0&&a(v,p)})})},l.p=Db,l.q=qh,l.r=Bn,l.s=Ti,l.t=Uy,l.u=nt,l.v=le,l.w=_t,l.x=Nu,l.y=Ds,l.z=function([o,r,a]){return r+=90,r*=Math.PI/180,a*=Math.PI/180,{x:o*Math.cos(r)*Math.sin(a),y:o*Math.sin(r)*Math.sin(a),z:o*Math.cos(a)}}}),d(["./shared"],function(l){class w{constructor(V){this.keyCache={},V&&this.replace(V)}replace(V){this._layerConfigs={},this._layers={},this.update(V,[])}update(V,j){for(const se of V){this._layerConfigs[se.id]=se;const ae=this._layers[se.id]=l.aC(se);ae._featureFilter=l.a6(ae.filter),this.keyCache[se.id]&&delete this.keyCache[se.id]}for(const se of j)delete this.keyCache[se],delete this._layerConfigs[se],delete this._layers[se];this.familiesBySource={};const X=l.bl(Object.values(this._layerConfigs),this.keyCache);for(const se of X){const ae=se.map(De=>this._layers[De.id]),we=ae[0];if(we.visibility==="none")continue;const pe=we.source||"";let he=this.familiesBySource[pe];he||(he=this.familiesBySource[pe]={});const _e=we.sourceLayer||"_geojsonTileLayer";let Me=he[_e];Me||(Me=he[_e]=[]),Me.push(ae)}}}class b{constructor(V){const j={},X=[];for(const pe in V){const he=V[pe],_e=j[pe]={};for(const Me in he){const De=he[+Me];if(!De||De.bitmap.width===0||De.bitmap.height===0)continue;const Oe={x:0,y:0,w:De.bitmap.width+2,h:De.bitmap.height+2};X.push(Oe),_e[Me]={rect:Oe,metrics:De.metrics}}}const{w:se,h:ae}=l.p(X),we=new l.q({width:se||1,height:ae||1});for(const pe in V){const he=V[pe];for(const _e in he){const Me=he[+_e];if(!Me||Me.bitmap.width===0||Me.bitmap.height===0)continue;const De=j[pe][_e].rect;l.q.copy(Me.bitmap,we,{x:0,y:0},{x:De.x+1,y:De.y+1},Me.bitmap)}}this.image=we,this.positions=j}}l.bm("GlyphAtlas",b);class A{constructor(V){this.tileID=new l.O(V.tileID.overscaledZ,V.tileID.wrap,V.tileID.canonical.z,V.tileID.canonical.x,V.tileID.canonical.y),this.uid=V.uid,this.zoom=V.zoom,this.pixelRatio=V.pixelRatio,this.tileSize=V.tileSize,this.source=V.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=V.showCollisionBoxes,this.collectResourceTiming=!!V.collectResourceTiming,this.returnDependencies=!!V.returnDependencies,this.promoteId=V.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(V,j,X,se,ae){this.status="parsing",this.data=V,this.collisionBoxArray=new l.a3;const we=new l.bn(Object.keys(V.layers).sort()),pe=new l.bo(this.tileID,this.promoteId);pe.bucketLayerIDs=[];const he={},_e={featureIndex:pe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:X},Me=j.familiesBySource[this.source];for(const Ht in Me){const Zt=V.layers[Ht];if(!Zt)continue;Zt.version===1&&l.w(`Vector tile source "${this.source}" layer "${Ht}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const _r=we.encode(Ht),an=[];for(let Wn=0;Wn<Zt.length;Wn++){const cr=Zt.feature(Wn),Pi=pe.getId(cr,Ht);an.push({feature:cr,id:Pi,index:Wn,sourceLayerIndex:_r})}for(const Wn of Me[Ht]){const cr=Wn[0];cr.source!==this.source&&l.w(`layer.source = ${cr.source} does not equal this.source = ${this.source}`),cr.minzoom&&this.zoom<Math.floor(cr.minzoom)||cr.maxzoom&&this.zoom>=cr.maxzoom||cr.visibility!=="none"&&(k(Wn,this.zoom,X),(he[cr.id]=cr.createBucket({index:pe.bucketLayerIDs.length,layers:Wn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:_r,sourceID:this.source})).populate(an,_e,this.tileID.canonical),pe.bucketLayerIDs.push(Wn.map(Pi=>Pi.id)))}}let De,Oe,yt,Pt;const ot=l.aH(_e.glyphDependencies,Ht=>Object.keys(Ht).map(Number));this.inFlightDependencies.forEach(Ht=>Ht==null?void 0:Ht.cancel()),this.inFlightDependencies=[];const xt=++this.dependencySentinel;Object.keys(ot).length?this.inFlightDependencies.push(se.send("getGlyphs",{uid:this.uid,stacks:ot,source:this.source,tileID:this.tileID,type:"glyphs"},(Ht,Zt)=>{xt===this.dependencySentinel&&(De||(De=Ht,Oe=Zt,sn.call(this)))})):Oe={};const kt=Object.keys(_e.iconDependencies);kt.length?this.inFlightDependencies.push(se.send("getImages",{icons:kt,source:this.source,tileID:this.tileID,type:"icons"},(Ht,Zt)=>{xt===this.dependencySentinel&&(De||(De=Ht,yt=Zt,sn.call(this)))})):yt={};const en=Object.keys(_e.patternDependencies);function sn(){if(De)return ae(De);if(Oe&&yt&&Pt){const Ht=new b(Oe),Zt=new l.bp(yt,Pt);for(const _r in he){const an=he[_r];an instanceof l.a4?(k(an.layers,this.zoom,X),l.bq({bucket:an,glyphMap:Oe,glyphPositions:Ht.positions,imageMap:yt,imagePositions:Zt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):an.hasPattern&&(an instanceof l.br||an instanceof l.bs||an instanceof l.bt)&&(k(an.layers,this.zoom,X),an.addFeatures(_e,this.tileID.canonical,Zt.patternPositions))}this.status="done",ae(null,{buckets:Object.values(he).filter(_r=>!_r.isEmpty()),featureIndex:pe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ht.image,imageAtlas:Zt,glyphMap:this.returnDependencies?Oe:null,iconMap:this.returnDependencies?yt:null,glyphPositions:this.returnDependencies?Ht.positions:null})}}en.length?this.inFlightDependencies.push(se.send("getImages",{icons:en,source:this.source,tileID:this.tileID,type:"patterns"},(Ht,Zt)=>{xt===this.dependencySentinel&&(De||(De=Ht,Pt=Zt,sn.call(this)))})):Pt={},sn.call(this)}}function k(ne,V,j){const X=new l.a8(V);for(const se of ne)se.recalculate(X,j)}function D(ne,V){const j=l.l(ne.request,(X,se,ae,we)=>{if(X)V(X);else if(se)try{const pe=new l.bw.VectorTile(new l.bv(se));V(null,{vectorTile:pe,rawData:se,cacheControl:ae,expires:we})}catch(pe){const he=new Uint8Array(se);let _e=`Unable to parse the tile at ${ne.request.url}, `;_e+=he[0]===31&&he[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${pe.messge}`,V(new Error(_e))}});return()=>{j.cancel(),V()}}class B{constructor(V,j,X,se){this.actor=V,this.layerIndex=j,this.availableImages=X,this.loadVectorData=se||D,this.fetching={},this.loading={},this.loaded={}}loadTile(V,j){const X=V.uid;this.loading||(this.loading={});const se=!!(V&&V.request&&V.request.collectResourceTiming)&&new l.bu(V.request),ae=this.loading[X]=new A(V);ae.abort=this.loadVectorData(V,(we,pe)=>{if(delete this.loading[X],we||!pe)return ae.status="done",this.loaded[X]=ae,j(we);const he=pe.rawData,_e={};pe.expires&&(_e.expires=pe.expires),pe.cacheControl&&(_e.cacheControl=pe.cacheControl);const Me={};if(se){const De=se.finish();De&&(Me.resourceTiming=JSON.parse(JSON.stringify(De)))}ae.vectorTile=pe.vectorTile,ae.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,(De,Oe)=>{if(delete this.fetching[X],De||!Oe)return j(De);j(null,l.e({rawTileData:he.slice(0)},Oe,_e,Me))}),this.loaded=this.loaded||{},this.loaded[X]=ae,this.fetching[X]={rawTileData:he,cacheControl:_e,resourceTiming:Me}})}reloadTile(V,j){const X=this.loaded,se=V.uid;if(X&&X[se]){const ae=X[se];ae.showCollisionBoxes=V.showCollisionBoxes,ae.status==="parsing"?ae.parse(ae.vectorTile,this.layerIndex,this.availableImages,this.actor,(we,pe)=>{if(we||!pe)return j(we,pe);let he;if(this.fetching[se]){const{rawTileData:_e,cacheControl:Me,resourceTiming:De}=this.fetching[se];delete this.fetching[se],he=l.e({rawTileData:_e.slice(0)},pe,Me,De)}else he=pe;j(null,he)}):ae.status==="done"&&(ae.vectorTile?ae.parse(ae.vectorTile,this.layerIndex,this.availableImages,this.actor,j):j())}}abortTile(V,j){const X=this.loading,se=V.uid;X&&X[se]&&X[se].abort&&(X[se].abort(),delete X[se]),j()}removeTile(V,j){const X=this.loaded,se=V.uid;X&&X[se]&&delete X[se],j()}}class q{constructor(){this.loaded={}}loadTile(V,j){return l._(this,void 0,void 0,function*(){const{uid:X,encoding:se,rawImageData:ae,redFactor:we,greenFactor:pe,blueFactor:he,baseShift:_e}=V,Me=ae.width+2,De=ae.height+2,Oe=l.a(ae)?new l.R({width:Me,height:De},yield l.bx(ae,-1,-1,Me,De)):ae,yt=new l.by(X,Oe,se,we,pe,he,_e);this.loaded=this.loaded||{},this.loaded[X]=yt,j(null,yt)})}removeTile(V){const j=this.loaded,X=V.uid;j&&j[X]&&delete j[X]}}function Z(ne,V){if(ne.length!==0){K(ne[0],V);for(var j=1;j<ne.length;j++)K(ne[j],!V)}}function K(ne,V){for(var j=0,X=0,se=0,ae=ne.length,we=ae-1;se<ae;we=se++){var pe=(ne[se][0]-ne[we][0])*(ne[we][1]+ne[se][1]),he=j+pe;X+=Math.abs(j)>=Math.abs(pe)?j-he+pe:pe-he+j,j=he}j+X>=0!=!!V&&ne.reverse()}var N=l.bz(function ne(V,j){var X,se=V&&V.type;if(se==="FeatureCollection")for(X=0;X<V.features.length;X++)ne(V.features[X],j);else if(se==="GeometryCollection")for(X=0;X<V.geometries.length;X++)ne(V.geometries[X],j);else if(se==="Feature")ne(V.geometry,j);else if(se==="Polygon")Z(V.coordinates,j);else if(se==="MultiPolygon")for(X=0;X<V.coordinates.length;X++)Z(V.coordinates[X],j);return V});const F=l.bw.VectorTileFeature.prototype.toGeoJSON;var H={exports:{}},te=l.bA,me=l.bw.VectorTileFeature,Se=Ie;function Ie(ne,V){this.options=V||{},this.features=ne,this.length=ne.length}function Ce(ne,V){this.id=typeof ne.id=="number"?ne.id:void 0,this.type=ne.type,this.rawGeometry=ne.type===1?[ne.geometry]:ne.geometry,this.properties=ne.tags,this.extent=V||4096}Ie.prototype.feature=function(ne){return new Ce(this.features[ne],this.options.extent)},Ce.prototype.loadGeometry=function(){var ne=this.rawGeometry;this.geometry=[];for(var V=0;V<ne.length;V++){for(var j=ne[V],X=[],se=0;se<j.length;se++)X.push(new te(j[se][0],j[se][1]));this.geometry.push(X)}return this.geometry},Ce.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ne=this.geometry,V=1/0,j=-1/0,X=1/0,se=-1/0,ae=0;ae<ne.length;ae++)for(var we=ne[ae],pe=0;pe<we.length;pe++){var he=we[pe];V=Math.min(V,he.x),j=Math.max(j,he.x),X=Math.min(X,he.y),se=Math.max(se,he.y)}return[V,X,j,se]},Ce.prototype.toGeoJSON=me.prototype.toGeoJSON;var Ge=l.bB,Le=Se;function Tt(ne){var V=new Ge;return function(j,X){for(var se in j.layers)X.writeMessage(3,Ue,j.layers[se])}(ne,V),V.finish()}function Ue(ne,V){var j;V.writeVarintField(15,ne.version||1),V.writeStringField(1,ne.name||""),V.writeVarintField(5,ne.extent||4096);var X={keys:[],values:[],keycache:{},valuecache:{}};for(j=0;j<ne.length;j++)X.feature=ne.feature(j),V.writeMessage(2,gt,X);var se=X.keys;for(j=0;j<se.length;j++)V.writeStringField(3,se[j]);var ae=X.values;for(j=0;j<ae.length;j++)V.writeMessage(4,$e,ae[j])}function gt(ne,V){var j=ne.feature;j.id!==void 0&&V.writeVarintField(1,j.id),V.writeMessage(2,_t,ne),V.writeVarintField(3,j.type),V.writeMessage(4,bt,j)}function _t(ne,V){var j=ne.feature,X=ne.keys,se=ne.values,ae=ne.keycache,we=ne.valuecache;for(var pe in j.properties){var he=j.properties[pe],_e=ae[pe];if(he!==null){_e===void 0&&(X.push(pe),ae[pe]=_e=X.length-1),V.writeVarint(_e);var Me=typeof he;Me!=="string"&&Me!=="boolean"&&Me!=="number"&&(he=JSON.stringify(he));var De=Me+":"+he,Oe=we[De];Oe===void 0&&(se.push(he),we[De]=Oe=se.length-1),V.writeVarint(Oe)}}}function Lt(ne,V){return(V<<3)+(7&ne)}function zt(ne){return ne<<1^ne>>31}function bt(ne,V){for(var j=ne.loadGeometry(),X=ne.type,se=0,ae=0,we=j.length,pe=0;pe<we;pe++){var he=j[pe],_e=1;X===1&&(_e=he.length),V.writeVarint(Lt(1,_e));for(var Me=X===3?he.length-1:he.length,De=0;De<Me;De++){De===1&&X!==1&&V.writeVarint(Lt(2,Me-1));var Oe=he[De].x-se,yt=he[De].y-ae;V.writeVarint(zt(Oe)),V.writeVarint(zt(yt)),se+=Oe,ae+=yt}X===3&&V.writeVarint(Lt(7,1))}}function $e(ne,V){var j=typeof ne;j==="string"?V.writeStringField(1,ne):j==="boolean"?V.writeBooleanField(7,ne):j==="number"&&(ne%1!=0?V.writeDoubleField(3,ne):ne<0?V.writeSVarintField(6,ne):V.writeVarintField(5,ne))}H.exports=Tt,H.exports.fromVectorTileJs=Tt,H.exports.fromGeojsonVt=function(ne,V){V=V||{};var j={};for(var X in ne)j[X]=new Le(ne[X].features,V),j[X].name=X,j[X].version=V.version,j[X].extent=V.extent;return Tt({layers:j})},H.exports.GeoJSONWrapper=Le;var ut=l.bz(H.exports);const Et={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ne=>ne},Wt=Math.fround||(Gt=new Float32Array(1),ne=>(Gt[0]=+ne,Gt[0]));var Gt;const Mt=3,gn=5,si=6;class lr{constructor(V){this.options=Object.assign(Object.create(Et),V),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(V){const{log:j,minZoom:X,maxZoom:se}=this.options;j&&console.time("total time");const ae=`prepare ${V.length} points`;j&&console.time(ae),this.points=V;const we=[];for(let he=0;he<V.length;he++){const _e=V[he];if(!_e.geometry)continue;const[Me,De]=_e.geometry.coordinates,Oe=Wt(jr(Me)),yt=Wt(Ur(De));we.push(Oe,yt,1/0,he,-1,1),this.options.reduce&&we.push(0)}let pe=this.trees[se+1]=this._createTree(we);j&&console.timeEnd(ae);for(let he=se;he>=X;he--){const _e=+Date.now();pe=this.trees[he]=this._createTree(this._cluster(pe,he)),j&&console.log("z%d: %d clusters in %dms",he,pe.numItems,+Date.now()-_e)}return j&&console.timeEnd("total time"),this}getClusters(V,j){let X=((V[0]+180)%360+360)%360-180;const se=Math.max(-90,Math.min(90,V[1]));let ae=V[2]===180?180:((V[2]+180)%360+360)%360-180;const we=Math.max(-90,Math.min(90,V[3]));if(V[2]-V[0]>=360)X=-180,ae=180;else if(X>ae){const De=this.getClusters([X,se,180,we],j),Oe=this.getClusters([-180,se,ae,we],j);return De.concat(Oe)}const pe=this.trees[this._limitZoom(j)],he=pe.range(jr(X),Ur(we),jr(ae),Ur(se)),_e=pe.data,Me=[];for(const De of he){const Oe=this.stride*De;Me.push(_e[Oe+gn]>1?$r(_e,Oe,this.clusterProps):this.points[_e[Oe+Mt]])}return Me}getChildren(V){const j=this._getOriginId(V),X=this._getOriginZoom(V),se="No cluster with the specified id.",ae=this.trees[X];if(!ae)throw new Error(se);const we=ae.data;if(j*this.stride>=we.length)throw new Error(se);const pe=this.options.radius/(this.options.extent*Math.pow(2,X-1)),he=ae.within(we[j*this.stride],we[j*this.stride+1],pe),_e=[];for(const Me of he){const De=Me*this.stride;we[De+4]===V&&_e.push(we[De+gn]>1?$r(we,De,this.clusterProps):this.points[we[De+Mt]])}if(_e.length===0)throw new Error(se);return _e}getLeaves(V,j,X){const se=[];return this._appendLeaves(se,V,j=j||10,X=X||0,0),se}getTile(V,j,X){const se=this.trees[this._limitZoom(V)],ae=Math.pow(2,V),{extent:we,radius:pe}=this.options,he=pe/we,_e=(X-he)/ae,Me=(X+1+he)/ae,De={features:[]};return this._addTileFeatures(se.range((j-he)/ae,_e,(j+1+he)/ae,Me),se.data,j,X,ae,De),j===0&&this._addTileFeatures(se.range(1-he/ae,_e,1,Me),se.data,ae,X,ae,De),j===ae-1&&this._addTileFeatures(se.range(0,_e,he/ae,Me),se.data,-1,X,ae,De),De.features.length?De:null}getClusterExpansionZoom(V){let j=this._getOriginZoom(V)-1;for(;j<=this.options.maxZoom;){const X=this.getChildren(V);if(j++,X.length!==1)break;V=X[0].properties.cluster_id}return j}_appendLeaves(V,j,X,se,ae){const we=this.getChildren(j);for(const pe of we){const he=pe.properties;if(he&&he.cluster?ae+he.point_count<=se?ae+=he.point_count:ae=this._appendLeaves(V,he.cluster_id,X,se,ae):ae<se?ae++:V.push(pe),V.length===X)break}return ae}_createTree(V){const j=new l.av(V.length/this.stride|0,this.options.nodeSize,Float32Array);for(let X=0;X<V.length;X+=this.stride)j.add(V[X],V[X+1]);return j.finish(),j.data=V,j}_addTileFeatures(V,j,X,se,ae,we){for(const pe of V){const he=pe*this.stride,_e=j[he+gn]>1;let Me,De,Oe;if(_e)Me=Ci(j,he,this.clusterProps),De=j[he],Oe=j[he+1];else{const ot=this.points[j[he+Mt]];Me=ot.properties;const[xt,kt]=ot.geometry.coordinates;De=jr(xt),Oe=Ur(kt)}const yt={type:1,geometry:[[Math.round(this.options.extent*(De*ae-X)),Math.round(this.options.extent*(Oe*ae-se))]],tags:Me};let Pt;Pt=_e||this.options.generateId?j[he+Mt]:this.points[j[he+Mt]].id,Pt!==void 0&&(yt.id=Pt),we.features.push(yt)}}_limitZoom(V){return Math.max(this.options.minZoom,Math.min(Math.floor(+V),this.options.maxZoom+1))}_cluster(V,j){const{radius:X,extent:se,reduce:ae,minPoints:we}=this.options,pe=X/(se*Math.pow(2,j)),he=V.data,_e=[],Me=this.stride;for(let De=0;De<he.length;De+=Me){if(he[De+2]<=j)continue;he[De+2]=j;const Oe=he[De],yt=he[De+1],Pt=V.within(he[De],he[De+1],pe),ot=he[De+gn];let xt=ot;for(const kt of Pt){const en=kt*Me;he[en+2]>j&&(xt+=he[en+gn])}if(xt>ot&&xt>=we){let kt,en=Oe*ot,sn=yt*ot,Ht=-1;const Zt=((De/Me|0)<<5)+(j+1)+this.points.length;for(const _r of Pt){const an=_r*Me;if(he[an+2]<=j)continue;he[an+2]=j;const Wn=he[an+gn];en+=he[an]*Wn,sn+=he[an+1]*Wn,he[an+4]=Zt,ae&&(kt||(kt=this._map(he,De,!0),Ht=this.clusterProps.length,this.clusterProps.push(kt)),ae(kt,this._map(he,an)))}he[De+4]=Zt,_e.push(en/xt,sn/xt,1/0,Zt,-1,xt),ae&&_e.push(Ht)}else{for(let kt=0;kt<Me;kt++)_e.push(he[De+kt]);if(xt>1)for(const kt of Pt){const en=kt*Me;if(!(he[en+2]<=j)){he[en+2]=j;for(let sn=0;sn<Me;sn++)_e.push(he[en+sn])}}}}return _e}_getOriginId(V){return V-this.points.length>>5}_getOriginZoom(V){return(V-this.points.length)%32}_map(V,j,X){if(V[j+gn]>1){const we=this.clusterProps[V[j+si]];return X?Object.assign({},we):we}const se=this.points[V[j+Mt]].properties,ae=this.options.map(se);return X&&ae===se?Object.assign({},ae):ae}}function $r(ne,V,j){return{type:"Feature",id:ne[V+Mt],properties:Ci(ne,V,j),geometry:{type:"Point",coordinates:[(X=ne[V],360*(X-.5)),Ys(ne[V+1])]}};var X}function Ci(ne,V,j){const X=ne[V+gn],se=X>=1e4?`${Math.round(X/1e3)}k`:X>=1e3?Math.round(X/100)/10+"k":X,ae=ne[V+si],we=ae===-1?{}:Object.assign({},j[ae]);return Object.assign(we,{cluster:!0,cluster_id:ne[V+Mt],point_count:X,point_count_abbreviated:se})}function jr(ne){return ne/360+.5}function Ur(ne){const V=Math.sin(ne*Math.PI/180),j=.5-.25*Math.log((1+V)/(1-V))/Math.PI;return j<0?0:j>1?1:j}function Ys(ne){const V=(180-360*ne)*Math.PI/180;return 360*Math.atan(Math.exp(V))/Math.PI-90}function ss(ne,V,j,X){for(var se,ae=X,we=j-V>>1,pe=j-V,he=ne[V],_e=ne[V+1],Me=ne[j],De=ne[j+1],Oe=V+3;Oe<j;Oe+=3){var yt=Qs(ne[Oe],ne[Oe+1],he,_e,Me,De);if(yt>ae)se=Oe,ae=yt;else if(yt===ae){var Pt=Math.abs(Oe-we);Pt<pe&&(se=Oe,pe=Pt)}}ae>X&&(se-V>3&&ss(ne,V,se,X),ne[se+2]=ae,j-se>3&&ss(ne,se,j,X))}function Qs(ne,V,j,X,se,ae){var we=se-j,pe=ae-X;if(we!==0||pe!==0){var he=((ne-j)*we+(V-X)*pe)/(we*we+pe*pe);he>1?(j=se,X=ae):he>0&&(j+=we*he,X+=pe*he)}return(we=ne-j)*we+(pe=V-X)*pe}function Ti(ne,V,j,X){var se={id:ne===void 0?null:ne,type:V,geometry:j,tags:X,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ae){var we=ae.geometry,pe=ae.type;if(pe==="Point"||pe==="MultiPoint"||pe==="LineString")wo(ae,we);else if(pe==="Polygon"||pe==="MultiLineString")for(var he=0;he<we.length;he++)wo(ae,we[he]);else if(pe==="MultiPolygon")for(he=0;he<we.length;he++)for(var _e=0;_e<we[he].length;_e++)wo(ae,we[he][_e])}(se),se}function wo(ne,V){for(var j=0;j<V.length;j+=3)ne.minX=Math.min(ne.minX,V[j]),ne.minY=Math.min(ne.minY,V[j+1]),ne.maxX=Math.max(ne.maxX,V[j]),ne.maxY=Math.max(ne.maxY,V[j+1])}function Js(ne,V,j,X){if(V.geometry){var se=V.geometry.coordinates,ae=V.geometry.type,we=Math.pow(j.tolerance/((1<<j.maxZoom)*j.extent),2),pe=[],he=V.id;if(j.promoteId?he=V.properties[j.promoteId]:j.generateId&&(he=X||0),ae==="Point")Es(se,pe);else if(ae==="MultiPoint")for(var _e=0;_e<se.length;_e++)Es(se[_e],pe);else if(ae==="LineString")ge(se,pe,we,!1);else if(ae==="MultiLineString"){if(j.lineMetrics){for(_e=0;_e<se.length;_e++)ge(se[_e],pe=[],we,!1),ne.push(Ti(he,"LineString",pe,V.properties));return}ke(se,pe,we,!1)}else if(ae==="Polygon")ke(se,pe,we,!0);else{if(ae!=="MultiPolygon"){if(ae==="GeometryCollection"){for(_e=0;_e<V.geometry.geometries.length;_e++)Js(ne,{id:he,geometry:V.geometry.geometries[_e],properties:V.properties},j,X);return}throw new Error("Input data is not a valid GeoJSON object.")}for(_e=0;_e<se.length;_e++){var Me=[];ke(se[_e],Me,we,!0),pe.push(Me)}}ne.push(Ti(he,ae,pe,V.properties))}}function Es(ne,V){V.push(le(ne[0])),V.push(et(ne[1])),V.push(0)}function ge(ne,V,j,X){for(var se,ae,we=0,pe=0;pe<ne.length;pe++){var he=le(ne[pe][0]),_e=et(ne[pe][1]);V.push(he),V.push(_e),V.push(0),pe>0&&(we+=X?(se*_e-he*ae)/2:Math.sqrt(Math.pow(he-se,2)+Math.pow(_e-ae,2))),se=he,ae=_e}var Me=V.length-3;V[2]=1,ss(V,0,Me,j),V[Me+2]=1,V.size=Math.abs(we),V.start=0,V.end=V.size}function ke(ne,V,j,X){for(var se=0;se<ne.length;se++){var ae=[];ge(ne[se],ae,j,X),V.push(ae)}}function le(ne){return ne/360+.5}function et(ne){var V=Math.sin(ne*Math.PI/180),j=.5-.25*Math.log((1+V)/(1-V))/Math.PI;return j<0?0:j>1?1:j}function Ye(ne,V,j,X,se,ae,we,pe){if(X/=V,ae>=(j/=V)&&we<X)return ne;if(we<j||ae>=X)return null;for(var he=[],_e=0;_e<ne.length;_e++){var Me=ne[_e],De=Me.geometry,Oe=Me.type,yt=se===0?Me.minX:Me.minY,Pt=se===0?Me.maxX:Me.maxY;if(yt>=j&&Pt<X)he.push(Me);else if(!(Pt<j||yt>=X)){var ot=[];if(Oe==="Point"||Oe==="MultiPoint")Ne(De,ot,j,X,se);else if(Oe==="LineString")Ke(De,ot,j,X,se,!1,pe.lineMetrics);else if(Oe==="MultiLineString")yn(De,ot,j,X,se,!1);else if(Oe==="Polygon")yn(De,ot,j,X,se,!0);else if(Oe==="MultiPolygon")for(var xt=0;xt<De.length;xt++){var kt=[];yn(De[xt],kt,j,X,se,!0),kt.length&&ot.push(kt)}if(ot.length){if(pe.lineMetrics&&Oe==="LineString"){for(xt=0;xt<ot.length;xt++)he.push(Ti(Me.id,Oe,ot[xt],Me.tags));continue}Oe!=="LineString"&&Oe!=="MultiLineString"||(ot.length===1?(Oe="LineString",ot=ot[0]):Oe="MultiLineString"),Oe!=="Point"&&Oe!=="MultiPoint"||(Oe=ot.length===3?"Point":"MultiPoint"),he.push(Ti(Me.id,Oe,ot,Me.tags))}}}return he.length?he:null}function Ne(ne,V,j,X,se){for(var ae=0;ae<ne.length;ae+=3){var we=ne[ae+se];we>=j&&we<=X&&(V.push(ne[ae]),V.push(ne[ae+1]),V.push(ne[ae+2]))}}function Ke(ne,V,j,X,se,ae,we){for(var pe,he,_e=Bt(ne),Me=se===0?ji:eo,De=ne.start,Oe=0;Oe<ne.length-3;Oe+=3){var yt=ne[Oe],Pt=ne[Oe+1],ot=ne[Oe+2],xt=ne[Oe+3],kt=ne[Oe+4],en=se===0?yt:Pt,sn=se===0?xt:kt,Ht=!1;we&&(pe=Math.sqrt(Math.pow(yt-xt,2)+Math.pow(Pt-kt,2))),en<j?sn>j&&(he=Me(_e,yt,Pt,xt,kt,j),we&&(_e.start=De+pe*he)):en>X?sn<X&&(he=Me(_e,yt,Pt,xt,kt,X),we&&(_e.start=De+pe*he)):En(_e,yt,Pt,ot),sn<j&&en>=j&&(he=Me(_e,yt,Pt,xt,kt,j),Ht=!0),sn>X&&en<=X&&(he=Me(_e,yt,Pt,xt,kt,X),Ht=!0),!ae&&Ht&&(we&&(_e.end=De+pe*he),V.push(_e),_e=Bt(ne)),we&&(De+=pe)}var Zt=ne.length-3;yt=ne[Zt],Pt=ne[Zt+1],ot=ne[Zt+2],(en=se===0?yt:Pt)>=j&&en<=X&&En(_e,yt,Pt,ot),Zt=_e.length-3,ae&&Zt>=3&&(_e[Zt]!==_e[0]||_e[Zt+1]!==_e[1])&&En(_e,_e[0],_e[1],_e[2]),_e.length&&V.push(_e)}function Bt(ne){var V=[];return V.size=ne.size,V.start=ne.start,V.end=ne.end,V}function yn(ne,V,j,X,se,ae){for(var we=0;we<ne.length;we++)Ke(ne[we],V,j,X,se,ae,!1)}function En(ne,V,j,X){ne.push(V),ne.push(j),ne.push(X)}function ji(ne,V,j,X,se,ae){var we=(ae-V)/(X-V);return ne.push(ae),ne.push(j+(se-j)*we),ne.push(1),we}function eo(ne,V,j,X,se,ae){var we=(ae-j)/(se-j);return ne.push(V+(X-V)*we),ne.push(ae),ne.push(1),we}function Ei(ne,V){for(var j=[],X=0;X<ne.length;X++){var se,ae=ne[X],we=ae.type;if(we==="Point"||we==="MultiPoint"||we==="LineString")se=Ui(ae.geometry,V);else if(we==="MultiLineString"||we==="Polygon"){se=[];for(var pe=0;pe<ae.geometry.length;pe++)se.push(Ui(ae.geometry[pe],V))}else if(we==="MultiPolygon")for(se=[],pe=0;pe<ae.geometry.length;pe++){for(var he=[],_e=0;_e<ae.geometry[pe].length;_e++)he.push(Ui(ae.geometry[pe][_e],V));se.push(he)}j.push(Ti(ae.id,we,se,ae.tags))}return j}function Ui(ne,V){var j=[];j.size=ne.size,ne.start!==void 0&&(j.start=ne.start,j.end=ne.end);for(var X=0;X<ne.length;X+=3)j.push(ne[X]+V,ne[X+1],ne[X+2]);return j}function qe(ne,V){if(ne.transformed)return ne;var j,X,se,ae=1<<ne.z,we=ne.x,pe=ne.y;for(j=0;j<ne.features.length;j++){var he=ne.features[j],_e=he.geometry,Me=he.type;if(he.geometry=[],Me===1)for(X=0;X<_e.length;X+=2)he.geometry.push(oi(_e[X],_e[X+1],V,ae,we,pe));else for(X=0;X<_e.length;X++){var De=[];for(se=0;se<_e[X].length;se+=2)De.push(oi(_e[X][se],_e[X][se+1],V,ae,we,pe));he.geometry.push(De)}}return ne.transformed=!0,ne}function oi(ne,V,j,X,se,ae){return[Math.round(j*(ne*X-se)),Math.round(j*(V*X-ae))]}function vn(ne,V,j,X,se){for(var ae=V===se.maxZoom?0:se.tolerance/((1<<V)*se.extent),we={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:j,y:X,z:V,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},pe=0;pe<ne.length;pe++){we.numFeatures++,os(we,ne[pe],ae,se);var he=ne[pe].minX,_e=ne[pe].minY,Me=ne[pe].maxX,De=ne[pe].maxY;he<we.minX&&(we.minX=he),_e<we.minY&&(we.minY=_e),Me>we.maxX&&(we.maxX=Me),De>we.maxY&&(we.maxY=De)}return we}function os(ne,V,j,X){var se=V.geometry,ae=V.type,we=[];if(ae==="Point"||ae==="MultiPoint")for(var pe=0;pe<se.length;pe+=3)we.push(se[pe]),we.push(se[pe+1]),ne.numPoints++,ne.numSimplified++;else if(ae==="LineString")Ps(we,se,ne,j,!1,!1);else if(ae==="MultiLineString"||ae==="Polygon")for(pe=0;pe<se.length;pe++)Ps(we,se[pe],ne,j,ae==="Polygon",pe===0);else if(ae==="MultiPolygon")for(var he=0;he<se.length;he++){var _e=se[he];for(pe=0;pe<_e.length;pe++)Ps(we,_e[pe],ne,j,!0,pe===0)}if(we.length){var Me=V.tags||null;if(ae==="LineString"&&X.lineMetrics){for(var De in Me={},V.tags)Me[De]=V.tags[De];Me.mapbox_clip_start=se.start/se.size,Me.mapbox_clip_end=se.end/se.size}var Oe={geometry:we,type:ae==="Polygon"||ae==="MultiPolygon"?3:ae==="LineString"||ae==="MultiLineString"?2:1,tags:Me};V.id!==null&&(Oe.id=V.id),ne.features.push(Oe)}}function Ps(ne,V,j,X,se,ae){var we=X*X;if(X>0&&V.size<(se?we:X))j.numPoints+=V.length/3;else{for(var pe=[],he=0;he<V.length;he+=3)(X===0||V[he+2]>we)&&(j.numSimplified++,pe.push(V[he]),pe.push(V[he+1])),j.numPoints++;se&&function(_e,Me){for(var De=0,Oe=0,yt=_e.length,Pt=yt-2;Oe<yt;Pt=Oe,Oe+=2)De+=(_e[Oe]-_e[Pt])*(_e[Oe+1]+_e[Pt+1]);if(De>0===Me)for(Oe=0,yt=_e.length;Oe<yt/2;Oe+=2){var ot=_e[Oe],xt=_e[Oe+1];_e[Oe]=_e[yt-2-Oe],_e[Oe+1]=_e[yt-1-Oe],_e[yt-2-Oe]=ot,_e[yt-1-Oe]=xt}}(pe,ae),ne.push(pe)}}function Xe(ne,V){var j=(V=this.options=function(se,ae){for(var we in ae)se[we]=ae[we];return se}(Object.create(this.options),V)).debug;if(j&&console.time("preprocess data"),V.maxZoom<0||V.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(V.promoteId&&V.generateId)throw new Error("promoteId and generateId cannot be used together.");var X=function(se,ae){var we=[];if(se.type==="FeatureCollection")for(var pe=0;pe<se.features.length;pe++)Js(we,se.features[pe],ae,pe);else Js(we,se.type==="Feature"?se:{geometry:se},ae);return we}(ne,V);this.tiles={},this.tileCoords=[],j&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",V.indexMaxZoom,V.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),X=function(se,ae){var we=ae.buffer/ae.extent,pe=se,he=Ye(se,1,-1-we,we,0,-1,2,ae),_e=Ye(se,1,1-we,2+we,0,-1,2,ae);return(he||_e)&&(pe=Ye(se,1,-we,1+we,0,-1,2,ae)||[],he&&(pe=Ei(he,1).concat(pe)),_e&&(pe=pe.concat(Ei(_e,-1)))),pe}(X,V),X.length&&this.splitTile(X,0,0,0),j&&(X.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ot(ne,V,j){return 32*((1<<ne)*j+V)+ne}function At(ne,V){return V?ne.properties[V]:ne.id}function Ar(ne,V){if(ne==null)return!0;if(ne.type==="Feature")return At(ne,V)!=null;if(ne.type==="FeatureCollection"){const j=new Set;for(const X of ne.features){const se=At(X,V);if(se==null||j.has(se))return!1;j.add(se)}return!0}return!1}function as(ne,V){const j=new Map;if(ne!=null)if(ne.type==="Feature")j.set(At(ne,V),ne);else for(const X of ne.features)j.set(At(X,V),X);return j}Xe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Xe.prototype.splitTile=function(ne,V,j,X,se,ae,we){for(var pe=[ne,V,j,X],he=this.options,_e=he.debug;pe.length;){X=pe.pop(),j=pe.pop(),V=pe.pop(),ne=pe.pop();var Me=1<<V,De=Ot(V,j,X),Oe=this.tiles[De];if(!Oe&&(_e>1&&console.time("creation"),Oe=this.tiles[De]=vn(ne,V,j,X,he),this.tileCoords.push({z:V,x:j,y:X}),_e)){_e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",V,j,X,Oe.numFeatures,Oe.numPoints,Oe.numSimplified),console.timeEnd("creation"));var yt="z"+V;this.stats[yt]=(this.stats[yt]||0)+1,this.total++}if(Oe.source=ne,se){if(V===he.maxZoom||V===se)continue;var Pt=1<<se-V;if(j!==Math.floor(ae/Pt)||X!==Math.floor(we/Pt))continue}else if(V===he.indexMaxZoom||Oe.numPoints<=he.indexMaxPoints)continue;if(Oe.source=null,ne.length!==0){_e>1&&console.time("clipping");var ot,xt,kt,en,sn,Ht,Zt=.5*he.buffer/he.extent,_r=.5-Zt,an=.5+Zt,Wn=1+Zt;ot=xt=kt=en=null,sn=Ye(ne,Me,j-Zt,j+an,0,Oe.minX,Oe.maxX,he),Ht=Ye(ne,Me,j+_r,j+Wn,0,Oe.minX,Oe.maxX,he),ne=null,sn&&(ot=Ye(sn,Me,X-Zt,X+an,1,Oe.minY,Oe.maxY,he),xt=Ye(sn,Me,X+_r,X+Wn,1,Oe.minY,Oe.maxY,he),sn=null),Ht&&(kt=Ye(Ht,Me,X-Zt,X+an,1,Oe.minY,Oe.maxY,he),en=Ye(Ht,Me,X+_r,X+Wn,1,Oe.minY,Oe.maxY,he),Ht=null),_e>1&&console.timeEnd("clipping"),pe.push(ot||[],V+1,2*j,2*X),pe.push(xt||[],V+1,2*j,2*X+1),pe.push(kt||[],V+1,2*j+1,2*X),pe.push(en||[],V+1,2*j+1,2*X+1)}}},Xe.prototype.getTile=function(ne,V,j){var X=this.options,se=X.extent,ae=X.debug;if(ne<0||ne>24)return null;var we=1<<ne,pe=Ot(ne,V=(V%we+we)%we,j);if(this.tiles[pe])return qe(this.tiles[pe],se);ae>1&&console.log("drilling down to z%d-%d-%d",ne,V,j);for(var he,_e=ne,Me=V,De=j;!he&&_e>0;)_e--,Me=Math.floor(Me/2),De=Math.floor(De/2),he=this.tiles[Ot(_e,Me,De)];return he&&he.source?(ae>1&&console.log("found parent tile z%d-%d-%d",_e,Me,De),ae>1&&console.time("drilling down"),this.splitTile(he.source,_e,Me,De,ne,V,j),ae>1&&console.timeEnd("drilling down"),this.tiles[pe]?qe(this.tiles[pe],se):null):null};class Dt extends B{constructor(V,j,X,se){super(V,j,X),this._dataUpdateable=new Map,this.loadGeoJSON=(ae,we)=>{const{promoteId:pe}=ae;if(ae.request)return l.f(ae.request,(he,_e,Me,De)=>{this._dataUpdateable=Ar(_e,pe)?as(_e,pe):void 0,we(he,_e,Me,De)});if(typeof ae.data=="string")try{const he=JSON.parse(ae.data);this._dataUpdateable=Ar(he,pe)?as(he,pe):void 0,we(null,he)}catch{we(new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`))}else ae.dataDiff?this._dataUpdateable?(function(he,_e,Me){var De,Oe,yt,Pt;if(_e.removeAll&&he.clear(),_e.remove)for(const ot of _e.remove)he.delete(ot);if(_e.add)for(const ot of _e.add){const xt=At(ot,Me);xt!=null&&he.set(xt,ot)}if(_e.update)for(const ot of _e.update){let xt=he.get(ot.id);if(xt==null)continue;const kt=!ot.removeAllProperties&&(((De=ot.removeProperties)===null||De===void 0?void 0:De.length)>0||((Oe=ot.addOrUpdateProperties)===null||Oe===void 0?void 0:Oe.length)>0);if((ot.newGeometry||ot.removeAllProperties||kt)&&(xt=Object.assign({},xt),he.set(ot.id,xt),kt&&(xt.properties=Object.assign({},xt.properties))),ot.newGeometry&&(xt.geometry=ot.newGeometry),ot.removeAllProperties)xt.properties={};else if(((yt=ot.removeProperties)===null||yt===void 0?void 0:yt.length)>0)for(const en of ot.removeProperties)Object.prototype.hasOwnProperty.call(xt.properties,en)&&delete xt.properties[en];if(((Pt=ot.addOrUpdateProperties)===null||Pt===void 0?void 0:Pt.length)>0)for(const{key:en,value:sn}of ot.addOrUpdateProperties)xt.properties[en]=sn}}(this._dataUpdateable,ae.dataDiff,pe),we(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):we(new Error(`Cannot update existing geojson data in ${ae.source}`)):we(new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,se&&(this.loadGeoJSON=se)}loadGeoJSONTile(V,j){const X=V.tileID.canonical;if(!this._geoJSONIndex)return j(null,null);const se=this._geoJSONIndex.getTile(X.z,X.x,X.y);if(!se)return j(null,null);const ae=new class{constructor(pe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.N,this.length=pe.length,this._features=pe}feature(pe){return new class{constructor(he){this._feature=he,this.extent=l.N,this.type=he.type,this.properties=he.tags,"id"in he&&!isNaN(he.id)&&(this.id=parseInt(he.id,10))}loadGeometry(){if(this._feature.type===1){const he=[];for(const _e of this._feature.geometry)he.push([new l.P(_e[0],_e[1])]);return he}{const he=[];for(const _e of this._feature.geometry){const Me=[];for(const De of _e)Me.push(new l.P(De[0],De[1]));he.push(Me)}return he}}toGeoJSON(he,_e,Me){return F.call(this,he,_e,Me)}}(this._features[pe])}}(se.features);let we=ut(ae);we.byteOffset===0&&we.byteLength===we.buffer.byteLength||(we=new Uint8Array(we)),j(null,{vectorTile:ae,rawData:we.buffer})}loadData(V,j){var X;(X=this._pendingRequest)===null||X===void 0||X.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const se=!!(V&&V.request&&V.request.collectResourceTiming)&&new l.bu(V.request);this._pendingCallback=j,this._pendingRequest=this.loadGeoJSON(V,(ae,we)=>{if(delete this._pendingCallback,delete this._pendingRequest,ae||!we)return j(ae);if(typeof we!="object")return j(new Error(`Input data given to '${V.source}' is not a valid GeoJSON object.`));{N(we,!0);try{if(V.filter){const he=l.bC(V.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(he.result==="error")throw new Error(he.value.map(Me=>`${Me.key}: ${Me.message}`).join(", "));we={type:"FeatureCollection",features:we.features.filter(Me=>he.value.evaluate({zoom:0},Me))}}this._geoJSONIndex=V.cluster?new lr(function({superclusterOptions:he,clusterProperties:_e}){if(!_e||!he)return he;const Me={},De={},Oe={accumulated:null,zoom:0},yt={properties:null},Pt=Object.keys(_e);for(const ot of Pt){const[xt,kt]=_e[ot],en=l.bC(kt),sn=l.bC(typeof xt=="string"?[xt,["accumulated"],["get",ot]]:xt);Me[ot]=en.value,De[ot]=sn.value}return he.map=ot=>{yt.properties=ot;const xt={};for(const kt of Pt)xt[kt]=Me[kt].evaluate(Oe,yt);return xt},he.reduce=(ot,xt)=>{yt.properties=xt;for(const kt of Pt)Oe.accumulated=ot[kt],ot[kt]=De[kt].evaluate(Oe,yt)},he}(V)).load(we.features):function(he,_e){return new Xe(he,_e)}(we,V.geojsonVtOptions)}catch(he){return j(he)}this.loaded={};const pe={};if(se){const he=se.finish();he&&(pe.resourceTiming={},pe.resourceTiming[V.source]=JSON.parse(JSON.stringify(he)))}j(null,pe)}})}reloadTile(V,j){const X=this.loaded;return X&&X[V.uid]?super.reloadTile(V,j):this.loadTile(V,j)}removeSource(V,j){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),j()}getClusterExpansionZoom(V,j){try{j(null,this._geoJSONIndex.getClusterExpansionZoom(V.clusterId))}catch(X){j(X)}}getClusterChildren(V,j){try{j(null,this._geoJSONIndex.getChildren(V.clusterId))}catch(X){j(X)}}getClusterLeaves(V,j){try{j(null,this._geoJSONIndex.getLeaves(V.clusterId,V.limit,V.offset))}catch(X){j(X)}}}class As{constructor(V){this.self=V,this.actor=new l.C(V,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:B,geojson:Dt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(j,X)=>{if(this.workerSourceTypes[j])throw new Error(`Worker source with name "${j}" already registered.`);this.workerSourceTypes[j]=X},this.self.registerRTLTextPlugin=j=>{if(l.bD.isParsed())throw new Error("RTL text plugin already registered.");l.bD.applyArabicShaping=j.applyArabicShaping,l.bD.processBidirectionalText=j.processBidirectionalText,l.bD.processStyledBidirectionalText=j.processStyledBidirectionalText}}setReferrer(V,j){this.referrer=j}setImages(V,j,X){this.availableImages[V]=j;for(const se in this.workerSources[V]){const ae=this.workerSources[V][se];for(const we in ae)ae[we].availableImages=j}X()}setLayers(V,j,X){this.getLayerIndex(V).replace(j),X()}updateLayers(V,j,X){this.getLayerIndex(V).update(j.layers,j.removedIds),X()}loadTile(V,j,X){this.getWorkerSource(V,j.type,j.source).loadTile(j,X)}loadDEMTile(V,j,X){this.getDEMWorkerSource(V,j.source).loadTile(j,X)}reloadTile(V,j,X){this.getWorkerSource(V,j.type,j.source).reloadTile(j,X)}abortTile(V,j,X){this.getWorkerSource(V,j.type,j.source).abortTile(j,X)}removeTile(V,j,X){this.getWorkerSource(V,j.type,j.source).removeTile(j,X)}removeDEMTile(V,j){this.getDEMWorkerSource(V,j.source).removeTile(j)}removeSource(V,j,X){if(!this.workerSources[V]||!this.workerSources[V][j.type]||!this.workerSources[V][j.type][j.source])return;const se=this.workerSources[V][j.type][j.source];delete this.workerSources[V][j.type][j.source],se.removeSource!==void 0?se.removeSource(j,X):X()}loadWorkerSource(V,j,X){try{this.self.importScripts(j.url),X()}catch(se){X(se.toString())}}syncRTLPluginState(V,j,X){try{l.bD.setState(j);const se=l.bD.getPluginURL();if(l.bD.isLoaded()&&!l.bD.isParsed()&&se!=null){this.self.importScripts(se);const ae=l.bD.isParsed();X(ae?void 0:new Error(`RTL Text Plugin failed to import scripts from ${se}`),ae)}}catch(se){X(se.toString())}}getAvailableImages(V){let j=this.availableImages[V];return j||(j=[]),j}getLayerIndex(V){let j=this.layerIndexes[V];return j||(j=this.layerIndexes[V]=new w),j}getWorkerSource(V,j,X){return this.workerSources[V]||(this.workerSources[V]={}),this.workerSources[V][j]||(this.workerSources[V][j]={}),this.workerSources[V][j][X]||(this.workerSources[V][j][X]=new this.workerSourceTypes[j]({send:(se,ae,we)=>{this.actor.send(se,ae,we,V)}},this.getLayerIndex(V),this.getAvailableImages(V))),this.workerSources[V][j][X]}getDEMWorkerSource(V,j){return this.demWorkerSources[V]||(this.demWorkerSources[V]={}),this.demWorkerSources[V][j]||(this.demWorkerSources[V][j]=new q),this.demWorkerSources[V][j]}}return l.i()&&(self.worker=new As(self)),As}),d(["./shared"],function(l){var w="3.6.2";class b{static testProp(i){if(!b.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in b.docStyle)return i[u];return i[0]}static create(i,u,f){const g=window.document.createElement(i);return u!==void 0&&(g.className=u),f&&f.appendChild(g),g}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){b.docStyle&&b.selectProp&&(b.userSelect=b.docStyle[b.selectProp],b.docStyle[b.selectProp]="none")}static enableDrag(){b.docStyle&&b.selectProp&&(b.docStyle[b.selectProp]=b.userSelect)}static setTransform(i,u){i.style[b.transformProp]=u}static addEventListener(i,u,f,g={}){i.addEventListener(u,f,"passive"in g?g:g.capture)}static removeEventListener(i,u,f,g={}){i.removeEventListener(u,f,"passive"in g?g:g.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",b.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",b.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",b.suppressClickInternal,!0)},0)}static mousePos(i,u){const f=i.getBoundingClientRect();return new l.P(u.clientX-f.left-i.clientLeft,u.clientY-f.top-i.clientTop)}static touchPos(i,u){const f=i.getBoundingClientRect(),g=[];for(let _=0;_<u.length;_++)g.push(new l.P(u[_].clientX-f.left-i.clientLeft,u[_].clientY-f.top-i.clientTop));return g}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}b.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,b.selectProp=b.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),b.transformProp=b.testProp(["transform","WebkitTransform"]);const A={supported:!1,testSupport:function(y){!B&&D&&(q?Z(y):k=y)}};let k,D,B=!1,q=!1;function Z(y){const i=y.createTexture();y.bindTexture(y.TEXTURE_2D,i);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,D),y.isContextLost())return;A.supported=!0}catch{}y.deleteTexture(i),B=!0}var K,N;typeof document<"u"&&(D=document.createElement("img"),D.onload=function(){k&&Z(k),k=null,q=!0},D.onerror=function(){B=!0,k=null},D.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let i,u,f,g;y.resetRequestQueue=()=>{i=[],u=0,f=0,g={}},y.addThrottleControl=M=>{const R=f++;return g[R]=M,R},y.removeThrottleControl=M=>{delete g[M],T()},y.getImage=(M,R,L=!0)=>{A.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*");const U={requestParameters:M,supportImageRefresh:L,callback:R,cancelled:!1,completed:!1,cancel:()=>{U.completed||U.cancelled||(U.cancelled=!0,U.innerRequest&&(U.innerRequest.cancel(),u--),T())}};return i.push(U),T(),U};const _=M=>{const{requestParameters:R,supportImageRefresh:L,callback:U}=M;return l.e(R,{type:"image"}),(L!==!1||l.i()||l.g(R.url)||R.headers&&!Object.keys(R.headers).reduce((ee,J)=>ee&&J==="accept",!0)?l.m:P)(R,(ee,J,re,Y)=>{C(M,U,ee,J,re,Y)})},C=(M,R,L,U,ee,J)=>{L?R(L):U instanceof HTMLImageElement||l.a(U)?R(null,U):U&&((re,Y)=>{typeof createImageBitmap=="function"?l.b(re,Y):l.d(re,Y)})(U,(re,Y)=>{re!=null?R(re):Y!=null&&R(null,Y,{cacheControl:ee,expires:J})}),M.cancelled||(M.completed=!0,u--,T())},T=()=>{const M=(()=>{const R=Object.keys(g);let L=!1;if(R.length>0){for(const U of R)if(L=g[U](),L)break}return L})()?l.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let R=u;R<M&&i.length>0;R++){const L=i.shift();if(L.cancelled){R--;continue}const U=_(L);u++,L.innerRequest=U}},P=(M,R)=>{const L=new Image,U=M.url;let ee=!1;const J=M.credentials;return J&&J==="include"?L.crossOrigin="use-credentials":(J&&J==="same-origin"||!l.s(U))&&(L.crossOrigin="anonymous"),L.fetchPriority="high",L.onload=()=>{R(null,L),L.onerror=L.onload=null},L.onerror=()=>{ee||R(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),L.onerror=L.onload=null},L.src=U,{cancel:()=>{ee=!0,L.src=""}}}}(K||(K={})),K.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(N||(N={}));class F{constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}normalizeSpriteURL(i,u,f){const g=function(_){const C=_.match(H);if(!C)throw new Error(`Unable to parse URL "${_}"`);return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}(i);return g.path+=`${u}${f}`,function(_){const C=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${C}`}(g)}setTransformRequest(i){this._transformRequestFn=i}}const H=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function te(y){var i=new l.A(3);return i[0]=y[0],i[1]=y[1],i[2]=y[2],i}var me,Se=function(y,i,u){return y[0]=i[0]-u[0],y[1]=i[1]-u[1],y[2]=i[2]-u[2],y};me=new l.A(3),l.A!=Float32Array&&(me[0]=0,me[1]=0,me[2]=0);var Ie=function(y){var i=y[0],u=y[1];return i*i+u*u};function Ce(y){const i=[];if(typeof y=="string")i.push({id:"default",url:y});else if(y&&y.length>0){const u=[];for(const{id:f,url:g}of y){const _=`${f}${g}`;u.indexOf(_)===-1&&(u.push(_),i.push({id:f,url:g}))}}return i}function Ge(y,i,u,f,g){if(f)return void y(f);if(g!==Object.values(i).length||g!==Object.values(u).length)return;const _={};for(const C in i){_[C]={};const T=l.h.getImageCanvasContext(u[C]),P=i[C];for(const M in P){const{width:R,height:L,x:U,y:ee,sdf:J,pixelRatio:re,stretchX:Y,stretchY:ye,content:Te}=P[M];_[C][M]={data:null,pixelRatio:re,sdf:J,stretchX:Y,stretchY:ye,content:Te,spriteData:{width:R,height:L,x:U,y:ee,context:T}}}}y(null,_)}(function(){var y=new l.A(2);l.A!=Float32Array&&(y[0]=0,y[1]=0)})();class Le{constructor(i,u,f,g){this.context=i,this.format=f,this.texture=i.gl.createTexture(),this.update(u,g)}update(i,u,f){const{width:g,height:_}=i,C=!(this.size&&this.size[0]===g&&this.size[1]===_||f),{context:T}=this,{gl:P}=T;if(this.useMipmap=!!(u&&u.useMipmap),P.bindTexture(P.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===P.RGBA&&(!u||u.premultiply!==!1)),C)this.size=[g,_],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.a(i)?P.texImage2D(P.TEXTURE_2D,0,this.format,this.format,P.UNSIGNED_BYTE,i):P.texImage2D(P.TEXTURE_2D,0,this.format,g,_,0,this.format,P.UNSIGNED_BYTE,i.data);else{const{x:M,y:R}=f||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.a(i)?P.texSubImage2D(P.TEXTURE_2D,0,M,R,P.RGBA,P.UNSIGNED_BYTE,i):P.texSubImage2D(P.TEXTURE_2D,0,M,R,g,_,P.RGBA,P.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&P.generateMipmap(P.TEXTURE_2D)}bind(i,u,f){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),f!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=_.LINEAR),i!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,i),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,f||i),this.filter=i),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function Tt(y){const{userImage:i}=y;return!!(i&&i.render&&i.render())&&(y.data.replace(new Uint8Array(i.data.buffer)),!0)}class Ue extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,callback:f}of this.requestors)this._notify(u,f);this.requestors=[]}}getImage(i){const u=this.images[i];if(u&&!u.data&&u.spriteData){const f=u.spriteData;u.data=new l.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),u.spriteData=null}return u}addImage(i,u){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let f=!0;const g=u.data||u.spriteData;return this._validateStretch(u.stretchX,g&&g.width)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "stretchX" value`))),f=!1),this._validateStretch(u.stretchY,g&&g.height)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "stretchY" value`))),f=!1),this._validateContent(u.content,u)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "content" value`))),f=!1),f}_validateStretch(i,u){if(!i)return!0;let f=0;for(const g of i){if(g[0]<f||g[1]<g[0]||u<g[1])return!1;f=g[1]}return!0}_validateContent(i,u){if(!i)return!0;if(i.length!==4)return!1;const f=u.spriteData,g=f&&f.width||u.data.width,_=f&&f.height||u.data.height;return!(i[0]<0||g<i[0]||i[1]<0||_<i[1]||i[2]<0||g<i[2]||i[3]<0||_<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,u,f=!0){const g=this.getImage(i);if(f&&(g.data.width!==u.data.width||g.data.height!==u.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=g.version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,u){let f=!0;if(!this.isLoaded())for(const g of i)this.images[g]||(f=!1);this.isLoaded()||f?this._notify(i,u):this.requestors.push({ids:i,callback:u})}_notify(i,u){const f={};for(const g of i){let _=this.getImage(g);_||(this.fire(new l.k("styleimagemissing",{id:g})),_=this.getImage(g)),_?f[g]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:l.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,f)}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],f=this.getImage(i);if(!f)return null;if(u&&u.position.version===f.version)return u.position;if(u)u.position.version=f.version;else{const g={w:f.data.width+2,h:f.data.height+2,x:0,y:0},_=new l.I(g,f);this.patterns[i]={bin:g,position:_}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Le(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const _ in this.patterns)i.push(this.patterns[_].bin);const{w:u,h:f}=l.p(i),g=this.atlasImage;g.resize({width:u||1,height:f||1});for(const _ in this.patterns){const{bin:C}=this.patterns[_],T=C.x+1,P=C.y+1,M=this.getImage(_).data,R=M.width,L=M.height;l.R.copy(M,g,{x:0,y:0},{x:T,y:P},{width:R,height:L}),l.R.copy(M,g,{x:0,y:L-1},{x:T,y:P-1},{width:R,height:1}),l.R.copy(M,g,{x:0,y:0},{x:T,y:P+L},{width:R,height:1}),l.R.copy(M,g,{x:R-1,y:0},{x:T-1,y:P},{width:1,height:L}),l.R.copy(M,g,{x:0,y:0},{x:T+R,y:P},{width:1,height:L})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const f=this.getImage(u);f||l.w(`Image with ID: "${u}" was not found`),Tt(f)&&this.updateImage(u,f)}}}const gt=1e20;function _t(y,i,u,f,g,_,C,T,P){for(let M=i;M<i+f;M++)Lt(y,u*_+M,_,g,C,T,P);for(let M=u;M<u+g;M++)Lt(y,M*_+i,1,f,C,T,P)}function Lt(y,i,u,f,g,_,C){_[0]=0,C[0]=-gt,C[1]=gt,g[0]=y[i];for(let T=1,P=0,M=0;T<f;T++){g[T]=y[i+T*u];const R=T*T;do{const L=_[P];M=(g[T]-g[L]+R-L*L)/(T-L)/2}while(M<=C[P]&&--P>-1);P++,_[P]=T,C[P]=M,C[P+1]=gt}for(let T=0,P=0;T<f;T++){for(;C[P+1]<T;)P++;const M=_[P],R=T-M;y[i+T*u]=g[M]+R*R}}class zt{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i,u){const f=[];for(const g in i)for(const _ of i[g])f.push({stack:g,id:_});l.o(f,({stack:g,id:_},C)=>{let T=this.entries[g];T||(T=this.entries[g]={glyphs:{},requests:{},ranges:{}});let P=T.glyphs[_];if(P!==void 0)return void C(null,{stack:g,id:_,glyph:P});if(P=this._tinySDF(T,g,_),P)return T.glyphs[_]=P,void C(null,{stack:g,id:_,glyph:P});const M=Math.floor(_/256);if(256*M>65535)return void C(new Error("glyphs > 65535 not supported"));if(T.ranges[M])return void C(null,{stack:g,id:_,glyph:P});if(!this.url)return void C(new Error("glyphsUrl is not set"));let R=T.requests[M];R||(R=T.requests[M]=[],zt.loadGlyphRange(g,M,this.url,this.requestManager,(L,U)=>{if(U){for(const ee in U)this._doesCharSupportLocalGlyph(+ee)||(T.glyphs[+ee]=U[+ee]);T.ranges[M]=!0}for(const ee of R)ee(L,U);delete T.requests[M]})),R.push((L,U)=>{L?C(L):U&&C(null,{stack:g,id:_,glyph:U[_]||null})})},(g,_)=>{if(g)u(g);else if(_){const C={};for(const{stack:T,id:P,glyph:M}of _)(C[T]||(C[T]={}))[P]=M&&{id:M.id,bitmap:M.bitmap.clone(),metrics:M.metrics};u(null,C)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(l.u["CJK Unified Ideographs"](i)||l.u["Hangul Syllables"](i)||l.u.Hiragana(i)||l.u.Katakana(i))}_tinySDF(i,u,f){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let _=i.tinySDF;if(!_){let T="400";/bold/i.test(u)?T="900":/medium/i.test(u)?T="500":/light/i.test(u)&&(T="200"),_=i.tinySDF=new zt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:T})}const C=_.draw(String.fromCharCode(f));return{id:f,bitmap:new l.q({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}zt.loadGlyphRange=function(y,i,u,f,g){const _=256*i,C=_+255,T=f.transformRequest(u.replace("{fontstack}",y).replace("{range}",`${_}-${C}`),N.Glyphs);l.l(T,(P,M)=>{if(P)g(P);else if(M){const R={};for(const L of l.n(M))R[L.id]=L;g(null,R)}})},zt.TinySDF=class{constructor({fontSize:y=24,buffer:i=3,radius:u=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:_="normal",fontStyle:C="normal"}={}){this.buffer=i,this.cutoff=f,this.radius=u;const T=this.size=y+4*i,P=this._createCanvas(T),M=this.ctx=P.getContext("2d",{willReadFrequently:!0});M.font=`${C} ${_} ${y}px ${g}`,M.textBaseline="alphabetic",M.textAlign="left",M.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(y){const i=document.createElement("canvas");return i.width=i.height=y,i}draw(y){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:_}=this.ctx.measureText(y),C=Math.ceil(u),T=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-g))),P=Math.min(this.size-this.buffer,C+Math.ceil(f)),M=T+2*this.buffer,R=P+2*this.buffer,L=Math.max(M*R,0),U=new Uint8ClampedArray(L),ee={data:U,width:M,height:R,glyphWidth:T,glyphHeight:P,glyphTop:C,glyphLeft:0,glyphAdvance:i};if(T===0||P===0)return ee;const{ctx:J,buffer:re,gridInner:Y,gridOuter:ye}=this;J.clearRect(re,re,T,P),J.fillText(y,re,re+C);const Te=J.getImageData(re,re,T,P);ye.fill(gt,0,L),Y.fill(0,0,L);for(let ue=0;ue<P;ue++)for(let ve=0;ve<T;ve++){const Pe=Te.data[4*(ue*T+ve)+3]/255;if(Pe===0)continue;const Ae=(ue+re)*M+ve+re;if(Pe===1)ye[Ae]=0,Y[Ae]=gt;else{const ze=.5-Pe;ye[Ae]=ze>0?ze*ze:0,Y[Ae]=ze<0?ze*ze:0}}_t(ye,0,0,M,R,M,this.f,this.v,this.z),_t(Y,re,re,T,P,M,this.f,this.v,this.z);for(let ue=0;ue<L;ue++){const ve=Math.sqrt(ye[ue])-Math.sqrt(Y[ue]);U[ue]=Math.round(255-255*(ve/this.radius+this.cutoff))}return ee}};class bt{constructor(){this.specification=l.v.light.position}possiblyEvaluate(i,u){return l.z(i.expression.evaluate(u))}interpolate(i,u,f){return{x:l.B.number(i.x,u.x,f),y:l.B.number(i.y,u.y,f),z:l.B.number(i.z,u.z,f)}}}let $e;class ut extends l.E{constructor(i){super(),$e=$e||new l.r({anchor:new l.D(l.v.light.anchor),position:new bt,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T($e),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(l.t,i,u))for(const f in i){const g=i[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),g):this._transitionable.setValue(f,g)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,f){return(!f||f.validate!==!1)&&l.x(this,i.call(l.y,l.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}}class Et{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){const f=i.join(",")+String(u);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(i,u)),this.dashEntry[f]}getDashRanges(i,u,f){const g=[];let _=i.length%2==1?-i[i.length-1]*f:0,C=i[0]*f,T=!0;g.push({left:_,right:C,isDash:T,zeroLength:i[0]===0});let P=i[0];for(let M=1;M<i.length;M++){T=!T;const R=i[M];_=P*f,P+=R,C=P*f,g.push({left:_,right:C,isDash:T,zeroLength:R===0})}return g}addRoundDash(i,u,f){const g=u/2;for(let _=-f;_<=f;_++){const C=this.width*(this.nextRow+f+_);let T=0,P=i[T];for(let M=0;M<this.width;M++){M/P.right>1&&(P=i[++T]);const R=Math.abs(M-P.left),L=Math.abs(M-P.right),U=Math.min(R,L);let ee;const J=_/f*(g+1);if(P.isDash){const re=g-Math.abs(J);ee=Math.sqrt(U*U+re*re)}else ee=g-Math.sqrt(U*U+J*J);this.data[C+M]=Math.max(0,Math.min(255,ee+128))}}}addRegularDash(i){for(let T=i.length-1;T>=0;--T){const P=i[T],M=i[T+1];P.zeroLength?i.splice(T,1):M&&M.isDash===P.isDash&&(M.left=P.left,i.splice(T,1))}const u=i[0],f=i[i.length-1];u.isDash===f.isDash&&(u.left=f.left-this.width,f.right=u.right+this.width);const g=this.width*this.nextRow;let _=0,C=i[_];for(let T=0;T<this.width;T++){T/C.right>1&&(C=i[++_]);const P=Math.abs(T-C.left),M=Math.abs(T-C.right),R=Math.min(P,M);this.data[g+T]=Math.max(0,Math.min(255,(C.isDash?R:-R)+128))}}addDash(i,u){const f=u?7:0,g=2*f+1;if(this.nextRow+g>this.height)return l.w("LineAtlas out of space"),null;let _=0;for(let T=0;T<i.length;T++)_+=i[T];if(_!==0){const T=this.width/_,P=this.getDashRanges(i,this.width,T);u?this.addRoundDash(P,T,f):this.addRegularDash(P)}const C={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:_};return this.nextRow+=g,this.dirty=!0,C}bind(i){const u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class Wt{constructor(i,u,f){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=f;const g=this.workerPool.acquire(f);for(let _=0;_<g.length;_++){const C=new l.C(g[_],u,f);C.name=`Worker ${_}`,this.actors.push(C)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,u,f){l.o(this.actors,(g,_)=>{g.send(i,u,_)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function Gt(y,i,u){const f=function(g,_){if(g)return u(g);if(_){const C=l.F(l.e(_,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(C.vectorLayers=_.vector_layers,C.vectorLayerIds=C.vectorLayers.map(T=>T.id)),u(null,C)}};return y.url?l.f(i.transformRequest(y.url,N.Source),f):l.h.frame(()=>f(null,y))}class Mt{constructor(i,u){i&&(u?this.setSouthWest(i).setNorthEast(u):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof l.L?new l.L(i.lng,i.lat):l.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof l.L?new l.L(i.lng,i.lat):l.L.convert(i),this}extend(i){const u=this._sw,f=this._ne;let g,_;if(i instanceof l.L)g=i,_=i;else{if(!(i instanceof Mt))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Mt.convert(i)):this.extend(l.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(l.L.convert(i)):this;if(g=i._sw,_=i._ne,!g||!_)return this}return u||f?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),f.lng=Math.max(_.lng,f.lng),f.lat=Math.max(_.lat,f.lat)):(this._sw=new l.L(g.lng,g.lat),this._ne=new l.L(_.lng,_.lat)),this}getCenter(){return new l.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.L(this.getWest(),this.getNorth())}getSouthEast(){return new l.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:u,lat:f}=l.L.convert(i);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(i){return i instanceof Mt?i:i&&new Mt(i)}static fromLngLat(i,u=0){const f=360*u/40075017,g=f/Math.cos(Math.PI/180*i.lat);return new Mt(new l.L(i.lng-g,i.lat-f),new l.L(i.lng+g,i.lat+f))}}class gn{constructor(i,u,f){this.bounds=Mt.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=f||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),f=Math.floor(l.G(this.bounds.getWest())*u),g=Math.floor(l.H(this.bounds.getNorth())*u),_=Math.ceil(l.G(this.bounds.getEast())*u),C=Math.ceil(l.H(this.bounds.getSouth())*u);return i.x>=f&&i.x<_&&i.y>=g&&i.y<C}}class si extends l.E{constructor(i,u,f,g){if(super(),this.load=()=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Gt(this._options,this.map._requestManager,(_,C)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),_?this.fire(new l.j(_)):C&&(l.e(this,C),C.bounds&&(this.tileBounds=new gn(C.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>l.e({},this._options),this.id=i,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.F(u,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(f,N.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(C,T){return delete i.request,i.aborted?u(null):C&&C.status!==404?u(C):(T&&T.resourceTiming&&(i.resourceTiming=T.resourceTiming),this.map._refreshExpiredTiles&&T&&i.setExpiryData(T),i.loadVectorData(T,this.map.painter),u(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=u:i.request=i.actor.send("reloadTile",g,_.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",g,_.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class lr extends l.E{constructor(i,u,f,g){super(),this.id=i,this.dispatcher=f,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},u),l.e(this,l.F(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Gt(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new l.j(i)):u&&(l.e(this,u),u.bounds&&(this.tileBounds=new gn(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return l.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=K.getImage(this.map._requestManager.transformRequest(f,N.Tile),(g,_,C)=>{if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(g)i.state="errored",u(g);else if(_){this.map._refreshExpiredTiles&&C&&i.setExpiryData(C);const T=this.map.painter.context,P=T.gl;i.texture=this.map.painter.getTileTexture(_.width),i.texture?i.texture.update(_,{useMipmap:!0}):(i.texture=new Le(T,_,P.RGBA,{useMipmap:!0}),i.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST),T.extTextureFilterAnisotropic&&P.texParameterf(P.TEXTURE_2D,T.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,T.extTextureFilterAnisotropicMax)),i.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u()}unloadTile(i,u){i.texture&&this.map.painter.saveTileTexture(i.texture),u()}hasTransition(){return!1}}class $r extends lr{constructor(i,u,f,g){super(i,u,f,g),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(f,N.Tile);function _(C,T){C&&(i.state="errored",u(C)),T&&(i.dem=T,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",u(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=K.getImage(g,(C,T,P)=>l._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(C)i.state="errored",u(C);else if(T){this.map._refreshExpiredTiles&&i.setExpiryData(P);const M=l.a(T)&&l.J()?T:yield function(L){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.K()){const U=L.width+2,ee=L.height+2;try{return new l.R({width:U,height:ee},yield l.M(L,-1,-1,U,ee))}catch{}}return l.h.getImageData(L,1)})}(T),R={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:M,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",R,_))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const u=i.canonical,f=Math.pow(2,u.z),g=(u.x-1+f)%f,_=u.x===0?i.wrap-1:i.wrap,C=(u.x+1+f)%f,T=u.x+1===f?i.wrap+1:i.wrap,P={};return P[new l.O(i.overscaledZ,_,u.z,g,u.y).key]={backfilled:!1},P[new l.O(i.overscaledZ,T,u.z,C,u.y).key]={backfilled:!1},u.y>0&&(P[new l.O(i.overscaledZ,_,u.z,g,u.y-1).key]={backfilled:!1},P[new l.O(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},P[new l.O(i.overscaledZ,T,u.z,C,u.y-1).key]={backfilled:!1}),u.y+1<f&&(P[new l.O(i.overscaledZ,_,u.z,g,u.y+1).key]={backfilled:!1},P[new l.O(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},P[new l.O(i.overscaledZ,T,u.z,C,u.y+1).key]={backfilled:!1}),P}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class Ci extends l.E{constructor(i,u,f,g){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>l.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(g),this._data=u.data,this._options=l.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=l.N/this.tileSize;this.workerOptions=l.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:l.N,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.N,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},u),this}getClusterChildren(i,u){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},u),this}getClusterLeaves(i,u,f,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:u,offset:f},g),this}_updateWorkerData(i){const u=l.e({},this.workerOptions);i?u.dataDiff=i:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(l.h.resolveURL(this._data),N.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(f,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let _=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(_=g.resourceTiming[this.id].slice(0)),f)return void this.fire(new l.j(f));const C={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&l.e(C,{resourceTiming:_}),this.fire(new l.k("data",Object.assign(Object.assign({},C),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},C),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,u){const f=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const g={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(f,g,(_,C)=>(delete i.request,i.unloadVectorData(),i.aborted?u(null):_?u(_):(i.loadVectorData(C,this.map.painter,f==="reloadTile"),u(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var jr=l.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ur extends l.E{constructor(i,u,f,g){super(),this.load=(_,C)=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=K.getImage(this.map._requestManager.transformRequest(this.url,N.Image),(T,P)=>{this._request=null,this._loaded=!0,T?this.fire(new l.j(T)):P&&(this.image=P,_&&(this.coordinates=_),C&&C(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const _=this.map.painter.context,C=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,jr.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Le(_,this.image,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let T=!1;for(const P in this.tiles){const M=this.tiles[P];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture,T=!0)}T&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=u}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const u=i.map(l.U.fromLngLat);this.tileID=function(g){let _=1/0,C=1/0,T=-1/0,P=-1/0;for(const U of g)_=Math.min(_,U.x),C=Math.min(C,U.y),T=Math.max(T,U.x),P=Math.max(P,U.y);const M=Math.max(T-_,P-C),R=Math.max(0,Math.floor(-Math.log(M)/Math.LN2)),L=Math.pow(2,R);return new l.W(R,Math.floor((_+T)/2*L),Math.floor((C+P)/2*L))}(u),this.minzoom=this.maxzoom=this.tileID.z;const f=u.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new l.V,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,l.N,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,l.N),this._boundsArray.emplaceBack(f[2].x,f[2].y,l.N,l.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}hasTransition(){return!1}}class Ys extends Ur{constructor(i,u,f,g){super(i,u,f,g),this.load=()=>{this._loaded=!1;const _=this.options;this.urls=[];for(const C of _.urls)this.urls.push(this.map._requestManager.transformRequest(C,N.Source).url);l.X(this.urls,(C,T)=>{this._loaded=!0,C?this.fire(new l.j(C)):T&&(this.video=T,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,C=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,jr.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE),C.texSubImage2D(C.TEXTURE_2D,0,0,0,C.RGBA,C.UNSIGNED_BYTE,this.video)):(this.texture=new Le(_,this.video,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let T=!1;for(const P in this.tiles){const M=this.tiles[P];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture,T=!0)}T&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=u}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new l.j(new l.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class ss extends Ur{constructor(i,u,f,g){super(i,u,f,g),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const C=this.map.painter.context,T=C.gl;this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,jr.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Le(C,this.canvas,T.RGBA,{premultiply:!0});let P=!1;for(const M in this.tiles){const R=this.tiles[M];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture,P=!0)}P&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(C=>typeof C!="number"))||this.fire(new l.j(new l.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.Y(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new l.j(new l.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Qs={},Ti=y=>{switch(y){case"geojson":return Ci;case"image":return Ur;case"raster":return lr;case"raster-dem":return $r;case"vector":return si;case"video":return Ys;case"canvas":return ss}return Qs[y]};function wo(y,i){const u=l.Z();return l.$(u,u,[1,1,0]),l.a0(u,u,[.5*y.width,.5*y.height,1]),l.a1(u,u,y.calculatePosMatrix(i.toUnwrapped()))}function Js(y,i,u,f,g,_){const C=function(L,U,ee){if(L)for(const J of L){const re=U[J];if(re&&re.source===ee&&re.type==="fill-extrusion")return!0}else for(const J in U){const re=U[J];if(re.source===ee&&re.type==="fill-extrusion")return!0}return!1}(g&&g.layers,i,y.id),T=_.maxPitchScaleFactor(),P=y.tilesIn(f,T,C);P.sort(Es);const M=[];for(const L of P)M.push({wrappedTileID:L.tileID.wrapped().key,queryResults:L.tile.queryRenderedFeatures(i,u,y._state,L.queryGeometry,L.cameraQueryGeometry,L.scale,g,_,T,wo(y.transform,L.tileID))});const R=function(L){const U={},ee={};for(const J of L){const re=J.queryResults,Y=J.wrappedTileID,ye=ee[Y]=ee[Y]||{};for(const Te in re){const ue=re[Te],ve=ye[Te]=ye[Te]||{},Pe=U[Te]=U[Te]||[];for(const Ae of ue)ve[Ae.featureIndex]||(ve[Ae.featureIndex]=!0,Pe.push(Ae))}}return U}(M);for(const L in R)R[L].forEach(U=>{const ee=U.feature,J=y.getFeatureState(ee.layer["source-layer"],ee.id);ee.source=ee.layer.source,ee.layer["source-layer"]&&(ee.sourceLayer=ee.layer["source-layer"]),ee.state=J});return R}function Es(y,i){const u=y.tileID,f=i.tileID;return u.overscaledZ-f.overscaledZ||u.canonical.y-f.canonical.y||u.wrap-f.wrap||u.canonical.x-f.canonical.x}class ge{constructor(i,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=l.a2(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const u=i+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,u,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(g,_){const C={};if(!_)return C;for(const T of g){const P=T.layerIds.map(M=>_.getLayer(M)).filter(Boolean);if(P.length!==0){T.layers=P,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(M=>P.filter(R=>R.id===M)[0]));for(const M of P)C[M.id]=T}}return C}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof l.a4){if(this.hasSymbolBuckets=!0,!f)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof l.a4&&_.hasRTLText){this.hasRTLText=!0,l.a5();break}}this.queryPadding=0;for(const g in this.buckets){const _=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(g).queryRadius(_))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new l.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const f in this.buckets){const g=this.buckets[f];g.uploadPending()&&g.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Le(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Le(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,f,g,_,C,T,P,M,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:_,scale:C,tileSize:this.tileSize,pixelPosMatrix:R,transform:P,params:T,queryPadding:this.queryPadding*M},i,u,f):{}}querySourceFeatures(i,u){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const g=f.loadVTLayers(),_=u&&u.sourceLayer?u.sourceLayer:"",C=g._geojsonTileLayer||g[_];if(!C)return;const T=l.a6(u&&u.filter),{z:P,x:M,y:R}=this.tileID.canonical,L={z:P,x:M,y:R};for(let U=0;U<C.length;U++){const ee=C.feature(U);if(T.needGeometry){const Y=l.a7(ee,!0);if(!T.filter(new l.a8(this.tileID.overscaledZ),Y,this.tileID.canonical))continue}else if(!T.filter(new l.a8(this.tileID.overscaledZ),ee))continue;const J=f.getId(ee,_),re=new l.a9(ee,P,M,R,J);re.tile=L,i.push(re)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const f=l.aa(i.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const f=Date.now();let g=!1;if(this.expirationTime>f)g=!1;else if(u)if(this.expirationTime<u)g=!0;else{const _=this.expirationTime-u;_?this.expirationTime=f+Math.max(_,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!u.style.hasLayer(g))continue;const _=this.buckets[g],C=_.layers[0].sourceLayer||"_geojsonTileLayer",T=f[C],P=i[C];if(!T||!P||Object.keys(P).length===0)continue;_.update(P,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});const M=u&&u.style&&u.style.getLayer(g);M&&(this.queryPadding=Math.max(this.queryPadding,M.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=l.h.now()+i}setDependencies(i,u){const f={};for(const g of u)f[g]=!0;this.dependencies[i]=f}hasDependency(i,u){for(const f of i){const g=this.dependencies[f];if(g){for(const _ of u)if(g[_])return!0}}return!1}}class ke{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,f){const g=i.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const _={value:u,timeout:void 0};if(f!==void 0&&(_.timeout=setTimeout(()=>{this.remove(i,_)},f)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const f=i.wrapped().key,g=u===void 0?0:this.data[f].indexOf(u),_=this.data[f][g];return this.data[f].splice(g,1),_.timeout&&clearTimeout(_.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(_.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const f in this.data)for(const g of this.data[f])i(g.value)||u.push(g);for(const f of u)this.remove(f.value.tileID,f)}}class le{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,f){const g=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][g]=this.stateChanges[i][g]||{},l.e(this.stateChanges[i][g],f),this.deletedStates[i]===null){this.deletedStates[i]={};for(const _ in this.state[i])_!==g&&(this.deletedStates[i][_]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][g]===null){this.deletedStates[i][g]={};for(const _ in this.state[i][g])f[_]||(this.deletedStates[i][g][_]=null)}else for(const _ in f)this.deletedStates[i]&&this.deletedStates[i][g]&&this.deletedStates[i][g][_]===null&&delete this.deletedStates[i][g][_]}removeFeatureState(i,u,f){if(this.deletedStates[i]===null)return;const g=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},f&&u!==void 0)this.deletedStates[i][g]!==null&&(this.deletedStates[i][g]=this.deletedStates[i][g]||{},this.deletedStates[i][g][f]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][g])for(f in this.deletedStates[i][g]={},this.stateChanges[i][g])this.deletedStates[i][g][f]=null;else this.deletedStates[i][g]=null;else this.deletedStates[i]=null}getState(i,u){const f=String(u),g=l.e({},(this.state[i]||{})[f],(this.stateChanges[i]||{})[f]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const _=this.deletedStates[i][u];if(_===null)return{};for(const C in _)delete g[C]}return g}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const f={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const _={};for(const C in this.stateChanges[g])this.state[g][C]||(this.state[g][C]={}),l.e(this.state[g][C],this.stateChanges[g][C]),_[C]=this.state[g][C];f[g]=_}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const _={};if(this.deletedStates[g]===null)for(const C in this.state[g])_[C]={},this.state[g][C]={};else for(const C in this.deletedStates[g]){if(this.deletedStates[g][C]===null)this.state[g][C]={};else for(const T of Object.keys(this.deletedStates[g][C]))delete this.state[g][C][T];_[C]=this.state[g][C]}f[g]=f[g]||{},l.e(f[g],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const g in i)i[g].setFeatureState(f,u)}}class et extends l.E{constructor(i,u,f){super(),this.id=i,this.dispatcher=f,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,_,C,T)=>{const P=new(Ti(_.type))(g,_,C,T);if(P.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${P.id}`);return P})(i,u,f,this),this._tiles={},this._cache=new ke(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new le,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,u){return this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new l.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const f=this._tiles[u];f.upload(i),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Ye).map(i=>i.key)}getRenderableIds(i){const u=[];for(const f in this._tiles)this._isIdRenderable(f,i)&&u.push(this._tiles[f]);return i?u.sort((f,g)=>{const _=f.tileID,C=g.tileID,T=new l.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),P=new l.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-C.overscaledZ||P.y-T.y||P.x-T.x}).map(f=>f.tileID.key):u.map(f=>f.tileID).sort(Ye).map(f=>f.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,u){const f=this._tiles[i];f&&(f.state!=="loading"&&(f.state=u),this._loadTile(f,this._tileLoaded.bind(this,f,i,u)))}_tileLoaded(i,u,f,g){if(g)return i.state="errored",void(g.status!==404?this._source.fire(new l.j(g,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=l.h.now(),f==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const u=this.getRenderableIds();for(let g=0;g<u.length;g++){const _=u[g];if(i.neighboringTiles&&i.neighboringTiles[_]){const C=this.getTileByID(_);f(i,C),f(C,i)}}function f(g,_){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let C=_.tileID.canonical.x-g.tileID.canonical.x;const T=_.tileID.canonical.y-g.tileID.canonical.y,P=Math.pow(2,g.tileID.canonical.z),M=_.tileID.key;C===0&&T===0||Math.abs(T)>1||(Math.abs(C)>1&&(Math.abs(C+P)===1?C+=P:Math.abs(C-P)===1&&(C-=P)),_.dem&&g.dem&&(g.dem.backfillBorder(_.dem,C,T),g.neighboringTiles&&g.neighboringTiles[M]&&(g.neighboringTiles[M].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,f,g){for(const _ in this._tiles){let C=this._tiles[_];if(g[_]||!C.hasData()||C.tileID.overscaledZ<=u||C.tileID.overscaledZ>f)continue;let T=C.tileID;for(;C&&C.tileID.overscaledZ>u+1;){const M=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[M.key],C&&C.hasData()&&(T=M)}let P=T;for(;P.overscaledZ>u;)if(P=P.scaledTo(P.overscaledZ-1),i[P.key]){g[T.key]=T;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const f=this._loadedParentTiles[i.key];return f&&f.tileID.overscaledZ>=u?f:null}for(let f=i.overscaledZ-1;f>=u;f--){const g=i.scaledTo(f),_=this._getLoadedTile(g);if(_)return _}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const u=Math.ceil(i.width/this._source.tileSize)+1,f=Math.ceil(i.height/this._source.tileSize)+1,g=Math.floor(u*f*(this._maxTileCacheZoomLevels===null?l.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(_)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const f={};for(const g in this._tiles){const _=this._tiles[g];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),f[_.tileID.key]=_}this._tiles=f;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(i,u){if(this.transform=i,this.terrain=u,!this._sourceLoaded||this._paused)return;let f;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new l.O(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(f=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(f=f.filter(R=>this._source.hasTile(R)))):f=[];const g=i.coveringZoomLevel(this._source),_=Math.max(g-et.maxOverzooming,this._source.minzoom),C=Math.max(g+et.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const R={};for(const L of f)if(L.canonical.z>this._source.minzoom){const U=L.scaledTo(L.canonical.z-1);R[U.key]=U;const ee=L.scaledTo(Math.max(this._source.minzoom,Math.min(L.canonical.z,5)));R[ee.key]=ee}f=f.concat(Object.values(R))}const T=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,T&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const P=this._updateRetainedTiles(f,g);if(Ne(this._source.type)){const R={},L={},U=Object.keys(P),ee=l.h.now();for(const J of U){const re=P[J],Y=this._tiles[J];if(!Y||Y.fadeEndTime!==0&&Y.fadeEndTime<=ee)continue;const ye=this.findLoadedParent(re,_);ye&&(this._addTile(ye.tileID),R[ye.tileID.key]=ye.tileID),L[J]=re}this._retainLoadedChildren(L,g,C,P);for(const J in R)P[J]||(this._coveredTiles[J]=!0,P[J]=R[J]);if(u){const J={},re={};for(const Y of f)this._tiles[Y.key].hasData()?J[Y.key]=Y:re[Y.key]=Y;for(const Y in re){const ye=re[Y].children(this._source.maxzoom);this._tiles[ye[0].key]&&this._tiles[ye[1].key]&&this._tiles[ye[2].key]&&this._tiles[ye[3].key]&&(J[ye[0].key]=P[ye[0].key]=ye[0],J[ye[1].key]=P[ye[1].key]=ye[1],J[ye[2].key]=P[ye[2].key]=ye[2],J[ye[3].key]=P[ye[3].key]=ye[3],delete re[Y])}for(const Y in re){const ye=this.findLoadedParent(re[Y],this._source.minzoom);if(ye){J[ye.tileID.key]=P[ye.tileID.key]=ye.tileID;for(const Te in J)J[Te].isChildOf(ye.tileID)&&delete J[Te]}}for(const Y in this._tiles)J[Y]||(this._coveredTiles[Y]=!0)}}for(const R in P)this._tiles[R].clearFadeHold();const M=l.ab(this._tiles,P);for(const R of M){const L=this._tiles[R];L.hasSymbolBuckets&&!L.holdingForFade()?L.setHoldDuration(this.map._fadeDuration):L.hasSymbolBuckets&&!L.symbolFadeFinished()||this._removeTile(R)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){const f={},g={},_=Math.max(u-et.maxOverzooming,this._source.minzoom),C=Math.max(u+et.maxUnderzooming,this._source.minzoom),T={};for(const P of i){const M=this._addTile(P);f[P.key]=P,M.hasData()||u<this._source.maxzoom&&(T[P.key]=P)}this._retainLoadedChildren(T,u,C,f);for(const P of i){let M=this._tiles[P.key];if(M.hasData())continue;if(u+1>this._source.maxzoom){const L=P.children(this._source.maxzoom)[0],U=this.getTile(L);if(U&&U.hasData()){f[L.key]=L;continue}}else{const L=P.children(this._source.maxzoom);if(f[L[0].key]&&f[L[1].key]&&f[L[2].key]&&f[L[3].key])continue}let R=M.wasRequested();for(let L=P.overscaledZ-1;L>=_;--L){const U=P.scaledTo(L);if(g[U.key])break;if(g[U.key]=!0,M=this.getTile(U),!M&&R&&(M=this._addTile(U)),M){const ee=M.hasData();if((R||ee)&&(f[U.key]=U),R=M.wasRequested(),ee)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let f,g=this._tiles[i].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){f=this._loadedParentTiles[g.key];break}u.push(g.key);const _=g.scaledTo(g.overscaledZ-1);if(f=this._getLoadedTile(_),f)break;g=_}for(const _ of u)this._loadedParentTiles[_]=f}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const f=u;return u||(u=new ge(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))),u.uses++,this._tiles[i.key]=u,f||this._source.fire(new l.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const f=u.getExpiryTimeout();f&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},f))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,f){const g=[],_=this.transform;if(!_)return g;const C=f?_.getCameraQueryGeometry(i):i,T=i.map(J=>_.pointCoordinate(J,this.terrain)),P=C.map(J=>_.pointCoordinate(J,this.terrain)),M=this.getIds();let R=1/0,L=1/0,U=-1/0,ee=-1/0;for(const J of P)R=Math.min(R,J.x),L=Math.min(L,J.y),U=Math.max(U,J.x),ee=Math.max(ee,J.y);for(let J=0;J<M.length;J++){const re=this._tiles[M[J]];if(re.holdingForFade())continue;const Y=re.tileID,ye=Math.pow(2,_.zoom-re.tileID.overscaledZ),Te=u*re.queryPadding*l.N/re.tileSize/ye,ue=[Y.getTilePoint(new l.U(R,L)),Y.getTilePoint(new l.U(U,ee))];if(ue[0].x-Te<l.N&&ue[0].y-Te<l.N&&ue[1].x+Te>=0&&ue[1].y+Te>=0){const ve=T.map(Ae=>Y.getTilePoint(Ae)),Pe=P.map(Ae=>Y.getTilePoint(Ae));g.push({tile:re,tileID:Y,queryGeometry:ve,cameraQueryGeometry:Pe,scale:ye})}}return g}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(f=>this._tiles[f].tileID);for(const f of u)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Ne(this._source.type)){const i=l.h.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=i)return!0}return!1}setFeatureState(i,u,f){this._state.updateState(i=i||"_geojsonTileLayer",u,f)}removeFeatureState(i,u,f){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,f)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,f){const g=this._tiles[i];g&&g.setDependencies(u,f)}reloadTilesForDependencies(i,u){for(const f in this._tiles)this._tiles[f].hasDependency(i,u)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(i,u))}}function Ye(y,i){const u=Math.abs(2*y.wrap)-+(y.wrap<0),f=Math.abs(2*i.wrap)-+(i.wrap<0);return y.overscaledZ-i.overscaledZ||f-u||i.canonical.y-y.canonical.y||i.canonical.x-y.canonical.x}function Ne(y){return y==="raster"||y==="image"||y==="video"}et.maxOverzooming=10,et.maxUnderzooming=3;const Ke="mapboxgl_preloaded_worker_pool";class Bt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Bt.workerCount;)this.workers.push(new Worker(l.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ke]}numActive(){return Object.keys(this.active).length}}const yn=Math.floor(l.h.hardwareConcurrency/2);let En;function ji(){return En||(En=new Bt),En}Bt.workerCount=l.ac(globalThis)?Math.max(Math.min(yn,3),1):1;class eo{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=l.ad(i,0,1);let u=1,f=this._distances[u];const g=i*this.paddedLength+this.padding;for(;f<g&&u<this._distances.length;)f=this._distances[++u];const _=u-1,C=this._distances[_],T=f-C,P=T>0?(g-C)/T:0;return this.points[_].mult(1-P).add(this.points[u].mult(P))}}function Ei(y,i){let u=!0;return y==="always"||y!=="never"&&i!=="never"||(u=!1),u}class Ui{constructor(i,u,f){const g=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(u/f);for(let C=0;C<this.xCellCount*this.yCellCount;C++)g.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,f,g,_){this._forEachCell(u,f,g,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(_)}insertCircle(i,u,f,g){this._forEachCell(u-g,f-g,u+g,f+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(f),this.circles.push(g)}_insertBoxCell(i,u,f,g,_,C){this.boxCells[_].push(C)}_insertCircleCell(i,u,f,g,_,C){this.circleCells[_].push(C)}_query(i,u,f,g,_,C,T){if(f<0||i>this.width||g<0||u>this.height)return[];const P=[];if(i<=0&&u<=0&&this.width<=f&&this.height<=g){if(_)return[{key:null,x1:i,y1:u,x2:f,y2:g}];for(let M=0;M<this.boxKeys.length;M++)P.push({key:this.boxKeys[M],x1:this.bboxes[4*M],y1:this.bboxes[4*M+1],x2:this.bboxes[4*M+2],y2:this.bboxes[4*M+3]});for(let M=0;M<this.circleKeys.length;M++){const R=this.circles[3*M],L=this.circles[3*M+1],U=this.circles[3*M+2];P.push({key:this.circleKeys[M],x1:R-U,y1:L-U,x2:R+U,y2:L+U})}}else this._forEachCell(i,u,f,g,this._queryCell,P,{hitTest:_,overlapMode:C,seenUids:{box:{},circle:{}}},T);return P}query(i,u,f,g){return this._query(i,u,f,g,!1,null)}hitTest(i,u,f,g,_,C){return this._query(i,u,f,g,!0,_,C).length>0}hitTestCircle(i,u,f,g,_){const C=i-f,T=i+f,P=u-f,M=u+f;if(T<0||C>this.width||M<0||P>this.height)return!1;const R=[];return this._forEachCell(C,P,T,M,this._queryCellCircle,R,{hitTest:!0,overlapMode:g,circle:{x:i,y:u,radius:f},seenUids:{box:{},circle:{}}},_),R.length>0}_queryCell(i,u,f,g,_,C,T,P){const{seenUids:M,hitTest:R,overlapMode:L}=T,U=this.boxCells[_];if(U!==null){const J=this.bboxes;for(const re of U)if(!M.box[re]){M.box[re]=!0;const Y=4*re,ye=this.boxKeys[re];if(i<=J[Y+2]&&u<=J[Y+3]&&f>=J[Y+0]&&g>=J[Y+1]&&(!P||P(ye))&&(!R||!Ei(L,ye.overlapMode))&&(C.push({key:ye,x1:J[Y],y1:J[Y+1],x2:J[Y+2],y2:J[Y+3]}),R))return!0}}const ee=this.circleCells[_];if(ee!==null){const J=this.circles;for(const re of ee)if(!M.circle[re]){M.circle[re]=!0;const Y=3*re,ye=this.circleKeys[re];if(this._circleAndRectCollide(J[Y],J[Y+1],J[Y+2],i,u,f,g)&&(!P||P(ye))&&(!R||!Ei(L,ye.overlapMode))){const Te=J[Y],ue=J[Y+1],ve=J[Y+2];if(C.push({key:ye,x1:Te-ve,y1:ue-ve,x2:Te+ve,y2:ue+ve}),R)return!0}}}return!1}_queryCellCircle(i,u,f,g,_,C,T,P){const{circle:M,seenUids:R,overlapMode:L}=T,U=this.boxCells[_];if(U!==null){const J=this.bboxes;for(const re of U)if(!R.box[re]){R.box[re]=!0;const Y=4*re,ye=this.boxKeys[re];if(this._circleAndRectCollide(M.x,M.y,M.radius,J[Y+0],J[Y+1],J[Y+2],J[Y+3])&&(!P||P(ye))&&!Ei(L,ye.overlapMode))return C.push(!0),!0}}const ee=this.circleCells[_];if(ee!==null){const J=this.circles;for(const re of ee)if(!R.circle[re]){R.circle[re]=!0;const Y=3*re,ye=this.circleKeys[re];if(this._circlesCollide(J[Y],J[Y+1],J[Y+2],M.x,M.y,M.radius)&&(!P||P(ye))&&!Ei(L,ye.overlapMode))return C.push(!0),!0}}}_forEachCell(i,u,f,g,_,C,T,P){const M=this._convertToXCellCoord(i),R=this._convertToYCellCoord(u),L=this._convertToXCellCoord(f),U=this._convertToYCellCoord(g);for(let ee=M;ee<=L;ee++)for(let J=R;J<=U;J++)if(_.call(this,i,u,f,g,this.xCellCount*J+ee,C,T,P))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,f,g,_,C){const T=g-i,P=_-u,M=f+C;return M*M>T*T+P*P}_circleAndRectCollide(i,u,f,g,_,C,T){const P=(C-g)/2,M=Math.abs(i-(g+P));if(M>P+f)return!1;const R=(T-_)/2,L=Math.abs(u-(_+R));if(L>R+f)return!1;if(M<=P||L<=R)return!0;const U=M-P,ee=L-R;return U*U+ee*ee<=f*f}}function qe(y,i,u,f,g){const _=l.Z();return i?(l.a0(_,_,[1/g,1/g,1]),u||l.ae(_,_,f.angle)):l.a1(_,f.labelPlaneMatrix,y),_}function oi(y,i,u,f,g){if(i){const _=l.af(y);return l.a0(_,_,[g,g,1]),u||l.ae(_,_,-f.angle),_}return f.glCoordMatrix}function vn(y,i,u){let f;u?(f=[y.x,y.y,u(y.x,y.y),1],l.ag(f,f,i)):(f=[y.x,y.y,0,1],se(f,f,i));const g=f[3];return{point:new l.P(f[0]/g,f[1]/g),signedDistanceFromCamera:g}}function os(y,i){return .5+y/i*.5}function Ps(y,i){const u=y[0]/y[3],f=y[1]/y[3];return u>=-i[0]&&u<=i[0]&&f>=-i[1]&&f<=i[1]}function Xe(y,i,u,f,g,_,C,T,P,M){const R=f?y.textSizeData:y.iconSizeData,L=l.ah(R,u.transform.zoom),U=[256/u.width*2+1,256/u.height*2+1],ee=f?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;ee.clear();const J=y.lineVertexArray,re=f?y.text.placedSymbolArray:y.icon.placedSymbolArray,Y=u.transform.width/u.transform.height;let ye=!1;for(let Te=0;Te<re.length;Te++){const ue=re.get(Te);if(ue.hidden||ue.writingMode===l.ai.vertical&&!ye){X(ue.numGlyphs,ee);continue}let ve;if(ye=!1,M?(ve=[ue.anchorX,ue.anchorY,M(ue.anchorX,ue.anchorY),1],l.ag(ve,ve,i)):(ve=[ue.anchorX,ue.anchorY,0,1],se(ve,ve,i)),!Ps(ve,U)){X(ue.numGlyphs,ee);continue}const Pe=os(u.transform.cameraToCenterDistance,ve[3]),Ae=l.aj(R,L,ue),ze=C?Ae/Pe:Ae*Pe,Be=new l.P(ue.anchorX,ue.anchorY),Fe=vn(Be,g,M).point,je={projections:{},offsets:{}},at=Ar(ue,ze,!1,T,i,g,_,y.glyphOffsetArray,J,ee,Fe,Be,je,Y,P,M);ye=at.useVertical,(at.notEnoughRoom||ye||at.needsFlipping&&Ar(ue,ze,!0,T,i,g,_,y.glyphOffsetArray,J,ee,Fe,Be,je,Y,P,M).notEnoughRoom)&&X(ue.numGlyphs,ee)}f?y.text.dynamicLayoutVertexBuffer.updateData(ee):y.icon.dynamicLayoutVertexBuffer.updateData(ee)}function Ot(y,i,u,f,g,_,C,T,P,M,R,L,U){const ee=T.glyphStartIndex+T.numGlyphs,J=T.lineStartIndex,re=T.lineStartIndex+T.lineLength,Y=i.getoffsetX(T.glyphStartIndex),ye=i.getoffsetX(ee-1),Te=V(y*Y,u,f,g,_,C,T.segment,J,re,P,M,R,L,U);if(!Te)return null;const ue=V(y*ye,u,f,g,_,C,T.segment,J,re,P,M,R,L,U);return ue?{first:Te,last:ue}:null}function At(y,i,u,f){return y===l.ai.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*f?{useVertical:!0}:(y===l.ai.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function Ar(y,i,u,f,g,_,C,T,P,M,R,L,U,ee,J,re){const Y=i/24,ye=y.lineOffsetX*Y,Te=y.lineOffsetY*Y;let ue;if(y.numGlyphs>1){const ve=y.glyphStartIndex+y.numGlyphs,Pe=y.lineStartIndex,Ae=y.lineStartIndex+y.lineLength,ze=Ot(Y,T,ye,Te,u,R,L,y,P,_,U,J,re);if(!ze)return{notEnoughRoom:!0};const Be=vn(ze.first.point,C,re).point,Fe=vn(ze.last.point,C,re).point;if(f&&!u){const je=At(y.writingMode,Be,Fe,ee);if(je)return je}ue=[ze.first];for(let je=y.glyphStartIndex+1;je<ve-1;je++)ue.push(V(Y*T.getoffsetX(je),ye,Te,u,R,L,y.segment,Pe,Ae,P,_,U,J,re));ue.push(ze.last)}else{if(f&&!u){const Pe=vn(L,g,re).point,Ae=y.lineStartIndex+y.segment+1,ze=new l.P(P.getx(Ae),P.gety(Ae)),Be=vn(ze,g,re),Fe=Be.signedDistanceFromCamera>0?Be.point:as(L,ze,Pe,1,g,re),je=At(y.writingMode,Pe,Fe,ee);if(je)return je}const ve=V(Y*T.getoffsetX(y.glyphStartIndex),ye,Te,u,R,L,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,P,_,U,J,re);if(!ve)return{notEnoughRoom:!0};ue=[ve]}for(const ve of ue)l.ak(M,ve.point,ve.angle);return{}}function as(y,i,u,f,g,_){const C=vn(y.add(y.sub(i)._unit()),g,_).point,T=u.sub(C);return u.add(T._mult(f/T.mag()))}function Dt(y,i){const{projectionCache:u,lineVertexArray:f,labelPlaneMatrix:g,tileAnchorPoint:_,distanceFromAnchor:C,getElevation:T,previousVertex:P,direction:M,absOffsetX:R}=i;if(u.projections[y])return u.projections[y];const L=new l.P(f.getx(y),f.gety(y)),U=vn(L,g,T);if(U.signedDistanceFromCamera>0)return u.projections[y]=U.point,U.point;const ee=y-M;return as(C===0?_:new l.P(f.getx(ee),f.gety(ee)),L,P,R-C+1,g,T)}function As(y,i,u){return y._unit()._perp()._mult(i*u)}function ne(y,i,u,f,g,_,C,T){const{projectionCache:P,direction:M}=T;if(P.offsets[y])return P.offsets[y];const R=u.add(i);if(y+M<f||y+M>=g)return P.offsets[y]=R,R;const L=Dt(y+M,T),U=As(L.sub(u),C,M),ee=u.add(U),J=L.add(U);return P.offsets[y]=l.al(_,R,ee,J)||R,P.offsets[y]}function V(y,i,u,f,g,_,C,T,P,M,R,L,U,ee){const J=f?y-i:y+i;let re=J>0?1:-1,Y=0;f&&(re*=-1,Y=Math.PI),re<0&&(Y+=Math.PI);let ye,Te,ue=re>0?T+C:T+C+1,ve=g,Pe=g,Ae=0,ze=0;const Be=Math.abs(J),Fe=[];let je;for(;Ae+ze<=Be;){if(ue+=re,ue<T||ue>=P)return null;Ae+=ze,Pe=ve,Te=ye;const Qe={projectionCache:L,lineVertexArray:M,labelPlaneMatrix:R,tileAnchorPoint:_,distanceFromAnchor:Ae,getElevation:ee,previousVertex:Pe,direction:re,absOffsetX:Be};if(ve=Dt(ue,Qe),u===0)Fe.push(Pe),je=ve.sub(Pe);else{let Ct;const ct=ve.sub(Pe);Ct=ct.mag()===0?As(Dt(ue+re,Qe).sub(ve),u,re):As(ct,u,re),Te||(Te=Pe.add(Ct)),ye=ne(ue,Ct,ve,T,P,Te,u,Qe),Fe.push(Te),je=ye.sub(Te)}ze=je.mag()}const at=je._mult((Be-Ae)/ze)._add(Te||Pe),Vt=Y+Math.atan2(ve.y-Pe.y,ve.x-Pe.x);return Fe.push(at),{point:at,angle:U?Vt:0,path:Fe}}const j=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function X(y,i){for(let u=0;u<y;u++){const f=i.length;i.resize(f+4),i.float32.set(j,3*f)}}function se(y,i,u){const f=i[0],g=i[1];return y[0]=u[0]*f+u[4]*g+u[12],y[1]=u[1]*f+u[5]*g+u[13],y[3]=u[3]*f+u[7]*g+u[15],y}const ae=100;class we{constructor(i,u=new Ui(i.width+200,i.height+200,25),f=new Ui(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=f,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+ae,this.screenBottomBoundary=i.height+ae,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,u,f,g,_,C){const T=this.projectAndGetPerspectiveRatio(g,i.anchorPointX,i.anchorPointY,C),P=f*T.perspectiveRatio,M=i.x1*P+T.point.x,R=i.y1*P+T.point.y,L=i.x2*P+T.point.x,U=i.y2*P+T.point.y;return!this.isInsideGrid(M,R,L,U)||u!=="always"&&this.grid.hitTest(M,R,L,U,u,_)||T.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[M,R,L,U],offscreen:this.isOffscreen(M,R,L,U)}}placeCollisionCircles(i,u,f,g,_,C,T,P,M,R,L,U,ee,J){const re=[],Y=new l.P(u.anchorX,u.anchorY),ye=vn(Y,C,J),Te=os(this.transform.cameraToCenterDistance,ye.signedDistanceFromCamera),ue=(R?_/Te:_*Te)/l.ap,ve=vn(Y,T,J).point,Pe=Ot(ue,g,u.lineOffsetX*ue,u.lineOffsetY*ue,!1,ve,Y,u,f,T,{projections:{},offsets:{}},!1,J);let Ae=!1,ze=!1,Be=!0;if(Pe){const Fe=.5*U*Te+ee,je=new l.P(-100,-100),at=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Vt=new eo,Qe=Pe.first,Ct=Pe.last;let ct=[];for(let Rt=Qe.path.length-1;Rt>=1;Rt--)ct.push(Qe.path[Rt]);for(let Rt=1;Rt<Ct.path.length;Rt++)ct.push(Ct.path[Rt]);const rn=2.5*Fe;if(P){const Rt=ct.map($t=>vn($t,P,J));ct=Rt.some($t=>$t.signedDistanceFromCamera<=0)?[]:Rt.map($t=>$t.point)}let Nt=[];if(ct.length>0){const Rt=ct[0].clone(),$t=ct[0].clone();for(let Rn=1;Rn<ct.length;Rn++)Rt.x=Math.min(Rt.x,ct[Rn].x),Rt.y=Math.min(Rt.y,ct[Rn].y),$t.x=Math.max($t.x,ct[Rn].x),$t.y=Math.max($t.y,ct[Rn].y);Nt=Rt.x>=je.x&&$t.x<=at.x&&Rt.y>=je.y&&$t.y<=at.y?[ct]:$t.x<je.x||Rt.x>at.x||$t.y<je.y||Rt.y>at.y?[]:l.am([ct],je.x,je.y,at.x,at.y)}for(const Rt of Nt){Vt.reset(Rt,.25*Fe);let $t=0;$t=Vt.length<=.5*Fe?1:Math.ceil(Vt.paddedLength/rn)+1;for(let Rn=0;Rn<$t;Rn++){const ln=Rn/Math.max($t-1,1),dr=Vt.lerp(ln),Yn=dr.x+ae,Vn=dr.y+ae;re.push(Yn,Vn,Fe,0);const di=Yn-Fe,dn=Vn-Fe,us=Yn+Fe,cs=Vn+Fe;if(Be=Be&&this.isOffscreen(di,dn,us,cs),ze=ze||this.isInsideGrid(di,dn,us,cs),i!=="always"&&this.grid.hitTestCircle(Yn,Vn,Fe,i,L)&&(Ae=!0,!M))return{circles:[],offscreen:!1,collisionDetected:Ae}}}}return{circles:!M&&Ae||!ze||Te<this.perspectiveRatioCutoff?[]:re,offscreen:Be,collisionDetected:Ae}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let f=1/0,g=1/0,_=-1/0,C=-1/0;for(const R of i){const L=new l.P(R.x+ae,R.y+ae);f=Math.min(f,L.x),g=Math.min(g,L.y),_=Math.max(_,L.x),C=Math.max(C,L.y),u.push(L)}const T=this.grid.query(f,g,_,C).concat(this.ignoredGrid.query(f,g,_,C)),P={},M={};for(const R of T){const L=R.key;if(P[L.bucketInstanceId]===void 0&&(P[L.bucketInstanceId]={}),P[L.bucketInstanceId][L.featureIndex])continue;const U=[new l.P(R.x1,R.y1),new l.P(R.x2,R.y1),new l.P(R.x2,R.y2),new l.P(R.x1,R.y2)];l.an(u,U)&&(P[L.bucketInstanceId][L.featureIndex]=!0,M[L.bucketInstanceId]===void 0&&(M[L.bucketInstanceId]=[]),M[L.bucketInstanceId].push(L.featureIndex))}return M}insertCollisionBox(i,u,f,g,_,C){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:C,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,f,g,_,C){const T=f?this.ignoredGrid:this.grid,P={bucketInstanceId:g,featureIndex:_,collisionGroupID:C,overlapMode:u};for(let M=0;M<i.length;M+=4)T.insertCircle(P,i[M],i[M+1],i[M+2])}projectAndGetPerspectiveRatio(i,u,f,g){let _;return g?(_=[u,f,g(u,f),1],l.ag(_,_,i)):(_=[u,f,0,1],se(_,_,i)),{point:new l.P((_[0]/_[3]+1)/2*this.transform.width+ae,(-_[1]/_[3]+1)/2*this.transform.height+ae),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(i,u,f,g){return f<ae||i>=this.screenRightBoundary||g<ae||u>this.screenBottomBoundary}isInsideGrid(i,u,f,g){return f>=0&&i<this.gridRightBoundary&&g>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=l.ao([]);return l.$(i,i,[-100,-100,0]),i}}function pe(y,i,u){return i*(l.N/(y.tileSize*Math.pow(2,u-y.tileID.overscaledZ)))}class he{constructor(i,u,f,g){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):g&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class _e{constructor(i,u,f,g,_){this.text=new he(i?i.text:null,u,f,_),this.icon=new he(i?i.icon:null,u,g,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Me{constructor(i,u,f){this.text=i,this.icon=u,this.skipFade=f}}class De{constructor(){this.invProjMatrix=l.Z(),this.viewportMatrix=l.Z(),this.circles=[]}}class Oe{constructor(i,u,f,g,_){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=f,this.bucketIndex=g,this.tileID=_}}class yt{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:f=>f.collisionGroupID===u}}return this.collisionGroups[i]}}function Pt(y,i,u,f,g){const{horizontalAlign:_,verticalAlign:C}=l.au(y);return new l.P(-(_-.5)*i+f[0]*g,-(C-.5)*u+f[1]*g)}function ot(y,i,u,f,g,_){const{x1:C,x2:T,y1:P,y2:M,anchorPointX:R,anchorPointY:L}=y,U=new l.P(i,u);return f&&U._rotate(g?_:-_),{x1:C+U.x,y1:P+U.y,x2:T+U.x,y2:M+U.y,anchorPointX:R,anchorPointY:L}}class xt{constructor(i,u,f,g,_){this.transform=i.clone(),this.terrain=u,this.collisionIndex=new we(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new yt(g),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,f,g){const _=f.getBucket(u),C=f.latestFeatureIndex;if(!_||!C||u.id!==_.layerIds[0])return;const T=f.collisionBoxArray,P=_.layers[0].layout,M=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),R=f.tileSize/l.N,L=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),U=P.get("text-pitch-alignment")==="map",ee=P.get("text-rotation-alignment")==="map",J=pe(f,1,this.transform.zoom),re=qe(L,U,ee,this.transform,J);let Y=null;if(U){const Te=oi(L,U,ee,this.transform,J);Y=l.a1([],this.transform.labelPlaneMatrix,Te)}this.retainedQueryData[_.bucketInstanceId]=new Oe(_.bucketInstanceId,C,_.sourceLayerIndex,_.index,f.tileID);const ye={bucket:_,layout:P,posMatrix:L,textLabelPlaneMatrix:re,labelToScreenMatrix:Y,scale:M,textPixelRatio:R,holdingForFade:f.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:l.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(g)for(const Te of _.sortKeyRanges){const{sortKey:ue,symbolInstanceStart:ve,symbolInstanceEnd:Pe}=Te;i.push({sortKey:ue,symbolInstanceStart:ve,symbolInstanceEnd:Pe,parameters:ye})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:ye})}attemptAnchorPlacement(i,u,f,g,_,C,T,P,M,R,L,U,ee,J,re,Y){const ye=l.aq[i.textAnchor],Te=[i.textOffset0,i.textOffset1],ue=Pt(ye,f,g,Te,_),ve=this.collisionIndex.placeCollisionBox(ot(u,ue.x,ue.y,C,T,this.transform.angle),L,P,M,R.predicate,Y);if((!re||this.collisionIndex.placeCollisionBox(ot(re,ue.x,ue.y,C,T,this.transform.angle),L,P,M,R.predicate,Y).box.length!==0)&&ve.box.length>0){let Pe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID].text&&(Pe=this.prevPlacement.variableOffsets[U.crossTileID].anchor),U.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[U.crossTileID]={textOffset:Te,width:f,height:g,anchor:ye,textBoxScale:_,prevAnchor:Pe},this.markUsedJustification(ee,ye,U,J),ee.allowVerticalPlacement&&(this.markUsedOrientation(ee,J,U),this.placedOrientations[U.crossTileID]=J),{shift:ue,placedGlyphBoxes:ve}}}placeLayerBucketPart(i,u,f){const{bucket:g,layout:_,posMatrix:C,textLabelPlaneMatrix:T,labelToScreenMatrix:P,textPixelRatio:M,holdingForFade:R,collisionBoxArray:L,partiallyEvaluatedTextSize:U,collisionGroup:ee}=i.parameters,J=_.get("text-optional"),re=_.get("icon-optional"),Y=l.ar(_,"text-overlap","text-allow-overlap"),ye=Y==="always",Te=l.ar(_,"icon-overlap","icon-allow-overlap"),ue=Te==="always",ve=_.get("text-rotation-alignment")==="map",Pe=_.get("text-pitch-alignment")==="map",Ae=_.get("icon-text-fit")!=="none",ze=_.get("symbol-z-order")==="viewport-y",Be=ye&&(ue||!g.hasIconData()||re),Fe=ue&&(ye||!g.hasTextData()||J);!g.collisionArrays&&L&&g.deserializeCollisionBoxes(L);const je=this.retainedQueryData[g.bucketInstanceId].tileID,at=this.terrain?(Qe,Ct)=>this.terrain.getElevation(je,Qe,Ct):null,Vt=(Qe,Ct)=>{var ct,rn;if(u[Qe.crossTileID])return;if(R)return void(this.placements[Qe.crossTileID]=new Me(!1,!1,!1));let Nt=!1,Rt=!1,$t=!0,Rn=null,ln={box:null,offscreen:null},dr={box:null,offscreen:null},Yn=null,Vn=null,di=null,dn=0,us=0,cs=0;Ct.textFeatureIndex?dn=Ct.textFeatureIndex:Qe.useRuntimeCollisionCircles&&(dn=Qe.featureIndex),Ct.verticalTextFeatureIndex&&(us=Ct.verticalTextFeatureIndex);const ao=Ct.textBox;if(ao){const wr=Ln=>{let Qn=l.ai.horizontal;if(g.allowVerticalPlacement&&!Ln&&this.prevPlacement){const Zr=this.prevPlacement.placedOrientations[Qe.crossTileID];Zr&&(this.placedOrientations[Qe.crossTileID]=Zr,Qn=Zr,this.markUsedOrientation(g,Qn,Qe))}return Qn},fr=(Ln,Qn)=>{if(g.allowVerticalPlacement&&Qe.numVerticalGlyphVertices>0&&Ct.verticalTextBox){for(const Zr of g.writingModes)if(Zr===l.ai.vertical?(ln=Qn(),dr=ln):ln=Ln(),ln&&ln.box&&ln.box.length)break}else ln=Ln()},Ir=Qe.textAnchorOffsetStartIndex,Mo=Qe.textAnchorOffsetEndIndex;if(Mo===Ir){const Ln=(Qn,Zr)=>{const On=this.collisionIndex.placeCollisionBox(Qn,Y,M,C,ee.predicate,at);return On&&On.box&&On.box.length&&(this.markUsedOrientation(g,Zr,Qe),this.placedOrientations[Qe.crossTileID]=Zr),On};fr(()=>Ln(ao,l.ai.horizontal),()=>{const Qn=Ct.verticalTextBox;return g.allowVerticalPlacement&&Qe.numVerticalGlyphVertices>0&&Qn?Ln(Qn,l.ai.vertical):{box:null,offscreen:null}}),wr(ln&&ln.box&&ln.box.length)}else{let Ln=l.aq[(rn=(ct=this.prevPlacement)===null||ct===void 0?void 0:ct.variableOffsets[Qe.crossTileID])===null||rn===void 0?void 0:rn.anchor];const Qn=(On,Do,ju)=>{const fp=On.x2-On.x1,pp=On.y2-On.y1,Wy=Qe.textBoxScale,Vh=Ae&&Te==="never"?Do:null;let hs={box:[],offscreen:!1},zo=Y==="never"?1:2,ds="never";Ln&&zo++;for(let zi=0;zi<zo;zi++){for(let fs=Ir;fs<Mo;fs++){const $h=g.textAnchorOffsets.get(fs);if(Ln&&$h.textAnchor!==Ln)continue;const Rs=this.attemptAnchorPlacement($h,On,fp,pp,Wy,ve,Pe,M,C,ee,ds,Qe,g,ju,Vh,at);if(Rs&&(hs=Rs.placedGlyphBoxes,hs&&hs.box&&hs.box.length))return Nt=!0,Rn=Rs.shift,hs}Ln?Ln=null:ds=Y}return hs};fr(()=>Qn(ao,Ct.iconBox,l.ai.horizontal),()=>{const On=Ct.verticalTextBox;return g.allowVerticalPlacement&&!(ln&&ln.box&&ln.box.length)&&Qe.numVerticalGlyphVertices>0&&On?Qn(On,Ct.verticalIconBox,l.ai.vertical):{box:null,offscreen:null}}),ln&&(Nt=ln.box,$t=ln.offscreen);const Zr=wr(ln&&ln.box);if(!Nt&&this.prevPlacement){const On=this.prevPlacement.variableOffsets[Qe.crossTileID];On&&(this.variableOffsets[Qe.crossTileID]=On,this.markUsedJustification(g,On.anchor,Qe,Zr))}}}if(Yn=ln,Nt=Yn&&Yn.box&&Yn.box.length>0,$t=Yn&&Yn.offscreen,Qe.useRuntimeCollisionCircles){const wr=g.text.placedSymbolArray.get(Qe.centerJustifiedTextSymbolIndex),fr=l.aj(g.textSizeData,U,wr),Ir=_.get("text-padding");Vn=this.collisionIndex.placeCollisionCircles(Y,wr,g.lineVertexArray,g.glyphOffsetArray,fr,C,T,P,f,Pe,ee.predicate,Qe.collisionCircleDiameter,Ir,at),Vn.circles.length&&Vn.collisionDetected&&!f&&l.w("Collisions detected, but collision boxes are not shown"),Nt=ye||Vn.circles.length>0&&!Vn.collisionDetected,$t=$t&&Vn.offscreen}if(Ct.iconFeatureIndex&&(cs=Ct.iconFeatureIndex),Ct.iconBox){const wr=fr=>{const Ir=Ae&&Rn?ot(fr,Rn.x,Rn.y,ve,Pe,this.transform.angle):fr;return this.collisionIndex.placeCollisionBox(Ir,Te,M,C,ee.predicate,at)};dr&&dr.box&&dr.box.length&&Ct.verticalIconBox?(di=wr(Ct.verticalIconBox),Rt=di.box.length>0):(di=wr(Ct.iconBox),Rt=di.box.length>0),$t=$t&&di.offscreen}const Io=J||Qe.numHorizontalGlyphVertices===0&&Qe.numVerticalGlyphVertices===0,ba=re||Qe.numIconVertices===0;if(Io||ba?ba?Io||(Rt=Rt&&Nt):Nt=Rt&&Nt:Rt=Nt=Rt&&Nt,Nt&&Yn&&Yn.box&&this.collisionIndex.insertCollisionBox(Yn.box,Y,_.get("text-ignore-placement"),g.bucketInstanceId,dr&&dr.box&&us?us:dn,ee.ID),Rt&&di&&this.collisionIndex.insertCollisionBox(di.box,Te,_.get("icon-ignore-placement"),g.bucketInstanceId,cs,ee.ID),Vn&&(Nt&&this.collisionIndex.insertCollisionCircles(Vn.circles,Y,_.get("text-ignore-placement"),g.bucketInstanceId,dn,ee.ID),f)){const wr=g.bucketInstanceId;let fr=this.collisionCircleArrays[wr];fr===void 0&&(fr=this.collisionCircleArrays[wr]=new De);for(let Ir=0;Ir<Vn.circles.length;Ir+=4)fr.circles.push(Vn.circles[Ir+0]),fr.circles.push(Vn.circles[Ir+1]),fr.circles.push(Vn.circles[Ir+2]),fr.circles.push(Vn.collisionDetected?1:0)}if(Qe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Qe.crossTileID]=new Me(Nt||Be,Rt||Fe,$t||g.justReloaded),u[Qe.crossTileID]=!0};if(ze){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Qe=g.getSortedSymbolIndexes(this.transform.angle);for(let Ct=Qe.length-1;Ct>=0;--Ct){const ct=Qe[Ct];Vt(g.symbolInstances.get(ct),g.collisionArrays[ct])}}else for(let Qe=i.symbolInstanceStart;Qe<i.symbolInstanceEnd;Qe++)Vt(g.symbolInstances.get(Qe),g.collisionArrays[Qe]);if(f&&g.bucketInstanceId in this.collisionCircleArrays){const Qe=this.collisionCircleArrays[g.bucketInstanceId];l.as(Qe.invProjMatrix,C),Qe.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(i,u,f,g){let _;_=g===l.ai.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[l.at(u)];const C=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const T of C)T>=0&&(i.text.placedSymbolArray.get(T).crossTileID=_>=0&&T!==_?0:f.crossTileID)}markUsedOrientation(i,u,f){const g=u===l.ai.horizontal||u===l.ai.horizontalOnly?u:0,_=u===l.ai.vertical?u:0,C=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const T of C)i.text.placedSymbolArray.get(T).placedOrientation=g;f.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let f=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const g=u?u.symbolFadeChange(i):1,_=u?u.opacities:{},C=u?u.variableOffsets:{},T=u?u.placedOrientations:{};for(const P in this.placements){const M=this.placements[P],R=_[P];R?(this.opacities[P]=new _e(R,g,M.text,M.icon),f=f||M.text!==R.text.placed||M.icon!==R.icon.placed):(this.opacities[P]=new _e(null,g,M.text,M.icon,M.skipFade),f=f||M.text||M.icon)}for(const P in _){const M=_[P];if(!this.opacities[P]){const R=new _e(M,g,!1,!1);R.isHidden()||(this.opacities[P]=R,f=f||M.text.placed||M.icon.placed)}}for(const P in C)this.variableOffsets[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.variableOffsets[P]=C[P]);for(const P in T)this.placedOrientations[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.placedOrientations[P]=T[P]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const f={};for(const g of u){const _=g.getBucket(i);_&&g.latestFeatureIndex&&i.id===_.layerIds[0]&&this.updateBucketOpacities(_,f,g.collisionBoxArray)}}updateBucketOpacities(i,u,f){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const g=i.layers[0],_=g.layout,C=new _e(null,0,!1,!1,!0),T=_.get("text-allow-overlap"),P=_.get("icon-allow-overlap"),M=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),R=_.get("text-rotation-alignment")==="map",L=_.get("text-pitch-alignment")==="map",U=_.get("icon-text-fit")!=="none",ee=new _e(null,0,T&&(P||!i.hasIconData()||_.get("icon-optional")),P&&(T||!i.hasTextData()||_.get("text-optional")),!0);!i.collisionArrays&&f&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(f);const J=(re,Y,ye)=>{for(let Te=0;Te<Y/4;Te++)re.opacityVertexArray.emplaceBack(ye);re.hasVisibleVertices=re.hasVisibleVertices||ye!==Pi};for(let re=0;re<i.symbolInstances.length;re++){const Y=i.symbolInstances.get(re),{numHorizontalGlyphVertices:ye,numVerticalGlyphVertices:Te,crossTileID:ue}=Y;let ve=this.opacities[ue];u[ue]?ve=C:ve||(ve=ee,this.opacities[ue]=ve),u[ue]=!0;const Pe=Y.numIconVertices>0,Ae=this.placedOrientations[Y.crossTileID],ze=Ae===l.ai.vertical,Be=Ae===l.ai.horizontal||Ae===l.ai.horizontalOnly;if(ye>0||Te>0){const Fe=cr(ve.text);J(i.text,ye,ze?Pi:Fe),J(i.text,Te,Be?Pi:Fe);const je=ve.text.isHidden();[Y.rightJustifiedTextSymbolIndex,Y.centerJustifiedTextSymbolIndex,Y.leftJustifiedTextSymbolIndex].forEach(Qe=>{Qe>=0&&(i.text.placedSymbolArray.get(Qe).hidden=je||ze?1:0)}),Y.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Y.verticalPlacedTextSymbolIndex).hidden=je||Be?1:0);const at=this.variableOffsets[Y.crossTileID];at&&this.markUsedJustification(i,at.anchor,Y,Ae);const Vt=this.placedOrientations[Y.crossTileID];Vt&&(this.markUsedJustification(i,"left",Y,Vt),this.markUsedOrientation(i,Vt,Y))}if(Pe){const Fe=cr(ve.icon),je=!(U&&Y.verticalPlacedIconSymbolIndex&&ze);Y.placedIconSymbolIndex>=0&&(J(i.icon,Y.numIconVertices,je?Fe:Pi),i.icon.placedSymbolArray.get(Y.placedIconSymbolIndex).hidden=ve.icon.isHidden()),Y.verticalPlacedIconSymbolIndex>=0&&(J(i.icon,Y.numVerticalIconVertices,je?Pi:Fe),i.icon.placedSymbolArray.get(Y.verticalPlacedIconSymbolIndex).hidden=ve.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Fe=i.collisionArrays[re];if(Fe){let je=new l.P(0,0);if(Fe.textBox||Fe.verticalTextBox){let Vt=!0;if(M){const Qe=this.variableOffsets[ue];Qe?(je=Pt(Qe.anchor,Qe.width,Qe.height,Qe.textOffset,Qe.textBoxScale),R&&je._rotate(L?this.transform.angle:-this.transform.angle)):Vt=!1}Fe.textBox&&kt(i.textCollisionBox.collisionVertexArray,ve.text.placed,!Vt||ze,je.x,je.y),Fe.verticalTextBox&&kt(i.textCollisionBox.collisionVertexArray,ve.text.placed,!Vt||Be,je.x,je.y)}const at=!!(!Be&&Fe.verticalIconBox);Fe.iconBox&&kt(i.iconCollisionBox.collisionVertexArray,ve.icon.placed,at,U?je.x:0,U?je.y:0),Fe.verticalIconBox&&kt(i.iconCollisionBox.collisionVertexArray,ve.icon.placed,!at,U?je.x:0,U?je.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const re=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=re.invProjMatrix,i.placementViewportMatrix=re.viewportMatrix,i.collisionCircleArray=re.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const f=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*f>i}setStale(){this.stale=!0}}function kt(y,i,u,f,g){y.emplaceBack(i?1:0,u?1:0,f||0,g||0),y.emplaceBack(i?1:0,u?1:0,f||0,g||0),y.emplaceBack(i?1:0,u?1:0,f||0,g||0),y.emplaceBack(i?1:0,u?1:0,f||0,g||0)}const en=Math.pow(2,25),sn=Math.pow(2,24),Ht=Math.pow(2,17),Zt=Math.pow(2,16),_r=Math.pow(2,9),an=Math.pow(2,8),Wn=Math.pow(2,1);function cr(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const i=y.placed?1:0,u=Math.floor(127*y.opacity);return u*en+i*sn+u*Ht+i*Zt+u*_r+i*an+u*Wn+i}const Pi=0;class kf{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,f,g,_){const C=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(C,g,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((T,P)=>T.sortKey-P.sortKey));this._currentPartIndex<C.length;)if(u.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,_())return!0;return!1}}class ua{constructor(i,u,f,g,_,C,T,P){this.placement=new xt(i,u,C,T,P),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(i,u,f){const g=l.h.now(),_=()=>!this._forceFullPlacement&&l.h.now()-g>2;for(;this._currentPlacementIndex>=0;){const C=u[i[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=T)&&(!C.maxzoom||C.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new kf(C)),this._inProgressLayer.continuePlacement(f[C.source],this.placement,this._showCollisionBoxes,C,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const ca=512/l.N/2;class Iy{constructor(i,u,f){this.tileID=i,this.bucketInstanceId=f,this._symbolsByKey={};const g=new Map;for(let _=0;_<u.length;_++){const C=u.get(_),T=C.key,P=g.get(T);P?P.push(C):g.set(T,[C])}for(const[_,C]of g){const T={positions:C.map(P=>({x:Math.floor(P.anchorX*ca),y:Math.floor(P.anchorY*ca)})),crossTileIDs:C.map(P=>P.crossTileID)};if(T.positions.length>128){const P=new l.av(T.positions.length,16,Uint16Array);for(const{x:M,y:R}of T.positions)P.add(M,R);P.finish(),delete T.positions,T.index=P}this._symbolsByKey[_]=T}}getScaledCoordinates(i,u){const{x:f,y:g,z:_}=this.tileID.canonical,{x:C,y:T,z:P}=u.canonical,M=ca/Math.pow(2,P-_),R=(T*l.N+i.anchorY)*M,L=g*l.N*ca;return{x:Math.floor((C*l.N+i.anchorX)*M-f*l.N*ca),y:Math.floor(R-L)}}findMatches(i,u,f){const g=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<i.length;_++){const C=i.get(_);if(C.crossTileID)continue;const T=this._symbolsByKey[C.key];if(!T)continue;const P=this.getScaledCoordinates(C,u);if(T.index){const M=T.index.range(P.x-g,P.y-g,P.x+g,P.y+g).sort();for(const R of M){const L=T.crossTileIDs[R];if(!f[L]){f[L]=!0,C.crossTileID=L;break}}}else if(T.positions)for(let M=0;M<T.positions.length;M++){const R=T.positions[M],L=T.crossTileIDs[M];if(Math.abs(R.x-P.x)<=g&&Math.abs(R.y-P.y)<=g&&!f[L]){f[L]=!0,C.crossTileID=L;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class nn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Jc{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const f in this.indexes){const g=this.indexes[f],_={};for(const C in g){const T=g[C];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+u),_[T.tileID.key]=T}this.indexes[f]=_}this.lng=i}addBucket(i,u,f){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const g=this.usedCrossTileIDs[i.overscaledZ];for(const _ in this.indexes){const C=this.indexes[_];if(Number(_)>i.overscaledZ)for(const T in C){const P=C[T];P.tileID.isChildOf(i)&&P.findMatches(u.symbolInstances,i,g)}else{const T=C[i.scaledTo(Number(_)).key];T&&T.findMatches(u.symbolInstances,i,g)}}for(let _=0;_<u.symbolInstances.length;_++){const C=u.symbolInstances.get(_);C.crossTileID||(C.crossTileID=f.generate(),g[C.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Iy(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const f of u.getCrossTileIDsLists())for(const g of f)delete this.usedCrossTileIDs[i][g]}removeStaleBuckets(i){let u=!1;for(const f in this.indexes){const g=this.indexes[f];for(const _ in g)i[g[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,g[_]),delete g[_],u=!0)}return u}}class pu{constructor(){this.layerIndexes={},this.crossTileIDs=new nn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,f){let g=this.layerIndexes[i.id];g===void 0&&(g=this.layerIndexes[i.id]=new Jc);let _=!1;const C={};g.handleWrapJump(f);for(const T of u){const P=T.getBucket(i);P&&i.id===P.layerIds[0]&&(P.bucketInstanceId||(P.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(T.tileID,P,this.crossTileIDs)&&(_=!0),C[P.bucketInstanceId]=!0)}return g.removeStaleBuckets(C)&&(_=!0),_}pruneUnusedLayers(i){const u={};i.forEach(f=>{u[f]=!0});for(const f in this.layerIndexes)u[f]||delete this.layerIndexes[f]}}const xr=(y,i)=>l.x(y,i&&i.filter(u=>u.identifier!=="source.canvas")),ai=l.F(l.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),My=l.F(l.ax,["setCenter","setZoom","setBearing","setPitch"]),Ai=l.aw();class hr extends l.E{constructor(i,u={}){super(),this.map=i,this.dispatcher=new Wt(ji(),this,i._getMapId()),this.imageManager=new Ue,this.imageManager.setEventedParent(this),this.glyphManager=new zt(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Et(256,512),this.crossTileSymbolIndex=new pu,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.az());const f=this;this._rtlTextPluginCallback=hr.registerForPluginStateChange(g=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(_,C)=>{if(l.aA(_),C&&C.every(T=>T))for(const T in f.sourceCaches){const P=f.sourceCaches[T].getSource().type;P!=="vector"&&P!=="geojson"||f.sourceCaches[T].reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const _=this.sourceCaches[g.sourceId];if(!_)return;const C=_.getSource();if(C&&C.vectorLayerIds)for(const T in this._layers){const P=this._layers[T];P.source===C.id&&this._validateLayer(P)}})}loadURL(i,u={},f){this.fire(new l.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const g=this.map._requestManager.transformRequest(i,N.Style);this._request=l.f(g,(_,C)=>{this._request=null,_?this.fire(new l.j(_)):C&&this._load(C,u,f)})}loadJSON(i,u={},f){this.fire(new l.k("dataloading",{dataType:"style"})),this._request=l.h.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(i,u,f)})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(Ai,{validate:!1})}_load(i,u,f){var g;const _=u.transformStyle?u.transformStyle(f,i):i;if(!u.validate||!xr(this,l.y(_))){this._loaded=!0,this.stylesheet=_;for(const C in _.sources)this.addSource(C,_.sources[C],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new ut(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const i=l.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of i){const f=l.aC(u);f.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=f}}_loadSprite(i,u=!1,f=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,_,C,T){const P=Ce(g),M=P.length,R=C>1?"@2x":"",L={},U={},ee={};for(const{id:J,url:re}of P){const Y=_.transformRequest(_.normalizeSpriteURL(re,R,".json"),N.SpriteJSON),ye=`${J}_${Y.url}`;L[ye]=l.f(Y,(ve,Pe)=>{delete L[ye],U[J]=Pe,Ge(T,U,ee,ve,M)});const Te=_.transformRequest(_.normalizeSpriteURL(re,R,".png"),N.SpriteImage),ue=`${J}_${Te.url}`;L[ue]=K.getImage(Te,(ve,Pe)=>{delete L[ue],ee[J]=Pe,Ge(T,U,ee,ve,M)})}return{cancel(){for(const J of Object.values(L))J.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(g,_)=>{if(this._spriteRequest=null,g)this.fire(new l.j(g));else if(_)for(const C in _){this._spritesImagesIds[C]=[];const T=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(P=>!(P in _)):[];for(const P of T)this.imageManager.removeImage(P),this._changedImages[P]=!0;for(const P in _[C]){const M=C==="default"?P:`${C}:${P}`;this._spritesImagesIds[C].push(M),M in this.imageManager.images?this.imageManager.updateImage(M,_[C][P],!1):this.imageManager.addImage(M,_[C][P]),u&&(this._changedImages[M]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),f&&f(g)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(i){const u=this.sourceCaches[i.source];if(!u)return;const f=i.sourceLayer;if(!f)return;const g=u.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(f)===-1)&&this.fire(new l.j(new Error(`Source layer "${f}" does not exist on source "${g.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const u=this._serializedAllLayers();if(!i||i.length===0)return Object.values(u);const f=[];for(const g of i)u[g]&&f.push(u[g]);return f}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const u=Object.keys(this._layers);for(const f of u){const g=this._layers[f];g.type!=="custom"&&(i[f]=g.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const u=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(g.length||_.length)&&this._updateWorkerLayers(g,_);for(const C in this._updatedSources){const T=this._updatedSources[C];if(T==="reload")this._reloadSource(C);else{if(T!=="clear")throw new Error(`Invalid action ${T}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const f={};for(const g in this.sourceCaches){const _=this.sourceCaches[g];f[g]=_.used,_.used=!1}for(const g of this._order){const _=this._layers[g];_.recalculate(i,this._availableImages),!_.isHidden(i.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const g in f){const _=this.sourceCaches[g];f[g]!==_.used&&_.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(i),this.z=i.zoom,u&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,u={}){this._checkLoaded();const f=this.serialize();if(i=u.transformStyle?u.transformStyle(f,i):i,xr(this,l.y(i)))return!1;(i=l.aD(i)).layers=l.aB(i.layers);const g=l.aE(f,i).filter(C=>!(C.command in My));if(g.length===0)return!1;const _=g.filter(C=>!(C.command in ai));if(_.length>0)throw new Error(`Unimplemented: ${_.map(C=>C.command).join(", ")}.`);for(const C of g)C.command!=="setTransition"&&this[C.command].apply(this,C.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,u){if(this.getImage(i))return this.fire(new l.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new l.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,f={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.y.source,`sources.${i}`,u,null,f))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const g=this.sourceCaches[i]=new et(i,u,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:i})),g.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===i)return this.fire(new l.j(new Error(`Source "${i}" cannot be removed while layer "${f}" is using it.`)));const u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const f=this.sourceCaches[i].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,f={}){this._checkLoaded();const g=i.id;if(this.getLayer(g))return void this.fire(new l.j(new Error(`Layer "${g}" already exists on this map.`)));let _;if(i.type==="custom"){if(xr(this,l.aF(i)))return;_=l.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(g,i.source),i=l.aD(i),i=l.e(i,{source:g})),this._validate(l.y.layer,`layers.${g}`,i,{arrayIndex:-1},f))return;_=l.aC(i),this._validateLayer(_),_.setEventedParent(this,{layer:{id:g}})}const C=u?this._order.indexOf(u):this._order.length;if(u&&C===-1)this.fire(new l.j(new Error(`Cannot add layer "${g}" before non-existing layer "${u}".`)));else{if(this._order.splice(C,0,g),this._layerOrderChanged=!0,this._layers[g]=_,this._removedLayers[g]&&_.source&&_.type!=="custom"){const T=this._removedLayers[g];delete this._removedLayers[g],T.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new l.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const f=this._order.indexOf(i);this._order.splice(f,1);const g=u?this._order.indexOf(u):this._order.length;u&&g===-1?this.fire(new l.j(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(g,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);const f=this._order.indexOf(i);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,f){this._checkLoaded();const g=this.getLayer(i);g?g.minzoom===u&&g.maxzoom===f||(u!=null&&(g.minzoom=u),f!=null&&(g.maxzoom=f),this._updateLayer(g)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,f={}){this._checkLoaded();const g=this.getLayer(i);if(g){if(!l.aG(g.filter,u))return u==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(l.y.filter,`layers.${g.id}.filter`,u,null,f)||(g.filter=l.aD(u),this._updateLayer(g)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return l.aD(this.getLayer(i).filter)}setLayoutProperty(i,u,f,g={}){this._checkLoaded();const _=this.getLayer(i);_?l.aG(_.getLayoutProperty(u),f)||(_.setLayoutProperty(u,f,g),this._updateLayer(_)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){const f=this.getLayer(i);if(f)return f.getLayoutProperty(u);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,f,g={}){this._checkLoaded();const _=this.getLayer(i);_?l.aG(_.getPaintProperty(u),f)||(_.setPaintProperty(u,f,g)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new l.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const f=i.source,g=i.sourceLayer,_=this.sourceCaches[f];if(_===void 0)return void this.fire(new l.j(new Error(`The source '${f}' does not exist in the map's style.`)));const C=_.getSource().type;C==="geojson"&&g?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||g?(i.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(g,i.id,u)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();const f=i.source,g=this.sourceCaches[f];if(g===void 0)return void this.fire(new l.j(new Error(`The source '${f}' does not exist in the map's style.`)));const _=g.getSource().type,C=_==="vector"?i.sourceLayer:void 0;_!=="vector"||C?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(C,i.id,u):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const u=i.source,f=i.sourceLayer,g=this.sourceCaches[u];if(g!==void 0)return g.getSource().type!=="vector"||f?(i.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(f,i.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=l.aH(this.sourceCaches,_=>_.serialize()),u=this._serializeByIds(this._order),f=this.map.getTerrain()||void 0,g=this.stylesheet;return l.aI({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:i,layers:u,terrain:f},_=>_!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=C=>this._layers[C].type==="fill-extrusion",f={},g=[];for(let C=this._order.length-1;C>=0;C--){const T=this._order[C];if(u(T)){f[T]=C;for(const P of i){const M=P[T];if(M)for(const R of M)g.push(R)}}}g.sort((C,T)=>T.intersectionZ-C.intersectionZ);const _=[];for(let C=this._order.length-1;C>=0;C--){const T=this._order[C];if(u(T))for(let P=g.length-1;P>=0;P--){const M=g[P].feature;if(f[M.layer.id]<C)break;_.push(M),g.pop()}else for(const P of i){const M=P[T];if(M)for(const R of M)_.push(R.feature)}}return _}queryRenderedFeatures(i,u,f){u&&u.filter&&this._validate(l.y.filter,"queryRenderedFeatures.filter",u.filter,null,u);const g={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const T of u.layers){const P=this._layers[T];if(!P)return this.fire(new l.j(new Error(`The layer '${T}' does not exist in the map's style and cannot be queried for features.`))),[];g[P.source]=!0}}const _=[];u.availableImages=this._availableImages;const C=this._serializedAllLayers();for(const T in this.sourceCaches)u.layers&&!g[T]||_.push(Js(this.sourceCaches[T],this._layers,C,i,u,f));return this.placement&&_.push(function(T,P,M,R,L,U,ee){const J={},re=U.queryRenderedSymbols(R),Y=[];for(const ye of Object.keys(re).map(Number))Y.push(ee[ye]);Y.sort(Es);for(const ye of Y){const Te=ye.featureIndex.lookupSymbolFeatures(re[ye.bucketInstanceId],P,ye.bucketIndex,ye.sourceLayerIndex,L.filter,L.layers,L.availableImages,T);for(const ue in Te){const ve=J[ue]=J[ue]||[],Pe=Te[ue];Pe.sort((Ae,ze)=>{const Be=ye.featureSortOrder;if(Be){const Fe=Be.indexOf(Ae.featureIndex);return Be.indexOf(ze.featureIndex)-Fe}return ze.featureIndex-Ae.featureIndex});for(const Ae of Pe)ve.push(Ae)}}for(const ye in J)J[ye].forEach(Te=>{const ue=Te.feature,ve=M[T[ye].source].getFeatureState(ue.layer["source-layer"],ue.id);ue.source=ue.layer.source,ue.layer["source-layer"]&&(ue.sourceLayer=ue.layer["source-layer"]),ue.state=ve});return J}(this._layers,C,this.sourceCaches,i,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(i,u){u&&u.filter&&this._validate(l.y.filter,"querySourceFeatures.filter",u.filter,null,u);const f=this.sourceCaches[i];return f?function(g,_){const C=g.getRenderableIds().map(M=>g.getTileByID(M)),T=[],P={};for(let M=0;M<C.length;M++){const R=C[M],L=R.tileID.canonical.key;P[L]||(P[L]=!0,R.querySourceFeatures(T,_))}return T}(f,u):[]}addSourceType(i,u,f){return Ti(i)?f(new Error(`A source type called "${i}" already exists.`)):(((g,_)=>{Qs[g]=_})(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const f=this.light.getLight();let g=!1;for(const C in i)if(!l.aG(i[C],f[C])){g=!0;break}if(!g)return;const _={now:l.h.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(_)}_validate(i,u,f,g,_={}){return(!_||_.validate!==!1)&&xr(this,i.call(l.y,l.e({key:u,style:this.serialize(),value:f,styleSpec:l.v},g)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const f=this.sourceCaches[u];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const u in this.sourceCaches)this.sourceCaches[u].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,f,g,_=!1){let C=!1,T=!1;const P={};for(const M of this._order){const R=this._layers[M];if(R.type!=="symbol")continue;if(!P[R.source]){const U=this.sourceCaches[R.source];P[R.source]=U.getRenderableIds(!0).map(ee=>U.getTileByID(ee)).sort((ee,J)=>J.tileID.overscaledZ-ee.tileID.overscaledZ||(ee.tileID.isLessThan(J.tileID)?-1:1))}const L=this.crossTileSymbolIndex.addLayer(R,P[R.source],i.center.lng);C=C||L}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.h.now(),i.zoom))&&(this.pauseablePlacement=new ua(i,this.map.terrain,this._order,_,u,f,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,P),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.h.now()),T=!0),C&&this.pauseablePlacement.placement.setStale()),T||C)for(const M of this._order){const R=this._layers[M];R.type==="symbol"&&this.placement.updateLayerOpacities(R,P[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u,f){this.imageManager.getImages(u.icons,f),this._updateTilesForChangedImages();const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(i,u,f){this.glyphManager.getGlyphs(u.stacks,f);const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,[""])}getResource(i,u,f){return l.m(u,f)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,u={}){this._checkLoaded(),i&&this._validate(l.y.glyphs,"glyphs",i,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,u,f={},g){this._checkLoaded();const _=[{id:i,url:u}],C=[...Ce(this.stylesheet.sprite),..._];this._validate(l.y.sprite,"sprite",C,null,f)||(this.stylesheet.sprite=C,this._loadSprite(_,!0,g))}removeSprite(i){this._checkLoaded();const u=Ce(this.stylesheet.sprite);if(u.find(f=>f.id===i)){if(this._spritesImagesIds[i])for(const f of this._spritesImagesIds[i])this.imageManager.removeImage(f),this._changedImages[f]=!0;u.splice(u.findIndex(f=>f.id===i),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return Ce(this.stylesheet.sprite)}setSprite(i,u={},f){this._checkLoaded(),i&&this._validate(l.y.sprite,"sprite",i,null,u)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,f):(this._unloadSprite(),f&&f(null)))}}hr.registerForPluginStateChange=l.aK;var mu=l.Q([{name:"a_pos",type:"Int16",components:2}]),ha="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const wn={prelude:Yt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Yt(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Yt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Yt(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Yt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Yt(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Yt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Yt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Yt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Yt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Yt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Yt(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Yt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Yt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Yt(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Yt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Yt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Yt(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Yt(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Yt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Yt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Yt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Yt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Yt(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Yt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Yt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Yt("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ha),terrainDepth:Yt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ha),terrainCoords:Yt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ha)};function Yt(y,i){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=i.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=_?_.concat(g):g,T={};return{fragmentSource:y=y.replace(u,(P,M,R,L,U)=>(T[U]=!0,M==="define"?`
#ifndef HAS_UNIFORM_u_${U}
varying ${R} ${L} ${U};
#else
uniform ${R} ${L} u_${U};
#endif
`:`
#ifdef HAS_UNIFORM_u_${U}
    ${R} ${L} ${U} = u_${U};
#endif
`)),vertexSource:i=i.replace(u,(P,M,R,L,U)=>{const ee=L==="float"?"vec2":"vec4",J=U.match(/color/)?"color":ee;return T[U]?M==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
attribute ${R} ${ee} a_${U};
varying ${R} ${L} ${U};
#else
uniform ${R} ${L} u_${U};
#endif
`:J==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = a_${U};
#else
    ${R} ${L} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = unpack_mix_${J}(a_${U}, u_${U}_t);
#else
    ${R} ${L} ${U} = u_${U};
#endif
`:M==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
attribute ${R} ${ee} a_${U};
#else
uniform ${R} ${L} u_${U};
#endif
`:J==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${R} ${L} ${U} = a_${U};
#else
    ${R} ${L} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${R} ${L} ${U} = unpack_mix_${J}(a_${U}, u_${U}_t);
#else
    ${R} ${L} ${U} = u_${U};
#endif
`}),staticAttributes:f,staticUniforms:C}}class bo{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,f,g,_,C,T,P,M){this.context=i;let R=this.boundPaintVertexBuffers.length!==g.length;for(let L=0;!R&&L<g.length;L++)this.boundPaintVertexBuffers[L]!==g[L]&&(R=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==f||R||this.boundIndexBuffer!==_||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==T||this.boundDynamicVertexBuffer2!==P||this.boundDynamicVertexBuffer3!==M?this.freshBind(u,f,g,_,C,T,P,M):(i.bindVertexArray.set(this.vao),T&&T.bind(),_&&_.dynamicDraw&&_.bind(),P&&P.bind(),M&&M.bind())}freshBind(i,u,f,g,_,C,T,P){const M=i.numAttributes,R=this.context,L=R.gl;this.vao&&this.destroy(),this.vao=R.createVertexArray(),R.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=g,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=T,this.boundDynamicVertexBuffer3=P,u.enableAttributes(L,i);for(const U of f)U.enableAttributes(L,i);C&&C.enableAttributes(L,i),T&&T.enableAttributes(L,i),P&&P.enableAttributes(L,i),u.bind(),u.setVertexAttribPointers(L,i,_);for(const U of f)U.bind(),U.setVertexAttribPointers(L,i,_);C&&(C.bind(),C.setVertexAttribPointers(L,i,_)),g&&g.bind(),T&&(T.bind(),T.setVertexAttribPointers(L,i,_)),P&&(P.bind(),P.setVertexAttribPointers(L,i,_)),R.currentNumAttributes=M}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Pn(y){const i=[];for(let u=0;u<y.length;u++){if(y[u]===null)continue;const f=y[u].split(" ");i.push(f.pop())}return i}class gu{constructor(i,u,f,g,_,C){const T=i.gl;this.program=T.createProgram();const P=Pn(u.staticAttributes),M=f?f.getBinderAttributes():[],R=P.concat(M),L=wn.prelude.staticUniforms?Pn(wn.prelude.staticUniforms):[],U=u.staticUniforms?Pn(u.staticUniforms):[],ee=f?f.getBinderUniforms():[],J=L.concat(U).concat(ee),re=[];for(const Ae of J)re.indexOf(Ae)<0&&re.push(Ae);const Y=f?f.defines():[];_&&Y.push("#define OVERDRAW_INSPECTOR;"),C&&Y.push("#define TERRAIN3D;");const ye=Y.concat(wn.prelude.fragmentSource,u.fragmentSource).join(`
`),Te=Y.concat(wn.prelude.vertexSource,u.vertexSource).join(`
`),ue=T.createShader(T.FRAGMENT_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(ue,ye),T.compileShader(ue),!T.getShaderParameter(ue,T.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${T.getShaderInfoLog(ue)}`);T.attachShader(this.program,ue);const ve=T.createShader(T.VERTEX_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(ve,Te),T.compileShader(ve),!T.getShaderParameter(ve,T.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${T.getShaderInfoLog(ve)}`);T.attachShader(this.program,ve),this.attributes={};const Pe={};this.numAttributes=R.length;for(let Ae=0;Ae<this.numAttributes;Ae++)R[Ae]&&(T.bindAttribLocation(this.program,Ae,R[Ae]),this.attributes[R[Ae]]=Ae);if(T.linkProgram(this.program),!T.getProgramParameter(this.program,T.LINK_STATUS))throw new Error(`Program failed to link: ${T.getProgramInfoLog(this.program)}`);T.deleteShader(ve),T.deleteShader(ue);for(let Ae=0;Ae<re.length;Ae++){const ze=re[Ae];if(ze&&!Pe[ze]){const Be=T.getUniformLocation(this.program,ze);Be&&(Pe[ze]=Be)}}this.fixedUniforms=g(i,Pe),this.terrainUniforms=((Ae,ze)=>({u_depth:new l.aL(Ae,ze.u_depth),u_terrain:new l.aL(Ae,ze.u_terrain),u_terrain_dim:new l.aM(Ae,ze.u_terrain_dim),u_terrain_matrix:new l.aN(Ae,ze.u_terrain_matrix),u_terrain_unpack:new l.aO(Ae,ze.u_terrain_unpack),u_terrain_exaggeration:new l.aM(Ae,ze.u_terrain_exaggeration)}))(i,Pe),this.binderUniforms=f?f.getUniforms(i,Pe):[]}draw(i,u,f,g,_,C,T,P,M,R,L,U,ee,J,re,Y,ye,Te){const ue=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(f),i.setStencilMode(g),i.setColorMode(_),i.setCullFace(C),P){i.activeTexture.set(ue.TEXTURE2),ue.bindTexture(ue.TEXTURE_2D,P.depthTexture),i.activeTexture.set(ue.TEXTURE3),ue.bindTexture(ue.TEXTURE_2D,P.texture);for(const Pe in this.terrainUniforms)this.terrainUniforms[Pe].set(P[Pe])}for(const Pe in this.fixedUniforms)this.fixedUniforms[Pe].set(T[Pe]);re&&re.setUniforms(i,this.binderUniforms,ee,{zoom:J});let ve=0;switch(u){case ue.LINES:ve=2;break;case ue.TRIANGLES:ve=3;break;case ue.LINE_STRIP:ve=1}for(const Pe of U.get()){const Ae=Pe.vaos||(Pe.vaos={});(Ae[M]||(Ae[M]=new bo)).bind(i,this,R,re?re.getPaintVertexBuffers():[],L,Pe.vertexOffset,Y,ye,Te),ue.drawElements(u,Pe.primitiveLength*ve,ue.UNSIGNED_SHORT,Pe.primitiveOffset*ve*2)}}}function ki(y,i,u){const f=1/pe(u,1,i.transform.tileZoom),g=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,i.transform.tileZoom)/g,C=_*(u.tileID.canonical.x+u.tileID.wrap*g),T=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[f,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[C>>16,T>>16],u_pixel_coord_lower:[65535&C,65535&T]}}const eh=(y,i,u,f)=>{const g=i.style.light,_=g.properties.get("position"),C=[_.x,_.y,_.z],T=function(){var M=new l.A(9);return l.A!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[5]=0,M[6]=0,M[7]=0),M[0]=1,M[4]=1,M[8]=1,M}();g.properties.get("anchor")==="viewport"&&function(M,R){var L=Math.sin(R),U=Math.cos(R);M[0]=U,M[1]=L,M[2]=0,M[3]=-L,M[4]=U,M[5]=0,M[6]=0,M[7]=0,M[8]=1}(T,-i.transform.angle),function(M,R,L){var U=R[0],ee=R[1],J=R[2];M[0]=U*L[0]+ee*L[3]+J*L[6],M[1]=U*L[1]+ee*L[4]+J*L[7],M[2]=U*L[2]+ee*L[5]+J*L[8]}(C,C,T);const P=g.properties.get("color");return{u_matrix:y,u_lightpos:C,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[P.r,P.g,P.b],u_vertical_gradient:+u,u_opacity:f}},to=(y,i,u,f,g,_,C)=>l.e(eh(y,i,u,f),ki(_,i,C),{u_height_factor:-Math.pow(2,g.overscaledZ)/C.tileSize/8}),If=y=>({u_matrix:y}),th=(y,i,u,f)=>l.e(If(y),ki(u,i,f)),yu=(y,i)=>({u_matrix:y,u_world:i}),vu=(y,i,u,f,g)=>l.e(th(y,i,u,f),{u_world:g}),no=(y,i,u,f)=>{const g=y.transform;let _,C;if(f.paint.get("circle-pitch-alignment")==="map"){const T=pe(u,1,g.zoom);_=!0,C=[T,T]}else _=!1,C=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(i.posMatrix,u,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:C}},nh=(y,i,u)=>{const f=pe(u,1,i.zoom),g=Math.pow(2,i.zoom-u.tileID.overscaledZ),_=u.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[i.pixelsToGLUnits[0]/(f*g),i.pixelsToGLUnits[1]/(f*g)],u_overscale_factor:_}},gl=(y,i,u=1)=>({u_matrix:y,u_color:i,u_overlay:0,u_overlay_scale:u}),Mf=y=>({u_matrix:y}),Dy=(y,i,u,f)=>({u_matrix:y,u_extrude_scale:pe(i,1,u),u_intensity:f});function rh(y,i){const u=Math.pow(2,i.canonical.z),f=i.canonical.y;return[new l.U(0,f/u).toLngLat().lat,new l.U(0,(f+1)/u).toLngLat().lat]}const ih=(y,i,u,f)=>{const g=y.transform;return{u_matrix:_u(y,i,u,f),u_ratio:1/pe(i,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Df=(y,i,u,f,g)=>l.e(ih(y,i,u,g),{u_image:0,u_image_height:f}),zy=(y,i,u,f,g)=>{const _=y.transform,C=Rf(i,_);return{u_matrix:_u(y,i,u,g),u_texsize:i.imageAtlasTexture.size,u_ratio:1/pe(i,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[C,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},zf=(y,i,u,f,g,_)=>{const C=y.lineAtlas,T=Rf(i,y.transform),P=u.layout.get("line-cap")==="round",M=C.getDash(f.from,P),R=C.getDash(f.to,P),L=M.width*g.fromScale,U=R.width*g.toScale;return l.e(ih(y,i,u,_),{u_patternscale_a:[T/L,-M.height/2],u_patternscale_b:[T/U,-R.height/2],u_sdfgamma:C.width/(256*Math.min(L,U)*y.pixelRatio)/2,u_image:0,u_tex_y_a:M.y,u_tex_y_b:R.y,u_mix:g.t})};function Rf(y,i){return 1/pe(y,1,i.tileZoom)}function _u(y,i,u,f){return y.translatePosMatrix(f?f.posMatrix:i.tileID.posMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Lf=(y,i,u,f,g)=>{return{u_matrix:y,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(C=g.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Of(g.paint.get("raster-hue-rotate"))};var _,C};function Of(y){y*=Math.PI/180;const i=Math.sin(y),u=Math.cos(y);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const sh=(y,i,u,f,g,_,C,T,P,M)=>{const R=g.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:R.cameraToCenterDistance,u_pitch:R.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:R.width/R.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:C,u_coord_matrix:T,u_is_text:+P,u_pitch_with_map:+f,u_texsize:M,u_texture:0}},oh=(y,i,u,f,g,_,C,T,P,M,R)=>{const L=g.transform;return l.e(sh(y,i,u,f,g,_,C,T,P,M),{u_gamma_scale:f?Math.cos(L._pitch)*L.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+R})},So=(y,i,u,f,g,_,C,T,P,M)=>l.e(oh(y,i,u,f,g,_,C,T,!0,P,!0),{u_texsize_icon:M,u_texture_icon:1}),xu=(y,i,u)=>({u_matrix:y,u_opacity:i,u_color:u}),Ii=(y,i,u,f,g,_)=>l.e(function(C,T,P,M){const R=P.imageManager.getPattern(C.from.toString()),L=P.imageManager.getPattern(C.to.toString()),{width:U,height:ee}=P.imageManager.getPixelSize(),J=Math.pow(2,M.tileID.overscaledZ),re=M.tileSize*Math.pow(2,P.transform.tileZoom)/J,Y=re*(M.tileID.canonical.x+M.tileID.wrap*J),ye=re*M.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:L.tl,u_pattern_br_b:L.br,u_texsize:[U,ee],u_mix:T.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:L.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/pe(M,1,P.transform.tileZoom),u_pixel_coord_upper:[Y>>16,ye>>16],u_pixel_coord_lower:[65535&Y,65535&ye]}}(f,_,u,g),{u_matrix:y,u_opacity:i}),wu={fillExtrusion:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_lightpos:new l.aP(y,i.u_lightpos),u_lightintensity:new l.aM(y,i.u_lightintensity),u_lightcolor:new l.aP(y,i.u_lightcolor),u_vertical_gradient:new l.aM(y,i.u_vertical_gradient),u_opacity:new l.aM(y,i.u_opacity)}),fillExtrusionPattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_lightpos:new l.aP(y,i.u_lightpos),u_lightintensity:new l.aM(y,i.u_lightintensity),u_lightcolor:new l.aP(y,i.u_lightcolor),u_vertical_gradient:new l.aM(y,i.u_vertical_gradient),u_height_factor:new l.aM(y,i.u_height_factor),u_image:new l.aL(y,i.u_image),u_texsize:new l.aQ(y,i.u_texsize),u_pixel_coord_upper:new l.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,i.u_pixel_coord_lower),u_scale:new l.aP(y,i.u_scale),u_fade:new l.aM(y,i.u_fade),u_opacity:new l.aM(y,i.u_opacity)}),fill:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix)}),fillPattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_image:new l.aL(y,i.u_image),u_texsize:new l.aQ(y,i.u_texsize),u_pixel_coord_upper:new l.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,i.u_pixel_coord_lower),u_scale:new l.aP(y,i.u_scale),u_fade:new l.aM(y,i.u_fade)}),fillOutline:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_world:new l.aQ(y,i.u_world)}),fillOutlinePattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_world:new l.aQ(y,i.u_world),u_image:new l.aL(y,i.u_image),u_texsize:new l.aQ(y,i.u_texsize),u_pixel_coord_upper:new l.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,i.u_pixel_coord_lower),u_scale:new l.aP(y,i.u_scale),u_fade:new l.aM(y,i.u_fade)}),circle:(y,i)=>({u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_scale_with_map:new l.aL(y,i.u_scale_with_map),u_pitch_with_map:new l.aL(y,i.u_pitch_with_map),u_extrude_scale:new l.aQ(y,i.u_extrude_scale),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_matrix:new l.aN(y,i.u_matrix)}),collisionBox:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_pixels_to_tile_units:new l.aM(y,i.u_pixels_to_tile_units),u_extrude_scale:new l.aQ(y,i.u_extrude_scale),u_overscale_factor:new l.aM(y,i.u_overscale_factor)}),collisionCircle:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_inv_matrix:new l.aN(y,i.u_inv_matrix),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_viewport_size:new l.aQ(y,i.u_viewport_size)}),debug:(y,i)=>({u_color:new l.aR(y,i.u_color),u_matrix:new l.aN(y,i.u_matrix),u_overlay:new l.aL(y,i.u_overlay),u_overlay_scale:new l.aM(y,i.u_overlay_scale)}),clippingMask:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix)}),heatmap:(y,i)=>({u_extrude_scale:new l.aM(y,i.u_extrude_scale),u_intensity:new l.aM(y,i.u_intensity),u_matrix:new l.aN(y,i.u_matrix)}),heatmapTexture:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_world:new l.aQ(y,i.u_world),u_image:new l.aL(y,i.u_image),u_color_ramp:new l.aL(y,i.u_color_ramp),u_opacity:new l.aM(y,i.u_opacity)}),hillshade:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_image:new l.aL(y,i.u_image),u_latrange:new l.aQ(y,i.u_latrange),u_light:new l.aQ(y,i.u_light),u_shadow:new l.aR(y,i.u_shadow),u_highlight:new l.aR(y,i.u_highlight),u_accent:new l.aR(y,i.u_accent)}),hillshadePrepare:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_image:new l.aL(y,i.u_image),u_dimension:new l.aQ(y,i.u_dimension),u_zoom:new l.aM(y,i.u_zoom),u_unpack:new l.aO(y,i.u_unpack)}),line:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_ratio:new l.aM(y,i.u_ratio),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,i.u_units_to_pixels)}),lineGradient:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_ratio:new l.aM(y,i.u_ratio),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,i.u_units_to_pixels),u_image:new l.aL(y,i.u_image),u_image_height:new l.aM(y,i.u_image_height)}),linePattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_texsize:new l.aQ(y,i.u_texsize),u_ratio:new l.aM(y,i.u_ratio),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_image:new l.aL(y,i.u_image),u_units_to_pixels:new l.aQ(y,i.u_units_to_pixels),u_scale:new l.aP(y,i.u_scale),u_fade:new l.aM(y,i.u_fade)}),lineSDF:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_ratio:new l.aM(y,i.u_ratio),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,i.u_units_to_pixels),u_patternscale_a:new l.aQ(y,i.u_patternscale_a),u_patternscale_b:new l.aQ(y,i.u_patternscale_b),u_sdfgamma:new l.aM(y,i.u_sdfgamma),u_image:new l.aL(y,i.u_image),u_tex_y_a:new l.aM(y,i.u_tex_y_a),u_tex_y_b:new l.aM(y,i.u_tex_y_b),u_mix:new l.aM(y,i.u_mix)}),raster:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_tl_parent:new l.aQ(y,i.u_tl_parent),u_scale_parent:new l.aM(y,i.u_scale_parent),u_buffer_scale:new l.aM(y,i.u_buffer_scale),u_fade_t:new l.aM(y,i.u_fade_t),u_opacity:new l.aM(y,i.u_opacity),u_image0:new l.aL(y,i.u_image0),u_image1:new l.aL(y,i.u_image1),u_brightness_low:new l.aM(y,i.u_brightness_low),u_brightness_high:new l.aM(y,i.u_brightness_high),u_saturation_factor:new l.aM(y,i.u_saturation_factor),u_contrast_factor:new l.aM(y,i.u_contrast_factor),u_spin_weights:new l.aP(y,i.u_spin_weights)}),symbolIcon:(y,i)=>({u_is_size_zoom_constant:new l.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,i.u_is_size_feature_constant),u_size_t:new l.aM(y,i.u_size_t),u_size:new l.aM(y,i.u_size),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_pitch:new l.aM(y,i.u_pitch),u_rotate_symbol:new l.aL(y,i.u_rotate_symbol),u_aspect_ratio:new l.aM(y,i.u_aspect_ratio),u_fade_change:new l.aM(y,i.u_fade_change),u_matrix:new l.aN(y,i.u_matrix),u_label_plane_matrix:new l.aN(y,i.u_label_plane_matrix),u_coord_matrix:new l.aN(y,i.u_coord_matrix),u_is_text:new l.aL(y,i.u_is_text),u_pitch_with_map:new l.aL(y,i.u_pitch_with_map),u_texsize:new l.aQ(y,i.u_texsize),u_texture:new l.aL(y,i.u_texture)}),symbolSDF:(y,i)=>({u_is_size_zoom_constant:new l.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,i.u_is_size_feature_constant),u_size_t:new l.aM(y,i.u_size_t),u_size:new l.aM(y,i.u_size),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_pitch:new l.aM(y,i.u_pitch),u_rotate_symbol:new l.aL(y,i.u_rotate_symbol),u_aspect_ratio:new l.aM(y,i.u_aspect_ratio),u_fade_change:new l.aM(y,i.u_fade_change),u_matrix:new l.aN(y,i.u_matrix),u_label_plane_matrix:new l.aN(y,i.u_label_plane_matrix),u_coord_matrix:new l.aN(y,i.u_coord_matrix),u_is_text:new l.aL(y,i.u_is_text),u_pitch_with_map:new l.aL(y,i.u_pitch_with_map),u_texsize:new l.aQ(y,i.u_texsize),u_texture:new l.aL(y,i.u_texture),u_gamma_scale:new l.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_is_halo:new l.aL(y,i.u_is_halo)}),symbolTextAndIcon:(y,i)=>({u_is_size_zoom_constant:new l.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,i.u_is_size_feature_constant),u_size_t:new l.aM(y,i.u_size_t),u_size:new l.aM(y,i.u_size),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_pitch:new l.aM(y,i.u_pitch),u_rotate_symbol:new l.aL(y,i.u_rotate_symbol),u_aspect_ratio:new l.aM(y,i.u_aspect_ratio),u_fade_change:new l.aM(y,i.u_fade_change),u_matrix:new l.aN(y,i.u_matrix),u_label_plane_matrix:new l.aN(y,i.u_label_plane_matrix),u_coord_matrix:new l.aN(y,i.u_coord_matrix),u_is_text:new l.aL(y,i.u_is_text),u_pitch_with_map:new l.aL(y,i.u_pitch_with_map),u_texsize:new l.aQ(y,i.u_texsize),u_texsize_icon:new l.aQ(y,i.u_texsize_icon),u_texture:new l.aL(y,i.u_texture),u_texture_icon:new l.aL(y,i.u_texture_icon),u_gamma_scale:new l.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_is_halo:new l.aL(y,i.u_is_halo)}),background:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_opacity:new l.aM(y,i.u_opacity),u_color:new l.aR(y,i.u_color)}),backgroundPattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_opacity:new l.aM(y,i.u_opacity),u_image:new l.aL(y,i.u_image),u_pattern_tl_a:new l.aQ(y,i.u_pattern_tl_a),u_pattern_br_a:new l.aQ(y,i.u_pattern_br_a),u_pattern_tl_b:new l.aQ(y,i.u_pattern_tl_b),u_pattern_br_b:new l.aQ(y,i.u_pattern_br_b),u_texsize:new l.aQ(y,i.u_texsize),u_mix:new l.aM(y,i.u_mix),u_pattern_size_a:new l.aQ(y,i.u_pattern_size_a),u_pattern_size_b:new l.aQ(y,i.u_pattern_size_b),u_scale_a:new l.aM(y,i.u_scale_a),u_scale_b:new l.aM(y,i.u_scale_b),u_pixel_coord_upper:new l.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,i.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aM(y,i.u_tile_units_to_pixels)}),terrain:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_texture:new l.aL(y,i.u_texture),u_ele_delta:new l.aM(y,i.u_ele_delta)}),terrainDepth:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_ele_delta:new l.aM(y,i.u_ele_delta)}),terrainCoords:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_texture:new l.aL(y,i.u_texture),u_terrain_coords_id:new l.aM(y,i.u_terrain_coords_id),u_ele_delta:new l.aM(y,i.u_ele_delta)})};class bu{constructor(i,u,f){this.context=i;const g=i.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const yl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Su{constructor(i,u,f,g){this.length=u.length,this.attributes=f,this.itemSize=u.bytesPerElement,this.dynamicDraw=g,this.context=i;const _=i.gl;this.buffer=_.createBuffer(),i.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let f=0;f<this.attributes.length;f++){const g=u.attributes[this.attributes[f].name];g!==void 0&&i.enableVertexAttribArray(g)}}setVertexAttribPointers(i,u,f){for(let g=0;g<this.attributes.length;g++){const _=this.attributes[g],C=u.attributes[_.name];C!==void 0&&i.vertexAttribPointer(C,_.components,i[yl[_.type]],!1,this.itemSize,_.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const da=new WeakMap;function ro(y){var i;if(da.has(y))return da.get(y);{const u=(i=y.getParameter(y.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return da.set(y,u),u}}class Ut{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Cu extends Ut{getDefault(){return l.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class li extends Ut{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class ui extends Ut{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class ah extends Ut{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Tu extends Ut{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Eu extends Ut{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class lh extends Ut{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class uh extends Ut{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Pu extends Ut{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class ch extends Ut{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class hh extends Ut{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class Au extends Ut{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Ff extends Ut{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class Nf extends Ut{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class fa extends Ut{getDefault(){return l.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Ry extends Ut{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Ly extends Ut{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class Oy extends Ut{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Fy extends Ut{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Ny extends Ut{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class By extends Ut{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class dh extends Ut{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class ku extends Ut{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class fh extends Ut{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ph extends Ut{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class pa extends Ut{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Bf extends Ut{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Vf extends Ut{getDefault(){return null}set(i){var u;if(i===this.current&&!this.dirty)return;const f=this.gl;ro(f)?f.bindVertexArray(i):(u=f.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class mh extends Ut{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Co extends Ut{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class $f extends Ut{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class io extends Ut{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class ma extends io{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class jf extends io{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class gh extends io{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Qt{constructor(i,u,f,g,_){this.context=i,this.width=u,this.height=f;const C=i.gl,T=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new ma(i,T),g)this.depthAttachment=_?new gh(i,T):new jf(i,T);else if(_)throw new Error("Stencil cannot be setted without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const f=this.depthAttachment.get();f&&i.deleteRenderbuffer(f)}i.deleteFramebuffer(this.framebuffer)}}class bn{constructor(i,u,f){this.blendFunction=i,this.blendColor=u,this.mask=f}}bn.Replace=[1,0],bn.disabled=new bn(bn.Replace,l.aT.transparent,[!1,!1,!1,!1]),bn.unblended=new bn(bn.Replace,l.aT.transparent,[!0,!0,!0,!0]),bn.alphaBlended=new bn([1,771],l.aT.transparent,[!0,!0,!0,!0]);class Vy{constructor(i){var u,f;if(this.gl=i,this.clearColor=new Cu(this),this.clearDepth=new li(this),this.clearStencil=new ui(this),this.colorMask=new ah(this),this.depthMask=new Tu(this),this.stencilMask=new Eu(this),this.stencilFunc=new lh(this),this.stencilOp=new uh(this),this.stencilTest=new Pu(this),this.depthRange=new ch(this),this.depthTest=new hh(this),this.depthFunc=new Au(this),this.blend=new Ff(this),this.blendFunc=new Nf(this),this.blendColor=new fa(this),this.blendEquation=new Ry(this),this.cullFace=new Ly(this),this.cullFaceSide=new Oy(this),this.frontFace=new Fy(this),this.program=new Ny(this),this.activeTexture=new By(this),this.viewport=new dh(this),this.bindFramebuffer=new ku(this),this.bindRenderbuffer=new fh(this),this.bindTexture=new ph(this),this.bindVertexBuffer=new pa(this),this.bindElementBuffer=new Bf(this),this.bindVertexArray=new Vf(this),this.pixelStoreUnpack=new mh(this),this.pixelStoreUnpackPremultiplyAlpha=new Co(this),this.pixelStoreUnpackFlipY=new $f(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),ro(i)){this.HALF_FLOAT=i.HALF_FLOAT;const g=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=i.RGBA16F)!==null&&u!==void 0?u:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(f=i.RGB16F)!==null&&f!==void 0?f:g==null?void 0:g.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const g=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new bu(this,i,u)}createVertexBuffer(i,u,f){return new Su(this,i,u,f)}createRenderbuffer(i,u,f){const g=this.gl,_=g.createRenderbuffer();return this.bindRenderbuffer.set(_),g.renderbufferStorage(g.RENDERBUFFER,i,u,f),this.bindRenderbuffer.set(null),_}createFramebuffer(i,u,f,g){return new Qt(this,i,u,f,g)}clear({color:i,depth:u,stencil:f}){const g=this.gl;let _=0;i&&(_|=g.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(_|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),f!==void 0&&(_|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),g.clear(_)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){l.aG(i.blendFunction,bn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return ro(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var u;return ro(this.gl)?this.gl.deleteVertexArray(i):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class qt{constructor(i,u,f){this.func=i,this.mask=u,this.range=f}}qt.ReadOnly=!1,qt.ReadWrite=!0,qt.disabled=new qt(519,qt.ReadOnly,[0,1]);const To=7680;class Sn{constructor(i,u,f,g,_,C){this.test=i,this.ref=u,this.mask=f,this.fail=g,this.depthFail=_,this.pass=C}}Sn.disabled=new Sn({func:519,mask:0},0,0,To,To,To);class _n{constructor(i,u,f){this.enable=i,this.mode=u,this.frontFace=f}}let vl;function Uf(y,i,u,f,g,_,C){const T=y.context,P=T.gl,M=y.useProgram("collisionBox"),R=[];let L=0,U=0;for(let ue=0;ue<f.length;ue++){const ve=f[ue],Pe=i.getTile(ve),Ae=Pe.getBucket(u);if(!Ae)continue;let ze=ve.posMatrix;g[0]===0&&g[1]===0||(ze=y.translatePosMatrix(ve.posMatrix,Pe,g,_));const Be=C?Ae.textCollisionBox:Ae.iconCollisionBox,Fe=Ae.collisionCircleArray;if(Fe.length>0){const je=l.Z(),at=ze;l.aU(je,Ae.placementInvProjMatrix,y.transform.glCoordMatrix),l.aU(je,je,Ae.placementViewportMatrix),R.push({circleArray:Fe,circleOffset:U,transform:at,invTransform:je,coord:ve}),L+=Fe.length/4,U=L}Be&&M.draw(T,P.LINES,qt.disabled,Sn.disabled,y.colorModeForRenderPass(),_n.disabled,nh(ze,y.transform,Pe),y.style.map.terrain&&y.style.map.terrain.getTerrainData(ve),u.id,Be.layoutVertexBuffer,Be.indexBuffer,Be.segments,null,y.transform.zoom,null,null,Be.collisionVertexBuffer)}if(!C||!R.length)return;const ee=y.useProgram("collisionCircle"),J=new l.aV;J.resize(4*L),J._trim();let re=0;for(const ue of R)for(let ve=0;ve<ue.circleArray.length/4;ve++){const Pe=4*ve,Ae=ue.circleArray[Pe+0],ze=ue.circleArray[Pe+1],Be=ue.circleArray[Pe+2],Fe=ue.circleArray[Pe+3];J.emplace(re++,Ae,ze,Be,Fe,0),J.emplace(re++,Ae,ze,Be,Fe,1),J.emplace(re++,Ae,ze,Be,Fe,2),J.emplace(re++,Ae,ze,Be,Fe,3)}(!vl||vl.length<2*L)&&(vl=function(ue){const ve=2*ue,Pe=new l.aX;Pe.resize(ve),Pe._trim();for(let Ae=0;Ae<ve;Ae++){const ze=6*Ae;Pe.uint16[ze+0]=4*Ae+0,Pe.uint16[ze+1]=4*Ae+1,Pe.uint16[ze+2]=4*Ae+2,Pe.uint16[ze+3]=4*Ae+2,Pe.uint16[ze+4]=4*Ae+3,Pe.uint16[ze+5]=4*Ae+0}return Pe}(L));const Y=T.createIndexBuffer(vl,!0),ye=T.createVertexBuffer(J,l.aW.members,!0);for(const ue of R){const ve={u_matrix:ue.transform,u_inv_matrix:ue.invTransform,u_camera_to_center_distance:(Te=y.transform).cameraToCenterDistance,u_viewport_size:[Te.width,Te.height]};ee.draw(T,P.TRIANGLES,qt.disabled,Sn.disabled,y.colorModeForRenderPass(),_n.disabled,ve,y.style.map.terrain&&y.style.map.terrain.getTerrainData(ue.coord),u.id,ye,Y,l.S.simpleSegment(0,2*ue.circleOffset,ue.circleArray.length,ue.circleArray.length/2),null,y.transform.zoom,null,null,null)}var Te;ye.destroy(),Y.destroy()}_n.disabled=new _n(!1,1029,2305),_n.backCCW=new _n(!0,1029,2305);const yh=l.ao(new Float32Array(16));function Iu(y,i,u,f,g,_){const{horizontalAlign:C,verticalAlign:T}=l.au(y);return new l.P((-(C-.5)*i/g+f[0])*_,(-(T-.5)*u/g+f[1])*_)}function Mu(y,i,u,f,g,_,C,T,P,M,R){const L=y.text.placedSymbolArray,U=y.text.dynamicLayoutVertexArray,ee=y.icon.dynamicLayoutVertexArray,J={};U.clear();for(let re=0;re<L.length;re++){const Y=L.get(re),ye=Y.hidden||!Y.crossTileID||y.allowVerticalPlacement&&!Y.placedOrientation?null:f[Y.crossTileID];if(ye){const Te=new l.P(Y.anchorX,Y.anchorY),ue=vn(Te,u?C:_,R),ve=os(g.cameraToCenterDistance,ue.signedDistanceFromCamera);let Pe=l.aj(y.textSizeData,P,Y)*ve/l.ap;u&&(Pe*=y.tilePixelRatio/T);const{width:Ae,height:ze,anchor:Be,textOffset:Fe,textBoxScale:je}=ye,at=Iu(Be,Ae,ze,Fe,je,Pe),Vt=u?vn(Te.add(at),_,R).point:ue.point.add(i?at.rotate(-g.angle):at),Qe=y.allowVerticalPlacement&&Y.placedOrientation===l.ai.vertical?Math.PI/2:0;for(let Ct=0;Ct<Y.numGlyphs;Ct++)l.ak(U,Vt,Qe);M&&Y.associatedIconIndex>=0&&(J[Y.associatedIconIndex]={shiftedAnchor:Vt,angle:Qe})}else X(Y.numGlyphs,U)}if(M){ee.clear();const re=y.icon.placedSymbolArray;for(let Y=0;Y<re.length;Y++){const ye=re.get(Y);if(ye.hidden)X(ye.numGlyphs,ee);else{const Te=J[Y];if(Te)for(let ue=0;ue<ye.numGlyphs;ue++)l.ak(ee,Te.shiftedAnchor,Te.angle);else X(ye.numGlyphs,ee)}}y.icon.dynamicLayoutVertexBuffer.updateData(ee)}y.text.dynamicLayoutVertexBuffer.updateData(U)}function vh(y,i,u){return u.iconsInText&&i?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Du(y,i,u,f,g,_,C,T,P,M,R,L){const U=y.context,ee=U.gl,J=y.transform,re=T==="map",Y=P==="map",ye=T!=="viewport"&&u.layout.get("symbol-placement")!=="point",Te=re&&!Y&&!ye,ue=!u.layout.get("symbol-sort-key").isConstant();let ve=!1;const Pe=y.depthModeForSublayer(0,qt.ReadOnly),Ae=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ze=[];for(const Be of f){const Fe=i.getTile(Be),je=Fe.getBucket(u);if(!je)continue;const at=g?je.text:je.icon;if(!at||!at.segments.get().length||!at.hasVisibleVertices)continue;const Vt=at.programConfigurations.get(u.id),Qe=g||je.sdfIcons,Ct=g?je.textSizeData:je.iconSizeData,ct=Y||J.pitch!==0,rn=y.useProgram(vh(Qe,g,je),Vt),Nt=l.ah(Ct,J.zoom),Rt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Be);let $t,Rn,ln,dr,Yn=[0,0],Vn=null;if(g)Rn=Fe.glyphAtlasTexture,ln=ee.LINEAR,$t=Fe.glyphAtlasTexture.size,je.iconsInText&&(Yn=Fe.imageAtlasTexture.size,Vn=Fe.imageAtlasTexture,dr=ct||y.options.rotating||y.options.zooming||Ct.kind==="composite"||Ct.kind==="camera"?ee.LINEAR:ee.NEAREST);else{const Ln=u.layout.get("icon-size").constantOr(0)!==1||je.iconsNeedLinear;Rn=Fe.imageAtlasTexture,ln=Qe||y.options.rotating||y.options.zooming||Ln||ct?ee.LINEAR:ee.NEAREST,$t=Fe.imageAtlasTexture.size}const di=pe(Fe,1,y.transform.zoom),dn=qe(Be.posMatrix,Y,re,y.transform,di),us=oi(Be.posMatrix,Y,re,y.transform,di),cs=Ae&&je.hasTextData(),ao=u.layout.get("icon-text-fit")!=="none"&&cs&&je.hasIconData();if(ye){const Ln=y.style.map.terrain?(Zr,On)=>y.style.map.terrain.getElevation(Be,Zr,On):null,Qn=u.layout.get("text-rotation-alignment")==="map";Xe(je,Be.posMatrix,y,g,dn,us,Y,M,Qn,Ln)}const Io=y.translatePosMatrix(Be.posMatrix,Fe,_,C),ba=ye||g&&Ae||ao?yh:dn,wr=y.translatePosMatrix(us,Fe,_,C,!0),fr=Qe&&u.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ir;Ir=Qe?je.iconsInText?So(Ct.kind,Nt,Te,Y,y,Io,ba,wr,$t,Yn):oh(Ct.kind,Nt,Te,Y,y,Io,ba,wr,g,$t,!0):sh(Ct.kind,Nt,Te,Y,y,Io,ba,wr,g,$t);const Mo={program:rn,buffers:at,uniformValues:Ir,atlasTexture:Rn,atlasTextureIcon:Vn,atlasInterpolation:ln,atlasInterpolationIcon:dr,isSDF:Qe,hasHalo:fr};if(ue&&je.canOverlap){ve=!0;const Ln=at.segments.get();for(const Qn of Ln)ze.push({segments:new l.S([Qn]),sortKey:Qn.sortKey,state:Mo,terrainData:Rt})}else ze.push({segments:at.segments,sortKey:0,state:Mo,terrainData:Rt})}ve&&ze.sort((Be,Fe)=>Be.sortKey-Fe.sortKey);for(const Be of ze){const Fe=Be.state;if(U.activeTexture.set(ee.TEXTURE0),Fe.atlasTexture.bind(Fe.atlasInterpolation,ee.CLAMP_TO_EDGE),Fe.atlasTextureIcon&&(U.activeTexture.set(ee.TEXTURE1),Fe.atlasTextureIcon&&Fe.atlasTextureIcon.bind(Fe.atlasInterpolationIcon,ee.CLAMP_TO_EDGE)),Fe.isSDF){const je=Fe.uniformValues;Fe.hasHalo&&(je.u_is_halo=1,_h(Fe.buffers,Be.segments,u,y,Fe.program,Pe,R,L,je,Be.terrainData)),je.u_is_halo=0}_h(Fe.buffers,Be.segments,u,y,Fe.program,Pe,R,L,Fe.uniformValues,Be.terrainData)}}function _h(y,i,u,f,g,_,C,T,P,M){const R=f.context;g.draw(R,R.gl.TRIANGLES,_,C,T,_n.disabled,P,M,u.id,y.layoutVertexBuffer,y.indexBuffer,i,u.paint,f.transform.zoom,y.programConfigurations.get(u.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function _l(y,i,u,f,g){if(!u||!f||!f.imageAtlas)return;const _=f.imageAtlas.patternPositions;let C=_[u.to.toString()],T=_[u.from.toString()];if(!C&&T&&(C=T),!T&&C&&(T=C),!C||!T){const P=g.getPaintProperty(i);C=_[P],T=_[P]}C&&T&&y.setConstantPatternPositions(C,T)}function xl(y,i,u,f,g,_,C){const T=y.context.gl,P="fill-pattern",M=u.paint.get(P),R=M&&M.constantOr(1),L=u.getCrossfadeParameters();let U,ee,J,re,Y;C?(ee=R&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",U=T.LINES):(ee=R?"fillPattern":"fill",U=T.TRIANGLES);const ye=M.constantOr(null);for(const Te of f){const ue=i.getTile(Te);if(R&&!ue.patternsLoaded())continue;const ve=ue.getBucket(u);if(!ve)continue;const Pe=ve.programConfigurations.get(u.id),Ae=y.useProgram(ee,Pe),ze=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Te);R&&(y.context.activeTexture.set(T.TEXTURE0),ue.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),Pe.updatePaintBuffers(L)),_l(Pe,P,ye,ue,u);const Be=ze?Te:null,Fe=y.translatePosMatrix(Be?Be.posMatrix:Te.posMatrix,ue,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(C){re=ve.indexBuffer2,Y=ve.segments2;const je=[T.drawingBufferWidth,T.drawingBufferHeight];J=ee==="fillOutlinePattern"&&R?vu(Fe,y,L,ue,je):yu(Fe,je)}else re=ve.indexBuffer,Y=ve.segments,J=R?th(Fe,y,L,ue):If(Fe);Ae.draw(y.context,U,g,y.stencilModeForClipping(Te),_,_n.disabled,J,ze,u.id,ve.layoutVertexBuffer,re,Y,u.paint,y.transform.zoom,Pe)}}function wl(y,i,u,f,g,_,C){const T=y.context,P=T.gl,M="fill-extrusion-pattern",R=u.paint.get(M),L=R.constantOr(1),U=u.getCrossfadeParameters(),ee=u.paint.get("fill-extrusion-opacity"),J=R.constantOr(null);for(const re of f){const Y=i.getTile(re),ye=Y.getBucket(u);if(!ye)continue;const Te=y.style.map.terrain&&y.style.map.terrain.getTerrainData(re),ue=ye.programConfigurations.get(u.id),ve=y.useProgram(L?"fillExtrusionPattern":"fillExtrusion",ue);L&&(y.context.activeTexture.set(P.TEXTURE0),Y.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),ue.updatePaintBuffers(U)),_l(ue,M,J,Y,u);const Pe=y.translatePosMatrix(re.posMatrix,Y,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Ae=u.paint.get("fill-extrusion-vertical-gradient"),ze=L?to(Pe,y,Ae,ee,re,U,Y):eh(Pe,y,Ae,ee);ve.draw(T,T.gl.TRIANGLES,g,_,C,_n.backCCW,ze,Te,u.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,u.paint,y.transform.zoom,ue,y.style.map.terrain&&ye.centroidVertexBuffer)}}function $y(y,i,u,f,g,_,C){const T=y.context,P=T.gl,M=u.fbo;if(!M)return;const R=y.useProgram("hillshade"),L=y.style.map.terrain&&y.style.map.terrain.getTerrainData(i);T.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,M.colorAttachment.get()),R.draw(T,P.TRIANGLES,g,_,C,_n.disabled,((U,ee,J,re)=>{const Y=J.paint.get("hillshade-shadow-color"),ye=J.paint.get("hillshade-highlight-color"),Te=J.paint.get("hillshade-accent-color");let ue=J.paint.get("hillshade-illumination-direction")*(Math.PI/180);J.paint.get("hillshade-illumination-anchor")==="viewport"&&(ue-=U.transform.angle);const ve=!U.options.moving;return{u_matrix:re?re.posMatrix:U.transform.calculatePosMatrix(ee.tileID.toUnwrapped(),ve),u_image:0,u_latrange:rh(0,ee.tileID),u_light:[J.paint.get("hillshade-exaggeration"),ue],u_shadow:Y,u_highlight:ye,u_accent:Te}})(y,u,f,L?i:null),L,f.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function xh(y,i,u,f,g,_){const C=y.context,T=C.gl,P=i.dem;if(P&&P.data){const M=P.dim,R=P.stride,L=P.getPixels();if(C.activeTexture.set(T.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||y.getTileTexture(R),i.demTexture){const ee=i.demTexture;ee.update(L,{premultiply:!1}),ee.bind(T.NEAREST,T.CLAMP_TO_EDGE)}else i.demTexture=new Le(C,L,T.RGBA,{premultiply:!1}),i.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);C.activeTexture.set(T.TEXTURE0);let U=i.fbo;if(!U){const ee=new Le(C,{width:M,height:M,data:null},T.RGBA);ee.bind(T.LINEAR,T.CLAMP_TO_EDGE),U=i.fbo=C.createFramebuffer(M,M,!0,!1),U.colorAttachment.set(ee.texture)}C.bindFramebuffer.set(U.framebuffer),C.viewport.set([0,0,M,M]),y.useProgram("hillshadePrepare").draw(C,T.TRIANGLES,f,g,_,_n.disabled,((ee,J)=>{const re=J.stride,Y=l.Z();return l.aS(Y,0,l.N,-l.N,0,0,1),l.$(Y,Y,[0,-l.N,0]),{u_matrix:Y,u_image:1,u_dimension:[re,re],u_zoom:ee.overscaledZ,u_unpack:J.getUnpackVector()}})(i.tileID,P),null,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function jy(y,i,u,f,g,_){const C=f.paint.get("raster-fade-duration");if(!_&&C>0){const T=l.h.now(),P=(T-y.timeAdded)/C,M=i?(T-i.timeAdded)/C:-1,R=u.getSource(),L=g.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),U=!i||Math.abs(i.tileID.overscaledZ-L)>Math.abs(y.tileID.overscaledZ-L),ee=U&&y.refreshedUponExpiration?1:l.ad(U?P:1-M,0,1);return y.refreshedUponExpiration&&P>=1&&(y.refreshedUponExpiration=!1),i?{opacity:1,mix:1-ee}:{opacity:ee,mix:0}}return{opacity:1,mix:0}}const qf=new l.aT(1,0,0,1),zu=new l.aT(0,1,0,1),wh=new l.aT(0,0,1,1),Gf=new l.aT(1,0,1,1),Zf=new l.aT(0,1,1,1);function bl(y,i,u,f){Lu(y,0,i+u/2,y.transform.width,u,f)}function Ru(y,i,u,f){Lu(y,i-u/2,0,u,y.transform.height,f)}function Lu(y,i,u,f,g,_){const C=y.context,T=C.gl;T.enable(T.SCISSOR_TEST),T.scissor(i*y.pixelRatio,u*y.pixelRatio,f*y.pixelRatio,g*y.pixelRatio),C.clear({color:_}),T.disable(T.SCISSOR_TEST)}function Wf(y,i,u){const f=y.context,g=f.gl,_=u.posMatrix,C=y.useProgram("debug"),T=qt.disabled,P=Sn.disabled,M=y.colorModeForRenderPass(),R="$debug",L=y.style.map.terrain&&y.style.map.terrain.getTerrainData(u);f.activeTexture.set(g.TEXTURE0);const U=i.getTileByID(u.key).latestRawTileData,ee=Math.floor((U&&U.byteLength||0)/1024),J=i.getTile(u).tileSize,re=512/Math.min(J,512)*(u.overscaledZ/y.transform.zoom)*.5;let Y=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(Y+=` => ${u.overscaledZ}`),function(ye,Te){ye.initDebugOverlayCanvas();const ue=ye.debugOverlayCanvas,ve=ye.context.gl,Pe=ye.debugOverlayCanvas.getContext("2d");Pe.clearRect(0,0,ue.width,ue.height),Pe.shadowColor="white",Pe.shadowBlur=2,Pe.lineWidth=1.5,Pe.strokeStyle="white",Pe.textBaseline="top",Pe.font="bold 36px Open Sans, sans-serif",Pe.fillText(Te,5,5),Pe.strokeText(Te,5,5),ye.debugOverlayTexture.update(ue),ye.debugOverlayTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)}(y,`${Y} ${ee}kB`),C.draw(f,g.TRIANGLES,T,P,bn.alphaBlended,_n.disabled,gl(_,l.aT.transparent,re),null,R,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),C.draw(f,g.LINE_STRIP,T,P,M,_n.disabled,gl(_,l.aT.red),L,R,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function An(y,i,u){const f=y.context,g=f.gl,_=y.colorModeForRenderPass(),C=new qt(g.LEQUAL,qt.ReadWrite,y.depthRangeFor3D),T=y.useProgram("terrain"),P=i.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,y.width,y.height]);for(const M of u){const R=y.renderToTexture.getTexture(M),L=i.getTerrainData(M.tileID);f.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,R.texture);const U={u_matrix:y.transform.calculatePosMatrix(M.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(y.transform.zoom)};T.draw(f,g.TRIANGLES,C,Sn.disabled,_,_n.backCCW,U,L,"terrain",P.vertexBuffer,P.indexBuffer,P.segments)}}class Eo{constructor(i,u){this.context=new Vy(i),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.Z(),renderTime:0},this.setup(),this.numSublayers=et.maxUnderzooming+et.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new pu}resize(i,u,f){if(this.width=Math.floor(i*f),this.height=Math.floor(u*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const i=this.context,u=new l.a_;u.emplaceBack(0,0),u.emplaceBack(l.N,0),u.emplaceBack(0,l.N),u.emplaceBack(l.N,l.N),this.tileExtentBuffer=i.createVertexBuffer(u,mu.members),this.tileExtentSegments=l.S.simpleSegment(0,0,4,2);const f=new l.a_;f.emplaceBack(0,0),f.emplaceBack(l.N,0),f.emplaceBack(0,l.N),f.emplaceBack(l.N,l.N),this.debugBuffer=i.createVertexBuffer(f,mu.members),this.debugSegments=l.S.simpleSegment(0,0,4,5);const g=new l.V;g.emplaceBack(0,0,0,0),g.emplaceBack(l.N,0,l.N,0),g.emplaceBack(0,l.N,0,l.N),g.emplaceBack(l.N,l.N,l.N,l.N),this.rasterBoundsBuffer=i.createVertexBuffer(g,jr.members),this.rasterBoundsSegments=l.S.simpleSegment(0,0,4,2);const _=new l.a_;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(_,mu.members),this.viewportSegments=l.S.simpleSegment(0,0,4,2);const C=new l.a$;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(C);const T=new l.b0;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(T);const P=this.context.gl;this.stencilClearMode=new Sn({func:P.ALWAYS,mask:0},0,255,P.ZERO,P.ZERO,P.ZERO)}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=l.Z();l.aS(f,0,this.width,this.height,0,0,1),l.a0(f,f,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,u.TRIANGLES,qt.disabled,this.stencilClearMode,bn.disabled,_n.disabled,Mf(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source;const f=this.context,g=f.gl;this.nextStencilID+u.length>256&&this.clearStencil(),f.setColorMode(bn.disabled),f.setDepthMode(qt.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const C of u){const T=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,P=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C);_.draw(f,g.TRIANGLES,qt.disabled,new Sn({func:g.ALWAYS,mask:0},T,255,g.KEEP,g.KEEP,g.REPLACE),bn.disabled,_n.disabled,Mf(C.posMatrix),P,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new Sn({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){const u=this.context.gl;return new Sn({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,f=i.sort((C,T)=>T.overscaledZ-C.overscaledZ),g=f[f.length-1].overscaledZ,_=f[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const C={};for(let T=0;T<_;T++)C[T+g]=new Sn({func:u.GEQUAL,mask:255},T+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[C,f]}return[{[g]:Sn.disabled},f]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new bn([i.CONSTANT_COLOR,i.ONE],new l.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?bn.unblended:bn.alphaBlended}depthModeForSublayer(i,u,f){if(!this.opaquePassEnabledForLayer())return qt.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new qt(f||this.context.gl.LEQUAL,u,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(l.h.now()),this.imageManager.beginFrame();const f=this.style._order,g=this.style.sourceCaches,_={},C={},T={};for(const P in g){const M=g[P];M.used&&M.prepare(this.context),_[P]=M.getVisibleCoordinates(),C[P]=_[P].slice().reverse(),T[P]=M.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let P=0;P<f.length;P++)if(this.style._layers[f[P]].is3D()){this.opaquePassCutoff=P;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const P=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||P.length)&&(l.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(M,R){const L=M.context,U=L.gl,ee=bn.unblended,J=new qt(U.LEQUAL,qt.ReadWrite,[0,1]),re=R.getTerrainMesh(),Y=R.sourceCache.getRenderableTiles(),ye=M.useProgram("terrainDepth");L.bindFramebuffer.set(R.getFramebuffer("depth").framebuffer),L.viewport.set([0,0,M.width/devicePixelRatio,M.height/devicePixelRatio]),L.clear({color:l.aT.transparent,depth:1});for(const Te of Y){const ue=R.getTerrainData(Te.tileID),ve={u_matrix:M.transform.calculatePosMatrix(Te.tileID.toUnwrapped()),u_ele_delta:R.getMeshFrameDelta(M.transform.zoom)};ye.draw(L,U.TRIANGLES,J,Sn.disabled,ee,_n.backCCW,ve,ue,"terrain",re.vertexBuffer,re.indexBuffer,re.segments)}L.bindFramebuffer.set(null),L.viewport.set([0,0,M.width,M.height])}(this,this.style.map.terrain),function(M,R){const L=M.context,U=L.gl,ee=bn.unblended,J=new qt(U.LEQUAL,qt.ReadWrite,[0,1]),re=R.getTerrainMesh(),Y=R.getCoordsTexture(),ye=R.sourceCache.getRenderableTiles(),Te=M.useProgram("terrainCoords");L.bindFramebuffer.set(R.getFramebuffer("coords").framebuffer),L.viewport.set([0,0,M.width/devicePixelRatio,M.height/devicePixelRatio]),L.clear({color:l.aT.transparent,depth:1}),R.coordsIndex=[];for(const ue of ye){const ve=R.getTerrainData(ue.tileID);L.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,Y.texture);const Pe={u_matrix:M.transform.calculatePosMatrix(ue.tileID.toUnwrapped()),u_terrain_coords_id:(255-R.coordsIndex.length)/255,u_texture:0,u_ele_delta:R.getMeshFrameDelta(M.transform.zoom)};Te.draw(L,U.TRIANGLES,J,Sn.disabled,ee,_n.backCCW,Pe,ve,"terrain",re.vertexBuffer,re.indexBuffer,re.segments),R.coordsIndex.push(ue.tileID.key)}L.bindFramebuffer.set(null),L.viewport.set([0,0,M.width,M.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const P of f){const M=this.style._layers[P];if(!M.hasOffscreenPass()||M.isHidden(this.transform.zoom))continue;const R=C[M.source];(M.type==="custom"||R.length)&&this.renderLayer(this,g[M.source],M,R)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.aT.black:l.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const P=this.style._layers[f[this.currentLayer]],M=g[P.source],R=_[P.source];this._renderTileClippingMasks(P,R),this.renderLayer(this,M,P,R)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const P=this.style._layers[f[this.currentLayer]],M=g[P.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(P))continue;const R=(P.type==="symbol"?T:C)[P.source];this._renderTileClippingMasks(P,_[P.source]),this.renderLayer(this,M,P,R)}if(this.options.showTileBoundaries){const P=function(M,R){let L=null;const U=Object.values(M._layers).flatMap(Y=>Y.source&&!Y.isHidden(R)?[M.sourceCaches[Y.source]]:[]),ee=U.filter(Y=>Y.getSource().type==="vector"),J=U.filter(Y=>Y.getSource().type!=="vector"),re=Y=>{(!L||L.getSource().maxzoom<Y.getSource().maxzoom)&&(L=Y)};return ee.forEach(Y=>re(Y)),L||J.forEach(Y=>re(Y)),L}(this.style,this.transform.zoom);P&&function(M,R,L){for(let U=0;U<L.length;U++)Wf(M,R,L[U])}(this,P,P.getVisibleCoordinates())}this.options.showPadding&&function(P){const M=P.transform.padding;bl(P,P.transform.height-(M.top||0),3,qf),bl(P,M.bottom||0,3,zu),Ru(P,M.left||0,3,wh),Ru(P,P.transform.width-(M.right||0),3,Gf);const R=P.transform.centerPoint;(function(L,U,ee,J){Lu(L,U-1,ee-10,2,20,J),Lu(L,U-10,ee-1,20,2,J)})(P,R.x,P.transform.height-R.y,Zf)}(this),this.context.setDefault()}renderLayer(i,u,f,g){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(g||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(_,C,T,P,M){if(_.renderPass!=="translucent")return;const R=Sn.disabled,L=_.colorModeForRenderPass();(T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(U,ee,J,re,Y,ye,Te){const ue=ee.transform,ve=Y==="map",Pe=ye==="map";for(const Ae of U){const ze=re.getTile(Ae),Be=ze.getBucket(J);if(!Be||!Be.text||!Be.text.segments.get().length)continue;const Fe=l.ah(Be.textSizeData,ue.zoom),je=pe(ze,1,ee.transform.zoom),at=qe(Ae.posMatrix,Pe,ve,ee.transform,je),Vt=J.layout.get("icon-text-fit")!=="none"&&Be.hasIconData();if(Fe){const Qe=Math.pow(2,ue.zoom-ze.tileID.overscaledZ);Mu(Be,ve,Pe,Te,ue,at,Ae.posMatrix,Qe,Fe,Vt,ee.style.map.terrain?(Ct,ct)=>ee.style.map.terrain.getElevation(Ae,Ct,ct):null)}}}(P,_,T,C,T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),M),T.paint.get("icon-opacity").constantOr(1)!==0&&Du(_,C,T,P,!1,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),T.layout.get("icon-rotation-alignment"),T.layout.get("icon-pitch-alignment"),T.layout.get("icon-keep-upright"),R,L),T.paint.get("text-opacity").constantOr(1)!==0&&Du(_,C,T,P,!0,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.layout.get("text-keep-upright"),R,L),C.map.showCollisionBoxes&&(Uf(_,C,T,P,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),!0),Uf(_,C,T,P,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),!1))})(i,u,f,g,this.style.placement.variableOffsets);break;case"circle":(function(_,C,T,P){if(_.renderPass!=="translucent")return;const M=T.paint.get("circle-opacity"),R=T.paint.get("circle-stroke-width"),L=T.paint.get("circle-stroke-opacity"),U=!T.layout.get("circle-sort-key").isConstant();if(M.constantOr(1)===0&&(R.constantOr(1)===0||L.constantOr(1)===0))return;const ee=_.context,J=ee.gl,re=_.depthModeForSublayer(0,qt.ReadOnly),Y=Sn.disabled,ye=_.colorModeForRenderPass(),Te=[];for(let ue=0;ue<P.length;ue++){const ve=P[ue],Pe=C.getTile(ve),Ae=Pe.getBucket(T);if(!Ae)continue;const ze=Ae.programConfigurations.get(T.id),Be=_.useProgram("circle",ze),Fe=Ae.layoutVertexBuffer,je=Ae.indexBuffer,at=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ve),Vt={programConfiguration:ze,program:Be,layoutVertexBuffer:Fe,indexBuffer:je,uniformValues:no(_,ve,Pe,T),terrainData:at};if(U){const Qe=Ae.segments.get();for(const Ct of Qe)Te.push({segments:new l.S([Ct]),sortKey:Ct.sortKey,state:Vt})}else Te.push({segments:Ae.segments,sortKey:0,state:Vt})}U&&Te.sort((ue,ve)=>ue.sortKey-ve.sortKey);for(const ue of Te){const{programConfiguration:ve,program:Pe,layoutVertexBuffer:Ae,indexBuffer:ze,uniformValues:Be,terrainData:Fe}=ue.state;Pe.draw(ee,J.TRIANGLES,re,Y,ye,_n.disabled,Be,Fe,T.id,Ae,ze,ue.segments,T.paint,_.transform.zoom,ve)}})(i,u,f,g);break;case"heatmap":(function(_,C,T,P){if(T.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const M=_.context,R=M.gl,L=Sn.disabled,U=new bn([R.ONE,R.ONE],l.aT.transparent,[!0,!0,!0,!0]);(function(ee,J,re){const Y=ee.gl;ee.activeTexture.set(Y.TEXTURE1),ee.viewport.set([0,0,J.width/4,J.height/4]);let ye=re.heatmapFbo;if(ye)Y.bindTexture(Y.TEXTURE_2D,ye.colorAttachment.get()),ee.bindFramebuffer.set(ye.framebuffer);else{const Te=Y.createTexture();Y.bindTexture(Y.TEXTURE_2D,Te),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_S,Y.CLAMP_TO_EDGE),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_T,Y.CLAMP_TO_EDGE),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MIN_FILTER,Y.LINEAR),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MAG_FILTER,Y.LINEAR),ye=re.heatmapFbo=ee.createFramebuffer(J.width/4,J.height/4,!1,!1),function(ue,ve,Pe,Ae){var ze,Be;const Fe=ue.gl,je=(ze=ue.HALF_FLOAT)!==null&&ze!==void 0?ze:Fe.UNSIGNED_BYTE,at=(Be=ue.RGBA16F)!==null&&Be!==void 0?Be:Fe.RGBA;Fe.texImage2D(Fe.TEXTURE_2D,0,at,ve.width/4,ve.height/4,0,Fe.RGBA,je,null),Ae.colorAttachment.set(Pe)}(ee,J,Te,ye)}})(M,_,T),M.clear({color:l.aT.transparent});for(let ee=0;ee<P.length;ee++){const J=P[ee];if(C.hasRenderableParent(J))continue;const re=C.getTile(J),Y=re.getBucket(T);if(!Y)continue;const ye=Y.programConfigurations.get(T.id),Te=_.useProgram("heatmap",ye),{zoom:ue}=_.transform;Te.draw(M,R.TRIANGLES,qt.disabled,L,U,_n.disabled,Dy(J.posMatrix,re,ue,T.paint.get("heatmap-intensity")),null,T.id,Y.layoutVertexBuffer,Y.indexBuffer,Y.segments,T.paint,_.transform.zoom,ye)}M.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(M,R){const L=M.context,U=L.gl,ee=R.heatmapFbo;if(!ee)return;L.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,ee.colorAttachment.get()),L.activeTexture.set(U.TEXTURE1);let J=R.colorRampTexture;J||(J=R.colorRampTexture=new Le(L,R.colorRamp,U.RGBA)),J.bind(U.LINEAR,U.CLAMP_TO_EDGE),M.useProgram("heatmapTexture").draw(L,U.TRIANGLES,qt.disabled,Sn.disabled,M.colorModeForRenderPass(),_n.disabled,((re,Y,ye,Te)=>{const ue=l.Z();l.aS(ue,0,re.width,re.height,0,0,1);const ve=re.context.gl;return{u_matrix:ue,u_world:[ve.drawingBufferWidth,ve.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Y.paint.get("heatmap-opacity")}})(M,R),null,R.id,M.viewportBuffer,M.quadTriangleIndexBuffer,M.viewportSegments,R.paint,M.transform.zoom)}(_,T))})(i,u,f,g);break;case"line":(function(_,C,T,P){if(_.renderPass!=="translucent")return;const M=T.paint.get("line-opacity"),R=T.paint.get("line-width");if(M.constantOr(1)===0||R.constantOr(1)===0)return;const L=_.depthModeForSublayer(0,qt.ReadOnly),U=_.colorModeForRenderPass(),ee=T.paint.get("line-dasharray"),J=T.paint.get("line-pattern"),re=J.constantOr(1),Y=T.paint.get("line-gradient"),ye=T.getCrossfadeParameters(),Te=re?"linePattern":ee?"lineSDF":Y?"lineGradient":"line",ue=_.context,ve=ue.gl;let Pe=!0;for(const Ae of P){const ze=C.getTile(Ae);if(re&&!ze.patternsLoaded())continue;const Be=ze.getBucket(T);if(!Be)continue;const Fe=Be.programConfigurations.get(T.id),je=_.context.program.get(),at=_.useProgram(Te,Fe),Vt=Pe||at.program!==je,Qe=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ae),Ct=J.constantOr(null);if(Ct&&ze.imageAtlas){const Nt=ze.imageAtlas,Rt=Nt.patternPositions[Ct.to.toString()],$t=Nt.patternPositions[Ct.from.toString()];Rt&&$t&&Fe.setConstantPatternPositions(Rt,$t)}const ct=Qe?Ae:null,rn=re?zy(_,ze,T,ye,ct):ee?zf(_,ze,T,ee,ye,ct):Y?Df(_,ze,T,Be.lineClipsArray.length,ct):ih(_,ze,T,ct);if(re)ue.activeTexture.set(ve.TEXTURE0),ze.imageAtlasTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),Fe.updatePaintBuffers(ye);else if(ee&&(Vt||_.lineAtlas.dirty))ue.activeTexture.set(ve.TEXTURE0),_.lineAtlas.bind(ue);else if(Y){const Nt=Be.gradients[T.id];let Rt=Nt.texture;if(T.gradientVersion!==Nt.version){let $t=256;if(T.stepInterpolant){const Rn=C.getSource().maxzoom,ln=Ae.canonical.z===Rn?Math.ceil(1<<_.transform.maxZoom-Ae.canonical.z):1;$t=l.ad(l.aY(Be.maxLineLength/l.N*1024*ln),256,ue.maxTextureSize)}Nt.gradient=l.aZ({expression:T.gradientExpression(),evaluationKey:"lineProgress",resolution:$t,image:Nt.gradient||void 0,clips:Be.lineClipsArray}),Nt.texture?Nt.texture.update(Nt.gradient):Nt.texture=new Le(ue,Nt.gradient,ve.RGBA),Nt.version=T.gradientVersion,Rt=Nt.texture}ue.activeTexture.set(ve.TEXTURE0),Rt.bind(T.stepInterpolant?ve.NEAREST:ve.LINEAR,ve.CLAMP_TO_EDGE)}at.draw(ue,ve.TRIANGLES,L,_.stencilModeForClipping(Ae),U,_n.disabled,rn,Qe,T.id,Be.layoutVertexBuffer,Be.indexBuffer,Be.segments,T.paint,_.transform.zoom,Fe,Be.layoutVertexBuffer2),Pe=!1}})(i,u,f,g);break;case"fill":(function(_,C,T,P){const M=T.paint.get("fill-color"),R=T.paint.get("fill-opacity");if(R.constantOr(1)===0)return;const L=_.colorModeForRenderPass(),U=T.paint.get("fill-pattern"),ee=_.opaquePassEnabledForLayer()&&!U.constantOr(1)&&M.constantOr(l.aT.transparent).a===1&&R.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===ee){const J=_.depthModeForSublayer(1,_.renderPass==="opaque"?qt.ReadWrite:qt.ReadOnly);xl(_,C,T,P,J,L,!1)}if(_.renderPass==="translucent"&&T.paint.get("fill-antialias")){const J=_.depthModeForSublayer(T.getPaintProperty("fill-outline-color")?2:0,qt.ReadOnly);xl(_,C,T,P,J,L,!0)}})(i,u,f,g);break;case"fill-extrusion":(function(_,C,T,P){const M=T.paint.get("fill-extrusion-opacity");if(M!==0&&_.renderPass==="translucent"){const R=new qt(_.context.gl.LEQUAL,qt.ReadWrite,_.depthRangeFor3D);if(M!==1||T.paint.get("fill-extrusion-pattern").constantOr(1))wl(_,C,T,P,R,Sn.disabled,bn.disabled),wl(_,C,T,P,R,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const L=_.colorModeForRenderPass();wl(_,C,T,P,R,Sn.disabled,L)}}})(i,u,f,g);break;case"hillshade":(function(_,C,T,P){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const M=_.context,R=_.depthModeForSublayer(0,qt.ReadOnly),L=_.colorModeForRenderPass(),[U,ee]=_.renderPass==="translucent"?_.stencilConfigForOverlap(P):[{},P];for(const J of ee){const re=C.getTile(J);re.needsHillshadePrepare!==void 0&&re.needsHillshadePrepare&&_.renderPass==="offscreen"?xh(_,re,T,R,Sn.disabled,L):_.renderPass==="translucent"&&$y(_,J,re,T,R,U[J.overscaledZ],L)}M.viewport.set([0,0,_.width,_.height])})(i,u,f,g);break;case"raster":(function(_,C,T,P){if(_.renderPass!=="translucent"||T.paint.get("raster-opacity")===0||!P.length)return;const M=_.context,R=M.gl,L=C.getSource(),U=_.useProgram("raster"),ee=_.colorModeForRenderPass(),[J,re]=L instanceof Ur?[{},P]:_.stencilConfigForOverlap(P),Y=re[re.length-1].overscaledZ,ye=!_.options.moving;for(const Te of re){const ue=_.depthModeForSublayer(Te.overscaledZ-Y,T.paint.get("raster-opacity")===1?qt.ReadWrite:qt.ReadOnly,R.LESS),ve=C.getTile(Te);ve.registerFadeDuration(T.paint.get("raster-fade-duration"));const Pe=C.findLoadedParent(Te,0),Ae=jy(ve,Pe,C,T,_.transform,_.style.map.terrain);let ze,Be;const Fe=T.paint.get("raster-resampling")==="nearest"?R.NEAREST:R.LINEAR;M.activeTexture.set(R.TEXTURE0),ve.texture.bind(Fe,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),M.activeTexture.set(R.TEXTURE1),Pe?(Pe.texture.bind(Fe,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),ze=Math.pow(2,Pe.tileID.overscaledZ-ve.tileID.overscaledZ),Be=[ve.tileID.canonical.x*ze%1,ve.tileID.canonical.y*ze%1]):ve.texture.bind(Fe,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST);const je=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Te),at=je?Te:null,Vt=at?at.posMatrix:_.transform.calculatePosMatrix(Te.toUnwrapped(),ye),Qe=Lf(Vt,Be||[0,0],ze||1,Ae,T);L instanceof Ur?U.draw(M,R.TRIANGLES,ue,Sn.disabled,ee,_n.disabled,Qe,je,T.id,L.boundsBuffer,_.quadTriangleIndexBuffer,L.boundsSegments):U.draw(M,R.TRIANGLES,ue,J[Te.overscaledZ],ee,_n.disabled,Qe,je,T.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(i,u,f,g);break;case"background":(function(_,C,T,P){const M=T.paint.get("background-color"),R=T.paint.get("background-opacity");if(R===0)return;const L=_.context,U=L.gl,ee=_.transform,J=ee.tileSize,re=T.paint.get("background-pattern");if(_.isPatternMissing(re))return;const Y=!re&&M.a===1&&R===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==Y)return;const ye=Sn.disabled,Te=_.depthModeForSublayer(0,Y==="opaque"?qt.ReadWrite:qt.ReadOnly),ue=_.colorModeForRenderPass(),ve=_.useProgram(re?"backgroundPattern":"background"),Pe=P||ee.coveringTiles({tileSize:J,terrain:_.style.map.terrain});re&&(L.activeTexture.set(U.TEXTURE0),_.imageManager.bind(_.context));const Ae=T.getCrossfadeParameters();for(const ze of Pe){const Be=P?ze.posMatrix:_.transform.calculatePosMatrix(ze.toUnwrapped()),Fe=re?Ii(Be,R,_,re,{tileID:ze,tileSize:J},Ae):xu(Be,R,M),je=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ze);ve.draw(L,U.TRIANGLES,Te,ye,ue,_n.disabled,Fe,je,T.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(i,0,f,g);break;case"custom":(function(_,C,T){const P=_.context,M=T.implementation;if(_.renderPass==="offscreen"){const R=M.prerender;R&&(_.setCustomLayerDefaults(),P.setColorMode(_.colorModeForRenderPass()),R.call(M,P.gl,_.transform.customLayerMatrix()),P.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),P.setColorMode(_.colorModeForRenderPass()),P.setStencilMode(Sn.disabled);const R=M.renderingMode==="3d"?new qt(_.context.gl.LEQUAL,qt.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,qt.ReadOnly);P.setDepthMode(R),M.render(P.gl,_.transform.customLayerMatrix()),P.setDirty(),_.setBaseState(),P.bindFramebuffer.set(null)}})(i,0,f)}}translatePosMatrix(i,u,f,g,_){if(!f[0]&&!f[1])return i;const C=_?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(C){const M=Math.sin(C),R=Math.cos(C);f=[f[0]*R-f[1]*M,f[0]*M+f[1]*R]}const T=[_?f[0]:pe(u,f[0],this.transform.zoom),_?f[1]:pe(u,f[1],this.transform.zoom),0],P=new Float32Array(16);return l.$(P,i,T),P}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),f=this.imageManager.getPattern(i.to.toString());return!u||!f}useProgram(i,u){this.cache=this.cache||{};const f=i+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new gu(this.context,wn[i],u,wu[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Le(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:u}=this.context.gl;return this.width!==i||this.height!==u}}class qr{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,f){const g=Math.pow(2,f),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>{const P=1/(T=l.ag([],T,i))[3]/u*g;return l.b3(T,T,[P,P,1/T[3],P])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{const P=function(U,ee){var J=ee[0],re=ee[1],Y=ee[2],ye=J*J+re*re+Y*Y;return ye>0&&(ye=1/Math.sqrt(ye)),U[0]=ee[0]*ye,U[1]=ee[1]*ye,U[2]=ee[2]*ye,U}([],function(U,ee,J){var re=ee[0],Y=ee[1],ye=ee[2],Te=J[0],ue=J[1],ve=J[2];return U[0]=Y*ve-ye*ue,U[1]=ye*Te-re*ve,U[2]=re*ue-Y*Te,U}([],Se([],_[T[0]],_[T[1]]),Se([],_[T[2]],_[T[1]]))),M=-((R=P)[0]*(L=_[T[1]])[0]+R[1]*L[1]+R[2]*L[2]);var R,L;return P.concat(M)});return new qr(_,C)}}class ga{constructor(i,u){this.min=i,this.max=u,this.center=function(f,g,_){return f[0]=.5*g[0],f[1]=.5*g[1],f[2]=.5*g[2],f}([],function(f,g,_){return f[0]=g[0]+_[0],f[1]=g[1]+_[1],f[2]=g[2]+_[2],f}([],this.min,this.max))}quadrant(i){const u=[i%2==0,i<2],f=te(this.min),g=te(this.max);for(let _=0;_<u.length;_++)f[_]=u[_]?this.min[_]:this.center[_],g[_]=u[_]?this.center[_]:this.max[_];return g[2]=this.max[2],new ga(f,g)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let g=0;g<i.planes.length;g++){const _=i.planes[g];let C=0;for(let T=0;T<u.length;T++)l.b4(_,u[T])>=0&&C++;if(C===0)return 0;C!==u.length&&(f=!1)}if(f)return 2;for(let g=0;g<3;g++){let _=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let T=0;T<i.points.length;T++){const P=i.points[T][g]-this.min[g];_=Math.min(_,P),C=Math.max(C,P)}if(C<0||_>this.max[g]-this.min[g])return 0}return 1}}class Sl{constructor(i=0,u=0,f=0,g=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(f)||f<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=f,this.right=g}interpolate(i,u,f){return u.top!=null&&i.top!=null&&(this.top=l.B.number(i.top,u.top,f)),u.bottom!=null&&i.bottom!=null&&(this.bottom=l.B.number(i.bottom,u.bottom,f)),u.left!=null&&i.left!=null&&(this.left=l.B.number(i.left,u.left,f)),u.right!=null&&i.right!=null&&(this.right=l.B.number(i.right,u.right,f)),this}getCenter(i,u){const f=l.ad((this.left+i-this.right)/2,0,i),g=l.ad((this.top+u-this.bottom)/2,0,u);return new l.P(f,g)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Sl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Ou{constructor(i,u,f,g,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=f??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Sl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new Ou(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const u=-l.b5(i,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var f=new l.A(4);return l.A!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,g,_){var C=g[0],T=g[1],P=g[2],M=g[3],R=Math.sin(_),L=Math.cos(_);f[0]=C*L+P*R,f[1]=T*L+M*R,f[2]=C*-R+P*L,f[3]=T*-R+M*L}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=l.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,f){this._unmodified=!1,this._edgeInsets.interpolate(i,u,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new l.b6(0,i)];if(this._renderWorldCopies){const f=this.pointCoordinate(new l.P(0,0)),g=this.pointCoordinate(new l.P(this.width,0)),_=this.pointCoordinate(new l.P(this.width,this.height)),C=this.pointCoordinate(new l.P(0,this.height)),T=Math.floor(Math.min(f.x,g.x,_.x,C.x)),P=Math.floor(Math.max(f.x,g.x,_.x,C.x)),M=1;for(let R=T-M;R<=P+M;R++)R!==0&&u.push(new l.b6(R,i))}return u}coveringTiles(i){var u,f;let g=this.coveringZoomLevel(i);const _=g;if(i.minzoom!==void 0&&g<i.minzoom)return[];i.maxzoom!==void 0&&g>i.maxzoom&&(g=i.maxzoom);const C=this.pointCoordinate(this.getCameraPoint()),T=l.U.fromLngLat(this.center),P=Math.pow(2,g),M=[P*C.x,P*C.y,0],R=[P*T.x,P*T.y,0],L=qr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let U=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(U=g);const ee=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,J=ue=>({aabb:new ga([ue*P,0,0],[(ue+1)*P,P,0]),zoom:0,x:0,y:0,wrap:ue,fullyVisible:!1}),re=[],Y=[],ye=g,Te=i.reparseOverscaled?_:g;if(this._renderWorldCopies)for(let ue=1;ue<=3;ue++)re.push(J(-ue)),re.push(J(ue));for(re.push(J(0));re.length>0;){const ue=re.pop(),ve=ue.x,Pe=ue.y;let Ae=ue.fullyVisible;if(!Ae){const at=ue.aabb.intersects(L);if(at===0)continue;Ae=at===2}const ze=i.terrain?M:R,Be=ue.aabb.distanceX(ze),Fe=ue.aabb.distanceY(ze),je=Math.max(Math.abs(Be),Math.abs(Fe));if(ue.zoom===ye||je>ee+(1<<ye-ue.zoom)-2&&ue.zoom>=U){const at=ye-ue.zoom,Vt=M[0]-.5-(ve<<at),Qe=M[1]-.5-(Pe<<at);Y.push({tileID:new l.O(ue.zoom===ye?Te:ue.zoom,ue.wrap,ue.zoom,ve,Pe),distanceSq:Ie([R[0]-.5-ve,R[1]-.5-Pe]),tileDistanceToCamera:Math.sqrt(Vt*Vt+Qe*Qe)})}else for(let at=0;at<4;at++){const Vt=(ve<<1)+at%2,Qe=(Pe<<1)+(at>>1),Ct=ue.zoom+1;let ct=ue.aabb.quadrant(at);if(i.terrain){const rn=new l.O(Ct,ue.wrap,Ct,Vt,Qe),Nt=i.terrain.getMinMaxElevation(rn),Rt=(u=Nt.minElevation)!==null&&u!==void 0?u:this.elevation,$t=(f=Nt.maxElevation)!==null&&f!==void 0?f:this.elevation;ct=new ga([ct.min[0],ct.min[1],Rt],[ct.max[0],ct.max[1],$t])}re.push({aabb:ct,zoom:Ct,x:Vt,y:Qe,wrap:ue.wrap,fullyVisible:Ae})}}return Y.sort((ue,ve)=>ue.distanceSq-ve.distanceSq).map(ue=>ue.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=l.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.P(l.G(i.lng)*this.worldSize,l.H(u)*this.worldSize)}unproject(i){return new l.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const u=this.pointLocation(this.centerPoint,i),f=i.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-f))return;const g=this.getCameraPosition(),_=l.U.fromLngLat(g.lngLat,g.altitude),C=l.U.fromLngLat(u,f),T=_.x-C.x,P=_.y-C.y,M=_.z-C.z,R=Math.sqrt(T*T+P*P+M*M),L=this.scaleZoom(this.cameraToCenterDistance/R/this.tileSize);this._elevation=f,this._center=u,this.zoom=L}setLocationAtPoint(i,u){const f=this.pointCoordinate(u),g=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(i),C=new l.U(_.x-(f.x-g.x),_.y-(f.y-g.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,u){return u?this.coordinatePoint(this.locationCoordinate(i),u.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,u){return this.coordinateLocation(this.pointCoordinate(i,u))}locationCoordinate(i){return l.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,u){if(u){const U=u.pointCoordinate(i);if(U!=null)return U}const f=[i.x,i.y,0,1],g=[i.x,i.y,1,1];l.ag(f,f,this.pixelMatrixInverse),l.ag(g,g,this.pixelMatrixInverse);const _=f[3],C=g[3],T=f[1]/_,P=g[1]/C,M=f[2]/_,R=g[2]/C,L=M===R?0:(0-M)/(R-M);return new l.U(l.B.number(f[0]/_,g[0]/C,L)/this.worldSize,l.B.number(T,P,L)/this.worldSize)}coordinatePoint(i,u=0,f=this.pixelMatrix){const g=[i.x*this.worldSize,i.y*this.worldSize,u,1];return l.ag(g,g,f),new l.P(g[0]/g[3],g[1]/g[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Mt().extend(this.pointLocation(new l.P(0,i))).extend(this.pointLocation(new l.P(this.width,i))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Mt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,u=!1){const f=i.key,g=u?this._alignedPosMatrixCache:this._posMatrixCache;if(g[f])return g[f];const _=i.canonical,C=this.worldSize/this.zoomScale(_.z),T=_.x+Math.pow(2,_.z)*i.wrap,P=l.ao(new Float64Array(16));return l.$(P,P,[T*C,_.y*C,0]),l.a0(P,P,[C/l.N,C/l.N,1]),l.a1(P,u?this.alignedProjMatrix:this.projMatrix,P),g[f]=new Float32Array(P),g[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,u,f,g,_=-90,C=90,T=-180,P=180;const M=this.size,R=this._unmodified;if(this.latRange){const ee=this.latRange;_=l.H(ee[1])*this.worldSize,C=l.H(ee[0])*this.worldSize,i=C-_<M.y?M.y/(C-_):0}if(this.lngRange){const ee=this.lngRange;T=l.b5(l.G(ee[0])*this.worldSize,0,this.worldSize),P=l.b5(l.G(ee[1])*this.worldSize,0,this.worldSize),P<T&&(P+=this.worldSize),u=P-T<M.x?M.x/(P-T):0}const L=this.point,U=Math.max(u||0,i||0);if(U)return this.center=this.unproject(new l.P(u?(P+T)/2:L.x,i?(C+_)/2:L.y)),this.zoom+=this.scaleZoom(U),this._unmodified=R,void(this._constraining=!1);if(this.latRange){const ee=L.y,J=M.y/2;ee-J<_&&(g=_+J),ee+J>C&&(g=C-J)}if(this.lngRange){const ee=(T+P)/2,J=l.b5(L.x,ee-this.worldSize/2,ee+this.worldSize/2),re=M.x/2;J-re<T&&(f=T+re),J+re>P&&(f=P-re)}f===void 0&&g===void 0||(this.center=this.unproject(new l.P(f!==void 0?f:L.x,g!==void 0?g:L.y)).wrap()),this._unmodified=R,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,u=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b7(1,this.center.lat)*this.worldSize;let g=l.ao(new Float64Array(16));l.a0(g,g,[this.width/2,-this.height/2,1]),l.$(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=l.ao(new Float64Array(16)),l.a0(g,g,[1,-1,1]),l.$(g,g,[-1,-1,0]),l.a0(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),C=Math.min(this.elevation,this._minEleveationForCurrentTile),T=_-C*this._pixelPerMeter/Math.cos(this._pitch),P=C<0?T:_,M=Math.PI/2+this._pitch,R=this._fov*(.5+i.y/this.height),L=Math.sin(R)*P/Math.sin(l.ad(Math.PI-M-R,.01,Math.PI-.01)),U=this.getHorizon(),ee=2*Math.atan(U/this.cameraToCenterDistance)*(.5+i.y/(2*U)),J=Math.sin(ee)*P/Math.sin(l.ad(Math.PI-M-ee,.01,Math.PI-.01)),re=Math.min(L,J),Y=1.01*(Math.cos(Math.PI/2-this._pitch)*re+P),ye=this.height/50;g=new Float64Array(16),l.b8(g,this._fov,this.width/this.height,ye,Y),g[8]=2*-i.x/this.width,g[9]=2*i.y/this.height,l.a0(g,g,[1,-1,1]),l.$(g,g,[0,0,-this.cameraToCenterDistance]),l.b9(g,g,this._pitch),l.ae(g,g,this.angle),l.$(g,g,[-u,-f,0]),this.mercatorMatrix=l.a0([],g,[this.worldSize,this.worldSize,this.worldSize]),l.a0(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.a1(new Float64Array(16),this.labelPlaneMatrix,g),l.$(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=l.as([],g),this.pixelMatrix3D=l.a1(new Float64Array(16),this.labelPlaneMatrix,g);const Te=this.width%2/2,ue=this.height%2/2,ve=Math.cos(this.angle),Pe=Math.sin(this.angle),Ae=u-Math.round(u)+ve*Te+Pe*ue,ze=f-Math.round(f)+ve*ue+Pe*Te,Be=new Float64Array(g);if(l.$(Be,Be,[Ae>.5?Ae-1:Ae,ze>.5?ze-1:ze,0]),this.alignedProjMatrix=Be,g=l.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new l.P(0,0)),u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return l.ag(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,i))}getCameraQueryGeometry(i){const u=this.getCameraPoint();if(i.length===1)return[i[0],u];{let f=u.x,g=u.y,_=u.x,C=u.y;for(const T of i)f=Math.min(f,T.x),g=Math.min(g,T.y),_=Math.max(_,T.x),C=Math.max(C,T.y);return[new l.P(f,g),new l.P(_,g),new l.P(_,C),new l.P(f,C),new l.P(f,g)]}}}function Po(y,i){let u,f=!1,g=null,_=null;const C=()=>{g=null,f&&(y.apply(_,u),g=setTimeout(C,i),f=!1)};return(...T)=>(f=!0,_=this,u=T,g||C(),g)}class Cl{constructor(i){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let f;return u.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(f=g)}),(f&&f[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:f,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=Po(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const u=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,g=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,g),C=Math.round(u.lng*_)/_,T=Math.round(u.lat*_)/_,P=this._map.getBearing(),M=this._map.getPitch();let R="";if(R+=i?`/${C}/${T}/${f}`:`${f}/${T}/${C}`,(P||M)&&(R+="/"+Math.round(10*P)/10),M&&(R+=`/${Math.round(M)}`),this._hashName){const L=this._hashName;let U=!1;const ee=window.location.hash.slice(1).split("&").map(J=>{const re=J.split("=")[0];return re===L?(U=!0,`${re}=${R}`):J}).filter(J=>J);return U||ee.push(`${L}=${R}`),`#${ee.join("&")}`}return`#${R}`}}const ya={linearity:.3,easing:l.ba(0,0,.3,1)},Hf=l.e({deceleration:2500,maxSpeed:1400},ya),Kf=l.e({deceleration:20,maxSpeed:1400},ya),Xf=l.e({deceleration:1e3,maxSpeed:360},ya),Yf=l.e({deceleration:1e3,maxSpeed:90},ya);class Qf{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=l.h.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(u.pan.mag()){const _=Tl(u.pan.mag(),f,l.e({},Hf,i||{}));g.offset=u.pan.mult(_.amount/u.pan.mag()),g.center=this._map.transform.center,ls(g,_)}if(u.zoom){const _=Tl(u.zoom,f,Kf);g.zoom=this._map.transform.zoom+_.amount,ls(g,_)}if(u.bearing){const _=Tl(u.bearing,f,Xf);g.bearing=this._map.transform.bearing+l.ad(_.amount,-179,179),ls(g,_)}if(u.pitch){const _=Tl(u.pitch,f,Yf);g.pitch=this._map.transform.pitch+_.amount,ls(g,_)}if(g.zoom||g.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;g.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),l.e(g,{noMoveStart:!0})}}function ls(y,i){(!y.duration||y.duration<i.duration)&&(y.duration=i.duration,y.easing=i.easing)}function Tl(y,i,u){const{maxSpeed:f,linearity:g,deceleration:_}=u,C=l.ad(y*g/(i/1e3),-f,f),T=Math.abs(C)/(_*g);return{easing:u.easing,duration:1e3*T,amount:C*(T/2)}}class ci extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,f,g={}){const _=b.mousePos(u.getCanvasContainer(),f),C=u.unproject(_);super(i,l.e({point:_,lngLat:C,originalEvent:f},g)),this._defaultPrevented=!1,this.target=u}}class El extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,f){const g=i==="touchend"?f.changedTouches:f.touches,_=b.touchPos(u.getCanvasContainer(),g),C=_.map(P=>u.unproject(P)),T=_.reduce((P,M,R,L)=>P.add(M.div(L.length)),new l.P(0,0));super(i,{points:_,point:T,lngLats:C,lngLat:u.unproject(T),originalEvent:f}),this._defaultPrevented=!1}}class Jf extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,f){super(i,{originalEvent:f}),this._defaultPrevented=!1}}class ep{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Jf(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new ci(i.type,this._map,i))}mouseup(i){this._map.fire(new ci(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new ci(i.type,this._map,i))}dblclick(i){return this._firePreventable(new ci(i.type,this._map,i))}mouseover(i){this._map.fire(new ci(i.type,this._map,i))}mouseout(i){this._map.fire(new ci(i.type,this._map,i))}touchstart(i){return this._firePreventable(new El(i.type,this._map,i))}touchmove(i){this._map.fire(new El(i.type,this._map,i))}touchend(i){this._map.fire(new El(i.type,this._map,i))}touchcancel(i){this._map.fire(new El(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class tp{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new ci(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ci("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new ci(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ks{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(l.P.convert(i),this._map.terrain)}}class np{constructor(i,u){this._map=i,this._tr=new ks(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(b.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const f=u;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=f,this._box||(this._box=b.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const _=Math.min(g.x,f.x),C=Math.max(g.x,f.x),T=Math.min(g.y,f.y),P=Math.max(g.y,f.y);b.setTransform(this._box,`translate(${_}px,${T}px)`),this._box.style.width=C-_+"px",this._box.style.height=P-T+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;const f=this._startPos,g=u;if(this.reset(),b.suppressClick(),f.x!==g.x||f.y!==g.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:i})),{cameraAnimation:_=>_.fitScreenCoordinates(f,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new l.k(i,{originalEvent:u}))}}function Mi(y,i){if(y.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${i.length}`);const u={};for(let f=0;f<y.length;f++)u[y[f].identifier]=i[f];return u}class Is{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),f.length===this.numTouches&&(this.centroid=function(g){const _=new l.P(0,0);for(const C of g)_._add(C);return _.div(g.length)}(u),this.touches=Mi(f,u)))}touchmove(i,u,f){if(this.aborted||!this.centroid)return;const g=Mi(f,u);for(const _ in this.touches){const C=g[_];(!C||C.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(i,u,f){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Fu{constructor(i){this.singleTap=new Is(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,f){this.singleTap.touchstart(i,u,f)}touchmove(i,u,f){this.singleTap.touchmove(i,u,f)}touchend(i,u,f){const g=this.singleTap.touchend(i,u,f);if(g){const _=i.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(g)<30;if(_&&C||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Ms{constructor(i){this._tr=new ks(i),this._zoomIn=new Fu({numTouches:1,numTaps:2}),this._zoomOut=new Fu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,f){this._zoomIn.touchstart(i,u,f),this._zoomOut.touchstart(i,u,f)}touchmove(i,u,f){this._zoomIn.touchmove(i,u,f),this._zoomOut.touchmove(i,u,f)}touchend(i,u,f){const g=this._zoomIn.touchend(i,u,f),_=this._zoomOut.touchend(i,u,f),C=this._tr;return g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(g)},{originalEvent:i})}):_?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(_)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ds{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const u=this._moveFunction(...i);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(i,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,u){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const g=u.length?u[0]:u;return!this._moved&&g.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(f,g))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&b.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Uy={0:1,2:2};class bh{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const u=b.mouseButton(i);this._eventButton=u}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(u,f){const g=Uy[f];return u.buttons===void 0||(u.buttons&g)!==g}(i,this._eventButton)}isValidEndEvent(i){return b.mouseButton(i)===this._eventButton}}class rp{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const Nu=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(i){i.preventDefault()}},va=({enable:y,clickTolerance:i,bearingDegreesPerPixelMoved:u=.8})=>{const f=new bh({checkCorrectEvent:g=>b.mouseButton(g)===0&&g.ctrlKey||b.mouseButton(g)===2});return new Ds({clickTolerance:i,move:(g,_)=>({bearingDelta:(_.x-g.x)*u}),moveStateManager:f,enable:y,assignEvents:Nu})},zs=({enable:y,clickTolerance:i,pitchDegreesPerPixelMoved:u=-.5})=>{const f=new bh({checkCorrectEvent:g=>b.mouseButton(g)===0&&g.ctrlKey||b.mouseButton(g)===2});return new Ds({clickTolerance:i,move:(g,_)=>({pitchDelta:(_.y-g.y)*u}),moveStateManager:f,enable:y,assignEvents:Nu})};class it{constructor(i,u){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,u,f){return this._calculateTransform(i,u,f)}touchmove(i,u,f){if(this._map._cooperativeGestures&&(this._minTouches===2&&f.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,f.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(f.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,u,f)}touchend(i,u,f){this._calculateTransform(i,u,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,f){f.length>0&&(this._active=!0);const g=Mi(f,u),_=new l.P(0,0),C=new l.P(0,0);let T=0;for(const M in g){const R=g[M],L=this._touches[M];L&&(_._add(R),C._add(R.sub(L)),T++,g[M]=R)}if(this._touches=g,T<this._minTouches||!C.mag())return;const P=C.div(T);return this._sum._add(P),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(T),panDelta:P}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,u,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,f){if(!this._firstTwoTouches)return;i.preventDefault();const[g,_]=this._firstTwoTouches,C=so(f,u,g),T=so(f,u,_);if(!C||!T)return;const P=this._aroundCenter?null:C.add(T).div(2);return this._move([C,T],P,i)}touchend(i,u,f){if(!this._firstTwoTouches)return;const[g,_]=this._firstTwoTouches,C=so(f,u,g),T=so(f,u,_);C&&T||(this._active&&b.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function so(y,i,u){for(let f=0;f<y.length;f++)if(y[f].identifier===u)return i[f]}function _a(y,i){return Math.log(y/i)/Math.LN2}class ip extends Bu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const f=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(_a(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:_a(this._distance,f),pinchAround:u}}}function nt(y,i){return 180*y.angleWith(i)/Math.PI}class Sh extends Bu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const f=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:nt(this._vector,f),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,f=nt(i,this._startVector);return Math.abs(f)<u}}function Ch(y){return Math.abs(y.y)>Math.abs(y.x)}class qy extends Bu{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,u,f){super.touchstart(i,u,f),this._currentTouchCount=f.length}_start(i){this._lastPoints=i,Ch(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,f){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=i[0].sub(this._lastPoints[0]),_=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,_,f.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(g.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(i,u,f){if(this._valid!==void 0)return this._valid;const g=i.mag()>=2,_=u.mag()>=2;if(!g&&!_)return;if(!g||!_)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const C=i.y>0==u.y>0;return Ch(i)&&Ch(u)&&C}}const Th={panStep:100,bearingStep:15,pitchStep:10};class sp{constructor(i){this._tr=new ks(i);const u=Th;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,f=0,g=0,_=0,C=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?f=-1:(i.preventDefault(),_=-1);break;case 39:i.shiftKey?f=1:(i.preventDefault(),_=1);break;case 38:i.shiftKey?g=1:(i.preventDefault(),C=-1);break;case 40:i.shiftKey?g=-1:(i.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(f=0,g=0),{cameraAnimation:T=>{const P=this._tr;T.easeTo({duration:300,easeId:"keyboardHandler",easing:op,zoom:u?Math.round(P.zoom)+u*(i.shiftKey?2:1):P.zoom,bearing:P.bearing+f*this._bearingStep,pitch:P.pitch+g*this._pitchStep,offset:[-_*this._panStep,-C*this._panStep],center:P.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function op(y){return y*(2-y)}const ap=4.000244140625;class Gy{constructor(i,u){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=i,this._tr=new ks(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const f=l.h.now(),g=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,u!==0&&u%ap==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(g*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=b.mousePos(this._el,i),f=this._tr;this._around=l.L.convert(this._aroundCenter?f.center:f.unproject(u)),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const T=this._type==="wheel"&&Math.abs(this._delta)>ap?this._wheelZoomRate:this._defaultZoomRate;let P=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&P!==0&&(P=1/P);const M=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(M*P))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,f=this._startZoom,g=this._easing;let _,C=!1;if(this._type==="wheel"&&f&&g){const T=Math.min((l.h.now()-this._lastWheelEventTime)/200,1),P=g(T);_=l.B.number(f,u,P),T<1?this._frameId||(this._frameId=!0):C=!0}else _=u,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:_-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=l.bb;if(this._prevEase){const f=this._prevEase,g=(l.h.now()-f.start)/f.duration,_=f.easing(g+.01)-f.easing(g),C=.27/Math.sqrt(_*_+1e-4)*.01,T=Math.sqrt(.0729-C*C);u=l.ba(C,T,.25,1)}return this._prevEase={start:l.h.now(),duration:i,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Eh{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ph{constructor(i){this._tr=new ks(i),this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ah{constructor(){this._tap=new Fu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,u,f){if(!this._swipePoint)if(this._tapTime){const g=u[0],_=i.timeStamp-this._tapTime<500,C=this._tapPoint.dist(g)<30;_&&C?f.length>0&&(this._swipePoint=g,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(i,u,f)}touchmove(i,u,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const g=u[0],_=g.y-this._swipePoint.y;return this._swipePoint=g,i.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(i,u,f)}touchend(i,u,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const g=this._tap.touchend(i,u,f);g&&(this._tapTime=i.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kh{constructor(i,u,f){this._el=i,this._mousePan=u,this._touchPan=f}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Gr{constructor(i,u,f){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class oo{constructor(i,u,f,g){this._el=i,this._touchZoom=u,this._touchRotate=f,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Pl=y=>y.zoom||y.drag||y.pitch||y.rotate;class Ih extends l.k{}function Al(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class Mh{constructor(i,u){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,_)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=g.type==="renderFrame"?void 0:g,T={needsRenderFrame:!1},P={},M={},R=g.touches,L=R?this._getMapTouches(R):void 0,U=L?b.touchPos(this._el,L):b.mousePos(this._el,g);for(const{handlerName:re,handler:Y,allowed:ye}of this._handlers){if(!Y.isEnabled())continue;let Te;this._blockedByActive(M,ye,re)?Y.reset():Y[_||g.type]&&(Te=Y[_||g.type](g,U,L),this.mergeHandlerResult(T,P,Te,re,C),Te&&Te.needsRenderFrame&&this._triggerRenderFrame()),(Te||Y.isActive())&&(M[re]=Y)}const ee={};for(const re in this._previousActiveHandlers)M[re]||(ee[re]=C);this._previousActiveHandlers=M,(Object.keys(ee).length||Al(T))&&(this._changes.push([T,P,ee]),this._triggerRenderFrame()),(Object.keys(M).length||Al(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:J}=T;J&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],J(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Qf(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,_,C]of this._listeners)b.addEventListener(g,_,g===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[i,u,f]of this._listeners)b.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(i){const u=this._map,f=u.getCanvasContainer();this._add("mapEvent",new ep(u,i));const g=u.boxZoom=new np(u,i);this._add("boxZoom",g),i.interactive&&i.boxZoom&&g.enable();const _=new Ms(u),C=new Ph(u);u.doubleClickZoom=new Eh(C,_),this._add("tapZoom",_),this._add("clickZoom",C),i.interactive&&i.doubleClickZoom&&u.doubleClickZoom.enable();const T=new Ah;this._add("tapDragZoom",T);const P=u.touchPitch=new qy(u);this._add("touchPitch",P),i.interactive&&i.touchPitch&&u.touchPitch.enable(i.touchPitch);const M=va(i),R=zs(i);u.dragRotate=new Gr(i,M,R),this._add("mouseRotate",M,["mousePitch"]),this._add("mousePitch",R,["mouseRotate"]),i.interactive&&i.dragRotate&&u.dragRotate.enable();const L=(({enable:ye,clickTolerance:Te})=>{const ue=new bh({checkCorrectEvent:ve=>b.mouseButton(ve)===0&&!ve.ctrlKey});return new Ds({clickTolerance:Te,move:(ve,Pe)=>({around:Pe,panDelta:Pe.sub(ve)}),activateOnStart:!0,moveStateManager:ue,enable:ye,assignEvents:Nu})})(i),U=new it(i,u);u.dragPan=new kh(f,L,U),this._add("mousePan",L),this._add("touchPan",U,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&u.dragPan.enable(i.dragPan);const ee=new Sh,J=new ip;u.touchZoomRotate=new oo(f,J,ee,T),this._add("touchRotate",ee,["touchPan","touchZoom"]),this._add("touchZoom",J,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&u.touchZoomRotate.enable(i.touchZoomRotate);const re=u.scrollZoom=new Gy(u,()=>this._triggerRenderFrame());this._add("scrollZoom",re,["mousePan"]),i.interactive&&i.scrollZoom&&u.scrollZoom.enable(i.scrollZoom);const Y=u.keyboard=new sp(u);this._add("keyboard",Y),i.interactive&&i.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new tp(u))}_add(i,u,f){this._handlers.push({handlerName:i,handler:u,allowed:f}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Pl(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,u,f){for(const g in i)if(g!==f&&(!u||u.indexOf(g)<0))return!0;return!1}_getMapTouches(i){const u=[];for(const f of i)this._el.contains(f.target)&&u.push(f);return u}mergeHandlerResult(i,u,f,g,_){if(!f)return;l.e(i,f);const C={handlerName:g,originalEvent:f.originalEvent||_};f.zoomDelta!==void 0&&(u.zoom=C),f.panDelta!==void 0&&(u.drag=C),f.pitchDelta!==void 0&&(u.pitch=C),f.bearingDelta!==void 0&&(u.rotate=C)}_applyChanges(){const i={},u={},f={};for(const[g,_,C]of this._changes)g.panDelta&&(i.panDelta=(i.panDelta||new l.P(0,0))._add(g.panDelta)),g.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(i.around=g.around),g.pinchAround!==void 0&&(i.pinchAround=g.pinchAround),g.noInertia&&(i.noInertia=g.noInertia),l.e(u,_),l.e(f,C);this._updateMapTransform(i,u,f),this._changes=[]}_updateMapTransform(i,u,f){const g=this._map,_=g._getTransformForUpdate(),C=g.terrain;if(!(Al(i)||C&&this._terrainMovement))return this._fireEvents(u,f,!0);let{panDelta:T,zoomDelta:P,bearingDelta:M,pitchDelta:R,around:L,pinchAround:U}=i;U!==void 0&&(L=U),g._stop(!0),L=L||g.transform.centerPoint;const ee=_.pointLocation(T?L.sub(T):L);M&&(_.bearing+=M),R&&(_.pitch+=R),P&&(_.zoom+=P),C?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(T)):_.setLocationAtPoint(ee,L):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(ee,L),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(g.terrain)})):_.setLocationAtPoint(ee,L),g._applyUpdatedTransform(_),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,f,!0)}_fireEvents(i,u,f){const g=Pl(this._eventsInProgress),_=Pl(i),C={};for(const R in i){const{originalEvent:L}=i[R];this._eventsInProgress[R]||(C[`${R}start`]=L),this._eventsInProgress[R]=i[R]}!g&&_&&this._fireEvent("movestart",_.originalEvent);for(const R in C)this._fireEvent(R,C[R]);_&&this._fireEvent("move",_.originalEvent);for(const R in i){const{originalEvent:L}=i[R];this._fireEvent(R,L)}const T={};let P;for(const R in this._eventsInProgress){const{handlerName:L,originalEvent:U}=this._eventsInProgress[R];this._handlersById[L].isActive()||(delete this._eventsInProgress[R],P=u[L]||U,T[`${R}end`]=P)}for(const R in T)this._fireEvent(R,T[R]);const M=Pl(this._eventsInProgress);if(f&&(g||_)&&!M){this._updatingCamera=!0;const R=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),L=U=>U!==0&&-this._bearingSnap<U&&U<this._bearingSnap;!R||!R.essential&&l.h.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:P})),L(this._map.getBearing())&&this._map.resetNorth()):(L(R.bearing||this._map.getBearing())&&(R.bearing=0),R.freezeElevation=!0,this._map.easeTo(R,{originalEvent:P})),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new l.k(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Ih("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class lp extends l.E{constructor(i,u){super(),this._renderFrameCallback=()=>{const f=Math.min((l.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,f){return i=l.P.convert(i).mult(-1),this.panTo(this.transform.center,l.e({offset:i},u),f)}panTo(i,u,f){return this.easeTo(l.e({center:i},u),f)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,f){return this.easeTo(l.e({zoom:i},u),f)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,f){return this.easeTo(l.e({bearing:i},u),f)}resetNorth(i,u){return this.rotateTo(0,l.e({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=Mt.convert(i);const f=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),f,u)}_cameraForBoxAndBearing(i,u,f,g){const _={top:0,bottom:0,right:0,left:0};if(typeof(g=l.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const Pe=g.padding;g.padding={top:Pe,bottom:Pe,right:Pe,left:Pe}}g.padding=l.e(_,g.padding);const C=this.transform,T=C.padding,P=C.project(l.L.convert(i)),M=C.project(l.L.convert(u)),R=P.rotate(-f*Math.PI/180),L=M.rotate(-f*Math.PI/180),U=new l.P(Math.max(R.x,L.x),Math.max(R.y,L.y)),ee=new l.P(Math.min(R.x,L.x),Math.min(R.y,L.y)),J=U.sub(ee),re=(C.width-(T.left+T.right+g.padding.left+g.padding.right))/J.x,Y=(C.height-(T.top+T.bottom+g.padding.top+g.padding.bottom))/J.y;if(Y<0||re<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ye=Math.min(C.scaleZoom(C.scale*Math.min(re,Y)),g.maxZoom),Te=l.P.convert(g.offset),ue=new l.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(f*Math.PI/180),ve=Te.add(ue).mult(C.scale/C.zoomScale(ye));return{center:C.unproject(P.add(M).div(2).sub(ve)),zoom:ye,bearing:f}}fitBounds(i,u,f){return this._fitInternal(this.cameraForBounds(i,u),u,f)}fitScreenCoordinates(i,u,f,g,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(i)),this.transform.pointLocation(l.P.convert(u)),f,g),g,_)}_fitInternal(i,u,f){return i?(delete(u=l.e(i,u)).padding,u.linear?this.easeTo(u,f):this.flyTo(u,f)):this}jumpTo(i,u){this.stop();const f=this._getTransformForUpdate();let g=!1,_=!1,C=!1;return"zoom"in i&&f.zoom!==+i.zoom&&(g=!0,f.zoom=+i.zoom),i.center!==void 0&&(f.center=l.L.convert(i.center)),"bearing"in i&&f.bearing!==+i.bearing&&(_=!0,f.bearing=+i.bearing),"pitch"in i&&f.pitch!==+i.pitch&&(C=!0,f.pitch=+i.pitch),i.padding==null||f.isPaddingEqual(i.padding)||(f.padding=i.padding),this._applyUpdatedTransform(f),this.fire(new l.k("movestart",u)).fire(new l.k("move",u)),g&&this.fire(new l.k("zoomstart",u)).fire(new l.k("zoom",u)).fire(new l.k("zoomend",u)),_&&this.fire(new l.k("rotatestart",u)).fire(new l.k("rotate",u)).fire(new l.k("rotateend",u)),C&&this.fire(new l.k("pitchstart",u)).fire(new l.k("pitch",u)).fire(new l.k("pitchend",u)),this.fire(new l.k("moveend",u))}calculateCameraOptionsFromTo(i,u,f,g=0){const _=l.U.fromLngLat(i,u),C=l.U.fromLngLat(f,g),T=C.x-_.x,P=C.y-_.y,M=C.z-_.z,R=Math.hypot(T,P,M);if(R===0)throw new Error("Can't calculate camera options with same From and To");const L=Math.hypot(T,P),U=this.transform.scaleZoom(this.transform.cameraToCenterDistance/R/this.transform.tileSize),ee=180*Math.atan2(T,-P)/Math.PI;let J=180*Math.acos(L/R)/Math.PI;return J=M<0?90-J:90+J,{center:C.toLngLat(),zoom:U,pitch:J,bearing:ee}}easeTo(i,u){this._stop(!1,i.easeId),((i=l.e({offset:[0,0],duration:500,easing:l.bb},i)).animate===!1||!i.essential&&l.h.prefersReducedMotion)&&(i.duration=0);const f=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),C=this.getPitch(),T=this.getPadding(),P="zoom"in i?+i.zoom:g,M="bearing"in i?this._normalizeBearing(i.bearing,_):_,R="pitch"in i?+i.pitch:C,L="padding"in i?i.padding:f.padding,U=l.P.convert(i.offset);let ee=f.centerPoint.add(U);const J=f.pointLocation(ee),re=l.L.convert(i.center||J);this._normalizeCenter(re);const Y=f.project(J),ye=f.project(re).sub(Y),Te=f.zoomScale(P-g);let ue,ve;i.around&&(ue=l.L.convert(i.around),ve=f.locationPoint(ue));const Pe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||P!==g,this._rotating=this._rotating||_!==M,this._pitching=this._pitching||R!==C,this._padding=!f.isPaddingEqual(L),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,Pe),this.terrain&&this._prepareElevation(re),this._ease(Ae=>{if(this._zooming&&(f.zoom=l.B.number(g,P,Ae)),this._rotating&&(f.bearing=l.B.number(_,M,Ae)),this._pitching&&(f.pitch=l.B.number(C,R,Ae)),this._padding&&(f.interpolatePadding(T,L,Ae),ee=f.centerPoint.add(U)),this.terrain&&!i.freezeElevation&&this._updateElevation(Ae),ue)f.setLocationAtPoint(ue,ve);else{const ze=f.zoomScale(f.zoom-g),Be=P>g?Math.min(2,Te):Math.max(.5,Te),Fe=Math.pow(Be,1-Ae),je=f.unproject(Y.add(ye.mult(Ae*Fe)).mult(ze));f.setLocationAtPoint(f.renderWorldCopies?je.wrap():je,ee)}this._applyUpdatedTransform(f),this._fireMoveEvents(u)},Ae=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,Ae)},i),this}_prepareEase(i,u,f={}){this._moving=!0,u||f.moving||this.fire(new l.k("movestart",i)),this._zooming&&!f.zooming&&this.fire(new l.k("zoomstart",i)),this._rotating&&!f.rotating&&this.fire(new l.k("rotatestart",i)),this._pitching&&!f.pitching&&this.fire(new l.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&u!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(f-(u-(f*i+this._elevationStart))/(1-i)),this._elevationTarget=u}this.transform.elevation=l.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const u=i.clone(),{center:f,zoom:g,pitch:_,bearing:C,elevation:T}=this.transformCameraUpdate(u);f&&(u.center=f),g!==void 0&&(u.zoom=g),_!==void 0&&(u.pitch=_),C!==void 0&&(u.bearing=C),T!==void 0&&(u.elevation=T),this.transform.apply(u)}_fireMoveEvents(i){this.fire(new l.k("move",i)),this._zooming&&this.fire(new l.k("zoom",i)),this._rotating&&this.fire(new l.k("rotate",i)),this._pitching&&this.fire(new l.k("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const f=this._zooming,g=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new l.k("zoomend",i)),g&&this.fire(new l.k("rotateend",i)),_&&this.fire(new l.k("pitchend",i)),this.fire(new l.k("moveend",i))}flyTo(i,u){if(!i.essential&&l.h.prefersReducedMotion){const ct=l.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ct,u)}this.stop(),i=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.bb},i);const f=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),C=this.getPitch(),T=this.getPadding(),P="zoom"in i?l.ad(+i.zoom,f.minZoom,f.maxZoom):g,M="bearing"in i?this._normalizeBearing(i.bearing,_):_,R="pitch"in i?+i.pitch:C,L="padding"in i?i.padding:f.padding,U=f.zoomScale(P-g),ee=l.P.convert(i.offset);let J=f.centerPoint.add(ee);const re=f.pointLocation(J),Y=l.L.convert(i.center||re);this._normalizeCenter(Y);const ye=f.project(re),Te=f.project(Y).sub(ye);let ue=i.curve;const ve=Math.max(f.width,f.height),Pe=ve/U,Ae=Te.mag();if("minZoom"in i){const ct=l.ad(Math.min(i.minZoom,g,P),f.minZoom,f.maxZoom),rn=ve/f.zoomScale(ct-g);ue=Math.sqrt(rn/Ae*2)}const ze=ue*ue;function Be(ct){const rn=(Pe*Pe-ve*ve+(ct?-1:1)*ze*ze*Ae*Ae)/(2*(ct?Pe:ve)*ze*Ae);return Math.log(Math.sqrt(rn*rn+1)-rn)}function Fe(ct){return(Math.exp(ct)-Math.exp(-ct))/2}function je(ct){return(Math.exp(ct)+Math.exp(-ct))/2}const at=Be(!1);let Vt=function(ct){return je(at)/je(at+ue*ct)},Qe=function(ct){return ve*((je(at)*(Fe(rn=at+ue*ct)/je(rn))-Fe(at))/ze)/Ae;var rn},Ct=(Be(!0)-at)/ue;if(Math.abs(Ae)<1e-6||!isFinite(Ct)){if(Math.abs(ve-Pe)<1e-6)return this.easeTo(i,u);const ct=Pe<ve?-1:1;Ct=Math.abs(Math.log(Pe/ve))/ue,Qe=function(){return 0},Vt=function(rn){return Math.exp(ct*ue*rn)}}return i.duration="duration"in i?+i.duration:1e3*Ct/("screenSpeed"in i?+i.screenSpeed/ue:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=_!==M,this._pitching=R!==C,this._padding=!f.isPaddingEqual(L),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(Y),this._ease(ct=>{const rn=ct*Ct,Nt=1/Vt(rn);f.zoom=ct===1?P:g+f.scaleZoom(Nt),this._rotating&&(f.bearing=l.B.number(_,M,ct)),this._pitching&&(f.pitch=l.B.number(C,R,ct)),this._padding&&(f.interpolatePadding(T,L,ct),J=f.centerPoint.add(ee)),this.terrain&&!i.freezeElevation&&this._updateElevation(ct);const Rt=ct===1?Y:f.unproject(ye.add(Te.mult(Qe(rn))).mult(Nt));f.setLocationAtPoint(f.renderWorldCopies?Rt.wrap():Rt,J),this._applyUpdatedTransform(f),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,u)}if(!i){const f=this.handlers;f&&f.stop(!1)}return this}_ease(i,u,f){f.animate===!1||f.duration===0?(i(1),u()):(this._easeStart=l.h.now(),this._easeOptions=f,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,u){i=l.b5(i,-180,180);const f=Math.abs(i-u);return Math.abs(i-360-u)<f&&(i-=360),Math.abs(i+360-u)<f&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const f=i.lng-u.center.lng;i.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(l.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class hi{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=b.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=b.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const f=this._map._getUIString(`AttributionControl.${u}`);i.title=f,i.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const u=this._map.style.sourceCaches;for(const g in u){const _=u[g];if(_.used||_.usedForTerrain){const C=_.getSource();C.attribution&&i.indexOf(C.attribution)<0&&i.push(C.attribution)}}i=i.filter(g=>String(g).trim()),i.sort((g,_)=>g.length-_.length),i=i.filter((g,_)=>{for(let C=_+1;C<i.length;C++)if(i[C].indexOf(g)>=0)return!1;return!0});const f=i.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,i.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class hn{constructor(i={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const f=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=b.create("div","maplibregl-ctrl");const u=b.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){b.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Vu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,f=u?this._queue.concat(u):this._queue;for(const g of f)if(g.id===i)return void(g.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const f of u)if(!f.cancelled&&(f.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Dh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var up=l.Q([{name:"a_pos3d",type:"Int16",components:3}]);class cp extends l.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,u){this.sourceCache.update(i,u),this._renderableTilesKeys=[];const f={};for(const g of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))f[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),l.aS(g.posMatrix,0,l.N,0,l.N,0,1),this._tiles[g.key]=new ge(g,this.tileSize));for(const g in this._tiles)f[g]||delete this._tiles[g]}freeRtt(i){for(const u in this._tiles){const f=this._tiles[u];(!i||f.tileID.equals(i)||f.tileID.isChildOf(i)||i.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const u={};for(const f of this._renderableTilesKeys){const g=this._tiles[f].tileID;if(g.canonical.equals(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16),l.aS(_.posMatrix,0,l.N,0,l.N,0,1),u[f]=_}else if(g.canonical.isChildOf(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const C=g.canonical.z-i.canonical.z,T=g.canonical.x-(g.canonical.x>>C<<C),P=g.canonical.y-(g.canonical.y>>C<<C),M=l.N>>C;l.aS(_.posMatrix,0,M,0,M,0,1),l.$(_.posMatrix,_.posMatrix,[-T*M,-P*M,0]),u[f]=_}else if(i.canonical.isChildOf(g.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const C=i.canonical.z-g.canonical.z,T=i.canonical.x-(i.canonical.x>>C<<C),P=i.canonical.y-(i.canonical.y>>C<<C),M=l.N>>C;l.aS(_.posMatrix,0,l.N,0,l.N,0,1),l.$(_.posMatrix,_.posMatrix,[T*M,P*M,0]),l.a0(_.posMatrix,_.posMatrix,[1/2**C,1/2**C,0]),u[f]=_}}return u}getSourceTile(i,u){const f=this.sourceCache._source;let g=i.overscaledZ-this.deltaZoom;if(g>f.maxzoom&&(g=f.maxzoom),g<f.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(g).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!_||!_.dem)&&u)for(;g>=f.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(i.scaledTo(g--).key);return _}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=i)}}class hp{constructor(i,u,f){this.painter=i,this.sourceCache=new cp(u),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,u,f,g=l.N){var _;if(!(u>=0&&u<g&&f>=0&&f<g))return 0;const C=this.getTerrainData(i),T=(_=C.tile)===null||_===void 0?void 0:_.dem;if(!T)return 0;const P=function(J,re,Y){var ye=re[0],Te=re[1];return J[0]=Y[0]*ye+Y[4]*Te+Y[12],J[1]=Y[1]*ye+Y[5]*Te+Y[13],J}([],[u/g*l.N,f/g*l.N],C.u_terrain_matrix),M=[P[0]*T.dim,P[1]*T.dim],R=Math.floor(M[0]),L=Math.floor(M[1]),U=M[0]-R,ee=M[1]-L;return T.get(R,L)*(1-U)*(1-ee)+T.get(R+1,L)*U*(1-ee)+T.get(R,L+1)*(1-U)*ee+T.get(R+1,L+1)*U*ee}getElevationForLngLatZoom(i,u){const{tileID:f,mercatorX:g,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(i,u);return this.getElevation(f,g%l.N,_%l.N,l.N)}getElevation(i,u,f,g=l.N){return this.getDEMElevation(i,u,f,g)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const g=this.painter.context,_=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Le(g,_,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Le(g,new l.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.ao([])}const u=this.sourceCache.getSourceTile(i,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const g=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new Le(g,u.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),u.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const f=u&&u+u.tileID.key+i.key;if(f&&!this._demMatrixCache[f]){const g=this.sourceCache.sourceCache._source.maxzoom;let _=i.canonical.z-u.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=g?_=i.canonical.z-g:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=i.canonical.x-(i.canonical.x>>_<<_),T=i.canonical.y-(i.canonical.y>>_<<_),P=l.bc(new Float64Array(16),[1/(l.N<<_),1/(l.N<<_),0]);l.$(P,P,[C*l.N,T*l.N,0]),this._demMatrixCache[i.key]={matrix:P,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(i){const u=this.painter,f=u.width/devicePixelRatio,g=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Le(u.context,{width:f,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Le(u.context,{width:f,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(f,g,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,f,g))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,C=0;_<this._coordsTextureSize;_++)for(let T=0;T<this._coordsTextureSize;T++,C+=4)u[C+0]=255&T,u[C+1]=255&_,u[C+2]=T>>8<<4|_>>8,u[C+3]=0;const f=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),g=new Le(i,f,i.gl.RGBA,{premultiply:!1});return g.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(i){const u=new Uint8Array(4),f=this.painter.context,g=f.gl;f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,u),f.bindFramebuffer.set(null);const _=u[0]+(u[2]>>4<<8),C=u[1]+((15&u[2])<<8),T=this.coordsIndex[255-u[3]],P=T&&this.sourceCache.getTileByID(T);if(!P)return null;const M=this._coordsTextureSize,R=(1<<P.tileID.canonical.z)*M;return new l.U(this._allowMercatorOverflow(i,(P.tileID.canonical.x*M+_)/R),(P.tileID.canonical.y*M+C)/R,this.getElevation(P.tileID,_,C,M))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,u=new l.bd,f=new l.b0,g=this.meshSize,_=l.N/g,C=g*g;for(let L=0;L<=g;L++)for(let U=0;U<=g;U++)u.emplaceBack(U*_,L*_,0);for(let L=0;L<C;L+=g+1)for(let U=0;U<g;U++)f.emplaceBack(U+L,g+U+L+1,g+U+L+2),f.emplaceBack(U+L,g+U+L+2,U+L+1);const T=u.length,P=T+2*(g+1);for(const L of[0,1])for(let U=0;U<=g;U++)for(const ee of[0,1])u.emplaceBack(U*_,L*l.N,ee);for(let L=0;L<2*g;L+=2)f.emplaceBack(P+L,P+L+1,P+L+3),f.emplaceBack(P+L,P+L+3,P+L+2),f.emplaceBack(T+L,T+L+3,T+L+1),f.emplaceBack(T+L,T+L+2,T+L+3);const M=u.length,R=M+2*(g+1);for(const L of[0,1])for(let U=0;U<=g;U++)for(const ee of[0,1])u.emplaceBack(L*l.N,U*_,ee);for(let L=0;L<2*g;L+=2)f.emplaceBack(M+L,M+L+1,M+L+3),f.emplaceBack(M+L,M+L+3,M+L+2),f.emplaceBack(R+L,R+L+3,R+L+1),f.emplaceBack(R+L,R+L+2,R+L+3);return this._mesh={indexBuffer:i.createIndexBuffer(f),vertexBuffer:i.createVertexBuffer(u,up.members),segments:l.S.simpleSegment(0,0,u.length,f.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*l.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,u){var f;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(i,u);return(f=this.getMinMaxElevation(g).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(i){const u=this.getTerrainData(i).tile,f={minElevation:null,maxElevation:null};return u&&u.dem&&(f.minElevation=u.dem.min*this.exaggeration,f.maxElevation=u.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(i,u){const f=l.U.fromLngLat(i.wrap()),g=(1<<u)*l.N,_=f.x*g,C=f.y*g,T=Math.floor(_/l.N),P=Math.floor(C/l.N);return{tileID:new l.O(u,0,u,T,P),mercatorX:_,mercatorY:C}}_allowMercatorOverflow(i,u){const f=i.x<this.painter.width/2;let g=l.bf(u);const _=this.painter.transform.center.lng;return f&&Math.sign(g)>0&&Math.sign(_)<0||!f&&Math.sign(g)<0&&Math.sign(_)>0?(g=360*Math.sign(_)+g,l.G(g)):u}}class Zy{constructor(i,u,f){this._context=i,this._size=u,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new Le(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(f.texture),{id:i,fbo:u,texture:f,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>i.id!==u),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const kr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class $u{constructor(i,u){this.painter=i,this.terrain=u,this.pool=new Zy(i.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(f=>!i._layers[f].isHidden(u)),this._coordsDescendingInv={};for(const f in i.sourceCaches){this._coordsDescendingInv[f]={};const g=i.sourceCaches[f].getVisibleCoordinates();for(const _ of g){const C=this.terrain.sourceCache.getTerrainCoords(_);for(const T in C)this._coordsDescendingInv[f][T]||(this._coordsDescendingInv[f][T]=[]),this._coordsDescendingInv[f][T].push(C[T])}}this._coordsDescendingInvStr={};for(const f of i._order){const g=i._layers[f],_=g.source;if(kr[g.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const C in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][C]=this._coordsDescendingInv[_][C].map(T=>T.key).sort().join()}}for(const f of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[g][f.tileID.key];_&&_!==f.rttCoords[g]&&(f.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const u=i.type,f=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(kr[u]&&(this._prevType&&kr[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(i.id),!g))return!0;if(kr[this._prevType]||kr[u]&&g){this._prevType=u;const _=this._stacks.length-1,C=this._stacks[_]||[];for(const T of this._renderableTiles){if(this.pool.isFull()&&(An(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(T),T.rtt[_]){const M=this.pool.getObjectForId(T.rtt[_].id);if(M.stamp===T.rtt[_].stamp){this.pool.useObject(M);continue}}const P=this.pool.getOrCreateFreeObject();this.pool.useObject(P),this.pool.stampObject(P),T.rtt[_]={id:P.id,stamp:P.stamp},f.context.bindFramebuffer.set(P.fbo.framebuffer),f.context.clear({color:l.aT.transparent,stencil:0}),f.currentStencilSource=void 0;for(let M=0;M<C.length;M++){const R=f.style._layers[C[M]],L=R.source?this._coordsDescendingInv[R.source][T.tileID.key]:[T.tileID];f.context.viewport.set([0,0,P.fbo.width,P.fbo.height]),f._renderTileClippingMasks(R,L),f.renderLayer(f,f.style.sourceCaches[R.source],R,L),R.source&&(T.rttCoords[R.source]=this._coordsDescendingInvStr[R.source][T.tileID.key])}}return An(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),kr[u]}return!1}}const ft=w,St={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},kl=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},zh={showCompass:!0,showZoom:!0,visualizePitch:!1};class Rh{constructor(i,u,f=!1){this.mousedown=C=>{this.startMouse(l.e({},C,{ctrlKey:!0,preventDefault:()=>C.preventDefault()}),b.mousePos(this.element,C)),b.addEventListener(window,"mousemove",this.mousemove),b.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=C=>{this.moveMouse(C,b.mousePos(this.element,C))},this.mouseup=C=>{this.mouseRotate.dragEnd(C),this.mousePitch&&this.mousePitch.dragEnd(C),this.offTemp()},this.touchstart=C=>{C.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,C.targetTouches)[0],this.startTouch(C,this._startPos),b.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.addEventListener(window,"touchend",this.touchend))},this.touchmove=C=>{C.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,C.targetTouches)[0],this.moveTouch(C,this._lastPos))},this.touchend=C=>{C.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=i.dragRotate._mouseRotate.getClickTolerance(),_=i.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=va({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:C,clickTolerance:T,bearingDegreesPerPixelMoved:P=.8})=>{const M=new rp;return new Ds({clickTolerance:T,move:(R,L)=>({bearingDelta:(L.x-R.x)*P}),moveStateManager:M,enable:C,assignEvents:kl})})({clickTolerance:g,enable:!0}),this.map=i,f&&(this.mousePitch=zs({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:C,clickTolerance:T,pitchDegreesPerPixelMoved:P=-.5})=>{const M=new rp;return new Ds({clickTolerance:T,move:(R,L)=>({pitchDelta:(L.y-R.y)*P}),moveStateManager:M,enable:C,assignEvents:kl})})({clickTolerance:_,enable:!0})),b.addEventListener(u,"mousedown",this.mousedown),b.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(u,"touchcancel",this.reset)}startMouse(i,u){this.mouseRotate.dragStart(i,u),this.mousePitch&&this.mousePitch.dragStart(i,u),b.disableDrag()}startTouch(i,u){this.touchRotate.dragStart(i,u),this.touchPitch&&this.touchPitch.dragStart(i,u),b.disableDrag()}moveMouse(i,u){const f=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(i,u)||{};if(g&&f.setBearing(f.getBearing()+g),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(i,u)||{};_&&f.setPitch(f.getPitch()+_)}}moveTouch(i,u){const f=this.map,{bearingDelta:g}=this.touchRotate.dragMove(i,u)||{};if(g&&f.setBearing(f.getBearing()+g),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(i,u)||{};_&&f.setPitch(f.getPitch()+_)}}off(){const i=this.element;b.removeEventListener(i,"mousedown",this.mousedown),b.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend),b.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){b.enableDrag(),b.removeEventListener(window,"mousemove",this.mousemove),b.removeEventListener(window,"mouseup",this.mouseup),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend)}}let Bn;function Lh(y,i,u){if(y=new l.L(y.lng,y.lat),i){const f=new l.L(y.lng-360,y.lat),g=new l.L(y.lng+360,y.lat),_=u.locationPoint(y).distSqr(i);u.locationPoint(f).distSqr(i)<_?y=f:u.locationPoint(g).distSqr(i)<_&&(y=g)}for(;Math.abs(y.lng-u.center.lng)>180;){const f=u.locationPoint(y);if(f.x>=0&&f.y>=0&&f.x<=u.width&&f.y<=u.height)break;y.lng>u.center.lng?y.lng-=360:y.lng+=360}return y}const Di={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function dp(y,i,u){const f=y.classList;for(const g in Di)f.remove(`maplibregl-${u}-anchor-${g}`);f.add(`maplibregl-${u}-anchor-${i}`)}class Ao extends l.E{constructor(i){if(super(),this._onKeyPress=u=>{const f=u.code,g=u.charCode||u.keyCode;f!=="Space"&&f!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=u=>{const f=u.originalEvent.target,g=this._element;this._popup&&(f===g||g.contains(f))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!f)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Lh(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,`${Di[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${g}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const C=this._map.unproject(this._pos),T=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=C.distanceTo(this._lngLat)>20*T?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=u=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=l.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");const u=b.createNS("http://www.w3.org/2000/svg","svg"),f=41,g=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${f}px`),u.setAttributeNS(null,"width",`${g}px`),u.setAttributeNS(null,"viewBox",`0 0 ${g} ${f}`);const _=b.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const C=b.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const T=b.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");const P=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ye of P){const Te=b.createNS("http://www.w3.org/2000/svg","ellipse");Te.setAttributeNS(null,"opacity","0.04"),Te.setAttributeNS(null,"cx","10.5"),Te.setAttributeNS(null,"cy","5.80029008"),Te.setAttributeNS(null,"rx",ye.rx),Te.setAttributeNS(null,"ry",ye.ry),T.appendChild(Te)}const M=b.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"fill",this._color);const R=b.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),M.appendChild(R);const L=b.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"opacity","0.25"),L.setAttributeNS(null,"fill","#000000");const U=b.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),L.appendChild(U);const ee=b.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ee.setAttributeNS(null,"fill","#FFFFFF");const J=b.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(8.0, 8.0)");const re=b.createNS("http://www.w3.org/2000/svg","circle");re.setAttributeNS(null,"fill","#000000"),re.setAttributeNS(null,"opacity","0.25"),re.setAttributeNS(null,"cx","5.5"),re.setAttributeNS(null,"cy","5.5"),re.setAttributeNS(null,"r","5.4999962");const Y=b.createNS("http://www.w3.org/2000/svg","circle");Y.setAttributeNS(null,"fill","#FFFFFF"),Y.setAttributeNS(null,"cx","5.5"),Y.setAttributeNS(null,"cy","5.5"),Y.setAttributeNS(null,"r","5.4999962"),J.appendChild(re),J.appendChild(Y),C.appendChild(T),C.appendChild(M),C.appendChild(L),C.appendChild(ee),C.appendChild(J),u.appendChild(C),u.setAttributeNS(null,"height",f*this._scale+"px"),u.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(u),this._offset=l.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),dp(this._element,this._anchor,"marker"),i&&i.className)for(const u of i.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=l.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const g=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=l.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const kn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Cn=0,xa=!1;const Il={maxWidth:100,unit:"metric"};function Ml(y,i,u){const f=u&&u.maxWidth||100,g=y._container.clientHeight/2,_=y.unproject([0,g]),C=y.unproject([f,g]),T=_.distanceTo(C);if(u&&u.unit==="imperial"){const P=3.2808*T;P>5280?ko(i,f,P/5280,y._getUIString("ScaleControl.Miles")):ko(i,f,P,y._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?ko(i,f,T/1852,y._getUIString("ScaleControl.NauticalMiles")):T>=1e3?ko(i,f,T/1e3,y._getUIString("ScaleControl.Kilometers")):ko(i,f,T,y._getUIString("ScaleControl.Meters"))}function ko(y,i,u,f){const g=function(_){const C=Math.pow(10,`${Math.floor(_)}`.length-1);let T=_/C;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:function(P){const M=Math.pow(10,Math.ceil(-Math.log(P)/Math.LN10));return Math.round(P*M)/M}(T),C*T}(u);y.style.width=i*(g/u)+"px",y.innerHTML=`${g}&nbsp;${f}`}const Oh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Fh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function wa(y){if(y){if(typeof y=="number"){const i=Math.round(Math.abs(y)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,y),"top-left":new l.P(i,i),"top-right":new l.P(-i,i),bottom:new l.P(0,-y),"bottom-left":new l.P(i,-i),"bottom-right":new l.P(-i,-i),left:new l.P(y,0),right:new l.P(-y,0)}}if(y instanceof l.P||Array.isArray(y)){const i=l.P.convert(y);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:l.P.convert(y.center||[0,0]),top:l.P.convert(y.top||[0,0]),"top-left":l.P.convert(y["top-left"]||[0,0]),"top-right":l.P.convert(y["top-right"]||[0,0]),bottom:l.P.convert(y.bottom||[0,0]),"bottom-left":l.P.convert(y["bottom-left"]||[0,0]),"bottom-right":l.P.convert(y["bottom-right"]||[0,0]),left:l.P.convert(y.left||[0,0]),right:l.P.convert(y.right||[0,0])}}return wa(new l.P(0,0))}const Nh={extend:(y,...i)=>l.e(y,...i),run(y){y()},logToElement(y,i=!1,u="log"){const f=window.document.getElementById(u);f&&(i&&(f.innerHTML=""),f.innerHTML+=`<br>${y}`)}},Bh=w;class Jt{static get version(){return Bh}static get workerCount(){return Bt.workerCount}static set workerCount(i){Bt.workerCount=i}static get maxParallelImageRequests(){return l.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){l.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return l.c.WORKER_URL}static set workerUrl(i){l.c.WORKER_URL=i}static addProtocol(i,u){l.c.REGISTERED_PROTOCOLS[i]=u}static removeProtocol(i){delete l.c.REGISTERED_PROTOCOLS[i]}}return Jt.Map=class extends lp{constructor(y){if(l.bg.mark(l.bh.create),(y=l.e({},St,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ou(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new Vu,this._controls=[],this._mapId=l.a2(),this._locale=l.e({},Dh,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=K.addThrottleControl(()=>this.isMoving()),this._requestManager=new F(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const u=Po(f=>{this._trackResize&&!this._removed&&this.resize(f)._update()},50);this._resizeObserver=new ResizeObserver(f=>{i?u(f):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Mh(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new Cl(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,l.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new hi({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new hn,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new l.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new l.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new l.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(y,i){if(i===void 0&&(i=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=y.onAdd(this);this._controls.push(y);const f=this._controlPositions[i];return i.indexOf("bottom")!==-1?f.insertBefore(u,f.firstChild):f.appendChild(u),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(y);return i>-1&&this._controls.splice(i,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,i,u,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,i,u,f)}resize(y){var i;const u=this._containerDimensions(),f=u[0],g=u[1],_=this._getClampedPixelRatio(f,g);if(this._resizeCanvas(f,g,_),this.painter.resize(f,g,_),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const P=this._getClampedPixelRatio(f,g);this._resizeCanvas(f,g,P),this.painter.resize(f,g,P)}this.transform.resize(f,g),(i=this._requestedCameraState)===null||i===void 0||i.resize(f,g);const C=!this._moving;return C&&(this.stop(),this.fire(new l.k("movestart",y)).fire(new l.k("move",y))),this.fire(new l.k("resize",y)),C&&this.fire(new l.k("moveend",y)),this}_getClampedPixelRatio(y,i){const{0:u,1:f}=this._maxCanvasSize,g=this.getPixelRatio(),_=y*g,C=i*g;return Math.min(_>u?u/_:1,C>f?f/C:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Mt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(l.L.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(l.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,i,u){if(y==="mouseenter"||y==="mouseover"){let f=!1;return{layer:i,listener:u,delegates:{mousemove:_=>{const C=this.getLayer(i)?this.queryRenderedFeatures(_.point,{layers:[i]}):[];C.length?f||(f=!0,u.call(this,new ci(y,this,_.originalEvent,{features:C}))):f=!1},mouseout:()=>{f=!1}}}}if(y==="mouseleave"||y==="mouseout"){let f=!1;return{layer:i,listener:u,delegates:{mousemove:C=>{(this.getLayer(i)?this.queryRenderedFeatures(C.point,{layers:[i]}):[]).length?f=!0:f&&(f=!1,u.call(this,new ci(y,this,C.originalEvent)))},mouseout:C=>{f&&(f=!1,u.call(this,new ci(y,this,C.originalEvent)))}}}}{const f=g=>{const _=this.getLayer(i)?this.queryRenderedFeatures(g.point,{layers:[i]}):[];_.length&&(g.features=_,u.call(this,g),delete g.features)};return{layer:i,listener:u,delegates:{[y]:f}}}}on(y,i,u){if(u===void 0)return super.on(y,i);const f=this._createDelegatedListener(y,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(f);for(const g in f.delegates)this.on(g,f.delegates[g]);return this}once(y,i,u){if(u===void 0)return super.once(y,i);const f=this._createDelegatedListener(y,i,u);for(const g in f.delegates)this.once(g,f.delegates[g]);return this}off(y,i,u){return u===void 0?super.off(y,i):(this._delegatedListeners&&this._delegatedListeners[y]&&(f=>{const g=this._delegatedListeners[y];for(let _=0;_<g.length;_++){const C=g[_];if(C.layer===i&&C.listener===u){for(const T in C.delegates)this.off(T,C.delegates[T]);return g.splice(_,1),this}}})(),this)}queryRenderedFeatures(y,i){if(!this.style)return[];let u;const f=y instanceof l.P||Array.isArray(y),g=f?y:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(f?{}:y)||{},g instanceof l.P||typeof g[0]=="number")u=[l.P.convert(g)];else{const _=l.P.convert(g[0]),C=l.P.convert(g[1]);u=[_,new l.P(C.x,_.y),C,new l.P(_.x,C.y),_]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(y,i){return this.style.querySourceFeatures(y,i)}setStyle(y,i){return(i=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(y,i))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const i=this._locale[y];if(i==null)throw new Error(`Missing UI string '${y}'`);return i}_updateStyle(y,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,i));const u=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new hr(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,i,u):this.style.loadJSON(y,i,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new hr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,i){if(typeof y=="string"){const u=this._requestManager.transformRequest(y,N.Style);l.f(u,(f,g)=>{f?this.fire(new l.j(f)):g&&this._updateDiff(g,i)})}else typeof y=="object"&&this._updateDiff(y,i)}_updateDiff(y,i){try{this.style.setState(y,i)&&this._update(!0)}catch(u){l.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(y,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(y,i){return this._lazyInitEmptyStyle(),this.style.addSource(y,i),this._update(!0)}isSourceLoaded(y){const i=this.style&&this.style.sourceCaches[y];if(i!==void 0)return i.loaded();this.fire(new l.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const i=this.style.sourceCaches[y.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const u in this.style._layers){const f=this.style._layers[u];f.type==="hillshade"&&f.source===y.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new hp(this.painter,i,y),this.painter.renderToTexture=new $u(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==y.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:y})),this}getTerrain(){var y,i;return(i=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const i in y){const u=y[i]._tiles;for(const f in u){const g=u[f];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(y,i,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,i,u)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,i,u={}){const{pixelRatio:f=1,sdf:g=!1,stretchX:_,stretchY:C,content:T}=u;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||l.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:P,height:M,data:R}=i,L=i;return this.style.addImage(y,{data:new l.R({width:P,height:M},new Uint8Array(R)),pixelRatio:f,stretchX:_,stretchY:C,content:T,sdf:g,version:0,userImage:L}),L.onAdd&&L.onAdd(this,y),this}}{const{width:P,height:M,data:R}=l.h.getImageData(i);this.style.addImage(y,{data:new l.R({width:P,height:M},R),pixelRatio:f,stretchX:_,stretchY:C,content:T,sdf:g,version:0})}}updateImage(y,i){const u=this.style.getImage(y);if(!u)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=i instanceof HTMLImageElement||l.a(i)?l.h.getImageData(i):i,{width:g,height:_,data:C}=f;if(g===void 0||_===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==u.data.width||_!==u.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const T=!(i instanceof HTMLImageElement||l.a(i));return u.data.replace(C,T),this.style.updateImage(y,u),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,i){K.getImage(this._requestManager.transformRequest(y,N.Image),i)}listImages(){return this.style.listImages()}addLayer(y,i){return this._lazyInitEmptyStyle(),this.style.addLayer(y,i),this._update(!0)}moveLayer(y,i){return this.style.moveLayer(y,i),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,i,u){return this.style.setLayerZoomRange(y,i,u),this._update(!0)}setFilter(y,i,u={}){return this.style.setFilter(y,i,u),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,i,u,f={}){return this.style.setPaintProperty(y,i,u,f),this._update(!0)}getPaintProperty(y,i){return this.style.getPaintProperty(y,i)}setLayoutProperty(y,i,u,f={}){return this.style.setLayoutProperty(y,i,u,f),this._update(!0)}getLayoutProperty(y,i){return this.style.getLayoutProperty(y,i)}setGlyphs(y,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,i,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,i,u,f=>{f||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,i,u=>{u||this._update(!0)}),this}setLight(y,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,i){return this.style.setFeatureState(y,i),this._update()}removeFeatureState(y,i){return this.style.removeFeatureState(y,i),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,i=0;return this._container&&(y=this._container.clientWidth||400,i=this._container.clientHeight||300),[y,i]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const i=this._canvasContainer=b.create("div","maplibregl-canvas-container",y);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=b.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),f=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],f);const g=this._controlContainer=b.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{_[C]=b.create("div",`maplibregl-ctrl-${C} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=b.create("div","maplibregl-cooperative-gesture-screen",this._container);let y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${y}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){b.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,i,u){this._canvas.width=Math.floor(u*y),this._canvas.height=Math.floor(u*i),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{i={requestedAttributes:y},f&&(i.statusMessage=f.statusMessage,i.type=f.type)},{once:!0});const u=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!u){const f="Failed to initialize WebGL";throw i?(i.message=f,new Error(JSON.stringify(i))):new Error(f)}this.painter=new Eo(u,this.transform),A.testSupport(u)}_onCooperativeGesture(y,i,u){return!i&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,_=l.h.now();this.style.zoomHistory.update(g,_);const C=new l.a8(g,{now:_,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),T=C.crossFadingFactor();T===1&&T===this._crossFadingFactor||(u=!0,this._crossFadingFactor=T),this.style.update(C)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bg.mark(l.bh.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,l.bg.mark(l.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),K.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),b.remove(this._canvasContainer),b.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.bg.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.h.frame(y=>{l.bg.frame(y),this._frame=null,this._render(y)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return ft}getCameraTargetElevation(){return this.transform.elevation}},Jt.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const i=this._map.getZoom(),u=i===this._map.getMaxZoom(),f=i===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,u)=>{const f=this._map._getUIString(`NavigationControl.${u}`);i.title=f,i.setAttribute("aria-label",f)},this.options=l.e({},zh,y),this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),b.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),b.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=b.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Rh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,i){const u=b.create("button",y,this._container);return u.type="button",u.addEventListener("click",i),u}},Jt.GeolocateControl=class extends l.E{constructor(y){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const u=new l.L(i.coords.longitude,i.coords.latitude),f=i.coords.accuracy,g=this._map.getBearing(),_=l.e({bearing:g},this.options.fitBoundsOptions),C=Mt.fromLngLat(u,f);this._map.fitBounds(C,_,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const u=new l.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&xa)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=b.create("button","maplibregl-ctrl-geolocate",this._container),b.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ao({element:this._dotElement}),this._circleElement=b.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ao({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")))})}},this.options=l.e({},kn,y)}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,u=!1){Bn===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(f=>{Bn=f.state!=="denied",i(Bn)}).catch(()=>{Bn=!!window.navigator.geolocation,i(Bn)}):(Bn=!!window.navigator.geolocation,i(Bn)):i(Bn)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Cn=0,xa=!1}_isOutOfMapMaxBounds(y){const i=this._map.getMaxBounds(),u=y.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),i=y.getSouthEast(),u=y.getNorthEast(),f=i.distanceTo(u),g=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Cn--,xa=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Cn++,Cn>1?(y={maximumAge:6e5,timeout:0},xa=!0):(y=this.options.positionOptions,xa=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Jt.AttributionControl=hi,Jt.LogoControl=hn,Jt.ScaleControl=class{constructor(y){this._onMove=()=>{Ml(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Ml(this._map,this._container,this.options)},this.options=l.e({},Il,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Jt.FullscreenControl=class extends l.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){b.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=b.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);b.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Jt.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=y}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=b.create("button","maplibregl-ctrl-terrain",this._container),b.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){b.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Jt.Popup=class extends l.E{constructor(y){super(),this.remove=()=>(this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=b.create("div","maplibregl-popup",this._map.getContainer()),this._tip=b.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Lh(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const u=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let f=this.options.anchor;const g=wa(this.options.offset);if(!f){const C=this._container.offsetWidth,T=this._container.offsetHeight;let P;P=u.y+g.bottom.y<T?["top"]:u.y>this._map.transform.height-T?["bottom"]:[],u.x<C/2?P.push("left"):u.x>this._map.transform.width-C/2&&P.push("right"),f=P.length===0?"bottom":P.join("-")}const _=u.add(g[f]).round();b.setTransform(this._container,`${Di[f]} translate(${_.x}px,${_.y}px)`),dp(this._container,f,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(Oh),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=l.L.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const i=document.createDocumentFragment(),u=document.createElement("body");let f;for(u.innerHTML=y;f=u.firstChild,f;)i.appendChild(f);return this.setDOMContent(i)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=b.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Fh);y&&y.focus()}},Jt.Marker=Ao,Jt.Style=hr,Jt.LngLat=l.L,Jt.LngLatBounds=Mt,Jt.Point=l.P,Jt.MercatorCoordinate=l.U,Jt.Evented=l.E,Jt.AJAXError=l.bi,Jt.config=l.c,Jt.CanvasSource=ss,Jt.GeoJSONSource=Ci,Jt.ImageSource=Ur,Jt.RasterDEMTileSource=$r,Jt.RasterTileSource=lr,Jt.VectorTileSource=si,Jt.VideoSource=Ys,Jt.setRTLTextPlugin=l.bj,Jt.getRTLTextPluginStatus=l.bk,Jt.prewarm=function(){ji().acquire(Ke)},Jt.clearPrewarmedResources=function(){const y=En;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Ke),En=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Nh.extend(Jt,{isSafari:l.ac,getPerformanceMetrics:l.bg.getPerformanceMetrics}),Jt});var m=c;return m})})(iD);var BU=iD.exports;function VU({mapOptions:e,enable3D:t=!1,disableRotation:n=!1}){const[s,c]=ie.useState(null),[d,m]=ie.useState(!1);return ie.useEffect(()=>{const l=new BU.Map({container:"maplibre-gl-map",style:{version:8,sources:{},layers:[]},center:[0,0],zoom:1,attributionControl:!1,...e});c(l)},[]),ie.useEffect(()=>{s&&s.on("load",()=>{s.addSource("terrainSource",{type:"raster-dem",tiles:["https://vtc-cdn.maptoolkit.net/terrainrgb/{z}/{x}/{y}.webp"],encoding:"mapbox",maxzoom:14,minzoom:4}),m(!0)})},[s]),ie.useEffect(()=>{!s||!d||(t?s.setTerrain({source:"terrainSource",exaggeration:.6}):s.setTerrain())},[s,d,t]),ie.useEffect(()=>{!s||!n||(s.dragRotate.disable(),s.touchZoomRotate.disableRotation())},[s,n]),{map:s,isMapLoaded:d}}const $U={osm:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'Map tiles by <a target="_top" rel="noopener" href="https://tile.openstreetmap.org/">OpenStreetMap tile servers</a>, under the <a target="_top" rel="noopener" href="https://operations.osmfoundation.org/policies/tiles/">tile usage policy</a>. Data by <a target="_top" rel="noopener" href="http://openstreetmap.org">OpenStreetMap</a>'}},layers:[{id:"osm",type:"raster",source:"osm"}]},"osm-light":{version:8,sources:{"osm-light":{type:"raster",tiles:["https://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png","https://b.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png","https://c.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"],tileSize:256,attribution:"",maxzoom:18}},layers:[{id:"osm-light",type:"raster",source:"osm-light"}]},satellite:{version:8,sources:{satellite:{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:"",maxzoom:18}},layers:[{id:"satellite",type:"raster",source:"satellite"}]},topo:{version:8,sources:{topo:{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"],maxZoom:18}},layers:[{id:"topo",type:"raster",source:"topo"}]},hybrid:{version:8,sources:{hybrid:{type:"raster",tiles:["https://mt1.google.com/vt/lyrs=p&x={x}&y={y}&z={z}"],maxZoom:18}},layers:[{id:"hybrid",type:"raster",source:"hybrid"}]}};let gd={};function jU({map:e,baseLayers:t=$U,activeLayer:n="osm"}){const s=ie.useCallback(()=>{if(!(e!=null&&e.isStyleLoaded)||!e.getStyle())return;const{sources:c,layers:d}=e.getStyle();n in c||!(n in t)||(gd=c,d.forEach(m=>{gd[m.id]&&(gd[m.id].layer=m)}),e.setStyle(t[n]),Object.keys(gd).forEach(m=>{const{type:l,data:w,layer:b}=gd[m];!w||!b||(e.addSource(m,{type:l,data:w}),e.addLayer({id:m,...b}),e.off("style.load",s))}))},[e,t,n]);return ie.useEffect(()=>e?(e.once("style.load",s),()=>e.off("style.load",s)):()=>{},[e,n,t,s]),ie.useEffect(()=>{!e||!e.isStyleLoaded||s()},[e,n,s]),null}function UU(){const{map:e,isMapLoaded:t}=VU({mapOptions:{zoom:4,center:[80.0711,28.994],maxZoom:19}});return de(NU,{map:e,isMapLoaded:t,style:{width:"100%",height:"560px"},children:de(jU,{})})}function qU(){return de("main",{className:"contact naxatw-w-full",children:mt("div",{className:"naxatw-flex naxatw-flex-col md:naxatw-flex-row naxatw-container naxatw-py-6 md:naxatw-py-14 naxatw-gap-8",children:[de("div",{className:"naxatw-w-full md:naxatw-w-[55%]",children:de(OU,{})}),de("div",{className:"naxatw-w-full md:naxatw-w-[45%] naxatw-rounded-xl naxatw-overflow-hidden naxatw-border naxatw-border-primary",children:de(UU,{})})]})})}function GU(){return de(qU,{})}const ZU=[{path:"/",name:"Home ",component:MU,authenticated:!1},{path:"/notes",name:"Notes ",component:zU,authenticated:!1},{path:"/exam",name:"Exam ",component:LU,authenticated:!1},{path:"/contact",name:"Contact ",component:GU,authenticated:!1}],WU={showModal:!1,modalContent:null,showPromptDialog:!1,promptDialogContent:null,navbarToggled:!1},HU=(e,t)=>({...e,...t.payload}),KU=(e,t)=>({...e,showModal:!!t.payload,modalContent:t.payload||e.modalContent}),XU=(e,t)=>({...e,navbarToggled:t.payload}),YU=(e,t)=>({...e,modalContent:t.payload||null}),QU=(e,t)=>({...e,showPromptDialog:!!t.payload||!e.showPromptDialog,promptDialogContent:t.payload||e.promptDialogContent}),JU=(e,t)=>({...e,promptDialogContent:t.payload||null}),oD=Bw({name:"common",initialState:WU,reducers:{setCommonState:HU,toggleModal:KU,setModalContent:YU,setToggleNavbar:XU,togglePromptDialog:QU,setPromptDialogContent:JU}});Vk("common",[],oD.reducer);const{setCommonState:Q9,toggleModal:aD,setModalContent:e9,togglePromptDialog:t9,setToggleNavbar:ZT,setPromptDialogContent:n9}=oD.actions;function v0(e,t){return v0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,c){return s.__proto__=c,s},v0(e,t)}function lD(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,v0(e,t)}function r9(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function i9(e,t){e.classList?e.classList.add(t):r9(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function WT(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function s9(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=WT(e.className,t):e.setAttribute("class",WT(e.className&&e.className.baseVal||"",t))}const HT={disabled:!1},uD=dt.createContext(null);var cD=function(t){return t.scrollTop},Ed="unmounted",Ul="exited",ql="entering",nc="entered",_0="exiting",la=function(e){lD(t,e);function t(s,c){var d;d=e.call(this,s,c)||this;var m=c,l=m&&!m.isMounting?s.enter:s.appear,w;return d.appearStatus=null,s.in?l?(w=Ul,d.appearStatus=ql):w=nc:s.unmountOnExit||s.mountOnEnter?w=Ed:w=Ul,d.state={status:w},d.nextCallback=null,d}t.getDerivedStateFromProps=function(c,d){var m=c.in;return m&&d.status===Ed?{status:Ul}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(c){var d=null;if(c!==this.props){var m=this.state.status;this.props.in?m!==ql&&m!==nc&&(d=ql):(m===ql||m===nc)&&(d=_0)}this.updateStatus(!1,d)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var c=this.props.timeout,d,m,l;return d=m=l=c,c!=null&&typeof c!="number"&&(d=c.exit,m=c.enter,l=c.appear!==void 0?c.appear:m),{exit:d,enter:m,appear:l}},n.updateStatus=function(c,d){if(c===void 0&&(c=!1),d!==null)if(this.cancelNextCallback(),d===ql){if(this.props.unmountOnExit||this.props.mountOnEnter){var m=this.props.nodeRef?this.props.nodeRef.current:Jp.findDOMNode(this);m&&cD(m)}this.performEnter(c)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ul&&this.setState({status:Ed})},n.performEnter=function(c){var d=this,m=this.props.enter,l=this.context?this.context.isMounting:c,w=this.props.nodeRef?[l]:[Jp.findDOMNode(this),l],b=w[0],A=w[1],k=this.getTimeouts(),D=l?k.appear:k.enter;if(!c&&!m||HT.disabled){this.safeSetState({status:nc},function(){d.props.onEntered(b)});return}this.props.onEnter(b,A),this.safeSetState({status:ql},function(){d.props.onEntering(b,A),d.onTransitionEnd(D,function(){d.safeSetState({status:nc},function(){d.props.onEntered(b,A)})})})},n.performExit=function(){var c=this,d=this.props.exit,m=this.getTimeouts(),l=this.props.nodeRef?void 0:Jp.findDOMNode(this);if(!d||HT.disabled){this.safeSetState({status:Ul},function(){c.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:_0},function(){c.props.onExiting(l),c.onTransitionEnd(m.exit,function(){c.safeSetState({status:Ul},function(){c.props.onExited(l)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(c,d){d=this.setNextCallback(d),this.setState(c,d)},n.setNextCallback=function(c){var d=this,m=!0;return this.nextCallback=function(l){m&&(m=!1,d.nextCallback=null,c(l))},this.nextCallback.cancel=function(){m=!1},this.nextCallback},n.onTransitionEnd=function(c,d){this.setNextCallback(d);var m=this.props.nodeRef?this.props.nodeRef.current:Jp.findDOMNode(this),l=c==null&&!this.props.addEndListener;if(!m||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var w=this.props.nodeRef?[this.nextCallback]:[m,this.nextCallback],b=w[0],A=w[1];this.props.addEndListener(b,A)}c!=null&&setTimeout(this.nextCallback,c)},n.render=function(){var c=this.state.status;if(c===Ed)return null;var d=this.props,m=d.children;d.in,d.mountOnEnter,d.unmountOnExit,d.appear,d.enter,d.exit,d.timeout,d.addEndListener,d.onEnter,d.onEntering,d.onEntered,d.onExit,d.onExiting,d.onExited,d.nodeRef;var l=vw(d,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return dt.createElement(uD.Provider,{value:null},typeof m=="function"?m(c,l):dt.cloneElement(dt.Children.only(m),l))},t}(dt.Component);la.contextType=uD;la.propTypes={};function ec(){}la.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ec,onEntering:ec,onEntered:ec,onExit:ec,onExiting:ec,onExited:ec};la.UNMOUNTED=Ed;la.EXITED=Ul;la.ENTERING=ql;la.ENTERED=nc;la.EXITING=_0;const o9=la;var a9=function(t,n){return t&&n&&n.split(" ").forEach(function(s){return i9(t,s)})},N_=function(t,n){return t&&n&&n.split(" ").forEach(function(s){return s9(t,s)})},B1=function(e){lD(t,e);function t(){for(var s,c=arguments.length,d=new Array(c),m=0;m<c;m++)d[m]=arguments[m];return s=e.call.apply(e,[this].concat(d))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(l,w){var b=s.resolveArguments(l,w),A=b[0],k=b[1];s.removeClasses(A,"exit"),s.addClass(A,k?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(l,w)},s.onEntering=function(l,w){var b=s.resolveArguments(l,w),A=b[0],k=b[1],D=k?"appear":"enter";s.addClass(A,D,"active"),s.props.onEntering&&s.props.onEntering(l,w)},s.onEntered=function(l,w){var b=s.resolveArguments(l,w),A=b[0],k=b[1],D=k?"appear":"enter";s.removeClasses(A,D),s.addClass(A,D,"done"),s.props.onEntered&&s.props.onEntered(l,w)},s.onExit=function(l){var w=s.resolveArguments(l),b=w[0];s.removeClasses(b,"appear"),s.removeClasses(b,"enter"),s.addClass(b,"exit","base"),s.props.onExit&&s.props.onExit(l)},s.onExiting=function(l){var w=s.resolveArguments(l),b=w[0];s.addClass(b,"exit","active"),s.props.onExiting&&s.props.onExiting(l)},s.onExited=function(l){var w=s.resolveArguments(l),b=w[0];s.removeClasses(b,"exit"),s.addClass(b,"exit","done"),s.props.onExited&&s.props.onExited(l)},s.resolveArguments=function(l,w){return s.props.nodeRef?[s.props.nodeRef.current,l]:[l,w]},s.getClassNames=function(l){var w=s.props.classNames,b=typeof w=="string",A=b&&w?w+"-":"",k=b?""+A+l:w[l],D=b?k+"-active":w[l+"Active"],B=b?k+"-done":w[l+"Done"];return{baseClassName:k,activeClassName:D,doneClassName:B}},s}var n=t.prototype;return n.addClass=function(c,d,m){var l=this.getClassNames(d)[m+"ClassName"],w=this.getClassNames("enter"),b=w.doneClassName;d==="appear"&&m==="done"&&b&&(l+=" "+b),m==="active"&&c&&cD(c),l&&(this.appliedClasses[d][m]=l,a9(c,l))},n.removeClasses=function(c,d){var m=this.appliedClasses[d],l=m.base,w=m.active,b=m.done;this.appliedClasses[d]={},l&&N_(c,l),w&&N_(c,w),b&&N_(c,b)},n.render=function(){var c=this.props;c.classNames;var d=vw(c,["classNames"]);return dt.createElement(o9,uu({},d,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(dt.Component);B1.defaultProps={classNames:""};B1.propTypes={};const l9=B1;function hD({title:e,subtitle:t,show:n,onClose:s,children:c,className:d,headerContent:m,zIndex:l=1111,hideCloseButton:w}){const b=ie.useRef(null);return de(l9,{nodeRef:b,in:n,timeout:150,unmountOnExit:!0,classNames:{enter:"naxatw-opacity-0 naxatw-scale-95",enterActive:"naxatw-opacity-100 naxatw-scale-100 naxatw-transition-all naxatw-ease-in naxatw-duration-150",enterDone:"naxatw-opacity-100 naxatw-scale-100",exit:"naxatw-opacity-50 naxatw-scale-75 naxatw-transition-all naxatw-ease-out naxatw-duration-150",exitActive:"naxatw-opacity-0 naxatw-scale-50"},children:de("div",{tabIndex:-1,className:` naxatw-h-modal naxatw-fixed naxatw-inset-0 naxatw-z-[11111] naxatw-flex 
          naxatw-h-screen naxatw-w-screen naxatw-justify-center naxatw-overflow-y-auto naxatw-overflow-x-hidden
          naxatw-bg-black naxatw-bg-opacity-30 naxatw-p-4 md:naxatw-inset-0 md:naxatw-h-full
      `,style:{zIndex:l},children:de("div",{ref:b,className:"naxatw-fixed naxatw-inset-0 naxatw-overflow-y-auto",children:de("div",{className:`naxatw-flex naxatw-min-h-full naxatw-items-center 
            naxatw-justify-center naxatw-p-4`,children:de("div",{className:`naxatw-relative naxatw-flex naxatw-h-full naxatw-w-full
              naxatw-max-w-2xl naxatw-flex-col naxatw-items-center naxatw-justify-center md:naxatw-h-auto`,children:mt("div",{className:`naxatw-relative naxatw-max-h-[calc(100vh-4rem)] naxatw-w-[42rem] naxatw-overflow-hidden
                   naxatw-rounded-[20px] naxatw-bg-white naxatw-shadow ${d}`,children:[mt("div",{className:`naxatw-flex naxatw-items-start naxatw-justify-between
                    naxatw-rounded-t-[20px] naxatw-px-7 naxatw-py-5`,children:[m||mt("div",{className:"naxatw-space-y-1",children:[de("h3",{className:"naxatw-font-bold ",children:e}),de("p",{className:"naxatw-text-body-lg",children:t})]}),!w&&mt("button",{type:"button",className:`naxatw-ml-auto naxatw-inline-flex naxatw-items-center 
                      naxatw-rounded-lg naxatw-bg-transparent naxatw-p-1.5 naxatw-text-sm
                      naxatw-text-grey-800 hover:naxatw-bg-grey-200 hover:naxatw-text-grey-900`,onClick:s,children:[de("i",{className:"material-icons",children:"close"}),de("span",{className:"naxatw-sr-only",children:"Close modal"})]})]}),de("div",{className:"naxatw-flex",children:de("div",{className:`scrollbar naxatw-max-h-[calc(100vh-10rem)] naxatw-grow naxatw-overflow-y-auto
                      naxatw-px-10 naxatw-pb-5`,children:c})})]})})})})})})}function u9({title:e="",show:t=!1,onClose:n=()=>{},children:s}){return de(hD,{show:t,title:e,onClose:n,zIndex:111111,children:s})}const KT=[{label:"Home",path:"/"},{label:"Notes",path:"/notes"},{label:"Exams",path:"/exam"},{label:"Contact",path:"/contact"}];function c9(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function h9(...e){return t=>e.forEach(n=>c9(n,t))}const dD=ie.forwardRef((e,t)=>{const{children:n,...s}=e,c=ie.Children.toArray(n),d=c.find(f9);if(d){const m=d.props.children,l=c.map(w=>w===d?ie.Children.count(m)>1?ie.Children.only(null):ie.isValidElement(m)?m.props.children:null:w);return ie.createElement(x0,uu({},s,{ref:t}),ie.isValidElement(m)?ie.cloneElement(m,void 0,l):null)}return ie.createElement(x0,uu({},s,{ref:t}),n)});dD.displayName="Slot";const x0=ie.forwardRef((e,t)=>{const{children:n,...s}=e;return ie.isValidElement(n)?ie.cloneElement(n,{...p9(s,n.props),ref:t?h9(t,n.ref):n.ref}):ie.Children.count(n)>1?ie.Children.only(null):null});x0.displayName="SlotClone";const d9=({children:e})=>ie.createElement(ie.Fragment,null,e);function f9(e){return ie.isValidElement(e)&&e.type===d9}function p9(e,t){const n={...t};for(const s in t){const c=e[s],d=t[s];/^on[A-Z]/.test(s)?c&&d?n[s]=(...l)=>{d(...l),c(...l)}:c&&(n[s]=c):s==="style"?n[s]={...c,...d}:s==="className"&&(n[s]=[c,d].filter(Boolean).join(" "))}return{...e,...n}}function fD(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=fD(e[t]))&&(s&&(s+=" "),s+=n);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function m9(){for(var e,t,n=0,s="";n<arguments.length;)(e=arguments[n++])&&(t=fD(e))&&(s&&(s+=" "),s+=t);return s}const XT=e=>typeof e=="boolean"?"".concat(e):e===0?"0":e,YT=m9,g9=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return YT(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:c,defaultVariants:d}=t,m=Object.keys(c).map(b=>{const A=n==null?void 0:n[b],k=d==null?void 0:d[b];if(A===null)return null;const D=XT(A)||XT(k);return c[b][D]}),l=n&&Object.entries(n).reduce((b,A)=>{let[k,D]=A;return D===void 0||(b[k]=D),b},{}),w=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((b,A)=>{let{class:k,className:D,...B}=A;return Object.entries(B).every(q=>{let[Z,K]=q;return Array.isArray(K)?K.includes({...d,...l}[Z]):{...d,...l}[Z]===K})?[...b,k,D]:b},[]);return YT(e,m,w,n==null?void 0:n.class,n==null?void 0:n.className)};function y9({className:e}){return de("div",{role:"status",className:"naxatw-flex naxatw-items-center",children:mt("svg",{"aria-hidden":"true",className:`naxatw-h-[24px] naxatw-w-[24px] naxatw-animate-spin ${e}`,viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[de("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),de("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]},e)})}const v9=g9(`naxatw-inline-flex naxatw-items-center naxatw-justify-center naxatw-rounded-md naxatw-text-sm 
  naxatw-font-bold naxatw-transition-colors focus-visible:naxatw-outline-none focus-visible:naxatw-ring-2 
  focus-visible:ring-ring focus-visible:naxatw-ring-offset-2 disabled:naxatw-opacity-50 disabled:naxatw-pointer-events-none`,{variants:{variant:{default:"naxatw-bg-primary naxatw-text-white hover:naxatw-shadow-top hover:naxatw-shadow-primary",destructive:"naxatw-bg-red-500 naxatw-text-white hover:naxatw-shadow-top hover:naxatw-shadow-red-500",outline:`naxatw-border naxatw-text-primary naxatw-border- hover:naxatw-bg-primary hover:naxatw-text-white naxatw-border-input 
        hover:naxatw-shadow-top naxatw-bg-white`,secondary:"naxatw-bg-white naxatw-text-primary naxatw-border naxatw-border-primary hover:naxatw-shadow-top",ghost:"naxatw-text-primary naxatw-font-bold disabled:naxatw-text-grey-600 hover:naxatw-text-red-500",link:`naxatw-text-primary naxatw-font-bold naxatw-underline-offset-4 naxatw-underline hover:naxatw-no-underline
         naxatw-text-primarycolor hover:naxatw-shadow hover:naxatw-shadow-primary`},size:{default:"naxatw-h-9 naxatw-py-2 naxatw-px-3",sm:"naxatw-h-7 naxatw-px-2 naxatw-rounded-lg",lg:"naxatw-h-11 naxatw-px-8 naxatw-rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),pD=ie.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...c},d)=>de(s?dD:"button",{className:fl(v9({variant:t,size:n,className:e})),ref:d,...c}));pD.displayName="Button";function Sg({leftIcon:e,rightIcon:t,children:n,iconClassname:s,withLoader:c,isLoading:d,className:m,...l}){return mt(pD,{...l,className:`naxatw-flex naxatw-items-center naxatw-gap-1 ${m}`,children:[e&&de($i,{className:`${s} !naxatw-text-icon-sm`,name:e}),n,t&&de($i,{className:`${s} !naxatw-text-icon-sm`,name:t}),c&&d&&de(y9,{className:"naxatw-fill-primary-500"})]})}const _9=({subLinks:e})=>{var s;const[t,n]=ie.useState(!1);return mt("div",{className:"naxatw-border-b naxatw-border-solid naxatw-border-b-[#D9D9D9]",children:[mt("div",{className:"naxatw-flex naxatw-items-center naxatw-justify-between naxatw-gap-1",onClick:()=>n(!t),children:[de("p",{className:"naxatw-py-3 naxatw-text-2xl naxatw-font-medium naxatw-capitalize",children:e.label}),de($i,{name:t?"keyboard_arrow_up":"keyboard_arrow_down",className:"custom-btn-transition naxatw-h-4 !naxatw-text-2xl naxatw-text-[#131417]"})]}),de("div",{className:`common-btn-transition naxatw-flex naxatw-flex-col naxatw-gap-4 naxatw-overflow-hidden naxatw-px-4  ${t?"naxatw-pointer-events-auto naxatw-h-[245px]  naxatw-pt-3":"naxatw-pointer-events-none naxatw-h-0"} `,children:(s=e==null?void 0:e.children)==null?void 0:s.map(c=>mt(Pw,{to:c.link,className:"naxatw-flex naxatw-cursor-pointer naxatw-items-center naxatw-gap-5",children:[de("div",{className:"icon-container naxatw-h-9 naxatw-w-9 naxatw-rounded-lg naxatw-bg-[#cde5fd80] naxatw-p-2",children:de("img",{src:c.icon,alt:c.label})}),de("p",{className:"naxatw-text-lg naxatw-font-medium naxatw-leading-6 naxatw-tracking-[-0.0225rem]",children:c.label})]},c.id))})]})},x9=({navItems:e,mobileViewNavRef:t})=>{const n=OA(),s=Sd(d=>d.common.navbarToggled);return mt("div",{className:"mobile-view-navbar",children:[de("button",{type:"button",onClick:()=>{var d,m,l,w;s?(document.body.style.overflow="auto",(m=(d=t==null?void 0:t.current)==null?void 0:d.classList)==null||m.remove("nav-open")):(document.body.style.overflow="hidden",(w=(l=t==null?void 0:t.current)==null?void 0:l.classList)==null||w.add("nav-open")),n(ZT(!s))},className:"md:naxatw-hidden",children:s?de("div",{className:"close-btn naxatw-mt-2 naxatw-flex naxatw-cursor-pointer naxatw-items-center",children:de($i,{name:"close",className:"naxatw-text-white naxatw-text-2xl"})}):de("div",{className:"naxatw-flex naxatw-mt-2 naxatw-cursor-pointer naxatw-items-center",children:de($i,{name:"menu",className:"naxatw-text-white naxatw-text-2xl"})})}),s&&de("nav",{className:"primary-navigation naxatw-fixed naxatw-inset-x-0 naxatw-bottom-0 naxatw-top-[70px] naxatw-z-[99] naxatw-block naxatw-bg-[#FBF8F3] md:naxatw-hidden",ref:t,children:mt("div",{className:"naxatw-flex naxatw-h-full naxatw-flex-col",children:[de("div",{className:"naxatw-flex naxatw-flex-1 naxatw-flex-col naxatw-px-4 naxatw-pt-5",children:e==null?void 0:e.map(d=>d!=null&&d.children?de(_9,{subLinks:d},d.id):de(Pw,{to:d.path,onClick:()=>n(ZT(!1)),children:de("p",{className:"naxatw-border-b naxatw-border-solid naxatw-border-b-[#D9D9D9] naxatw-py-3 naxatw-text-2xl naxatw-font-medium naxatw-capitalize",children:d.label})},d.path))}),mt("p",{className:"naxatw-border-t naxatw-border-solid naxatw-border-t-[#EDEDED] naxatw-py-6 naxatw-text-center naxatw-text-base naxatw-leading-[1.575rem] naxatw-tracking-[-0.00563rem] naxatw-text-[#000]",children:["© GeoSewa ",new Date().getFullYear(),". All Rights Reserved."]})]})})]})};function w9(){const e=Gk(),t=Ew(),n=ie.useRef(null);return de("nav",{className:"naxatw-bg-primary naxatw-sticky naxatw-top-0 naxatw-z-10",children:de("nav",{className:"naxatw-container naxatw-py-3",children:mt(Fi,{className:"naxatw-items-center naxatw-justify-between",children:[mt(Fi,{className:"naxatw-text-white naxatw-items-center",gap:2,children:[de($i,{name:"public"}),de("div",{className:"naxatw-cursor-pointer",role:"presentation",onClick:()=>t("/"),children:de("h3",{className:"naxatw-text-white naxatw-font-medium",children:"GeoSewa"})})]}),de(Fi,{className:"naxatw-hidden md:naxatw-flex naxatw-gap-4 naxatw-mt-1 naxatw-text-white",children:KT.map(s=>de(Pw,{to:s.path,className:({isActive:c})=>`${c&&"naxatw-text-red-500"} naxatw-px-3 naxatw-py-2 naxatw-tracking-wide naxatw-text-[1rem] hover:naxatw-text-red-500`,children:s.label},s.path))}),mt(Fi,{className:"naxatw-hidden md:naxatw-flex naxatw-items-center",gap:2,children:[de(Sg,{variant:"outline",className:"naxatw-w-24 naxatw-text-body-lg",onClick:()=>e(aD("login")),children:"Login"}),de(Sg,{variant:"default",className:"naxatw-w-24 naxatw-border !naxatw-border-white naxatw-text-body-lg hover:naxatw-bg-white hover:naxatw-text-primary",children:"Sign Up"})]}),de(x9,{navItems:KT,mobileViewNavRef:n})]})})})}const b9=""+new URL("person-91e21707.svg",import.meta.url).href,S9=""+new URL("google-icon-c1d0def9.svg",import.meta.url).href;var Pf=e=>e.type==="checkbox",xc=e=>e instanceof Date,vi=e=>e==null;const mD=e=>typeof e=="object";var vr=e=>!vi(e)&&!Array.isArray(e)&&mD(e)&&!xc(e),C9=e=>vr(e)&&e.target?Pf(e.target)?e.target.checked:e.target.value:e,T9=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,E9=(e,t)=>e.has(T9(t)),P9=e=>{const t=e.constructor&&e.constructor.prototype;return vr(t)&&t.hasOwnProperty("isPrototypeOf")},V1=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ys(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(V1&&(e instanceof Blob||e instanceof FileList))&&(n||vr(e)))if(t=n?[]:{},!n&&!P9(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=ys(e[s]));else return e;return t}var Af=e=>Array.isArray(e)?e.filter(Boolean):[],or=e=>e===void 0,wt=(e,t,n)=>{if(!t||!vr(e))return n;const s=Af(t.split(/[,[\].]+?/)).reduce((c,d)=>vi(c)?c:c[d],e);return or(s)||s===e?or(e[t])?n:e[t]:s},jo=e=>typeof e=="boolean";const QT={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Zs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Bo={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};dt.createContext(null);var A9=(e,t,n,s=!0)=>{const c={defaultValues:t._defaultValues};for(const d in e)Object.defineProperty(c,d,{get:()=>{const m=d;return t._proxyFormState[m]!==Zs.all&&(t._proxyFormState[m]=!s||Zs.all),n&&(n[m]=!0),e[m]}});return c},Hi=e=>vr(e)&&!Object.keys(e).length,k9=(e,t,n,s)=>{n(e);const{name:c,...d}=e;return Hi(d)||Object.keys(d).length>=Object.keys(t).length||Object.keys(d).find(m=>t[m]===(!s||Zs.all))},B_=e=>Array.isArray(e)?e:[e];function I9(e){const t=dt.useRef(e);t.current=e,dt.useEffect(()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}},[e.disabled])}var po=e=>typeof e=="string",M9=(e,t,n,s,c)=>po(e)?(s&&t.watch.add(e),wt(n,e,c)):Array.isArray(e)?e.map(d=>(s&&t.watch.add(d),wt(n,d))):(s&&(t.watchAll=!0),n),$1=e=>/^\w*$/.test(e),gD=e=>Af(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Dn=(e,t,n)=>{let s=-1;const c=$1(t)?[t]:gD(t),d=c.length,m=d-1;for(;++s<d;){const l=c[s];let w=n;if(s!==m){const b=e[l];w=vr(b)||Array.isArray(b)?b:isNaN(+c[s+1])?{}:[]}e[l]=w,e=e[l]}return e},D9=(e,t,n,s,c)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[s]:c||!0}}:{},JT=e=>({isOnSubmit:!e||e===Zs.onSubmit,isOnBlur:e===Zs.onBlur,isOnChange:e===Zs.onChange,isOnAll:e===Zs.all,isOnTouch:e===Zs.onTouched}),eE=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const $d=(e,t,n,s)=>{for(const c of n||Object.keys(e)){const d=wt(e,c);if(d){const{_f:m,...l}=d;if(m){if(m.refs&&m.refs[0]&&t(m.refs[0],c)&&!s)break;if(m.ref&&t(m.ref,m.name)&&!s)break;$d(l,t)}else vr(l)&&$d(l,t)}}};var z9=(e,t,n)=>{const s=Af(wt(e,n));return Dn(s,"root",t[n]),Dn(e,n,s),e},j1=e=>e.type==="file",qa=e=>typeof e=="function",Cg=e=>{if(!V1)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Dm=e=>po(e),U1=e=>e.type==="radio",Tg=e=>e instanceof RegExp;const tE={value:!1,isValid:!1},nE={value:!0,isValid:!0};var yD=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!or(e[0].attributes.value)?or(e[0].value)||e[0].value===""?nE:{value:e[0].value,isValid:!0}:nE:tE}return tE};const rE={isValid:!1,value:null};var vD=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,rE):rE;function iE(e,t,n="validate"){if(Dm(e)||Array.isArray(e)&&e.every(Dm)||jo(e)&&!e)return{type:n,message:Dm(e)?e:"",ref:t}}var tc=e=>vr(e)&&!Tg(e)?e:{value:e,message:""},sE=async(e,t,n,s,c)=>{const{ref:d,refs:m,required:l,maxLength:w,minLength:b,min:A,max:k,pattern:D,validate:B,name:q,valueAsNumber:Z,mount:K,disabled:N}=e._f,F=wt(t,q);if(!K||N)return{};const H=m?m[0]:d,te=Ue=>{s&&H.reportValidity&&(H.setCustomValidity(jo(Ue)?"":Ue||""),H.reportValidity())},me={},Se=U1(d),Ie=Pf(d),Ce=Se||Ie,Ge=(Z||j1(d))&&or(d.value)&&or(F)||Cg(d)&&d.value===""||F===""||Array.isArray(F)&&!F.length,Le=D9.bind(null,q,n,me),Tt=(Ue,gt,_t,Lt=Bo.maxLength,zt=Bo.minLength)=>{const bt=Ue?gt:_t;me[q]={type:Ue?Lt:zt,message:bt,ref:d,...Le(Ue?Lt:zt,bt)}};if(c?!Array.isArray(F)||!F.length:l&&(!Ce&&(Ge||vi(F))||jo(F)&&!F||Ie&&!yD(m).isValid||Se&&!vD(m).isValid)){const{value:Ue,message:gt}=Dm(l)?{value:!!l,message:l}:tc(l);if(Ue&&(me[q]={type:Bo.required,message:gt,ref:H,...Le(Bo.required,gt)},!n))return te(gt),me}if(!Ge&&(!vi(A)||!vi(k))){let Ue,gt;const _t=tc(k),Lt=tc(A);if(!vi(F)&&!isNaN(F)){const zt=d.valueAsNumber||F&&+F;vi(_t.value)||(Ue=zt>_t.value),vi(Lt.value)||(gt=zt<Lt.value)}else{const zt=d.valueAsDate||new Date(F),bt=Et=>new Date(new Date().toDateString()+" "+Et),$e=d.type=="time",ut=d.type=="week";po(_t.value)&&F&&(Ue=$e?bt(F)>bt(_t.value):ut?F>_t.value:zt>new Date(_t.value)),po(Lt.value)&&F&&(gt=$e?bt(F)<bt(Lt.value):ut?F<Lt.value:zt<new Date(Lt.value))}if((Ue||gt)&&(Tt(!!Ue,_t.message,Lt.message,Bo.max,Bo.min),!n))return te(me[q].message),me}if((w||b)&&!Ge&&(po(F)||c&&Array.isArray(F))){const Ue=tc(w),gt=tc(b),_t=!vi(Ue.value)&&F.length>+Ue.value,Lt=!vi(gt.value)&&F.length<+gt.value;if((_t||Lt)&&(Tt(_t,Ue.message,gt.message),!n))return te(me[q].message),me}if(D&&!Ge&&po(F)){const{value:Ue,message:gt}=tc(D);if(Tg(Ue)&&!F.match(Ue)&&(me[q]={type:Bo.pattern,message:gt,ref:d,...Le(Bo.pattern,gt)},!n))return te(gt),me}if(B){if(qa(B)){const Ue=await B(F,t),gt=iE(Ue,H);if(gt&&(me[q]={...gt,...Le(Bo.validate,gt.message)},!n))return te(gt.message),me}else if(vr(B)){let Ue={};for(const gt in B){if(!Hi(Ue)&&!n)break;const _t=iE(await B[gt](F,t),H,gt);_t&&(Ue={..._t,...Le(gt,_t.message)},te(_t.message),n&&(me[q]=Ue))}if(!Hi(Ue)&&(me[q]={ref:H,...Ue},!n))return me}}return te(!0),me};function R9(e,t){const n=t.slice(0,-1).length;let s=0;for(;s<n;)e=or(e)?s++:e[t[s++]];return e}function L9(e){for(const t in e)if(e.hasOwnProperty(t)&&!or(e[t]))return!1;return!0}function mr(e,t){const n=Array.isArray(t)?t:$1(t)?[t]:gD(t),s=n.length===1?e:R9(e,n),c=n.length-1,d=n[c];return s&&delete s[d],c!==0&&(vr(s)&&Hi(s)||Array.isArray(s)&&L9(s))&&mr(e,n.slice(0,-1)),e}var V_=()=>{let e=[];return{get observers(){return e},next:c=>{for(const d of e)d.next&&d.next(c)},subscribe:c=>(e.push(c),{unsubscribe:()=>{e=e.filter(d=>d!==c)}}),unsubscribe:()=>{e=[]}}},Eg=e=>vi(e)||!mD(e);function eu(e,t){if(Eg(e)||Eg(t))return e===t;if(xc(e)&&xc(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(const c of n){const d=e[c];if(!s.includes(c))return!1;if(c!=="ref"){const m=t[c];if(xc(d)&&xc(m)||vr(d)&&vr(m)||Array.isArray(d)&&Array.isArray(m)?!eu(d,m):d!==m)return!1}}return!0}var _D=e=>e.type==="select-multiple",O9=e=>U1(e)||Pf(e),$_=e=>Cg(e)&&e.isConnected,xD=e=>{for(const t in e)if(qa(e[t]))return!0;return!1};function Pg(e,t={}){const n=Array.isArray(e);if(vr(e)||n)for(const s in e)Array.isArray(e[s])||vr(e[s])&&!xD(e[s])?(t[s]=Array.isArray(e[s])?[]:{},Pg(e[s],t[s])):vi(e[s])||(t[s]=!0);return t}function wD(e,t,n){const s=Array.isArray(e);if(vr(e)||s)for(const c in e)Array.isArray(e[c])||vr(e[c])&&!xD(e[c])?or(t)||Eg(n[c])?n[c]=Array.isArray(e[c])?Pg(e[c],[]):{...Pg(e[c])}:wD(e[c],vi(t)?{}:t[c],n[c]):n[c]=!eu(e[c],t[c]);return n}var am=(e,t)=>wD(e,t,Pg(t)),bD=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:s})=>or(e)?e:t?e===""?NaN:e&&+e:n&&po(e)?new Date(e):s?s(e):e;function j_(e){const t=e.ref;if(!(e.refs?e.refs.every(n=>n.disabled):t.disabled))return j1(t)?t.files:U1(t)?vD(e.refs).value:_D(t)?[...t.selectedOptions].map(({value:n})=>n):Pf(t)?yD(e.refs).value:bD(or(t.value)?e.ref.value:t.value,e)}var F9=(e,t,n,s)=>{const c={};for(const d of e){const m=wt(t,d);m&&Dn(c,d,m._f)}return{criteriaMode:n,names:[...e],fields:c,shouldUseNativeValidation:s}},yd=e=>or(e)?e:Tg(e)?e.source:vr(e)?Tg(e.value)?e.value.source:e.value:e,N9=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function oE(e,t,n){const s=wt(e,n);if(s||$1(n))return{error:s,name:n};const c=n.split(".");for(;c.length;){const d=c.join("."),m=wt(t,d),l=wt(e,d);if(m&&!Array.isArray(m)&&n!==d)return{name:n};if(l&&l.type)return{name:d,error:l};c.pop()}return{name:n}}var B9=(e,t,n,s,c)=>c.isOnAll?!1:!n&&c.isOnTouch?!(t||e):(n?s.isOnBlur:c.isOnBlur)?!e:(n?s.isOnChange:c.isOnChange)?e:!0,V9=(e,t)=>!Af(wt(e,t)).length&&mr(e,t);const $9={mode:Zs.onSubmit,reValidateMode:Zs.onChange,shouldFocusError:!0};function j9(e={}){let t={...$9,...e},n={submitCount:0,isDirty:!1,isLoading:qa(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},c=vr(t.defaultValues)||vr(t.values)?ys(t.defaultValues||t.values)||{}:{},d=t.shouldUnregister?{}:ys(c),m={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},w,b=0;const A={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},k={values:V_(),array:V_(),state:V_()},D=JT(t.mode),B=JT(t.reValidateMode),q=t.criteriaMode===Zs.all,Z=ge=>ke=>{clearTimeout(b),b=setTimeout(ge,ke)},K=async ge=>{if(A.isValid||ge){const ke=t.resolver?Hi((await Ce()).errors):await Le(s,!0);ke!==n.isValid&&k.state.next({isValid:ke})}},N=(ge,ke)=>{(A.isValidating||A.validatingFields)&&((ge||Array.from(l.mount)).forEach(le=>{le&&(ke?Dn(n.validatingFields,le,ke):mr(n.validatingFields,le))}),k.state.next({validatingFields:n.validatingFields,isValidating:!Hi(n.validatingFields)}))},F=(ge,ke=[],le,et,Ye=!0,Ne=!0)=>{if(et&&le){if(m.action=!0,Ne&&Array.isArray(wt(s,ge))){const Ke=le(wt(s,ge),et.argA,et.argB);Ye&&Dn(s,ge,Ke)}if(Ne&&Array.isArray(wt(n.errors,ge))){const Ke=le(wt(n.errors,ge),et.argA,et.argB);Ye&&Dn(n.errors,ge,Ke),V9(n.errors,ge)}if(A.touchedFields&&Ne&&Array.isArray(wt(n.touchedFields,ge))){const Ke=le(wt(n.touchedFields,ge),et.argA,et.argB);Ye&&Dn(n.touchedFields,ge,Ke)}A.dirtyFields&&(n.dirtyFields=am(c,d)),k.state.next({name:ge,isDirty:Ue(ge,ke),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Dn(d,ge,ke)},H=(ge,ke)=>{Dn(n.errors,ge,ke),k.state.next({errors:n.errors})},te=ge=>{n.errors=ge,k.state.next({errors:n.errors,isValid:!1})},me=(ge,ke,le,et)=>{const Ye=wt(s,ge);if(Ye){const Ne=wt(d,ge,or(le)?wt(c,ge):le);or(Ne)||et&&et.defaultChecked||ke?Dn(d,ge,ke?Ne:j_(Ye._f)):Lt(ge,Ne),m.mount&&K()}},Se=(ge,ke,le,et,Ye)=>{let Ne=!1,Ke=!1;const Bt={name:ge},yn=!!(wt(s,ge)&&wt(s,ge)._f.disabled);if(!le||et){A.isDirty&&(Ke=n.isDirty,n.isDirty=Bt.isDirty=Ue(),Ne=Ke!==Bt.isDirty);const En=yn||eu(wt(c,ge),ke);Ke=!!(!yn&&wt(n.dirtyFields,ge)),En||yn?mr(n.dirtyFields,ge):Dn(n.dirtyFields,ge,!0),Bt.dirtyFields=n.dirtyFields,Ne=Ne||A.dirtyFields&&Ke!==!En}if(le){const En=wt(n.touchedFields,ge);En||(Dn(n.touchedFields,ge,le),Bt.touchedFields=n.touchedFields,Ne=Ne||A.touchedFields&&En!==le)}return Ne&&Ye&&k.state.next(Bt),Ne?Bt:{}},Ie=(ge,ke,le,et)=>{const Ye=wt(n.errors,ge),Ne=A.isValid&&jo(ke)&&n.isValid!==ke;if(e.delayError&&le?(w=Z(()=>H(ge,le)),w(e.delayError)):(clearTimeout(b),w=null,le?Dn(n.errors,ge,le):mr(n.errors,ge)),(le?!eu(Ye,le):Ye)||!Hi(et)||Ne){const Ke={...et,...Ne&&jo(ke)?{isValid:ke}:{},errors:n.errors,name:ge};n={...n,...Ke},k.state.next(Ke)}},Ce=async ge=>{N(ge,!0);const ke=await t.resolver(d,t.context,F9(ge||l.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return N(ge),ke},Ge=async ge=>{const{errors:ke}=await Ce(ge);if(ge)for(const le of ge){const et=wt(ke,le);et?Dn(n.errors,le,et):mr(n.errors,le)}else n.errors=ke;return ke},Le=async(ge,ke,le={valid:!0})=>{for(const et in ge){const Ye=ge[et];if(Ye){const{_f:Ne,...Ke}=Ye;if(Ne){const Bt=l.array.has(Ne.name);N([et],!0);const yn=await sE(Ye,d,q,t.shouldUseNativeValidation&&!ke,Bt);if(N([et]),yn[Ne.name]&&(le.valid=!1,ke))break;!ke&&(wt(yn,Ne.name)?Bt?z9(n.errors,yn,Ne.name):Dn(n.errors,Ne.name,yn[Ne.name]):mr(n.errors,Ne.name))}Ke&&await Le(Ke,ke,le)}}return le.valid},Tt=()=>{for(const ge of l.unMount){const ke=wt(s,ge);ke&&(ke._f.refs?ke._f.refs.every(le=>!$_(le)):!$_(ke._f.ref))&&lr(ge)}l.unMount=new Set},Ue=(ge,ke)=>(ge&&ke&&Dn(d,ge,ke),!eu(Wt(),c)),gt=(ge,ke,le)=>M9(ge,l,{...m.mount?d:or(ke)?c:po(ge)?{[ge]:ke}:ke},le,ke),_t=ge=>Af(wt(m.mount?d:c,ge,e.shouldUnregister?wt(c,ge,[]):[])),Lt=(ge,ke,le={})=>{const et=wt(s,ge);let Ye=ke;if(et){const Ne=et._f;Ne&&(!Ne.disabled&&Dn(d,ge,bD(ke,Ne)),Ye=Cg(Ne.ref)&&vi(ke)?"":ke,_D(Ne.ref)?[...Ne.ref.options].forEach(Ke=>Ke.selected=Ye.includes(Ke.value)):Ne.refs?Pf(Ne.ref)?Ne.refs.length>1?Ne.refs.forEach(Ke=>(!Ke.defaultChecked||!Ke.disabled)&&(Ke.checked=Array.isArray(Ye)?!!Ye.find(Bt=>Bt===Ke.value):Ye===Ke.value)):Ne.refs[0]&&(Ne.refs[0].checked=!!Ye):Ne.refs.forEach(Ke=>Ke.checked=Ke.value===Ye):j1(Ne.ref)?Ne.ref.value="":(Ne.ref.value=Ye,Ne.ref.type||k.values.next({name:ge,values:{...d}})))}(le.shouldDirty||le.shouldTouch)&&Se(ge,Ye,le.shouldTouch,le.shouldDirty,!0),le.shouldValidate&&Et(ge)},zt=(ge,ke,le)=>{for(const et in ke){const Ye=ke[et],Ne=`${ge}.${et}`,Ke=wt(s,Ne);(l.array.has(ge)||!Eg(Ye)||Ke&&!Ke._f)&&!xc(Ye)?zt(Ne,Ye,le):Lt(Ne,Ye,le)}},bt=(ge,ke,le={})=>{const et=wt(s,ge),Ye=l.array.has(ge),Ne=ys(ke);Dn(d,ge,Ne),Ye?(k.array.next({name:ge,values:{...d}}),(A.isDirty||A.dirtyFields)&&le.shouldDirty&&k.state.next({name:ge,dirtyFields:am(c,d),isDirty:Ue(ge,Ne)})):et&&!et._f&&!vi(Ne)?zt(ge,Ne,le):Lt(ge,Ne,le),eE(ge,l)&&k.state.next({...n}),k.values.next({name:m.mount?ge:void 0,values:{...d}})},$e=async ge=>{const ke=ge.target;let le=ke.name,et=!0;const Ye=wt(s,le),Ne=()=>ke.type?j_(Ye._f):C9(ge),Ke=Bt=>{et=Number.isNaN(Bt)||Bt===wt(d,le,Bt)};if(Ye){let Bt,yn;const En=Ne(),ji=ge.type===QT.BLUR||ge.type===QT.FOCUS_OUT,eo=!N9(Ye._f)&&!t.resolver&&!wt(n.errors,le)&&!Ye._f.deps||B9(ji,wt(n.touchedFields,le),n.isSubmitted,B,D),Ei=eE(le,l,ji);Dn(d,le,En),ji?(Ye._f.onBlur&&Ye._f.onBlur(ge),w&&w(0)):Ye._f.onChange&&Ye._f.onChange(ge);const Ui=Se(le,En,ji,!1),qe=!Hi(Ui)||Ei;if(!ji&&k.values.next({name:le,type:ge.type,values:{...d}}),eo)return A.isValid&&K(),qe&&k.state.next({name:le,...Ei?{}:Ui});if(!ji&&Ei&&k.state.next({...n}),t.resolver){const{errors:oi}=await Ce([le]);if(Ke(En),et){const vn=oE(n.errors,s,le),os=oE(oi,s,vn.name||le);Bt=os.error,le=os.name,yn=Hi(oi)}}else N([le],!0),Bt=(await sE(Ye,d,q,t.shouldUseNativeValidation))[le],N([le]),Ke(En),et&&(Bt?yn=!1:A.isValid&&(yn=await Le(s,!0)));et&&(Ye._f.deps&&Et(Ye._f.deps),Ie(le,yn,Bt,Ui))}},ut=(ge,ke)=>{if(wt(n.errors,ke)&&ge.focus)return ge.focus(),1},Et=async(ge,ke={})=>{let le,et;const Ye=B_(ge);if(t.resolver){const Ne=await Ge(or(ge)?ge:Ye);le=Hi(Ne),et=ge?!Ye.some(Ke=>wt(Ne,Ke)):le}else ge?(et=(await Promise.all(Ye.map(async Ne=>{const Ke=wt(s,Ne);return await Le(Ke&&Ke._f?{[Ne]:Ke}:Ke)}))).every(Boolean),!(!et&&!n.isValid)&&K()):et=le=await Le(s);return k.state.next({...!po(ge)||A.isValid&&le!==n.isValid?{}:{name:ge},...t.resolver||!ge?{isValid:le}:{},errors:n.errors}),ke.shouldFocus&&!et&&$d(s,ut,ge?Ye:l.mount),et},Wt=ge=>{const ke={...c,...m.mount?d:{}};return or(ge)?ke:po(ge)?wt(ke,ge):ge.map(le=>wt(ke,le))},Gt=(ge,ke)=>({invalid:!!wt((ke||n).errors,ge),isDirty:!!wt((ke||n).dirtyFields,ge),isTouched:!!wt((ke||n).touchedFields,ge),isValidating:!!wt((ke||n).validatingFields,ge),error:wt((ke||n).errors,ge)}),Mt=ge=>{ge&&B_(ge).forEach(ke=>mr(n.errors,ke)),k.state.next({errors:ge?n.errors:{}})},gn=(ge,ke,le)=>{const et=(wt(s,ge,{_f:{}})._f||{}).ref;Dn(n.errors,ge,{...ke,ref:et}),k.state.next({name:ge,errors:n.errors,isValid:!1}),le&&le.shouldFocus&&et&&et.focus&&et.focus()},si=(ge,ke)=>qa(ge)?k.values.subscribe({next:le=>ge(gt(void 0,ke),le)}):gt(ge,ke,!0),lr=(ge,ke={})=>{for(const le of ge?B_(ge):l.mount)l.mount.delete(le),l.array.delete(le),ke.keepValue||(mr(s,le),mr(d,le)),!ke.keepError&&mr(n.errors,le),!ke.keepDirty&&mr(n.dirtyFields,le),!ke.keepTouched&&mr(n.touchedFields,le),!ke.keepIsValidating&&mr(n.validatingFields,le),!t.shouldUnregister&&!ke.keepDefaultValue&&mr(c,le);k.values.next({values:{...d}}),k.state.next({...n,...ke.keepDirty?{isDirty:Ue()}:{}}),!ke.keepIsValid&&K()},$r=({disabled:ge,name:ke,field:le,fields:et,value:Ye})=>{if(jo(ge)){const Ne=ge?void 0:or(Ye)?j_(le?le._f:wt(et,ke)._f):Ye;Dn(d,ke,Ne),Se(ke,Ne,!1,!1,!0)}},Ci=(ge,ke={})=>{let le=wt(s,ge);const et=jo(ke.disabled);return Dn(s,ge,{...le||{},_f:{...le&&le._f?le._f:{ref:{name:ge}},name:ge,mount:!0,...ke}}),l.mount.add(ge),le?$r({field:le,disabled:ke.disabled,name:ge,value:ke.value}):me(ge,!0,ke.value),{...et?{disabled:ke.disabled}:{},...t.progressive?{required:!!ke.required,min:yd(ke.min),max:yd(ke.max),minLength:yd(ke.minLength),maxLength:yd(ke.maxLength),pattern:yd(ke.pattern)}:{},name:ge,onChange:$e,onBlur:$e,ref:Ye=>{if(Ye){Ci(ge,ke),le=wt(s,ge);const Ne=or(Ye.value)&&Ye.querySelectorAll&&Ye.querySelectorAll("input,select,textarea")[0]||Ye,Ke=O9(Ne),Bt=le._f.refs||[];if(Ke?Bt.find(yn=>yn===Ne):Ne===le._f.ref)return;Dn(s,ge,{_f:{...le._f,...Ke?{refs:[...Bt.filter($_),Ne,...Array.isArray(wt(c,ge))?[{}]:[]],ref:{type:Ne.type,name:ge}}:{ref:Ne}}}),me(ge,!1,void 0,Ne)}else le=wt(s,ge,{}),le._f&&(le._f.mount=!1),(t.shouldUnregister||ke.shouldUnregister)&&!(E9(l.array,ge)&&m.action)&&l.unMount.add(ge)}}},jr=()=>t.shouldFocusError&&$d(s,ut,l.mount),Ur=ge=>{jo(ge)&&(k.state.next({disabled:ge}),$d(s,(ke,le)=>{let et=ge;const Ye=wt(s,le);Ye&&jo(Ye._f.disabled)&&(et||(et=Ye._f.disabled)),ke.disabled=et},0,!1))},Ys=(ge,ke)=>async le=>{let et;le&&(le.preventDefault&&le.preventDefault(),le.persist&&le.persist());let Ye=ys(d);if(k.state.next({isSubmitting:!0}),t.resolver){const{errors:Ne,values:Ke}=await Ce();n.errors=Ne,Ye=Ke}else await Le(s);if(mr(n.errors,"root"),Hi(n.errors)){k.state.next({errors:{}});try{await ge(Ye,le)}catch(Ne){et=Ne}}else ke&&await ke({...n.errors},le),jr(),setTimeout(jr);if(k.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Hi(n.errors)&&!et,submitCount:n.submitCount+1,errors:n.errors}),et)throw et},ss=(ge,ke={})=>{wt(s,ge)&&(or(ke.defaultValue)?bt(ge,ys(wt(c,ge))):(bt(ge,ke.defaultValue),Dn(c,ge,ys(ke.defaultValue))),ke.keepTouched||mr(n.touchedFields,ge),ke.keepDirty||(mr(n.dirtyFields,ge),n.isDirty=ke.defaultValue?Ue(ge,ys(wt(c,ge))):Ue()),ke.keepError||(mr(n.errors,ge),A.isValid&&K()),k.state.next({...n}))},Qs=(ge,ke={})=>{const le=ge?ys(ge):c,et=ys(le),Ye=Hi(ge),Ne=Ye?c:et;if(ke.keepDefaultValues||(c=le),!ke.keepValues){if(ke.keepDirtyValues)for(const Ke of l.mount)wt(n.dirtyFields,Ke)?Dn(Ne,Ke,wt(d,Ke)):bt(Ke,wt(Ne,Ke));else{if(V1&&or(ge))for(const Ke of l.mount){const Bt=wt(s,Ke);if(Bt&&Bt._f){const yn=Array.isArray(Bt._f.refs)?Bt._f.refs[0]:Bt._f.ref;if(Cg(yn)){const En=yn.closest("form");if(En){En.reset();break}}}}s={}}d=e.shouldUnregister?ke.keepDefaultValues?ys(c):{}:ys(Ne),k.array.next({values:{...Ne}}),k.values.next({values:{...Ne}})}l={mount:ke.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},m.mount=!A.isValid||!!ke.keepIsValid||!!ke.keepDirtyValues,m.watch=!!e.shouldUnregister,k.state.next({submitCount:ke.keepSubmitCount?n.submitCount:0,isDirty:Ye?!1:ke.keepDirty?n.isDirty:!!(ke.keepDefaultValues&&!eu(ge,c)),isSubmitted:ke.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ye?[]:ke.keepDirtyValues?ke.keepDefaultValues&&d?am(c,d):n.dirtyFields:ke.keepDefaultValues&&ge?am(c,ge):{},touchedFields:ke.keepTouched?n.touchedFields:{},errors:ke.keepErrors?n.errors:{},isSubmitSuccessful:ke.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Ti=(ge,ke)=>Qs(qa(ge)?ge(d):ge,ke);return{control:{register:Ci,unregister:lr,getFieldState:Gt,handleSubmit:Ys,setError:gn,_executeSchema:Ce,_getWatch:gt,_getDirty:Ue,_updateValid:K,_removeUnmounted:Tt,_updateFieldArray:F,_updateDisabledField:$r,_getFieldArray:_t,_reset:Qs,_resetDefaultValues:()=>qa(t.defaultValues)&&t.defaultValues().then(ge=>{Ti(ge,t.resetOptions),k.state.next({isLoading:!1})}),_updateFormState:ge=>{n={...n,...ge}},_disableForm:Ur,_subjects:k,_proxyFormState:A,_setErrors:te,get _fields(){return s},get _formValues(){return d},get _state(){return m},set _state(ge){m=ge},get _defaultValues(){return c},get _names(){return l},set _names(ge){l=ge},get _formState(){return n},set _formState(ge){n=ge},get _options(){return t},set _options(ge){t={...t,...ge}}},trigger:Et,register:Ci,handleSubmit:Ys,watch:si,setValue:bt,getValues:Wt,reset:Ti,resetField:ss,clearErrors:Mt,unregister:lr,setError:gn,setFocus:(ge,ke={})=>{const le=wt(s,ge),et=le&&le._f;if(et){const Ye=et.refs?et.refs[0]:et.ref;Ye.focus&&(Ye.focus(),ke.shouldSelect&&Ye.select())}},getFieldState:Gt}}function U9(e={}){const t=dt.useRef(),n=dt.useRef(),[s,c]=dt.useState({isDirty:!1,isValidating:!1,isLoading:qa(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:qa(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...j9(e),formState:s});const d=t.current.control;return d._options=e,I9({subject:d._subjects.state,next:m=>{k9(m,d._proxyFormState,d._updateFormState,!0)&&c({...d._formState})}}),dt.useEffect(()=>d._disableForm(e.disabled),[d,e.disabled]),dt.useEffect(()=>{if(d._proxyFormState.isDirty){const m=d._getDirty();m!==s.isDirty&&d._subjects.state.next({isDirty:m})}},[d,s.isDirty]),dt.useEffect(()=>{e.values&&!eu(e.values,n.current)?(d._reset(e.values,d._options.resetOptions),n.current=e.values,c(m=>({...m}))):d._resetDefaultValues()},[e.values,d]),dt.useEffect(()=>{e.errors&&d._setErrors(e.errors)},[e.errors,d]),dt.useEffect(()=>{d._state.mount||(d._updateValid(),d._state.mount=!0),d._state.watch&&(d._state.watch=!1,d._subjects.state.next({...d._formState})),d._removeUnmounted()}),dt.useEffect(()=>{e.shouldUnregister&&d._subjects.values.next({values:d._getWatch()})},[e.shouldUnregister,d]),t.current.formState=A9(s,d),t.current}const q9={username:"",password:""};function G9(){const[e,t]=ie.useState(!1),n=()=>t(m=>!m),{register:s,handleSubmit:c}=U9({defaultValues:q9});return de(Qo,{children:mt(Qk,{gap:4,className:"naxatw-w-full naxatw-flex-col naxatw-items-center naxatw-justify-center naxatw-pb-4",children:[de(Zo,{src:b9,width:60}),de("h3",{children:"Login"}),mt("div",{className:"naxatw-flex naxatw-w-[60%] naxatw-cursor-pointer naxatw-items-center naxatw-justify-center naxatw-gap-2 naxatw-rounded-lg naxatw-border naxatw-border-grey-800 naxatw-px-5 naxatw-py-2 hover:naxatw-shadow-md",children:[de(Zo,{src:S9}),de("span",{className:"naxatw-text-body-btn",children:"Continue with Google"})]}),mt(Fi,{className:"naxatw-w-full naxatw-items-center naxatw-justify-center",gap:3,children:[de("hr",{className:"naxatw-w-[26%]"}),de("span",{children:"or"}),de("hr",{className:"naxatw-w-[26%]"})]}),mt("form",{onSubmit:c(m=>{console.log(m)}),className:"naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-4",children:[mt(UT,{children:[de(F_,{htmlFor:"username",required:!0,children:"Email"}),de(Ua,{id:"username",type:"text",placeholder:"Username",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",...s("username",{required:!0})})]}),mt(UT,{className:"naxatw-relative",children:[de(F_,{htmlFor:"password",required:!0,children:"Password"}),de(Ua,{id:"password",placeholder:"*******",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",type:e?"text":"password",...s("password",{required:!0})}),de($i,{name:e?"visibility":"visibility_off",className:"naxatw-absolute naxatw-right-2 naxatw-top-[55%] naxatw-cursor-pointer naxatw-text-sm naxatw-text-grey-600",onClick:()=>n()})]}),mt(Fi,{className:"naxatw-items-center naxatw-justify-between",children:[mt(Fi,{className:"naxatw-items-center naxatw-gap-2 naxatw-pl-3",children:[de(Ua,{type:"checkbox",id:"check"}),de(F_,{htmlFor:"check",children:"Remember Me"})]}),de(Sg,{variant:"ghost",className:"naxatw-text-body-btn !naxatw-text-red",onClick:()=>{},type:"button",children:"Forgot Your Password?"})]}),de(Sg,{className:"!naxatw-bg-red naxatw-py-5",type:"submit",withLoader:!0,children:"Log In"})]})]})})}function lm(e){switch(e){case"login":return{title:"",content:de(G9,{}),className:"naxatw-w-[28rem]"};default:return{title:"",content:de(Qo,{})}}}function aE(e){switch(e){case"delete-layer":return{title:"",content:de(Qo,{})};default:return{title:"",content:de(Qo,{})}}}const Z9=()=>{const[e,t]=ie.useState(!1),n=()=>{document.documentElement.scrollTop>300?t(!0):t(!1)},s=()=>{window.scrollTo({top:0,behavior:"smooth"})};return ie.useEffect(()=>{window.addEventListener("scroll",n)},[]),de("div",{className:`scroll-to-top-wrapper naxatw-fixed naxatw-bottom-4 naxatw-right-4 ${e?"naxatw-opacity-full naxatw-pointer-events-auto":"naxatw-pointer-events-none naxatw-opacity-0"} common-btn-transition`,children:de("button",{className:"naxatw-relative naxatw-cursor-pointer",type:"button",onClick:s,children:de("div",{className:"naxatw-bg-primary hover:naxatw-bg-opacity-100 hover:naxatw-animate-none -naxatw-z-10 naxatw-bg-opacity-50 naxatw-w-12 naxatw-animate-pulse naxatw-h-12 naxatw-rounded-full naxatw-flex naxatw-items-center naxatw-justify-center",children:de("div",{className:"button-circle naxatw-bg-primary naxatw-z-20 naxatw-bg-opacity-90 naxatw-rounded-full naxatw-relative naxatw-flex naxatw-h-10 naxatw-w-10 -naxatw-rotate-90 naxatw-items-center naxatw-justify-end naxatw-overflow-hidden before:naxatw-absolute before:naxatw-h-full before:naxatw-w-full before:naxatw-scale-100  before:naxatw-rounded-full before:naxatw-bg-main before:naxatw-transition-transform  before:naxatw-duration-500 before:naxatw-ease-out before:naxatw-content-[''] hover:before:naxatw-scale-[0.85]",children:mt("div",{className:"button-cirlce-svgs naxatw-absolute naxatw-z-[2] naxatw-inline-flex naxatw-w-[200%] naxatw-translate-x-0 naxatw-justify-center naxatw-overflow-hidden naxatw-transition-transform naxatw-duration-500 naxatw-ease-out hover:naxatw-translate-x-[50%]",children:[de($i,{name:"east",className:"!naxatw-w-1/2 !naxatw-overflow-hidden naxatw-align-middle !naxatw-text-[1.25rem] !naxatw-text-[#fbf8f3] "}),de($i,{name:"east",className:"!naxatw-w-1/2 !naxatw-overflow-hidden naxatw-align-middle !naxatw-text-[1.25rem] !naxatw-text-[#fbf8f3] "})]})})})})})};function W9(){var l,w,b,A,k,D;const e=Gk(),t=Sd(B=>B.common.showModal),n=Sd(B=>B.common.modalContent),s=Sd(B=>B.common.showPromptDialog),c=Sd(B=>B.common.promptDialogContent),d=()=>{e(aD()),setTimeout(()=>{e(e9(null))},150)},m=()=>{e(t9()),setTimeout(()=>{e(n9(null))},150)};return mt(Qo,{children:[!1,mt("div",{className:"app-root naxatw-flex naxatw-flex-col",children:[de(w9,{}),de(Xx,{}),de(hD,{show:t,className:((l=lm(n))==null?void 0:l.className)||"",title:(w=lm(n))==null?void 0:w.title,onClose:d,hideCloseButton:!!((b=lm(n))!=null&&b.hideCloseButton),children:(A=lm(n))==null?void 0:A.content}),de(u9,{show:s,title:(k=aE(c))==null?void 0:k.title,onClose:m,children:(D=aE(c))==null?void 0:D.content}),_B({routes:ZU}),de(Z9,{})]})]})}const H9=new nF({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1,suspense:!1}}});U_.createRoot(document.getElementById("root")).render(de(sF,{client:H9,children:de(MO,{store:jk,children:de(JA,{loading:de("h1",{children:"hello"}),persistor:uB,children:de(D5,{children:de(W9,{})})})})}));
